(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var os=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ci(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function CT(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var jf={exports:{}},us={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P4;function xT(){if(P4)return us;P4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var u=null;if(s!==void 0&&(u=""+s),i.key!==void 0&&(u=""+i.key),"key"in i){s={};for(var c in i)c!=="key"&&(s[c]=i[c])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:u,ref:i!==void 0?i:null,props:s}}return us.Fragment=e,us.jsx=n,us.jsxs=n,us}var I4;function ET(){return I4||(I4=1,jf.exports=xT()),jf.exports}var $e=ET(),Kf={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e9;function mT(){if(e9)return ye;e9=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),y=Symbol.iterator;function T(U){return U===null||typeof U!="object"?null:(U=y&&U[y]||U["@@iterator"],typeof U=="function"?U:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,x={};function m(U,H,Z){this.props=U,this.context=H,this.refs=x,this.updater=Z||E}m.prototype.isReactComponent={},m.prototype.setState=function(U,H){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,H,"setState")},m.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function M(){}M.prototype=m.prototype;function R(U,H,Z){this.props=U,this.context=H,this.refs=x,this.updater=Z||E}var w=R.prototype=new M;w.constructor=R,S(w,m.prototype),w.isPureReactComponent=!0;var D=Array.isArray;function O(){}var _={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function F(U,H,Z){var se=Z.ref;return{$$typeof:t,type:U,key:H,ref:se!==void 0?se:null,props:Z}}function z(U,H){return F(U.type,H,U.props)}function $(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function Y(U){var H={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(Z){return H[Z]})}var A=/\/+/g;function K(U,H){return typeof U=="object"&&U!==null&&U.key!=null?Y(""+U.key):H.toString(36)}function ee(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(O,O):(U.status="pending",U.then(function(H){U.status==="pending"&&(U.status="fulfilled",U.value=H)},function(H){U.status==="pending"&&(U.status="rejected",U.reason=H)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function G(U,H,Z,se,oe){var ue=typeof U;(ue==="undefined"||ue==="boolean")&&(U=null);var ge=!1;if(U===null)ge=!0;else switch(ue){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(U.$$typeof){case t:case e:ge=!0;break;case v:return ge=U._init,G(ge(U._payload),H,Z,se,oe)}}if(ge)return oe=oe(U),ge=se===""?"."+K(U,0):se,D(oe)?(Z="",ge!=null&&(Z=ge.replace(A,"$&/")+"/"),G(oe,H,Z,"",function(Ct){return Ct})):oe!=null&&($(oe)&&(oe=z(oe,Z+(oe.key==null||U&&U.key===oe.key?"":(""+oe.key).replace(A,"$&/")+"/")+ge)),H.push(oe)),1;ge=0;var Pe=se===""?".":se+":";if(D(U))for(var De=0;De<U.length;De++)se=U[De],ue=Pe+K(se,De),ge+=G(se,H,Z,ue,oe);else if(De=T(U),typeof De=="function")for(U=De.call(U),De=0;!(se=U.next()).done;)se=se.value,ue=Pe+K(se,De++),ge+=G(se,H,Z,ue,oe);else if(ue==="object"){if(typeof U.then=="function")return G(ee(U),H,Z,se,oe);throw H=String(U),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return ge}function W(U,H,Z){if(U==null)return U;var se=[],oe=0;return G(U,se,"","",function(ue){return H.call(Z,ue,oe++)}),se}function q(U){if(U._status===-1){var H=U._result;H=H(),H.then(function(Z){(U._status===0||U._status===-1)&&(U._status=1,U._result=Z)},function(Z){(U._status===0||U._status===-1)&&(U._status=2,U._result=Z)}),U._status===-1&&(U._status=0,U._result=H)}if(U._status===1)return U._result.default;throw U._result}var X=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},Q={map:W,forEach:function(U,H,Z){W(U,function(){H.apply(this,arguments)},Z)},count:function(U){var H=0;return W(U,function(){H++}),H},toArray:function(U){return W(U,function(H){return H})||[]},only:function(U){if(!$(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return ye.Activity=h,ye.Children=Q,ye.Component=m,ye.Fragment=n,ye.Profiler=i,ye.PureComponent=R,ye.StrictMode=r,ye.Suspense=l,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,ye.__COMPILER_RUNTIME={__proto__:null,c:function(U){return _.H.useMemoCache(U)}},ye.cache=function(U){return function(){return U.apply(null,arguments)}},ye.cacheSignal=function(){return null},ye.cloneElement=function(U,H,Z){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var se=S({},U.props),oe=U.key;if(H!=null)for(ue in H.key!==void 0&&(oe=""+H.key),H)!N.call(H,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&H.ref===void 0||(se[ue]=H[ue]);var ue=arguments.length-2;if(ue===1)se.children=Z;else if(1<ue){for(var ge=Array(ue),Pe=0;Pe<ue;Pe++)ge[Pe]=arguments[Pe+2];se.children=ge}return F(U.type,oe,se)},ye.createContext=function(U){return U={$$typeof:u,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:s,_context:U},U},ye.createElement=function(U,H,Z){var se,oe={},ue=null;if(H!=null)for(se in H.key!==void 0&&(ue=""+H.key),H)N.call(H,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(oe[se]=H[se]);var ge=arguments.length-2;if(ge===1)oe.children=Z;else if(1<ge){for(var Pe=Array(ge),De=0;De<ge;De++)Pe[De]=arguments[De+2];oe.children=Pe}if(U&&U.defaultProps)for(se in ge=U.defaultProps,ge)oe[se]===void 0&&(oe[se]=ge[se]);return F(U,ue,oe)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(U){return{$$typeof:c,render:U}},ye.isValidElement=$,ye.lazy=function(U){return{$$typeof:v,_payload:{_status:-1,_result:U},_init:q}},ye.memo=function(U,H){return{$$typeof:g,type:U,compare:H===void 0?null:H}},ye.startTransition=function(U){var H=_.T,Z={};_.T=Z;try{var se=U(),oe=_.S;oe!==null&&oe(Z,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(O,X)}catch(ue){X(ue)}finally{H!==null&&Z.types!==null&&(H.types=Z.types),_.T=H}},ye.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},ye.use=function(U){return _.H.use(U)},ye.useActionState=function(U,H,Z){return _.H.useActionState(U,H,Z)},ye.useCallback=function(U,H){return _.H.useCallback(U,H)},ye.useContext=function(U){return _.H.useContext(U)},ye.useDebugValue=function(){},ye.useDeferredValue=function(U,H){return _.H.useDeferredValue(U,H)},ye.useEffect=function(U,H){return _.H.useEffect(U,H)},ye.useEffectEvent=function(U){return _.H.useEffectEvent(U)},ye.useId=function(){return _.H.useId()},ye.useImperativeHandle=function(U,H,Z){return _.H.useImperativeHandle(U,H,Z)},ye.useInsertionEffect=function(U,H){return _.H.useInsertionEffect(U,H)},ye.useLayoutEffect=function(U,H){return _.H.useLayoutEffect(U,H)},ye.useMemo=function(U,H){return _.H.useMemo(U,H)},ye.useOptimistic=function(U,H){return _.H.useOptimistic(U,H)},ye.useReducer=function(U,H,Z){return _.H.useReducer(U,H,Z)},ye.useRef=function(U){return _.H.useRef(U)},ye.useState=function(U){return _.H.useState(U)},ye.useSyncExternalStore=function(U,H,Z){return _.H.useSyncExternalStore(U,H,Z)},ye.useTransition=function(){return _.H.useTransition()},ye.version="19.2.0",ye}var t9;function c2(){return t9||(t9=1,Kf.exports=mT()),Kf.exports}var be=c2();const RT=ci(be);var Xf={exports:{}},cs={},Yf={exports:{}},qf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n9;function wT(){return n9||(n9=1,(function(t){function e(G,W){var q=G.length;G.push(W);e:for(;0<q;){var X=q-1>>>1,Q=G[X];if(0<i(Q,W))G[X]=W,G[q]=Q,q=X;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var W=G[0],q=G.pop();if(q!==W){G[0]=q;e:for(var X=0,Q=G.length,U=Q>>>1;X<U;){var H=2*(X+1)-1,Z=G[H],se=H+1,oe=G[se];if(0>i(Z,q))se<Q&&0>i(oe,Z)?(G[X]=oe,G[se]=q,X=se):(G[X]=Z,G[H]=q,X=H);else if(se<Q&&0>i(oe,q))G[X]=oe,G[se]=q,X=se;else break e}}return W}function i(G,W){var q=G.sortIndex-W.sortIndex;return q!==0?q:G.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}var l=[],g=[],v=1,h=null,y=3,T=!1,E=!1,S=!1,x=!1,m=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function w(G){for(var W=n(g);W!==null;){if(W.callback===null)r(g);else if(W.startTime<=G)r(g),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(g)}}function D(G){if(S=!1,w(G),!E)if(n(l)!==null)E=!0,O||(O=!0,Y());else{var W=n(g);W!==null&&ee(D,W.startTime-G)}}var O=!1,_=-1,N=5,F=-1;function z(){return x?!0:!(t.unstable_now()-F<N)}function $(){if(x=!1,O){var G=t.unstable_now();F=G;var W=!0;try{e:{E=!1,S&&(S=!1,M(_),_=-1),T=!0;var q=y;try{t:{for(w(G),h=n(l);h!==null&&!(h.expirationTime>G&&z());){var X=h.callback;if(typeof X=="function"){h.callback=null,y=h.priorityLevel;var Q=X(h.expirationTime<=G);if(G=t.unstable_now(),typeof Q=="function"){h.callback=Q,w(G),W=!0;break t}h===n(l)&&r(l),w(G)}else r(l);h=n(l)}if(h!==null)W=!0;else{var U=n(g);U!==null&&ee(D,U.startTime-G),W=!1}}break e}finally{h=null,y=q,T=!1}W=void 0}}finally{W?Y():O=!1}}}var Y;if(typeof R=="function")Y=function(){R($)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,K=A.port2;A.port1.onmessage=$,Y=function(){K.postMessage(null)}}else Y=function(){m($,0)};function ee(G,W){_=m(function(){G(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(G){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var q=y;y=W;try{return G()}finally{y=q}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(G,W){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var q=y;y=G;try{return W()}finally{y=q}},t.unstable_scheduleCallback=function(G,W,q){var X=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?X+q:X):q=X,G){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=q+Q,G={id:v++,callback:W,priorityLevel:G,startTime:q,expirationTime:Q,sortIndex:-1},q>X?(G.sortIndex=q,e(g,G),n(l)===null&&G===n(g)&&(S?(M(_),_=-1):S=!0,ee(D,q-X))):(G.sortIndex=Q,e(l,G),E||T||(E=!0,O||(O=!0,Y()))),G},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(G){var W=y;return function(){var q=y;y=W;try{return G.apply(this,arguments)}finally{y=q}}}})(qf)),qf}var r9;function MT(){return r9||(r9=1,Yf.exports=wT()),Yf.exports}var Qf={exports:{}},Gt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a9;function OT(){if(a9)return Gt;a9=1;var t=c2();function e(l){var g="https://react.dev/errors/"+l;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+l+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,g,v){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:l,containerInfo:g,implementation:v}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(l,g){if(l==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Gt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Gt.createPortal=function(l,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return s(l,g,null,v)},Gt.flushSync=function(l){var g=u.T,v=r.p;try{if(u.T=null,r.p=2,l)return l()}finally{u.T=g,r.p=v,r.d.f()}},Gt.preconnect=function(l,g){typeof l=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(l,g))},Gt.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Gt.preinit=function(l,g){if(typeof l=="string"&&g&&typeof g.as=="string"){var v=g.as,h=c(v,g.crossOrigin),y=typeof g.integrity=="string"?g.integrity:void 0,T=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?r.d.S(l,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:h,integrity:y,fetchPriority:T}):v==="script"&&r.d.X(l,{crossOrigin:h,integrity:y,fetchPriority:T,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Gt.preinitModule=function(l,g){if(typeof l=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=c(g.as,g.crossOrigin);r.d.M(l,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(l)},Gt.preload=function(l,g){if(typeof l=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,h=c(v,g.crossOrigin);r.d.L(l,v,{crossOrigin:h,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Gt.preloadModule=function(l,g){if(typeof l=="string")if(g){var v=c(g.as,g.crossOrigin);r.d.m(l,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(l)},Gt.requestFormReset=function(l){r.d.r(l)},Gt.unstable_batchedUpdates=function(l,g){return l(g)},Gt.useFormState=function(l,g,v){return u.H.useFormState(l,g,v)},Gt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Gt.version="19.2.0",Gt}var i9;function DT(){if(i9)return Qf.exports;i9=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Qf.exports=OT(),Qf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s9;function LT(){if(s9)return cs;s9=1;var t=MT(),e=c2(),n=DT();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)o+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,f=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(f=o.return),a=o.return;while(a)}return o.tag===3?f:null}function u(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function c(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function l(a){if(s(a)!==a)throw Error(r(188))}function g(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(r(188));return o!==a?null:a}for(var f=a,p=o;;){var d=f.return;if(d===null)break;var C=d.alternate;if(C===null){if(p=d.return,p!==null){f=p;continue}break}if(d.child===C.child){for(C=d.child;C;){if(C===f)return l(d),a;if(C===p)return l(d),o;C=C.sibling}throw Error(r(188))}if(f.return!==p.return)f=d,p=C;else{for(var L=!1,V=d.child;V;){if(V===f){L=!0,f=d,p=C;break}if(V===p){L=!0,p=d,f=C;break}V=V.sibling}if(!L){for(V=C.child;V;){if(V===f){L=!0,f=C,p=d;break}if(V===p){L=!0,p=C,f=d;break}V=V.sibling}if(!L)throw Error(r(189))}}if(f.alternate!==p)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?a:o}function v(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=v(a),o!==null)return o;a=a.sibling}return null}var h=Object.assign,y=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),R=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function Y(a){return a===null||typeof a!="object"?null:(a=$&&a[$]||a["@@iterator"],typeof a=="function"?a:null)}var A=Symbol.for("react.client.reference");function K(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===A?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case S:return"Fragment";case m:return"Profiler";case x:return"StrictMode";case D:return"Suspense";case O:return"SuspenseList";case F:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case E:return"Portal";case R:return a.displayName||"Context";case M:return(a._context.displayName||"Context")+".Consumer";case w:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case _:return o=a.displayName||null,o!==null?o:K(a.type)||"Memo";case N:o=a._payload,a=a._init;try{return K(a(o))}catch{}}return null}var ee=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},X=[],Q=-1;function U(a){return{current:a}}function H(a){0>Q||(a.current=X[Q],X[Q]=null,Q--)}function Z(a,o){Q++,X[Q]=a.current,a.current=o}var se=U(null),oe=U(null),ue=U(null),ge=U(null);function Pe(a,o){switch(Z(ue,o),Z(oe,a),Z(se,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?x4(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=x4(o),a=E4(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}H(se),Z(se,a)}function De(){H(se),H(oe),H(ue)}function Ct(a){a.memoizedState!==null&&Z(ge,a);var o=se.current,f=E4(o,a.type);o!==f&&(Z(oe,a),Z(se,f))}function vn(a){oe.current===a&&(H(se),H(oe)),ge.current===a&&(H(ge),rs._currentValue=q)}var Ta,Lr;function Sa(a){if(Ta===void 0)try{throw Error()}catch(f){var o=f.stack.trim().match(/\n( *(at )?)/);Ta=o&&o[1]||"",Lr=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ta+a+Lr}var Mc=!1;function Oc(a,o){if(!a||Mc)return"";Mc=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(o){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(te){var I=te}Reflect.construct(a,[],ae)}else{try{ae.call()}catch(te){I=te}a.call(ae.prototype)}}else{try{throw Error()}catch(te){I=te}(ae=a())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(te){if(te&&I&&typeof te.stack=="string")return[te.stack,I.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=p.DetermineComponentFrameRoot(),L=C[0],V=C[1];if(L&&V){var b=L.split(`
`),P=V.split(`
`);for(d=p=0;p<b.length&&!b[p].includes("DetermineComponentFrameRoot");)p++;for(;d<P.length&&!P[d].includes("DetermineComponentFrameRoot");)d++;if(p===b.length||d===P.length)for(p=b.length-1,d=P.length-1;1<=p&&0<=d&&b[p]!==P[d];)d--;for(;1<=p&&0<=d;p--,d--)if(b[p]!==P[d]){if(p!==1||d!==1)do if(p--,d--,0>d||b[p]!==P[d]){var ne=`
`+b[p].replace(" at new "," at ");return a.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",a.displayName)),ne}while(1<=p&&0<=d);break}}}finally{Mc=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?Sa(f):""}function Jv(a,o){switch(a.tag){case 26:case 27:case 5:return Sa(a.type);case 16:return Sa("Lazy");case 13:return a.child!==o&&o!==null?Sa("Suspense Fallback"):Sa("Suspense");case 19:return Sa("SuspenseList");case 0:case 15:return Oc(a.type,!1);case 11:return Oc(a.type.render,!1);case 1:return Oc(a.type,!0);case 31:return Sa("Activity");default:return""}}function P2(a){try{var o="",f=null;do o+=Jv(a,f),f=a,a=a.return;while(a);return o}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var Dc=Object.prototype.hasOwnProperty,Lc=t.unstable_scheduleCallback,Bc=t.unstable_cancelCallback,Pv=t.unstable_shouldYield,Iv=t.unstable_requestPaint,nn=t.unstable_now,ey=t.unstable_getCurrentPriorityLevel,I2=t.unstable_ImmediatePriority,e3=t.unstable_UserBlockingPriority,Ks=t.unstable_NormalPriority,ty=t.unstable_LowPriority,t3=t.unstable_IdlePriority,ny=t.log,ry=t.unstable_setDisableYieldValue,vi=null,rn=null;function Br(a){if(typeof ny=="function"&&ry(a),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(vi,a)}catch{}}var an=Math.clz32?Math.clz32:sy,ay=Math.log,iy=Math.LN2;function sy(a){return a>>>=0,a===0?32:31-(ay(a)/iy|0)|0}var Xs=256,Ys=262144,qs=4194304;function Ca(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Qs(a,o,f){var p=a.pendingLanes;if(p===0)return 0;var d=0,C=a.suspendedLanes,L=a.pingedLanes;a=a.warmLanes;var V=p&134217727;return V!==0?(p=V&~C,p!==0?d=Ca(p):(L&=V,L!==0?d=Ca(L):f||(f=V&~a,f!==0&&(d=Ca(f))))):(V=p&~C,V!==0?d=Ca(V):L!==0?d=Ca(L):f||(f=p&~a,f!==0&&(d=Ca(f)))),d===0?0:o!==0&&o!==d&&(o&C)===0&&(C=d&-d,f=o&-o,C>=f||C===32&&(f&4194048)!==0)?o:d}function yi(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function oy(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function n3(){var a=qs;return qs<<=1,(qs&62914560)===0&&(qs=4194304),a}function Vc(a){for(var o=[],f=0;31>f;f++)o.push(a);return o}function di(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function uy(a,o,f,p,d,C){var L=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var V=a.entanglements,b=a.expirationTimes,P=a.hiddenUpdates;for(f=L&~f;0<f;){var ne=31-an(f),ae=1<<ne;V[ne]=0,b[ne]=-1;var I=P[ne];if(I!==null)for(P[ne]=null,ne=0;ne<I.length;ne++){var te=I[ne];te!==null&&(te.lane&=-536870913)}f&=~ae}p!==0&&r3(a,p,0),C!==0&&d===0&&a.tag!==0&&(a.suspendedLanes|=C&~(L&~o))}function r3(a,o,f){a.pendingLanes|=o,a.suspendedLanes&=~o;var p=31-an(o);a.entangledLanes|=o,a.entanglements[p]=a.entanglements[p]|1073741824|f&261930}function a3(a,o){var f=a.entangledLanes|=o;for(a=a.entanglements;f;){var p=31-an(f),d=1<<p;d&o|a[p]&o&&(a[p]|=o),f&=~d}}function i3(a,o){var f=o&-o;return f=(f&42)!==0?1:Nc(f),(f&(a.suspendedLanes|o))!==0?0:f}function Nc(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function _c(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function s3(){var a=W.p;return a!==0?a:(a=window.event,a===void 0?32:K4(a.type))}function o3(a,o){var f=W.p;try{return W.p=a,o()}finally{W.p=f}}var Vr=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Vr,Xt="__reactProps$"+Vr,o0="__reactContainer$"+Vr,Uc="__reactEvents$"+Vr,cy="__reactListeners$"+Vr,fy="__reactHandles$"+Vr,u3="__reactResources$"+Vr,Ti="__reactMarker$"+Vr;function Gc(a){delete a[Lt],delete a[Xt],delete a[Uc],delete a[cy],delete a[fy]}function u0(a){var o=a[Lt];if(o)return o;for(var f=a.parentNode;f;){if(o=f[o0]||f[Lt]){if(f=o.alternate,o.child!==null||f!==null&&f.child!==null)for(a=L4(a);a!==null;){if(f=a[Lt])return f;a=L4(a)}return o}a=f,f=a.parentNode}return null}function c0(a){if(a=a[Lt]||a[o0]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function Si(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function f0(a){var o=a[u3];return o||(o=a[u3]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function xt(a){a[Ti]=!0}var c3=new Set,f3={};function xa(a,o){l0(a,o),l0(a+"Capture",o)}function l0(a,o){for(f3[a]=o,a=0;a<o.length;a++)c3.add(o[a])}var ly=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),l3={},g3={};function gy(a){return Dc.call(g3,a)?!0:Dc.call(l3,a)?!1:ly.test(a)?g3[a]=!0:(l3[a]=!0,!1)}function Zs(a,o,f){if(gy(o))if(f===null)a.removeAttribute(o);else{switch(typeof f){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var p=o.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+f)}}function Js(a,o,f){if(f===null)a.removeAttribute(o);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+f)}}function er(a,o,f,p){if(p===null)a.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(f);return}a.setAttributeNS(o,f,""+p)}}function yn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function h3(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function hy(a,o,f){var p=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var d=p.get,C=p.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return d.call(this)},set:function(L){f=""+L,C.call(this,L)}}),Object.defineProperty(a,o,{enumerable:p.enumerable}),{getValue:function(){return f},setValue:function(L){f=""+L},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function bc(a){if(!a._valueTracker){var o=h3(a)?"checked":"value";a._valueTracker=hy(a,o,""+a[o])}}function p3(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var f=o.getValue(),p="";return a&&(p=h3(a)?a.checked?"true":"false":a.value),a=p,a!==f?(o.setValue(a),!0):!1}function Ps(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var py=/[\n"\\]/g;function dn(a){return a.replace(py,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Fc(a,o,f,p,d,C,L,V){a.name="",L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?a.type=L:a.removeAttribute("type"),o!=null?L==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+yn(o)):a.value!==""+yn(o)&&(a.value=""+yn(o)):L!=="submit"&&L!=="reset"||a.removeAttribute("value"),o!=null?zc(a,L,yn(o)):f!=null?zc(a,L,yn(f)):p!=null&&a.removeAttribute("value"),d==null&&C!=null&&(a.defaultChecked=!!C),d!=null&&(a.checked=d&&typeof d!="function"&&typeof d!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?a.name=""+yn(V):a.removeAttribute("name")}function v3(a,o,f,p,d,C,L,V){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.type=C),o!=null||f!=null){if(!(C!=="submit"&&C!=="reset"||o!=null)){bc(a);return}f=f!=null?""+yn(f):"",o=o!=null?""+yn(o):f,V||o===a.value||(a.value=o),a.defaultValue=o}p=p??d,p=typeof p!="function"&&typeof p!="symbol"&&!!p,a.checked=V?a.checked:!!p,a.defaultChecked=!!p,L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(a.name=L),bc(a)}function zc(a,o,f){o==="number"&&Ps(a.ownerDocument)===a||a.defaultValue===""+f||(a.defaultValue=""+f)}function g0(a,o,f,p){if(a=a.options,o){o={};for(var d=0;d<f.length;d++)o["$"+f[d]]=!0;for(f=0;f<a.length;f++)d=o.hasOwnProperty("$"+a[f].value),a[f].selected!==d&&(a[f].selected=d),d&&p&&(a[f].defaultSelected=!0)}else{for(f=""+yn(f),o=null,d=0;d<a.length;d++){if(a[d].value===f){a[d].selected=!0,p&&(a[d].defaultSelected=!0);return}o!==null||a[d].disabled||(o=a[d])}o!==null&&(o.selected=!0)}}function y3(a,o,f){if(o!=null&&(o=""+yn(o),o!==a.value&&(a.value=o),f==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=f!=null?""+yn(f):""}function d3(a,o,f,p){if(o==null){if(p!=null){if(f!=null)throw Error(r(92));if(ee(p)){if(1<p.length)throw Error(r(93));p=p[0]}f=p}f==null&&(f=""),o=f}f=yn(o),a.defaultValue=f,p=a.textContent,p===f&&p!==""&&p!==null&&(a.value=p),bc(a)}function h0(a,o){if(o){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=o;return}}a.textContent=o}var vy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function T3(a,o,f){var p=o.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":p?a.setProperty(o,f):typeof f!="number"||f===0||vy.has(o)?o==="float"?a.cssFloat=f:a[o]=(""+f).trim():a[o]=f+"px"}function S3(a,o,f){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||o!=null&&o.hasOwnProperty(p)||(p.indexOf("--")===0?a.setProperty(p,""):p==="float"?a.cssFloat="":a[p]="");for(var d in o)p=o[d],o.hasOwnProperty(d)&&f[d]!==p&&T3(a,d,p)}else for(var C in o)o.hasOwnProperty(C)&&T3(a,C,o[C])}function kc(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Is(a){return dy.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function tr(){}var Hc=null;function $c(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var p0=null,v0=null;function C3(a){var o=c0(a);if(o&&(a=o.stateNode)){var f=a[Xt]||null;e:switch(a=o.stateNode,o.type){case"input":if(Fc(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),o=f.name,f.type==="radio"&&o!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+dn(""+o)+'"][type="radio"]'),o=0;o<f.length;o++){var p=f[o];if(p!==a&&p.form===a.form){var d=p[Xt]||null;if(!d)throw Error(r(90));Fc(p,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(o=0;o<f.length;o++)p=f[o],p.form===a.form&&p3(p)}break e;case"textarea":y3(a,f.value,f.defaultValue);break e;case"select":o=f.value,o!=null&&g0(a,!!f.multiple,o,!1)}}}var Ac=!1;function x3(a,o,f){if(Ac)return a(o,f);Ac=!0;try{var p=a(o);return p}finally{if(Ac=!1,(p0!==null||v0!==null)&&($o(),p0&&(o=p0,a=v0,v0=p0=null,C3(o),a)))for(o=0;o<a.length;o++)C3(a[o])}}function Ci(a,o){var f=a.stateNode;if(f===null)return null;var p=f[Xt]||null;if(p===null)return null;f=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(a=a.type,p=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!p;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(r(231,o,typeof f));return f}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wc=!1;if(nr)try{var xi={};Object.defineProperty(xi,"passive",{get:function(){Wc=!0}}),window.addEventListener("test",xi,xi),window.removeEventListener("test",xi,xi)}catch{Wc=!1}var Nr=null,jc=null,eo=null;function E3(){if(eo)return eo;var a,o=jc,f=o.length,p,d="value"in Nr?Nr.value:Nr.textContent,C=d.length;for(a=0;a<f&&o[a]===d[a];a++);var L=f-a;for(p=1;p<=L&&o[f-p]===d[C-p];p++);return eo=d.slice(a,1<p?1-p:void 0)}function to(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function no(){return!0}function m3(){return!1}function Yt(a){function o(f,p,d,C,L){this._reactName=f,this._targetInst=d,this.type=p,this.nativeEvent=C,this.target=L,this.currentTarget=null;for(var V in a)a.hasOwnProperty(V)&&(f=a[V],this[V]=f?f(C):C[V]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?no:m3,this.isPropagationStopped=m3,this}return h(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=no)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=no)},persist:function(){},isPersistent:no}),o}var Ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ro=Yt(Ea),Ei=h({},Ea,{view:0,detail:0}),Ty=Yt(Ei),Kc,Xc,mi,ao=h({},Ei,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qc,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==mi&&(mi&&a.type==="mousemove"?(Kc=a.screenX-mi.screenX,Xc=a.screenY-mi.screenY):Xc=Kc=0,mi=a),Kc)},movementY:function(a){return"movementY"in a?a.movementY:Xc}}),R3=Yt(ao),Sy=h({},ao,{dataTransfer:0}),Cy=Yt(Sy),xy=h({},Ei,{relatedTarget:0}),Yc=Yt(xy),Ey=h({},Ea,{animationName:0,elapsedTime:0,pseudoElement:0}),my=Yt(Ey),Ry=h({},Ea,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),wy=Yt(Ry),My=h({},Ea,{data:0}),w3=Yt(My),Oy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ly={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function By(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=Ly[a])?!!o[a]:!1}function qc(){return By}var Vy=h({},Ei,{key:function(a){if(a.key){var o=Oy[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=to(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Dy[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qc,charCode:function(a){return a.type==="keypress"?to(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?to(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Ny=Yt(Vy),_y=h({},ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M3=Yt(_y),Uy=h({},Ei,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qc}),Gy=Yt(Uy),by=h({},Ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fy=Yt(by),zy=h({},ao,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),ky=Yt(zy),Hy=h({},Ea,{newState:0,oldState:0}),$y=Yt(Hy),Ay=[9,13,27,32],Qc=nr&&"CompositionEvent"in window,Ri=null;nr&&"documentMode"in document&&(Ri=document.documentMode);var Wy=nr&&"TextEvent"in window&&!Ri,O3=nr&&(!Qc||Ri&&8<Ri&&11>=Ri),D3=" ",L3=!1;function B3(a,o){switch(a){case"keyup":return Ay.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function V3(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var y0=!1;function jy(a,o){switch(a){case"compositionend":return V3(o);case"keypress":return o.which!==32?null:(L3=!0,D3);case"textInput":return a=o.data,a===D3&&L3?null:a;default:return null}}function Ky(a,o){if(y0)return a==="compositionend"||!Qc&&B3(a,o)?(a=E3(),eo=jc=Nr=null,y0=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return O3&&o.locale!=="ko"?null:o.data;default:return null}}var Xy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N3(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!Xy[a.type]:o==="textarea"}function _3(a,o,f,p){p0?v0?v0.push(p):v0=[p]:p0=p,o=qo(o,"onChange"),0<o.length&&(f=new ro("onChange","change",null,f,p),a.push({event:f,listeners:o}))}var wi=null,Mi=null;function Yy(a){v4(a,0)}function io(a){var o=Si(a);if(p3(o))return a}function U3(a,o){if(a==="change")return o}var G3=!1;if(nr){var Zc;if(nr){var Jc="oninput"in document;if(!Jc){var b3=document.createElement("div");b3.setAttribute("oninput","return;"),Jc=typeof b3.oninput=="function"}Zc=Jc}else Zc=!1;G3=Zc&&(!document.documentMode||9<document.documentMode)}function F3(){wi&&(wi.detachEvent("onpropertychange",z3),Mi=wi=null)}function z3(a){if(a.propertyName==="value"&&io(Mi)){var o=[];_3(o,Mi,a,$c(a)),x3(Yy,o)}}function qy(a,o,f){a==="focusin"?(F3(),wi=o,Mi=f,wi.attachEvent("onpropertychange",z3)):a==="focusout"&&F3()}function Qy(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return io(Mi)}function Zy(a,o){if(a==="click")return io(o)}function Jy(a,o){if(a==="input"||a==="change")return io(o)}function Py(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var sn=typeof Object.is=="function"?Object.is:Py;function Oi(a,o){if(sn(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var f=Object.keys(a),p=Object.keys(o);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var d=f[p];if(!Dc.call(o,d)||!sn(a[d],o[d]))return!1}return!0}function k3(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function H3(a,o){var f=k3(a);a=0;for(var p;f;){if(f.nodeType===3){if(p=a+f.textContent.length,a<=o&&p>=o)return{node:f,offset:o-a};a=p}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=k3(f)}}function $3(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?$3(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function A3(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=Ps(a.document);o instanceof a.HTMLIFrameElement;){try{var f=typeof o.contentWindow.location.href=="string"}catch{f=!1}if(f)a=o.contentWindow;else break;o=Ps(a.document)}return o}function Pc(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var Iy=nr&&"documentMode"in document&&11>=document.documentMode,d0=null,Ic=null,Di=null,e1=!1;function W3(a,o,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;e1||d0==null||d0!==Ps(p)||(p=d0,"selectionStart"in p&&Pc(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Di&&Oi(Di,p)||(Di=p,p=qo(Ic,"onSelect"),0<p.length&&(o=new ro("onSelect","select",null,o,f),a.push({event:o,listeners:p}),o.target=d0)))}function ma(a,o){var f={};return f[a.toLowerCase()]=o.toLowerCase(),f["Webkit"+a]="webkit"+o,f["Moz"+a]="moz"+o,f}var T0={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionrun:ma("Transition","TransitionRun"),transitionstart:ma("Transition","TransitionStart"),transitioncancel:ma("Transition","TransitionCancel"),transitionend:ma("Transition","TransitionEnd")},t1={},j3={};nr&&(j3=document.createElement("div").style,"AnimationEvent"in window||(delete T0.animationend.animation,delete T0.animationiteration.animation,delete T0.animationstart.animation),"TransitionEvent"in window||delete T0.transitionend.transition);function Ra(a){if(t1[a])return t1[a];if(!T0[a])return a;var o=T0[a],f;for(f in o)if(o.hasOwnProperty(f)&&f in j3)return t1[a]=o[f];return a}var K3=Ra("animationend"),X3=Ra("animationiteration"),Y3=Ra("animationstart"),ed=Ra("transitionrun"),td=Ra("transitionstart"),nd=Ra("transitioncancel"),q3=Ra("transitionend"),Q3=new Map,n1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");n1.push("scrollEnd");function _n(a,o){Q3.set(a,o),xa(o,[a])}var so=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Tn=[],S0=0,r1=0;function oo(){for(var a=S0,o=r1=S0=0;o<a;){var f=Tn[o];Tn[o++]=null;var p=Tn[o];Tn[o++]=null;var d=Tn[o];Tn[o++]=null;var C=Tn[o];if(Tn[o++]=null,p!==null&&d!==null){var L=p.pending;L===null?d.next=d:(d.next=L.next,L.next=d),p.pending=d}C!==0&&Z3(f,d,C)}}function uo(a,o,f,p){Tn[S0++]=a,Tn[S0++]=o,Tn[S0++]=f,Tn[S0++]=p,r1|=p,a.lanes|=p,a=a.alternate,a!==null&&(a.lanes|=p)}function a1(a,o,f,p){return uo(a,o,f,p),co(a)}function wa(a,o){return uo(a,null,null,o),co(a)}function Z3(a,o,f){a.lanes|=f;var p=a.alternate;p!==null&&(p.lanes|=f);for(var d=!1,C=a.return;C!==null;)C.childLanes|=f,p=C.alternate,p!==null&&(p.childLanes|=f),C.tag===22&&(a=C.stateNode,a===null||a._visibility&1||(d=!0)),a=C,C=C.return;return a.tag===3?(C=a.stateNode,d&&o!==null&&(d=31-an(f),a=C.hiddenUpdates,p=a[d],p===null?a[d]=[o]:p.push(o),o.lane=f|536870912),C):null}function co(a){if(50<Zi)throw Zi=0,pf=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var C0={};function rd(a,o,f,p){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(a,o,f,p){return new rd(a,o,f,p)}function i1(a){return a=a.prototype,!(!a||!a.isReactComponent)}function rr(a,o){var f=a.alternate;return f===null?(f=on(a.tag,o,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=o,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&65011712,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,o=a.dependencies,f.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function J3(a,o){a.flags&=65011714;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,o=f.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function fo(a,o,f,p,d,C){var L=0;if(p=a,typeof a=="function")i1(a)&&(L=1);else if(typeof a=="string")L=uT(a,f,se.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case F:return a=on(31,f,o,d),a.elementType=F,a.lanes=C,a;case S:return Ma(f.children,d,C,o);case x:L=8,d|=24;break;case m:return a=on(12,f,o,d|2),a.elementType=m,a.lanes=C,a;case D:return a=on(13,f,o,d),a.elementType=D,a.lanes=C,a;case O:return a=on(19,f,o,d),a.elementType=O,a.lanes=C,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case R:L=10;break e;case M:L=9;break e;case w:L=11;break e;case _:L=14;break e;case N:L=16,p=null;break e}L=29,f=Error(r(130,a===null?"null":typeof a,"")),p=null}return o=on(L,f,o,d),o.elementType=a,o.type=p,o.lanes=C,o}function Ma(a,o,f,p){return a=on(7,a,p,o),a.lanes=f,a}function s1(a,o,f){return a=on(6,a,null,o),a.lanes=f,a}function P3(a){var o=on(18,null,null,0);return o.stateNode=a,o}function o1(a,o,f){return o=on(4,a.children!==null?a.children:[],a.key,o),o.lanes=f,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var I3=new WeakMap;function Sn(a,o){if(typeof a=="object"&&a!==null){var f=I3.get(a);return f!==void 0?f:(o={value:a,source:o,stack:P2(o)},I3.set(a,o),o)}return{value:a,source:o,stack:P2(o)}}var x0=[],E0=0,lo=null,Li=0,Cn=[],xn=0,_r=null,$n=1,An="";function ar(a,o){x0[E0++]=Li,x0[E0++]=lo,lo=a,Li=o}function eg(a,o,f){Cn[xn++]=$n,Cn[xn++]=An,Cn[xn++]=_r,_r=a;var p=$n;a=An;var d=32-an(p)-1;p&=~(1<<d),f+=1;var C=32-an(o)+d;if(30<C){var L=d-d%5;C=(p&(1<<L)-1).toString(32),p>>=L,d-=L,$n=1<<32-an(o)+d|f<<d|p,An=C+a}else $n=1<<C|f<<d|p,An=a}function u1(a){a.return!==null&&(ar(a,1),eg(a,1,0))}function c1(a){for(;a===lo;)lo=x0[--E0],x0[E0]=null,Li=x0[--E0],x0[E0]=null;for(;a===_r;)_r=Cn[--xn],Cn[xn]=null,An=Cn[--xn],Cn[xn]=null,$n=Cn[--xn],Cn[xn]=null}function tg(a,o){Cn[xn++]=$n,Cn[xn++]=An,Cn[xn++]=_r,$n=o.id,An=o.overflow,_r=a}var Bt=null,Ze=null,Le=!1,Ur=null,En=!1,f1=Error(r(519));function Gr(a){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bi(Sn(o,a)),f1}function ng(a){var o=a.stateNode,f=a.type,p=a.memoizedProps;switch(o[Lt]=a,o[Xt]=p,f){case"dialog":Re("cancel",o),Re("close",o);break;case"iframe":case"object":case"embed":Re("load",o);break;case"video":case"audio":for(f=0;f<Pi.length;f++)Re(Pi[f],o);break;case"source":Re("error",o);break;case"img":case"image":case"link":Re("error",o),Re("load",o);break;case"details":Re("toggle",o);break;case"input":Re("invalid",o),v3(o,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":Re("invalid",o);break;case"textarea":Re("invalid",o),d3(o,p.value,p.defaultValue,p.children)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||o.textContent===""+f||p.suppressHydrationWarning===!0||S4(o.textContent,f)?(p.popover!=null&&(Re("beforetoggle",o),Re("toggle",o)),p.onScroll!=null&&Re("scroll",o),p.onScrollEnd!=null&&Re("scrollend",o),p.onClick!=null&&(o.onclick=tr),o=!0):o=!1,o||Gr(a,!0)}function rg(a){for(Bt=a.return;Bt;)switch(Bt.tag){case 5:case 31:case 13:En=!1;return;case 27:case 3:En=!0;return;default:Bt=Bt.return}}function m0(a){if(a!==Bt)return!1;if(!Le)return rg(a),Le=!0,!1;var o=a.tag,f;if((f=o!==3&&o!==27)&&((f=o===5)&&(f=a.type,f=!(f!=="form"&&f!=="button")||Lf(a.type,a.memoizedProps)),f=!f),f&&Ze&&Gr(a),rg(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Ze=D4(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Ze=D4(a)}else o===27?(o=Ze,Qr(a.type)?(a=Uf,Uf=null,Ze=a):Ze=o):Ze=Bt?Rn(a.stateNode.nextSibling):null;return!0}function Oa(){Ze=Bt=null,Le=!1}function l1(){var a=Ur;return a!==null&&(Jt===null?Jt=a:Jt.push.apply(Jt,a),Ur=null),a}function Bi(a){Ur===null?Ur=[a]:Ur.push(a)}var g1=U(null),Da=null,ir=null;function br(a,o,f){Z(g1,o._currentValue),o._currentValue=f}function sr(a){a._currentValue=g1.current,H(g1)}function h1(a,o,f){for(;a!==null;){var p=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),a===f)break;a=a.return}}function p1(a,o,f,p){var d=a.child;for(d!==null&&(d.return=a);d!==null;){var C=d.dependencies;if(C!==null){var L=d.child;C=C.firstContext;e:for(;C!==null;){var V=C;C=d;for(var b=0;b<o.length;b++)if(V.context===o[b]){C.lanes|=f,V=C.alternate,V!==null&&(V.lanes|=f),h1(C.return,f,a),p||(L=null);break e}C=V.next}}else if(d.tag===18){if(L=d.return,L===null)throw Error(r(341));L.lanes|=f,C=L.alternate,C!==null&&(C.lanes|=f),h1(L,f,a),L=null}else L=d.child;if(L!==null)L.return=d;else for(L=d;L!==null;){if(L===a){L=null;break}if(d=L.sibling,d!==null){d.return=L.return,L=d;break}L=L.return}d=L}}function R0(a,o,f,p){a=null;for(var d=o,C=!1;d!==null;){if(!C){if((d.flags&524288)!==0)C=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var L=d.alternate;if(L===null)throw Error(r(387));if(L=L.memoizedProps,L!==null){var V=d.type;sn(d.pendingProps.value,L.value)||(a!==null?a.push(V):a=[V])}}else if(d===ge.current){if(L=d.alternate,L===null)throw Error(r(387));L.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(a!==null?a.push(rs):a=[rs])}d=d.return}a!==null&&p1(o,a,f,p),o.flags|=262144}function go(a){for(a=a.firstContext;a!==null;){if(!sn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function La(a){Da=a,ir=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Vt(a){return ag(Da,a)}function ho(a,o){return Da===null&&La(a),ag(a,o)}function ag(a,o){var f=o._currentValue;if(o={context:o,memoizedValue:f,next:null},ir===null){if(a===null)throw Error(r(308));ir=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else ir=ir.next=o;return f}var ad=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(f,p){a.push(p)}};this.abort=function(){o.aborted=!0,a.forEach(function(f){return f()})}},id=t.unstable_scheduleCallback,sd=t.unstable_NormalPriority,ft={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function v1(){return{controller:new ad,data:new Map,refCount:0}}function Vi(a){a.refCount--,a.refCount===0&&id(sd,function(){a.controller.abort()})}var Ni=null,y1=0,w0=0,M0=null;function od(a,o){if(Ni===null){var f=Ni=[];y1=0,w0=Cf(),M0={status:"pending",value:void 0,then:function(p){f.push(p)}}}return y1++,o.then(ig,ig),o}function ig(){if(--y1===0&&Ni!==null){M0!==null&&(M0.status="fulfilled");var a=Ni;Ni=null,w0=0,M0=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function ud(a,o){var f=[],p={status:"pending",value:null,reason:null,then:function(d){f.push(d)}};return a.then(function(){p.status="fulfilled",p.value=o;for(var d=0;d<f.length;d++)(0,f[d])(o)},function(d){for(p.status="rejected",p.reason=d,d=0;d<f.length;d++)(0,f[d])(void 0)}),p}var sg=G.S;G.S=function(a,o){W5=nn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&od(a,o),sg!==null&&sg(a,o)};var Ba=U(null);function d1(){var a=Ba.current;return a!==null?a:Xe.pooledCache}function po(a,o){o===null?Z(Ba,Ba.current):Z(Ba,o.pool)}function og(){var a=d1();return a===null?null:{parent:ft._currentValue,pool:a}}var O0=Error(r(460)),T1=Error(r(474)),vo=Error(r(542)),yo={then:function(){}};function ug(a){return a=a.status,a==="fulfilled"||a==="rejected"}function cg(a,o,f){switch(f=a[f],f===void 0?a.push(o):f!==o&&(o.then(tr,tr),o=f),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,lg(a),a;default:if(typeof o.status=="string")o.then(tr,tr);else{if(a=Xe,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(p){if(o.status==="pending"){var d=o;d.status="fulfilled",d.value=p}},function(p){if(o.status==="pending"){var d=o;d.status="rejected",d.reason=p}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,lg(a),a}throw Na=o,O0}}function Va(a){try{var o=a._init;return o(a._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Na=f,O0):f}}var Na=null;function fg(){if(Na===null)throw Error(r(459));var a=Na;return Na=null,a}function lg(a){if(a===O0||a===vo)throw Error(r(483))}var D0=null,_i=0;function To(a){var o=_i;return _i+=1,D0===null&&(D0=[]),cg(D0,a,o)}function Ui(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function So(a,o){throw o.$$typeof===y?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function gg(a){function o(j,k){if(a){var J=j.deletions;J===null?(j.deletions=[k],j.flags|=16):J.push(k)}}function f(j,k){if(!a)return null;for(;k!==null;)o(j,k),k=k.sibling;return null}function p(j){for(var k=new Map;j!==null;)j.key!==null?k.set(j.key,j):k.set(j.index,j),j=j.sibling;return k}function d(j,k){return j=rr(j,k),j.index=0,j.sibling=null,j}function C(j,k,J){return j.index=J,a?(J=j.alternate,J!==null?(J=J.index,J<k?(j.flags|=67108866,k):J):(j.flags|=67108866,k)):(j.flags|=1048576,k)}function L(j){return a&&j.alternate===null&&(j.flags|=67108866),j}function V(j,k,J,re){return k===null||k.tag!==6?(k=s1(J,j.mode,re),k.return=j,k):(k=d(k,J),k.return=j,k)}function b(j,k,J,re){var le=J.type;return le===S?ne(j,k,J.props.children,re,J.key):k!==null&&(k.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===N&&Va(le)===k.type)?(k=d(k,J.props),Ui(k,J),k.return=j,k):(k=fo(J.type,J.key,J.props,null,j.mode,re),Ui(k,J),k.return=j,k)}function P(j,k,J,re){return k===null||k.tag!==4||k.stateNode.containerInfo!==J.containerInfo||k.stateNode.implementation!==J.implementation?(k=o1(J,j.mode,re),k.return=j,k):(k=d(k,J.children||[]),k.return=j,k)}function ne(j,k,J,re,le){return k===null||k.tag!==7?(k=Ma(J,j.mode,re,le),k.return=j,k):(k=d(k,J),k.return=j,k)}function ae(j,k,J){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=s1(""+k,j.mode,J),k.return=j,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case T:return J=fo(k.type,k.key,k.props,null,j.mode,J),Ui(J,k),J.return=j,J;case E:return k=o1(k,j.mode,J),k.return=j,k;case N:return k=Va(k),ae(j,k,J)}if(ee(k)||Y(k))return k=Ma(k,j.mode,J,null),k.return=j,k;if(typeof k.then=="function")return ae(j,To(k),J);if(k.$$typeof===R)return ae(j,ho(j,k),J);So(j,k)}return null}function I(j,k,J,re){var le=k!==null?k.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return le!==null?null:V(j,k,""+J,re);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case T:return J.key===le?b(j,k,J,re):null;case E:return J.key===le?P(j,k,J,re):null;case N:return J=Va(J),I(j,k,J,re)}if(ee(J)||Y(J))return le!==null?null:ne(j,k,J,re,null);if(typeof J.then=="function")return I(j,k,To(J),re);if(J.$$typeof===R)return I(j,k,ho(j,J),re);So(j,J)}return null}function te(j,k,J,re,le){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return j=j.get(J)||null,V(k,j,""+re,le);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case T:return j=j.get(re.key===null?J:re.key)||null,b(k,j,re,le);case E:return j=j.get(re.key===null?J:re.key)||null,P(k,j,re,le);case N:return re=Va(re),te(j,k,J,re,le)}if(ee(re)||Y(re))return j=j.get(J)||null,ne(k,j,re,le,null);if(typeof re.then=="function")return te(j,k,J,To(re),le);if(re.$$typeof===R)return te(j,k,J,ho(k,re),le);So(k,re)}return null}function ce(j,k,J,re){for(var le=null,Ne=null,fe=k,Se=k=0,Me=null;fe!==null&&Se<J.length;Se++){fe.index>Se?(Me=fe,fe=null):Me=fe.sibling;var _e=I(j,fe,J[Se],re);if(_e===null){fe===null&&(fe=Me);break}a&&fe&&_e.alternate===null&&o(j,fe),k=C(_e,k,Se),Ne===null?le=_e:Ne.sibling=_e,Ne=_e,fe=Me}if(Se===J.length)return f(j,fe),Le&&ar(j,Se),le;if(fe===null){for(;Se<J.length;Se++)fe=ae(j,J[Se],re),fe!==null&&(k=C(fe,k,Se),Ne===null?le=fe:Ne.sibling=fe,Ne=fe);return Le&&ar(j,Se),le}for(fe=p(fe);Se<J.length;Se++)Me=te(fe,j,Se,J[Se],re),Me!==null&&(a&&Me.alternate!==null&&fe.delete(Me.key===null?Se:Me.key),k=C(Me,k,Se),Ne===null?le=Me:Ne.sibling=Me,Ne=Me);return a&&fe.forEach(function(ea){return o(j,ea)}),Le&&ar(j,Se),le}function he(j,k,J,re){if(J==null)throw Error(r(151));for(var le=null,Ne=null,fe=k,Se=k=0,Me=null,_e=J.next();fe!==null&&!_e.done;Se++,_e=J.next()){fe.index>Se?(Me=fe,fe=null):Me=fe.sibling;var ea=I(j,fe,_e.value,re);if(ea===null){fe===null&&(fe=Me);break}a&&fe&&ea.alternate===null&&o(j,fe),k=C(ea,k,Se),Ne===null?le=ea:Ne.sibling=ea,Ne=ea,fe=Me}if(_e.done)return f(j,fe),Le&&ar(j,Se),le;if(fe===null){for(;!_e.done;Se++,_e=J.next())_e=ae(j,_e.value,re),_e!==null&&(k=C(_e,k,Se),Ne===null?le=_e:Ne.sibling=_e,Ne=_e);return Le&&ar(j,Se),le}for(fe=p(fe);!_e.done;Se++,_e=J.next())_e=te(fe,j,Se,_e.value,re),_e!==null&&(a&&_e.alternate!==null&&fe.delete(_e.key===null?Se:_e.key),k=C(_e,k,Se),Ne===null?le=_e:Ne.sibling=_e,Ne=_e);return a&&fe.forEach(function(ST){return o(j,ST)}),Le&&ar(j,Se),le}function Ke(j,k,J,re){if(typeof J=="object"&&J!==null&&J.type===S&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case T:e:{for(var le=J.key;k!==null;){if(k.key===le){if(le=J.type,le===S){if(k.tag===7){f(j,k.sibling),re=d(k,J.props.children),re.return=j,j=re;break e}}else if(k.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===N&&Va(le)===k.type){f(j,k.sibling),re=d(k,J.props),Ui(re,J),re.return=j,j=re;break e}f(j,k);break}else o(j,k);k=k.sibling}J.type===S?(re=Ma(J.props.children,j.mode,re,J.key),re.return=j,j=re):(re=fo(J.type,J.key,J.props,null,j.mode,re),Ui(re,J),re.return=j,j=re)}return L(j);case E:e:{for(le=J.key;k!==null;){if(k.key===le)if(k.tag===4&&k.stateNode.containerInfo===J.containerInfo&&k.stateNode.implementation===J.implementation){f(j,k.sibling),re=d(k,J.children||[]),re.return=j,j=re;break e}else{f(j,k);break}else o(j,k);k=k.sibling}re=o1(J,j.mode,re),re.return=j,j=re}return L(j);case N:return J=Va(J),Ke(j,k,J,re)}if(ee(J))return ce(j,k,J,re);if(Y(J)){if(le=Y(J),typeof le!="function")throw Error(r(150));return J=le.call(J),he(j,k,J,re)}if(typeof J.then=="function")return Ke(j,k,To(J),re);if(J.$$typeof===R)return Ke(j,k,ho(j,J),re);So(j,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,k!==null&&k.tag===6?(f(j,k.sibling),re=d(k,J),re.return=j,j=re):(f(j,k),re=s1(J,j.mode,re),re.return=j,j=re),L(j)):f(j,k)}return function(j,k,J,re){try{_i=0;var le=Ke(j,k,J,re);return D0=null,le}catch(fe){if(fe===O0||fe===vo)throw fe;var Ne=on(29,fe,null,j.mode);return Ne.lanes=re,Ne.return=j,Ne}finally{}}}var _a=gg(!0),hg=gg(!1),Fr=!1;function S1(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function C1(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function zr(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function kr(a,o,f){var p=a.updateQueue;if(p===null)return null;if(p=p.shared,(Ge&2)!==0){var d=p.pending;return d===null?o.next=o:(o.next=d.next,d.next=o),p.pending=o,o=co(a),Z3(a,null,f),o}return uo(a,p,o,f),co(a)}function Gi(a,o,f){if(o=o.updateQueue,o!==null&&(o=o.shared,(f&4194048)!==0)){var p=o.lanes;p&=a.pendingLanes,f|=p,o.lanes=f,a3(a,f)}}function x1(a,o){var f=a.updateQueue,p=a.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var d=null,C=null;if(f=f.firstBaseUpdate,f!==null){do{var L={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};C===null?d=C=L:C=C.next=L,f=f.next}while(f!==null);C===null?d=C=o:C=C.next=o}else d=C=o;f={baseState:p.baseState,firstBaseUpdate:d,lastBaseUpdate:C,shared:p.shared,callbacks:p.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=o:a.next=o,f.lastBaseUpdate=o}var E1=!1;function bi(){if(E1){var a=M0;if(a!==null)throw a}}function Fi(a,o,f,p){E1=!1;var d=a.updateQueue;Fr=!1;var C=d.firstBaseUpdate,L=d.lastBaseUpdate,V=d.shared.pending;if(V!==null){d.shared.pending=null;var b=V,P=b.next;b.next=null,L===null?C=P:L.next=P,L=b;var ne=a.alternate;ne!==null&&(ne=ne.updateQueue,V=ne.lastBaseUpdate,V!==L&&(V===null?ne.firstBaseUpdate=P:V.next=P,ne.lastBaseUpdate=b))}if(C!==null){var ae=d.baseState;L=0,ne=P=b=null,V=C;do{var I=V.lane&-536870913,te=I!==V.lane;if(te?(we&I)===I:(p&I)===I){I!==0&&I===w0&&(E1=!0),ne!==null&&(ne=ne.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});e:{var ce=a,he=V;I=o;var Ke=f;switch(he.tag){case 1:if(ce=he.payload,typeof ce=="function"){ae=ce.call(Ke,ae,I);break e}ae=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=he.payload,I=typeof ce=="function"?ce.call(Ke,ae,I):ce,I==null)break e;ae=h({},ae,I);break e;case 2:Fr=!0}}I=V.callback,I!==null&&(a.flags|=64,te&&(a.flags|=8192),te=d.callbacks,te===null?d.callbacks=[I]:te.push(I))}else te={lane:I,tag:V.tag,payload:V.payload,callback:V.callback,next:null},ne===null?(P=ne=te,b=ae):ne=ne.next=te,L|=I;if(V=V.next,V===null){if(V=d.shared.pending,V===null)break;te=V,V=te.next,te.next=null,d.lastBaseUpdate=te,d.shared.pending=null}}while(!0);ne===null&&(b=ae),d.baseState=b,d.firstBaseUpdate=P,d.lastBaseUpdate=ne,C===null&&(d.shared.lanes=0),jr|=L,a.lanes=L,a.memoizedState=ae}}function pg(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function vg(a,o){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)pg(f[a],o)}var L0=U(null),Co=U(0);function yg(a,o){a=vr,Z(Co,a),Z(L0,o),vr=a|o.baseLanes}function m1(){Z(Co,vr),Z(L0,L0.current)}function R1(){vr=Co.current,H(L0),H(Co)}var un=U(null),mn=null;function Hr(a){var o=a.alternate;Z(ot,ot.current&1),Z(un,a),mn===null&&(o===null||L0.current!==null||o.memoizedState!==null)&&(mn=a)}function w1(a){Z(ot,ot.current),Z(un,a),mn===null&&(mn=a)}function dg(a){a.tag===22?(Z(ot,ot.current),Z(un,a),mn===null&&(mn=a)):$r()}function $r(){Z(ot,ot.current),Z(un,un.current)}function cn(a){H(un),mn===a&&(mn=null),H(ot)}var ot=U(0);function xo(a){for(var o=a;o!==null;){if(o.tag===13){var f=o.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Nf(f)||_f(f)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var or=0,de=null,We=null,lt=null,Eo=!1,B0=!1,Ua=!1,mo=0,zi=0,V0=null,cd=0;function nt(){throw Error(r(321))}function M1(a,o){if(o===null)return!1;for(var f=0;f<o.length&&f<a.length;f++)if(!sn(a[f],o[f]))return!1;return!0}function O1(a,o,f,p,d,C){return or=C,de=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,G.H=a===null||a.memoizedState===null?e5:A1,Ua=!1,C=f(p,d),Ua=!1,B0&&(C=Sg(o,f,p,d)),Tg(a),C}function Tg(a){G.H=$i;var o=We!==null&&We.next!==null;if(or=0,lt=We=de=null,Eo=!1,zi=0,V0=null,o)throw Error(r(300));a===null||gt||(a=a.dependencies,a!==null&&go(a)&&(gt=!0))}function Sg(a,o,f,p){de=a;var d=0;do{if(B0&&(V0=null),zi=0,B0=!1,25<=d)throw Error(r(301));if(d+=1,lt=We=null,a.updateQueue!=null){var C=a.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}G.H=t5,C=o(f,p)}while(B0);return C}function fd(){var a=G.H,o=a.useState()[0];return o=typeof o.then=="function"?ki(o):o,a=a.useState()[0],(We!==null?We.memoizedState:null)!==a&&(de.flags|=1024),o}function D1(){var a=mo!==0;return mo=0,a}function L1(a,o,f){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~f}function B1(a){if(Eo){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Eo=!1}or=0,lt=We=de=null,B0=!1,zi=mo=0,V0=null}function kt(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?de.memoizedState=lt=a:lt=lt.next=a,lt}function ut(){if(We===null){var a=de.alternate;a=a!==null?a.memoizedState:null}else a=We.next;var o=lt===null?de.memoizedState:lt.next;if(o!==null)lt=o,We=a;else{if(a===null)throw de.alternate===null?Error(r(467)):Error(r(310));We=a,a={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},lt===null?de.memoizedState=lt=a:lt=lt.next=a}return lt}function Ro(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ki(a){var o=zi;return zi+=1,V0===null&&(V0=[]),a=cg(V0,a,o),o=de,(lt===null?o.memoizedState:lt.next)===null&&(o=o.alternate,G.H=o===null||o.memoizedState===null?e5:A1),a}function wo(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return ki(a);if(a.$$typeof===R)return Vt(a)}throw Error(r(438,String(a)))}function V1(a){var o=null,f=de.updateQueue;if(f!==null&&(o=f.memoCache),o==null){var p=de.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(o={data:p.data.map(function(d){return d.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),f===null&&(f=Ro(),de.updateQueue=f),f.memoCache=o,f=o.data[o.index],f===void 0)for(f=o.data[o.index]=Array(a),p=0;p<a;p++)f[p]=z;return o.index++,f}function ur(a,o){return typeof o=="function"?o(a):o}function Mo(a){var o=ut();return N1(o,We,a)}function N1(a,o,f){var p=a.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=f;var d=a.baseQueue,C=p.pending;if(C!==null){if(d!==null){var L=d.next;d.next=C.next,C.next=L}o.baseQueue=d=C,p.pending=null}if(C=a.baseState,d===null)a.memoizedState=C;else{o=d.next;var V=L=null,b=null,P=o,ne=!1;do{var ae=P.lane&-536870913;if(ae!==P.lane?(we&ae)===ae:(or&ae)===ae){var I=P.revertLane;if(I===0)b!==null&&(b=b.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),ae===w0&&(ne=!0);else if((or&I)===I){P=P.next,I===w0&&(ne=!0);continue}else ae={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},b===null?(V=b=ae,L=C):b=b.next=ae,de.lanes|=I,jr|=I;ae=P.action,Ua&&f(C,ae),C=P.hasEagerState?P.eagerState:f(C,ae)}else I={lane:ae,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},b===null?(V=b=I,L=C):b=b.next=I,de.lanes|=ae,jr|=ae;P=P.next}while(P!==null&&P!==o);if(b===null?L=C:b.next=V,!sn(C,a.memoizedState)&&(gt=!0,ne&&(f=M0,f!==null)))throw f;a.memoizedState=C,a.baseState=L,a.baseQueue=b,p.lastRenderedState=C}return d===null&&(p.lanes=0),[a.memoizedState,p.dispatch]}function _1(a){var o=ut(),f=o.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=a;var p=f.dispatch,d=f.pending,C=o.memoizedState;if(d!==null){f.pending=null;var L=d=d.next;do C=a(C,L.action),L=L.next;while(L!==d);sn(C,o.memoizedState)||(gt=!0),o.memoizedState=C,o.baseQueue===null&&(o.baseState=C),f.lastRenderedState=C}return[C,p]}function Cg(a,o,f){var p=de,d=ut(),C=Le;if(C){if(f===void 0)throw Error(r(407));f=f()}else f=o();var L=!sn((We||d).memoizedState,f);if(L&&(d.memoizedState=f,gt=!0),d=d.queue,b1(mg.bind(null,p,d,a),[a]),d.getSnapshot!==o||L||lt!==null&&lt.memoizedState.tag&1){if(p.flags|=2048,N0(9,{destroy:void 0},Eg.bind(null,p,d,f,o),null),Xe===null)throw Error(r(349));C||(or&127)!==0||xg(p,o,f)}return f}function xg(a,o,f){a.flags|=16384,a={getSnapshot:o,value:f},o=de.updateQueue,o===null?(o=Ro(),de.updateQueue=o,o.stores=[a]):(f=o.stores,f===null?o.stores=[a]:f.push(a))}function Eg(a,o,f,p){o.value=f,o.getSnapshot=p,Rg(o)&&wg(a)}function mg(a,o,f){return f(function(){Rg(o)&&wg(a)})}function Rg(a){var o=a.getSnapshot;a=a.value;try{var f=o();return!sn(a,f)}catch{return!0}}function wg(a){var o=wa(a,2);o!==null&&Pt(o,a,2)}function U1(a){var o=kt();if(typeof a=="function"){var f=a;if(a=f(),Ua){Br(!0);try{f()}finally{Br(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:a},o}function Mg(a,o,f,p){return a.baseState=f,N1(a,We,typeof p=="function"?p:ur)}function ld(a,o,f,p,d){if(Lo(a))throw Error(r(485));if(a=o.action,a!==null){var C={payload:d,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(L){C.listeners.push(L)}};G.T!==null?f(!0):C.isTransition=!1,p(C),f=o.pending,f===null?(C.next=o.pending=C,Og(o,C)):(C.next=f.next,o.pending=f.next=C)}}function Og(a,o){var f=o.action,p=o.payload,d=a.state;if(o.isTransition){var C=G.T,L={};G.T=L;try{var V=f(d,p),b=G.S;b!==null&&b(L,V),Dg(a,o,V)}catch(P){G1(a,o,P)}finally{C!==null&&L.types!==null&&(C.types=L.types),G.T=C}}else try{C=f(d,p),Dg(a,o,C)}catch(P){G1(a,o,P)}}function Dg(a,o,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){Lg(a,o,p)},function(p){return G1(a,o,p)}):Lg(a,o,f)}function Lg(a,o,f){o.status="fulfilled",o.value=f,Bg(o),a.state=f,o=a.pending,o!==null&&(f=o.next,f===o?a.pending=null:(f=f.next,o.next=f,Og(a,f)))}function G1(a,o,f){var p=a.pending;if(a.pending=null,p!==null){p=p.next;do o.status="rejected",o.reason=f,Bg(o),o=o.next;while(o!==p)}a.action=null}function Bg(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function Vg(a,o){return o}function Ng(a,o){if(Le){var f=Xe.formState;if(f!==null){e:{var p=de;if(Le){if(Ze){t:{for(var d=Ze,C=En;d.nodeType!==8;){if(!C){d=null;break t}if(d=Rn(d.nextSibling),d===null){d=null;break t}}C=d.data,d=C==="F!"||C==="F"?d:null}if(d){Ze=Rn(d.nextSibling),p=d.data==="F!";break e}}Gr(p)}p=!1}p&&(o=f[0])}}return f=kt(),f.memoizedState=f.baseState=o,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vg,lastRenderedState:o},f.queue=p,f=Jg.bind(null,de,p),p.dispatch=f,p=U1(!1),C=$1.bind(null,de,!1,p.queue),p=kt(),d={state:o,dispatch:null,action:a,pending:null},p.queue=d,f=ld.bind(null,de,d,C,f),d.dispatch=f,p.memoizedState=a,[o,f,!1]}function _g(a){var o=ut();return Ug(o,We,a)}function Ug(a,o,f){if(o=N1(a,o,Vg)[0],a=Mo(ur)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var p=ki(o)}catch(L){throw L===O0?vo:L}else p=o;o=ut();var d=o.queue,C=d.dispatch;return f!==o.memoizedState&&(de.flags|=2048,N0(9,{destroy:void 0},gd.bind(null,d,f),null)),[p,C,a]}function gd(a,o){a.action=o}function Gg(a){var o=ut(),f=We;if(f!==null)return Ug(o,f,a);ut(),o=o.memoizedState,f=ut();var p=f.queue.dispatch;return f.memoizedState=a,[o,p,!1]}function N0(a,o,f,p){return a={tag:a,create:f,deps:p,inst:o,next:null},o=de.updateQueue,o===null&&(o=Ro(),de.updateQueue=o),f=o.lastEffect,f===null?o.lastEffect=a.next=a:(p=f.next,f.next=a,a.next=p,o.lastEffect=a),a}function bg(){return ut().memoizedState}function Oo(a,o,f,p){var d=kt();de.flags|=a,d.memoizedState=N0(1|o,{destroy:void 0},f,p===void 0?null:p)}function Do(a,o,f,p){var d=ut();p=p===void 0?null:p;var C=d.memoizedState.inst;We!==null&&p!==null&&M1(p,We.memoizedState.deps)?d.memoizedState=N0(o,C,f,p):(de.flags|=a,d.memoizedState=N0(1|o,C,f,p))}function Fg(a,o){Oo(8390656,8,a,o)}function b1(a,o){Do(2048,8,a,o)}function hd(a){de.flags|=4;var o=de.updateQueue;if(o===null)o=Ro(),de.updateQueue=o,o.events=[a];else{var f=o.events;f===null?o.events=[a]:f.push(a)}}function zg(a){var o=ut().memoizedState;return hd({ref:o,nextImpl:a}),function(){if((Ge&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function kg(a,o){return Do(4,2,a,o)}function Hg(a,o){return Do(4,4,a,o)}function $g(a,o){if(typeof o=="function"){a=a();var f=o(a);return function(){typeof f=="function"?f():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function Ag(a,o,f){f=f!=null?f.concat([a]):null,Do(4,4,$g.bind(null,o,a),f)}function F1(){}function Wg(a,o){var f=ut();o=o===void 0?null:o;var p=f.memoizedState;return o!==null&&M1(o,p[1])?p[0]:(f.memoizedState=[a,o],a)}function jg(a,o){var f=ut();o=o===void 0?null:o;var p=f.memoizedState;if(o!==null&&M1(o,p[1]))return p[0];if(p=a(),Ua){Br(!0);try{a()}finally{Br(!1)}}return f.memoizedState=[p,o],p}function z1(a,o,f){return f===void 0||(or&1073741824)!==0&&(we&261930)===0?a.memoizedState=o:(a.memoizedState=f,a=K5(),de.lanes|=a,jr|=a,f)}function Kg(a,o,f,p){return sn(f,o)?f:L0.current!==null?(a=z1(a,f,p),sn(a,o)||(gt=!0),a):(or&42)===0||(or&1073741824)!==0&&(we&261930)===0?(gt=!0,a.memoizedState=f):(a=K5(),de.lanes|=a,jr|=a,o)}function Xg(a,o,f,p,d){var C=W.p;W.p=C!==0&&8>C?C:8;var L=G.T,V={};G.T=V,$1(a,!1,o,f);try{var b=d(),P=G.S;if(P!==null&&P(V,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var ne=ud(b,p);Hi(a,o,ne,gn(a))}else Hi(a,o,p,gn(a))}catch(ae){Hi(a,o,{then:function(){},status:"rejected",reason:ae},gn())}finally{W.p=C,L!==null&&V.types!==null&&(L.types=V.types),G.T=L}}function pd(){}function k1(a,o,f,p){if(a.tag!==5)throw Error(r(476));var d=Yg(a).queue;Xg(a,d,o,q,f===null?pd:function(){return qg(a),f(p)})}function Yg(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:q},next:null};var f={};return o.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:f},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function qg(a){var o=Yg(a);o.next===null&&(o=a.alternate.memoizedState),Hi(a,o.next.queue,{},gn())}function H1(){return Vt(rs)}function Qg(){return ut().memoizedState}function Zg(){return ut().memoizedState}function vd(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var f=gn();a=zr(f);var p=kr(o,a,f);p!==null&&(Pt(p,o,f),Gi(p,o,f)),o={cache:v1()},a.payload=o;return}o=o.return}}function yd(a,o,f){var p=gn();f={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Lo(a)?Pg(o,f):(f=a1(a,o,f,p),f!==null&&(Pt(f,a,p),Ig(f,o,p)))}function Jg(a,o,f){var p=gn();Hi(a,o,f,p)}function Hi(a,o,f,p){var d={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Lo(a))Pg(o,d);else{var C=a.alternate;if(a.lanes===0&&(C===null||C.lanes===0)&&(C=o.lastRenderedReducer,C!==null))try{var L=o.lastRenderedState,V=C(L,f);if(d.hasEagerState=!0,d.eagerState=V,sn(V,L))return uo(a,o,d,0),Xe===null&&oo(),!1}catch{}finally{}if(f=a1(a,o,d,p),f!==null)return Pt(f,a,p),Ig(f,o,p),!0}return!1}function $1(a,o,f,p){if(p={lane:2,revertLane:Cf(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Lo(a)){if(o)throw Error(r(479))}else o=a1(a,f,p,2),o!==null&&Pt(o,a,2)}function Lo(a){var o=a.alternate;return a===de||o!==null&&o===de}function Pg(a,o){B0=Eo=!0;var f=a.pending;f===null?o.next=o:(o.next=f.next,f.next=o),a.pending=o}function Ig(a,o,f){if((f&4194048)!==0){var p=o.lanes;p&=a.pendingLanes,f|=p,o.lanes=f,a3(a,f)}}var $i={readContext:Vt,use:wo,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useLayoutEffect:nt,useInsertionEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useSyncExternalStore:nt,useId:nt,useHostTransitionStatus:nt,useFormState:nt,useActionState:nt,useOptimistic:nt,useMemoCache:nt,useCacheRefresh:nt};$i.useEffectEvent=nt;var e5={readContext:Vt,use:wo,useCallback:function(a,o){return kt().memoizedState=[a,o===void 0?null:o],a},useContext:Vt,useEffect:Fg,useImperativeHandle:function(a,o,f){f=f!=null?f.concat([a]):null,Oo(4194308,4,$g.bind(null,o,a),f)},useLayoutEffect:function(a,o){return Oo(4194308,4,a,o)},useInsertionEffect:function(a,o){Oo(4,2,a,o)},useMemo:function(a,o){var f=kt();o=o===void 0?null:o;var p=a();if(Ua){Br(!0);try{a()}finally{Br(!1)}}return f.memoizedState=[p,o],p},useReducer:function(a,o,f){var p=kt();if(f!==void 0){var d=f(o);if(Ua){Br(!0);try{f(o)}finally{Br(!1)}}}else d=o;return p.memoizedState=p.baseState=d,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:d},p.queue=a,a=a.dispatch=yd.bind(null,de,a),[p.memoizedState,a]},useRef:function(a){var o=kt();return a={current:a},o.memoizedState=a},useState:function(a){a=U1(a);var o=a.queue,f=Jg.bind(null,de,o);return o.dispatch=f,[a.memoizedState,f]},useDebugValue:F1,useDeferredValue:function(a,o){var f=kt();return z1(f,a,o)},useTransition:function(){var a=U1(!1);return a=Xg.bind(null,de,a.queue,!0,!1),kt().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,f){var p=de,d=kt();if(Le){if(f===void 0)throw Error(r(407));f=f()}else{if(f=o(),Xe===null)throw Error(r(349));(we&127)!==0||xg(p,o,f)}d.memoizedState=f;var C={value:f,getSnapshot:o};return d.queue=C,Fg(mg.bind(null,p,C,a),[a]),p.flags|=2048,N0(9,{destroy:void 0},Eg.bind(null,p,C,f,o),null),f},useId:function(){var a=kt(),o=Xe.identifierPrefix;if(Le){var f=An,p=$n;f=(p&~(1<<32-an(p)-1)).toString(32)+f,o="_"+o+"R_"+f,f=mo++,0<f&&(o+="H"+f.toString(32)),o+="_"}else f=cd++,o="_"+o+"r_"+f.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:H1,useFormState:Ng,useActionState:Ng,useOptimistic:function(a){var o=kt();o.memoizedState=o.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=f,o=$1.bind(null,de,!0,f),f.dispatch=o,[a,o]},useMemoCache:V1,useCacheRefresh:function(){return kt().memoizedState=vd.bind(null,de)},useEffectEvent:function(a){var o=kt(),f={impl:a};return o.memoizedState=f,function(){if((Ge&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},A1={readContext:Vt,use:wo,useCallback:Wg,useContext:Vt,useEffect:b1,useImperativeHandle:Ag,useInsertionEffect:kg,useLayoutEffect:Hg,useMemo:jg,useReducer:Mo,useRef:bg,useState:function(){return Mo(ur)},useDebugValue:F1,useDeferredValue:function(a,o){var f=ut();return Kg(f,We.memoizedState,a,o)},useTransition:function(){var a=Mo(ur)[0],o=ut().memoizedState;return[typeof a=="boolean"?a:ki(a),o]},useSyncExternalStore:Cg,useId:Qg,useHostTransitionStatus:H1,useFormState:_g,useActionState:_g,useOptimistic:function(a,o){var f=ut();return Mg(f,We,a,o)},useMemoCache:V1,useCacheRefresh:Zg};A1.useEffectEvent=zg;var t5={readContext:Vt,use:wo,useCallback:Wg,useContext:Vt,useEffect:b1,useImperativeHandle:Ag,useInsertionEffect:kg,useLayoutEffect:Hg,useMemo:jg,useReducer:_1,useRef:bg,useState:function(){return _1(ur)},useDebugValue:F1,useDeferredValue:function(a,o){var f=ut();return We===null?z1(f,a,o):Kg(f,We.memoizedState,a,o)},useTransition:function(){var a=_1(ur)[0],o=ut().memoizedState;return[typeof a=="boolean"?a:ki(a),o]},useSyncExternalStore:Cg,useId:Qg,useHostTransitionStatus:H1,useFormState:Gg,useActionState:Gg,useOptimistic:function(a,o){var f=ut();return We!==null?Mg(f,We,a,o):(f.baseState=a,[a,f.queue.dispatch])},useMemoCache:V1,useCacheRefresh:Zg};t5.useEffectEvent=zg;function W1(a,o,f,p){o=a.memoizedState,f=f(p,o),f=f==null?o:h({},o,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var j1={enqueueSetState:function(a,o,f){a=a._reactInternals;var p=gn(),d=zr(p);d.payload=o,f!=null&&(d.callback=f),o=kr(a,d,p),o!==null&&(Pt(o,a,p),Gi(o,a,p))},enqueueReplaceState:function(a,o,f){a=a._reactInternals;var p=gn(),d=zr(p);d.tag=1,d.payload=o,f!=null&&(d.callback=f),o=kr(a,d,p),o!==null&&(Pt(o,a,p),Gi(o,a,p))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var f=gn(),p=zr(f);p.tag=2,o!=null&&(p.callback=o),o=kr(a,p,f),o!==null&&(Pt(o,a,f),Gi(o,a,f))}};function n5(a,o,f,p,d,C,L){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(p,C,L):o.prototype&&o.prototype.isPureReactComponent?!Oi(f,p)||!Oi(d,C):!0}function r5(a,o,f,p){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(f,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(f,p),o.state!==a&&j1.enqueueReplaceState(o,o.state,null)}function Ga(a,o){var f=o;if("ref"in o){f={};for(var p in o)p!=="ref"&&(f[p]=o[p])}if(a=a.defaultProps){f===o&&(f=h({},f));for(var d in a)f[d]===void 0&&(f[d]=a[d])}return f}function a5(a){so(a)}function i5(a){console.error(a)}function s5(a){so(a)}function Bo(a,o){try{var f=a.onUncaughtError;f(o.value,{componentStack:o.stack})}catch(p){setTimeout(function(){throw p})}}function o5(a,o,f){try{var p=a.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function K1(a,o,f){return f=zr(f),f.tag=3,f.payload={element:null},f.callback=function(){Bo(a,o)},f}function u5(a){return a=zr(a),a.tag=3,a}function c5(a,o,f,p){var d=f.type.getDerivedStateFromError;if(typeof d=="function"){var C=p.value;a.payload=function(){return d(C)},a.callback=function(){o5(o,f,p)}}var L=f.stateNode;L!==null&&typeof L.componentDidCatch=="function"&&(a.callback=function(){o5(o,f,p),typeof d!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var V=p.stack;this.componentDidCatch(p.value,{componentStack:V!==null?V:""})})}function dd(a,o,f,p,d){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(o=f.alternate,o!==null&&R0(o,f,d,!0),f=un.current,f!==null){switch(f.tag){case 31:case 13:return mn===null?Ao():f.alternate===null&&rt===0&&(rt=3),f.flags&=-257,f.flags|=65536,f.lanes=d,p===yo?f.flags|=16384:(o=f.updateQueue,o===null?f.updateQueue=new Set([p]):o.add(p),df(a,p,d)),!1;case 22:return f.flags|=65536,p===yo?f.flags|=16384:(o=f.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=o):(f=o.retryQueue,f===null?o.retryQueue=new Set([p]):f.add(p)),df(a,p,d)),!1}throw Error(r(435,f.tag))}return df(a,p,d),Ao(),!1}if(Le)return o=un.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=d,p!==f1&&(a=Error(r(422),{cause:p}),Bi(Sn(a,f)))):(p!==f1&&(o=Error(r(423),{cause:p}),Bi(Sn(o,f))),a=a.current.alternate,a.flags|=65536,d&=-d,a.lanes|=d,p=Sn(p,f),d=K1(a.stateNode,p,d),x1(a,d),rt!==4&&(rt=2)),!1;var C=Error(r(520),{cause:p});if(C=Sn(C,f),Qi===null?Qi=[C]:Qi.push(C),rt!==4&&(rt=2),o===null)return!0;p=Sn(p,f),f=o;do{switch(f.tag){case 3:return f.flags|=65536,a=d&-d,f.lanes|=a,a=K1(f.stateNode,p,a),x1(f,a),!1;case 1:if(o=f.type,C=f.stateNode,(f.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Kr===null||!Kr.has(C))))return f.flags|=65536,d&=-d,f.lanes|=d,d=u5(d),c5(d,a,f,p),x1(f,d),!1}f=f.return}while(f!==null);return!1}var X1=Error(r(461)),gt=!1;function Nt(a,o,f,p){o.child=a===null?hg(o,null,f,p):_a(o,a.child,f,p)}function f5(a,o,f,p,d){f=f.render;var C=o.ref;if("ref"in p){var L={};for(var V in p)V!=="ref"&&(L[V]=p[V])}else L=p;return La(o),p=O1(a,o,f,L,C,d),V=D1(),a!==null&&!gt?(L1(a,o,d),cr(a,o,d)):(Le&&V&&u1(o),o.flags|=1,Nt(a,o,p,d),o.child)}function l5(a,o,f,p,d){if(a===null){var C=f.type;return typeof C=="function"&&!i1(C)&&C.defaultProps===void 0&&f.compare===null?(o.tag=15,o.type=C,g5(a,o,C,p,d)):(a=fo(f.type,null,p,o,o.mode,d),a.ref=o.ref,a.return=o,o.child=a)}if(C=a.child,!ef(a,d)){var L=C.memoizedProps;if(f=f.compare,f=f!==null?f:Oi,f(L,p)&&a.ref===o.ref)return cr(a,o,d)}return o.flags|=1,a=rr(C,p),a.ref=o.ref,a.return=o,o.child=a}function g5(a,o,f,p,d){if(a!==null){var C=a.memoizedProps;if(Oi(C,p)&&a.ref===o.ref)if(gt=!1,o.pendingProps=p=C,ef(a,d))(a.flags&131072)!==0&&(gt=!0);else return o.lanes=a.lanes,cr(a,o,d)}return Y1(a,o,f,p,d)}function h5(a,o,f,p){var d=p.children,C=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((o.flags&128)!==0){if(C=C!==null?C.baseLanes|f:f,a!==null){for(p=o.child=a.child,d=0;p!==null;)d=d|p.lanes|p.childLanes,p=p.sibling;p=d&~C}else p=0,o.child=null;return p5(a,o,C,f,p)}if((f&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&po(o,C!==null?C.cachePool:null),C!==null?yg(o,C):m1(),dg(o);else return p=o.lanes=536870912,p5(a,o,C!==null?C.baseLanes|f:f,f,p)}else C!==null?(po(o,C.cachePool),yg(o,C),$r(),o.memoizedState=null):(a!==null&&po(o,null),m1(),$r());return Nt(a,o,d,f),o.child}function Ai(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function p5(a,o,f,p,d){var C=d1();return C=C===null?null:{parent:ft._currentValue,pool:C},o.memoizedState={baseLanes:f,cachePool:C},a!==null&&po(o,null),m1(),dg(o),a!==null&&R0(a,o,p,!0),o.childLanes=d,null}function Vo(a,o){return o=_o({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function v5(a,o,f){return _a(o,a.child,null,f),a=Vo(o,o.pendingProps),a.flags|=2,cn(o),o.memoizedState=null,a}function Td(a,o,f){var p=o.pendingProps,d=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(Le){if(p.mode==="hidden")return a=Vo(o,p),o.lanes=536870912,Ai(null,a);if(w1(o),(a=Ze)?(a=O4(a,En),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:_r!==null?{id:$n,overflow:An}:null,retryLane:536870912,hydrationErrors:null},f=P3(a),f.return=o,o.child=f,Bt=o,Ze=null)):a=null,a===null)throw Gr(o);return o.lanes=536870912,null}return Vo(o,p)}var C=a.memoizedState;if(C!==null){var L=C.dehydrated;if(w1(o),d)if(o.flags&256)o.flags&=-257,o=v5(a,o,f);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(r(558));else if(gt||R0(a,o,f,!1),d=(f&a.childLanes)!==0,gt||d){if(p=Xe,p!==null&&(L=i3(p,f),L!==0&&L!==C.retryLane))throw C.retryLane=L,wa(a,L),Pt(p,a,L),X1;Ao(),o=v5(a,o,f)}else a=C.treeContext,Ze=Rn(L.nextSibling),Bt=o,Le=!0,Ur=null,En=!1,a!==null&&tg(o,a),o=Vo(o,p),o.flags|=4096;return o}return a=rr(a.child,{mode:p.mode,children:p.children}),a.ref=o.ref,o.child=a,a.return=o,a}function No(a,o){var f=o.ref;if(f===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(a===null||a.ref!==f)&&(o.flags|=4194816)}}function Y1(a,o,f,p,d){return La(o),f=O1(a,o,f,p,void 0,d),p=D1(),a!==null&&!gt?(L1(a,o,d),cr(a,o,d)):(Le&&p&&u1(o),o.flags|=1,Nt(a,o,f,d),o.child)}function y5(a,o,f,p,d,C){return La(o),o.updateQueue=null,f=Sg(o,p,f,d),Tg(a),p=D1(),a!==null&&!gt?(L1(a,o,C),cr(a,o,C)):(Le&&p&&u1(o),o.flags|=1,Nt(a,o,f,C),o.child)}function d5(a,o,f,p,d){if(La(o),o.stateNode===null){var C=C0,L=f.contextType;typeof L=="object"&&L!==null&&(C=Vt(L)),C=new f(p,C),o.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=j1,o.stateNode=C,C._reactInternals=o,C=o.stateNode,C.props=p,C.state=o.memoizedState,C.refs={},S1(o),L=f.contextType,C.context=typeof L=="object"&&L!==null?Vt(L):C0,C.state=o.memoizedState,L=f.getDerivedStateFromProps,typeof L=="function"&&(W1(o,f,L,p),C.state=o.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(L=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),L!==C.state&&j1.enqueueReplaceState(C,C.state,null),Fi(o,p,C,d),bi(),C.state=o.memoizedState),typeof C.componentDidMount=="function"&&(o.flags|=4194308),p=!0}else if(a===null){C=o.stateNode;var V=o.memoizedProps,b=Ga(f,V);C.props=b;var P=C.context,ne=f.contextType;L=C0,typeof ne=="object"&&ne!==null&&(L=Vt(ne));var ae=f.getDerivedStateFromProps;ne=typeof ae=="function"||typeof C.getSnapshotBeforeUpdate=="function",V=o.pendingProps!==V,ne||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(V||P!==L)&&r5(o,C,p,L),Fr=!1;var I=o.memoizedState;C.state=I,Fi(o,p,C,d),bi(),P=o.memoizedState,V||I!==P||Fr?(typeof ae=="function"&&(W1(o,f,ae,p),P=o.memoizedState),(b=Fr||n5(o,f,b,p,I,P,L))?(ne||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(o.flags|=4194308)):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=P),C.props=p,C.state=P,C.context=L,p=b):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{C=o.stateNode,C1(a,o),L=o.memoizedProps,ne=Ga(f,L),C.props=ne,ae=o.pendingProps,I=C.context,P=f.contextType,b=C0,typeof P=="object"&&P!==null&&(b=Vt(P)),V=f.getDerivedStateFromProps,(P=typeof V=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(L!==ae||I!==b)&&r5(o,C,p,b),Fr=!1,I=o.memoizedState,C.state=I,Fi(o,p,C,d),bi();var te=o.memoizedState;L!==ae||I!==te||Fr||a!==null&&a.dependencies!==null&&go(a.dependencies)?(typeof V=="function"&&(W1(o,f,V,p),te=o.memoizedState),(ne=Fr||n5(o,f,ne,p,I,te,b)||a!==null&&a.dependencies!==null&&go(a.dependencies))?(P||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(p,te,b),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(p,te,b)),typeof C.componentDidUpdate=="function"&&(o.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof C.componentDidUpdate!="function"||L===a.memoizedProps&&I===a.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||L===a.memoizedProps&&I===a.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=te),C.props=p,C.state=te,C.context=b,p=ne):(typeof C.componentDidUpdate!="function"||L===a.memoizedProps&&I===a.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||L===a.memoizedProps&&I===a.memoizedState||(o.flags|=1024),p=!1)}return C=p,No(a,o),p=(o.flags&128)!==0,C||p?(C=o.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:C.render(),o.flags|=1,a!==null&&p?(o.child=_a(o,a.child,null,d),o.child=_a(o,null,f,d)):Nt(a,o,f,d),o.memoizedState=C.state,a=o.child):a=cr(a,o,d),a}function T5(a,o,f,p){return Oa(),o.flags|=256,Nt(a,o,f,p),o.child}var q1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Q1(a){return{baseLanes:a,cachePool:og()}}function Z1(a,o,f){return a=a!==null?a.childLanes&~f:0,o&&(a|=ln),a}function S5(a,o,f){var p=o.pendingProps,d=!1,C=(o.flags&128)!==0,L;if((L=C)||(L=a!==null&&a.memoizedState===null?!1:(ot.current&2)!==0),L&&(d=!0,o.flags&=-129),L=(o.flags&32)!==0,o.flags&=-33,a===null){if(Le){if(d?Hr(o):$r(),(a=Ze)?(a=O4(a,En),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:_r!==null?{id:$n,overflow:An}:null,retryLane:536870912,hydrationErrors:null},f=P3(a),f.return=o,o.child=f,Bt=o,Ze=null)):a=null,a===null)throw Gr(o);return _f(a)?o.lanes=32:o.lanes=536870912,null}var V=p.children;return p=p.fallback,d?($r(),d=o.mode,V=_o({mode:"hidden",children:V},d),p=Ma(p,d,f,null),V.return=o,p.return=o,V.sibling=p,o.child=V,p=o.child,p.memoizedState=Q1(f),p.childLanes=Z1(a,L,f),o.memoizedState=q1,Ai(null,p)):(Hr(o),J1(o,V))}var b=a.memoizedState;if(b!==null&&(V=b.dehydrated,V!==null)){if(C)o.flags&256?(Hr(o),o.flags&=-257,o=P1(a,o,f)):o.memoizedState!==null?($r(),o.child=a.child,o.flags|=128,o=null):($r(),V=p.fallback,d=o.mode,p=_o({mode:"visible",children:p.children},d),V=Ma(V,d,f,null),V.flags|=2,p.return=o,V.return=o,p.sibling=V,o.child=p,_a(o,a.child,null,f),p=o.child,p.memoizedState=Q1(f),p.childLanes=Z1(a,L,f),o.memoizedState=q1,o=Ai(null,p));else if(Hr(o),_f(V)){if(L=V.nextSibling&&V.nextSibling.dataset,L)var P=L.dgst;L=P,p=Error(r(419)),p.stack="",p.digest=L,Bi({value:p,source:null,stack:null}),o=P1(a,o,f)}else if(gt||R0(a,o,f,!1),L=(f&a.childLanes)!==0,gt||L){if(L=Xe,L!==null&&(p=i3(L,f),p!==0&&p!==b.retryLane))throw b.retryLane=p,wa(a,p),Pt(L,a,p),X1;Nf(V)||Ao(),o=P1(a,o,f)}else Nf(V)?(o.flags|=192,o.child=a.child,o=null):(a=b.treeContext,Ze=Rn(V.nextSibling),Bt=o,Le=!0,Ur=null,En=!1,a!==null&&tg(o,a),o=J1(o,p.children),o.flags|=4096);return o}return d?($r(),V=p.fallback,d=o.mode,b=a.child,P=b.sibling,p=rr(b,{mode:"hidden",children:p.children}),p.subtreeFlags=b.subtreeFlags&65011712,P!==null?V=rr(P,V):(V=Ma(V,d,f,null),V.flags|=2),V.return=o,p.return=o,p.sibling=V,o.child=p,Ai(null,p),p=o.child,V=a.child.memoizedState,V===null?V=Q1(f):(d=V.cachePool,d!==null?(b=ft._currentValue,d=d.parent!==b?{parent:b,pool:b}:d):d=og(),V={baseLanes:V.baseLanes|f,cachePool:d}),p.memoizedState=V,p.childLanes=Z1(a,L,f),o.memoizedState=q1,Ai(a.child,p)):(Hr(o),f=a.child,a=f.sibling,f=rr(f,{mode:"visible",children:p.children}),f.return=o,f.sibling=null,a!==null&&(L=o.deletions,L===null?(o.deletions=[a],o.flags|=16):L.push(a)),o.child=f,o.memoizedState=null,f)}function J1(a,o){return o=_o({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function _o(a,o){return a=on(22,a,null,o),a.lanes=0,a}function P1(a,o,f){return _a(o,a.child,null,f),a=J1(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function C5(a,o,f){a.lanes|=o;var p=a.alternate;p!==null&&(p.lanes|=o),h1(a.return,o,f)}function I1(a,o,f,p,d,C){var L=a.memoizedState;L===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:d,treeForkCount:C}:(L.isBackwards=o,L.rendering=null,L.renderingStartTime=0,L.last=p,L.tail=f,L.tailMode=d,L.treeForkCount=C)}function x5(a,o,f){var p=o.pendingProps,d=p.revealOrder,C=p.tail;p=p.children;var L=ot.current,V=(L&2)!==0;if(V?(L=L&1|2,o.flags|=128):L&=1,Z(ot,L),Nt(a,o,p,f),p=Le?Li:0,!V&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&C5(a,f,o);else if(a.tag===19)C5(a,f,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(d){case"forwards":for(f=o.child,d=null;f!==null;)a=f.alternate,a!==null&&xo(a)===null&&(d=f),f=f.sibling;f=d,f===null?(d=o.child,o.child=null):(d=f.sibling,f.sibling=null),I1(o,!1,d,f,C,p);break;case"backwards":case"unstable_legacy-backwards":for(f=null,d=o.child,o.child=null;d!==null;){if(a=d.alternate,a!==null&&xo(a)===null){o.child=d;break}a=d.sibling,d.sibling=f,f=d,d=a}I1(o,!0,f,null,C,p);break;case"together":I1(o,!1,null,null,void 0,p);break;default:o.memoizedState=null}return o.child}function cr(a,o,f){if(a!==null&&(o.dependencies=a.dependencies),jr|=o.lanes,(f&o.childLanes)===0)if(a!==null){if(R0(a,o,f,!1),(f&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,f=rr(a,a.pendingProps),o.child=f,f.return=o;a.sibling!==null;)a=a.sibling,f=f.sibling=rr(a,a.pendingProps),f.return=o;f.sibling=null}return o.child}function ef(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&go(a)))}function Sd(a,o,f){switch(o.tag){case 3:Pe(o,o.stateNode.containerInfo),br(o,ft,a.memoizedState.cache),Oa();break;case 27:case 5:Ct(o);break;case 4:Pe(o,o.stateNode.containerInfo);break;case 10:br(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,w1(o),null;break;case 13:var p=o.memoizedState;if(p!==null)return p.dehydrated!==null?(Hr(o),o.flags|=128,null):(f&o.child.childLanes)!==0?S5(a,o,f):(Hr(o),a=cr(a,o,f),a!==null?a.sibling:null);Hr(o);break;case 19:var d=(a.flags&128)!==0;if(p=(f&o.childLanes)!==0,p||(R0(a,o,f,!1),p=(f&o.childLanes)!==0),d){if(p)return x5(a,o,f);o.flags|=128}if(d=o.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Z(ot,ot.current),p)break;return null;case 22:return o.lanes=0,h5(a,o,f,o.pendingProps);case 24:br(o,ft,a.memoizedState.cache)}return cr(a,o,f)}function E5(a,o,f){if(a!==null)if(a.memoizedProps!==o.pendingProps)gt=!0;else{if(!ef(a,f)&&(o.flags&128)===0)return gt=!1,Sd(a,o,f);gt=(a.flags&131072)!==0}else gt=!1,Le&&(o.flags&1048576)!==0&&eg(o,Li,o.index);switch(o.lanes=0,o.tag){case 16:e:{var p=o.pendingProps;if(a=Va(o.elementType),o.type=a,typeof a=="function")i1(a)?(p=Ga(a,p),o.tag=1,o=d5(null,o,a,p,f)):(o.tag=0,o=Y1(null,o,a,p,f));else{if(a!=null){var d=a.$$typeof;if(d===w){o.tag=11,o=f5(null,o,a,p,f);break e}else if(d===_){o.tag=14,o=l5(null,o,a,p,f);break e}}throw o=K(a)||a,Error(r(306,o,""))}}return o;case 0:return Y1(a,o,o.type,o.pendingProps,f);case 1:return p=o.type,d=Ga(p,o.pendingProps),d5(a,o,p,d,f);case 3:e:{if(Pe(o,o.stateNode.containerInfo),a===null)throw Error(r(387));p=o.pendingProps;var C=o.memoizedState;d=C.element,C1(a,o),Fi(o,p,null,f);var L=o.memoizedState;if(p=L.cache,br(o,ft,p),p!==C.cache&&p1(o,[ft],f,!0),bi(),p=L.element,C.isDehydrated)if(C={element:p,isDehydrated:!1,cache:L.cache},o.updateQueue.baseState=C,o.memoizedState=C,o.flags&256){o=T5(a,o,p,f);break e}else if(p!==d){d=Sn(Error(r(424)),o),Bi(d),o=T5(a,o,p,f);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Ze=Rn(a.firstChild),Bt=o,Le=!0,Ur=null,En=!0,f=hg(o,null,p,f),o.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Oa(),p===d){o=cr(a,o,f);break e}Nt(a,o,p,f)}o=o.child}return o;case 26:return No(a,o),a===null?(f=_4(o.type,null,o.pendingProps,null))?o.memoizedState=f:Le||(f=o.type,a=o.pendingProps,p=Qo(ue.current).createElement(f),p[Lt]=o,p[Xt]=a,_t(p,f,a),xt(p),o.stateNode=p):o.memoizedState=_4(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return Ct(o),a===null&&Le&&(p=o.stateNode=B4(o.type,o.pendingProps,ue.current),Bt=o,En=!0,d=Ze,Qr(o.type)?(Uf=d,Ze=Rn(p.firstChild)):Ze=d),Nt(a,o,o.pendingProps.children,f),No(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Le&&((d=p=Ze)&&(p=Qd(p,o.type,o.pendingProps,En),p!==null?(o.stateNode=p,Bt=o,Ze=Rn(p.firstChild),En=!1,d=!0):d=!1),d||Gr(o)),Ct(o),d=o.type,C=o.pendingProps,L=a!==null?a.memoizedProps:null,p=C.children,Lf(d,C)?p=null:L!==null&&Lf(d,L)&&(o.flags|=32),o.memoizedState!==null&&(d=O1(a,o,fd,null,null,f),rs._currentValue=d),No(a,o),Nt(a,o,p,f),o.child;case 6:return a===null&&Le&&((a=f=Ze)&&(f=Zd(f,o.pendingProps,En),f!==null?(o.stateNode=f,Bt=o,Ze=null,a=!0):a=!1),a||Gr(o)),null;case 13:return S5(a,o,f);case 4:return Pe(o,o.stateNode.containerInfo),p=o.pendingProps,a===null?o.child=_a(o,null,p,f):Nt(a,o,p,f),o.child;case 11:return f5(a,o,o.type,o.pendingProps,f);case 7:return Nt(a,o,o.pendingProps,f),o.child;case 8:return Nt(a,o,o.pendingProps.children,f),o.child;case 12:return Nt(a,o,o.pendingProps.children,f),o.child;case 10:return p=o.pendingProps,br(o,o.type,p.value),Nt(a,o,p.children,f),o.child;case 9:return d=o.type._context,p=o.pendingProps.children,La(o),d=Vt(d),p=p(d),o.flags|=1,Nt(a,o,p,f),o.child;case 14:return l5(a,o,o.type,o.pendingProps,f);case 15:return g5(a,o,o.type,o.pendingProps,f);case 19:return x5(a,o,f);case 31:return Td(a,o,f);case 22:return h5(a,o,f,o.pendingProps);case 24:return La(o),p=Vt(ft),a===null?(d=d1(),d===null&&(d=Xe,C=v1(),d.pooledCache=C,C.refCount++,C!==null&&(d.pooledCacheLanes|=f),d=C),o.memoizedState={parent:p,cache:d},S1(o),br(o,ft,d)):((a.lanes&f)!==0&&(C1(a,o),Fi(o,null,null,f),bi()),d=a.memoizedState,C=o.memoizedState,d.parent!==p?(d={parent:p,cache:p},o.memoizedState=d,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=d),br(o,ft,p)):(p=C.cache,br(o,ft,p),p!==d.cache&&p1(o,[ft],f,!0))),Nt(a,o,o.pendingProps.children,f),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function fr(a){a.flags|=4}function tf(a,o,f,p,d){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(d&335544128)===d)if(a.stateNode.complete)a.flags|=8192;else if(Q5())a.flags|=8192;else throw Na=yo,T1}else a.flags&=-16777217}function m5(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!z4(o))if(Q5())a.flags|=8192;else throw Na=yo,T1}function Uo(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?n3():536870912,a.lanes|=o,b0|=o)}function Wi(a,o){if(!Le)switch(a.tailMode){case"hidden":o=a.tail;for(var f=null;o!==null;)o.alternate!==null&&(f=o),o=o.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:p.sibling=null}}function Je(a){var o=a.alternate!==null&&a.alternate.child===a.child,f=0,p=0;if(o)for(var d=a.child;d!==null;)f|=d.lanes|d.childLanes,p|=d.subtreeFlags&65011712,p|=d.flags&65011712,d.return=a,d=d.sibling;else for(d=a.child;d!==null;)f|=d.lanes|d.childLanes,p|=d.subtreeFlags,p|=d.flags,d.return=a,d=d.sibling;return a.subtreeFlags|=p,a.childLanes=f,o}function Cd(a,o,f){var p=o.pendingProps;switch(c1(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(o),null;case 1:return Je(o),null;case 3:return f=o.stateNode,p=null,a!==null&&(p=a.memoizedState.cache),o.memoizedState.cache!==p&&(o.flags|=2048),sr(ft),De(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(m0(o)?fr(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,l1())),Je(o),null;case 26:var d=o.type,C=o.memoizedState;return a===null?(fr(o),C!==null?(Je(o),m5(o,C)):(Je(o),tf(o,d,null,p,f))):C?C!==a.memoizedState?(fr(o),Je(o),m5(o,C)):(Je(o),o.flags&=-16777217):(a=a.memoizedProps,a!==p&&fr(o),Je(o),tf(o,d,a,p,f)),null;case 27:if(vn(o),f=ue.current,d=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==p&&fr(o);else{if(!p){if(o.stateNode===null)throw Error(r(166));return Je(o),null}a=se.current,m0(o)?ng(o):(a=B4(d,p,f),o.stateNode=a,fr(o))}return Je(o),null;case 5:if(vn(o),d=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==p&&fr(o);else{if(!p){if(o.stateNode===null)throw Error(r(166));return Je(o),null}if(C=se.current,m0(o))ng(o);else{var L=Qo(ue.current);switch(C){case 1:C=L.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:C=L.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":C=L.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":C=L.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":C=L.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof p.is=="string"?L.createElement("select",{is:p.is}):L.createElement("select"),p.multiple?C.multiple=!0:p.size&&(C.size=p.size);break;default:C=typeof p.is=="string"?L.createElement(d,{is:p.is}):L.createElement(d)}}C[Lt]=o,C[Xt]=p;e:for(L=o.child;L!==null;){if(L.tag===5||L.tag===6)C.appendChild(L.stateNode);else if(L.tag!==4&&L.tag!==27&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===o)break e;for(;L.sibling===null;){if(L.return===null||L.return===o)break e;L=L.return}L.sibling.return=L.return,L=L.sibling}o.stateNode=C;e:switch(_t(C,d,p),d){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&fr(o)}}return Je(o),tf(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,f),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==p&&fr(o);else{if(typeof p!="string"&&o.stateNode===null)throw Error(r(166));if(a=ue.current,m0(o)){if(a=o.stateNode,f=o.memoizedProps,p=null,d=Bt,d!==null)switch(d.tag){case 27:case 5:p=d.memoizedProps}a[Lt]=o,a=!!(a.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||S4(a.nodeValue,f)),a||Gr(o,!0)}else a=Qo(a).createTextNode(p),a[Lt]=o,o.stateNode=a}return Je(o),null;case 31:if(f=o.memoizedState,a===null||a.memoizedState!==null){if(p=m0(o),f!==null){if(a===null){if(!p)throw Error(r(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(557));a[Lt]=o}else Oa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Je(o),a=!1}else f=l1(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=f),a=!0;if(!a)return o.flags&256?(cn(o),o):(cn(o),null);if((o.flags&128)!==0)throw Error(r(558))}return Je(o),null;case 13:if(p=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(d=m0(o),p!==null&&p.dehydrated!==null){if(a===null){if(!d)throw Error(r(318));if(d=o.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Lt]=o}else Oa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Je(o),d=!1}else d=l1(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=d),d=!0;if(!d)return o.flags&256?(cn(o),o):(cn(o),null)}return cn(o),(o.flags&128)!==0?(o.lanes=f,o):(f=p!==null,a=a!==null&&a.memoizedState!==null,f&&(p=o.child,d=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(d=p.alternate.memoizedState.cachePool.pool),C=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),C!==d&&(p.flags|=2048)),f!==a&&f&&(o.child.flags|=8192),Uo(o,o.updateQueue),Je(o),null);case 4:return De(),a===null&&Rf(o.stateNode.containerInfo),Je(o),null;case 10:return sr(o.type),Je(o),null;case 19:if(H(ot),p=o.memoizedState,p===null)return Je(o),null;if(d=(o.flags&128)!==0,C=p.rendering,C===null)if(d)Wi(p,!1);else{if(rt!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(C=xo(a),C!==null){for(o.flags|=128,Wi(p,!1),a=C.updateQueue,o.updateQueue=a,Uo(o,a),o.subtreeFlags=0,a=f,f=o.child;f!==null;)J3(f,a),f=f.sibling;return Z(ot,ot.current&1|2),Le&&ar(o,p.treeForkCount),o.child}a=a.sibling}p.tail!==null&&nn()>ko&&(o.flags|=128,d=!0,Wi(p,!1),o.lanes=4194304)}else{if(!d)if(a=xo(C),a!==null){if(o.flags|=128,d=!0,a=a.updateQueue,o.updateQueue=a,Uo(o,a),Wi(p,!0),p.tail===null&&p.tailMode==="hidden"&&!C.alternate&&!Le)return Je(o),null}else 2*nn()-p.renderingStartTime>ko&&f!==536870912&&(o.flags|=128,d=!0,Wi(p,!1),o.lanes=4194304);p.isBackwards?(C.sibling=o.child,o.child=C):(a=p.last,a!==null?a.sibling=C:o.child=C,p.last=C)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=nn(),a.sibling=null,f=ot.current,Z(ot,d?f&1|2:f&1),Le&&ar(o,p.treeForkCount),a):(Je(o),null);case 22:case 23:return cn(o),R1(),p=o.memoizedState!==null,a!==null?a.memoizedState!==null!==p&&(o.flags|=8192):p&&(o.flags|=8192),p?(f&536870912)!==0&&(o.flags&128)===0&&(Je(o),o.subtreeFlags&6&&(o.flags|=8192)):Je(o),f=o.updateQueue,f!==null&&Uo(o,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),p=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==f&&(o.flags|=2048),a!==null&&H(Ba),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),sr(ft),Je(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function xd(a,o){switch(c1(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return sr(ft),De(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return vn(o),null;case 31:if(o.memoizedState!==null){if(cn(o),o.alternate===null)throw Error(r(340));Oa()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(cn(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Oa()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return H(ot),null;case 4:return De(),null;case 10:return sr(o.type),null;case 22:case 23:return cn(o),R1(),a!==null&&H(Ba),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return sr(ft),null;case 25:return null;default:return null}}function R5(a,o){switch(c1(o),o.tag){case 3:sr(ft),De();break;case 26:case 27:case 5:vn(o);break;case 4:De();break;case 31:o.memoizedState!==null&&cn(o);break;case 13:cn(o);break;case 19:H(ot);break;case 10:sr(o.type);break;case 22:case 23:cn(o),R1(),a!==null&&H(Ba);break;case 24:sr(ft)}}function ji(a,o){try{var f=o.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var d=p.next;f=d;do{if((f.tag&a)===a){p=void 0;var C=f.create,L=f.inst;p=C(),L.destroy=p}f=f.next}while(f!==d)}}catch(V){He(o,o.return,V)}}function Ar(a,o,f){try{var p=o.updateQueue,d=p!==null?p.lastEffect:null;if(d!==null){var C=d.next;p=C;do{if((p.tag&a)===a){var L=p.inst,V=L.destroy;if(V!==void 0){L.destroy=void 0,d=o;var b=f,P=V;try{P()}catch(ne){He(d,b,ne)}}}p=p.next}while(p!==C)}}catch(ne){He(o,o.return,ne)}}function w5(a){var o=a.updateQueue;if(o!==null){var f=a.stateNode;try{vg(o,f)}catch(p){He(a,a.return,p)}}}function M5(a,o,f){f.props=Ga(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(p){He(a,o,p)}}function Ki(a,o){try{var f=a.ref;if(f!==null){switch(a.tag){case 26:case 27:case 5:var p=a.stateNode;break;case 30:p=a.stateNode;break;default:p=a.stateNode}typeof f=="function"?a.refCleanup=f(p):f.current=p}}catch(d){He(a,o,d)}}function Wn(a,o){var f=a.ref,p=a.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(d){He(a,o,d)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(d){He(a,o,d)}else f.current=null}function O5(a){var o=a.type,f=a.memoizedProps,p=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break e;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(d){He(a,a.return,d)}}function nf(a,o,f){try{var p=a.stateNode;Wd(p,a.type,f,o),p[Xt]=o}catch(d){He(a,a.return,d)}}function D5(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Qr(a.type)||a.tag===4}function rf(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||D5(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Qr(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function af(a,o,f){var p=a.tag;if(p===5||p===6)a=a.stateNode,o?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(a,o):(o=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,o.appendChild(a),f=f._reactRootContainer,f!=null||o.onclick!==null||(o.onclick=tr));else if(p!==4&&(p===27&&Qr(a.type)&&(f=a.stateNode,o=null),a=a.child,a!==null))for(af(a,o,f),a=a.sibling;a!==null;)af(a,o,f),a=a.sibling}function Go(a,o,f){var p=a.tag;if(p===5||p===6)a=a.stateNode,o?f.insertBefore(a,o):f.appendChild(a);else if(p!==4&&(p===27&&Qr(a.type)&&(f=a.stateNode),a=a.child,a!==null))for(Go(a,o,f),a=a.sibling;a!==null;)Go(a,o,f),a=a.sibling}function L5(a){var o=a.stateNode,f=a.memoizedProps;try{for(var p=a.type,d=o.attributes;d.length;)o.removeAttributeNode(d[0]);_t(o,p,f),o[Lt]=a,o[Xt]=f}catch(C){He(a,a.return,C)}}var lr=!1,ht=!1,sf=!1,B5=typeof WeakSet=="function"?WeakSet:Set,Et=null;function Ed(a,o){if(a=a.containerInfo,Of=nu,a=A3(a),Pc(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var d=p.anchorOffset,C=p.focusNode;p=p.focusOffset;try{f.nodeType,C.nodeType}catch{f=null;break e}var L=0,V=-1,b=-1,P=0,ne=0,ae=a,I=null;t:for(;;){for(var te;ae!==f||d!==0&&ae.nodeType!==3||(V=L+d),ae!==C||p!==0&&ae.nodeType!==3||(b=L+p),ae.nodeType===3&&(L+=ae.nodeValue.length),(te=ae.firstChild)!==null;)I=ae,ae=te;for(;;){if(ae===a)break t;if(I===f&&++P===d&&(V=L),I===C&&++ne===p&&(b=L),(te=ae.nextSibling)!==null)break;ae=I,I=ae.parentNode}ae=te}f=V===-1||b===-1?null:{start:V,end:b}}else f=null}f=f||{start:0,end:0}}else f=null;for(Df={focusedElem:a,selectionRange:f},nu=!1,Et=o;Et!==null;)if(o=Et,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,Et=a;else for(;Et!==null;){switch(o=Et,C=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(f=0;f<a.length;f++)d=a[f],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&C!==null){a=void 0,f=o,d=C.memoizedProps,C=C.memoizedState,p=f.stateNode;try{var ce=Ga(f.type,d);a=p.getSnapshotBeforeUpdate(ce,C),p.__reactInternalSnapshotBeforeUpdate=a}catch(he){He(f,f.return,he)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,f=a.nodeType,f===9)Vf(a);else if(f===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Vf(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,Et=a;break}Et=o.return}}function V5(a,o,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:hr(a,f),p&4&&ji(5,f);break;case 1:if(hr(a,f),p&4)if(a=f.stateNode,o===null)try{a.componentDidMount()}catch(L){He(f,f.return,L)}else{var d=Ga(f.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(d,o,a.__reactInternalSnapshotBeforeUpdate)}catch(L){He(f,f.return,L)}}p&64&&w5(f),p&512&&Ki(f,f.return);break;case 3:if(hr(a,f),p&64&&(a=f.updateQueue,a!==null)){if(o=null,f.child!==null)switch(f.child.tag){case 27:case 5:o=f.child.stateNode;break;case 1:o=f.child.stateNode}try{vg(a,o)}catch(L){He(f,f.return,L)}}break;case 27:o===null&&p&4&&L5(f);case 26:case 5:hr(a,f),o===null&&p&4&&O5(f),p&512&&Ki(f,f.return);break;case 12:hr(a,f);break;case 31:hr(a,f),p&4&&U5(a,f);break;case 13:hr(a,f),p&4&&G5(a,f),p&64&&(a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(f=Vd.bind(null,f),Jd(a,f))));break;case 22:if(p=f.memoizedState!==null||lr,!p){o=o!==null&&o.memoizedState!==null||ht,d=lr;var C=ht;lr=p,(ht=o)&&!C?pr(a,f,(f.subtreeFlags&8772)!==0):hr(a,f),lr=d,ht=C}break;case 30:break;default:hr(a,f)}}function N5(a){var o=a.alternate;o!==null&&(a.alternate=null,N5(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Gc(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Ie=null,qt=!1;function gr(a,o,f){for(f=f.child;f!==null;)_5(a,o,f),f=f.sibling}function _5(a,o,f){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(vi,f)}catch{}switch(f.tag){case 26:ht||Wn(f,o),gr(a,o,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:ht||Wn(f,o);var p=Ie,d=qt;Qr(f.type)&&(Ie=f.stateNode,qt=!1),gr(a,o,f),es(f.stateNode),Ie=p,qt=d;break;case 5:ht||Wn(f,o);case 6:if(p=Ie,d=qt,Ie=null,gr(a,o,f),Ie=p,qt=d,Ie!==null)if(qt)try{(Ie.nodeType===9?Ie.body:Ie.nodeName==="HTML"?Ie.ownerDocument.body:Ie).removeChild(f.stateNode)}catch(C){He(f,o,C)}else try{Ie.removeChild(f.stateNode)}catch(C){He(f,o,C)}break;case 18:Ie!==null&&(qt?(a=Ie,w4(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,f.stateNode),j0(a)):w4(Ie,f.stateNode));break;case 4:p=Ie,d=qt,Ie=f.stateNode.containerInfo,qt=!0,gr(a,o,f),Ie=p,qt=d;break;case 0:case 11:case 14:case 15:Ar(2,f,o),ht||Ar(4,f,o),gr(a,o,f);break;case 1:ht||(Wn(f,o),p=f.stateNode,typeof p.componentWillUnmount=="function"&&M5(f,o,p)),gr(a,o,f);break;case 21:gr(a,o,f);break;case 22:ht=(p=ht)||f.memoizedState!==null,gr(a,o,f),ht=p;break;default:gr(a,o,f)}}function U5(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{j0(a)}catch(f){He(o,o.return,f)}}}function G5(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{j0(a)}catch(f){He(o,o.return,f)}}function md(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new B5),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new B5),o;default:throw Error(r(435,a.tag))}}function bo(a,o){var f=md(a);o.forEach(function(p){if(!f.has(p)){f.add(p);var d=Nd.bind(null,a,p);p.then(d,d)}})}function Qt(a,o){var f=o.deletions;if(f!==null)for(var p=0;p<f.length;p++){var d=f[p],C=a,L=o,V=L;e:for(;V!==null;){switch(V.tag){case 27:if(Qr(V.type)){Ie=V.stateNode,qt=!1;break e}break;case 5:Ie=V.stateNode,qt=!1;break e;case 3:case 4:Ie=V.stateNode.containerInfo,qt=!0;break e}V=V.return}if(Ie===null)throw Error(r(160));_5(C,L,d),Ie=null,qt=!1,C=d.alternate,C!==null&&(C.return=null),d.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)b5(o,a),o=o.sibling}var Un=null;function b5(a,o){var f=a.alternate,p=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Qt(o,a),Zt(a),p&4&&(Ar(3,a,a.return),ji(3,a),Ar(5,a,a.return));break;case 1:Qt(o,a),Zt(a),p&512&&(ht||f===null||Wn(f,f.return)),p&64&&lr&&(a=a.updateQueue,a!==null&&(p=a.callbacks,p!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var d=Un;if(Qt(o,a),Zt(a),p&512&&(ht||f===null||Wn(f,f.return)),p&4){var C=f!==null?f.memoizedState:null;if(p=a.memoizedState,f===null)if(p===null)if(a.stateNode===null){e:{p=a.type,f=a.memoizedProps,d=d.ownerDocument||d;t:switch(p){case"title":C=d.getElementsByTagName("title")[0],(!C||C[Ti]||C[Lt]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=d.createElement(p),d.head.insertBefore(C,d.querySelector("head > title"))),_t(C,p,f),C[Lt]=a,xt(C),p=C;break e;case"link":var L=b4("link","href",d).get(p+(f.href||""));if(L){for(var V=0;V<L.length;V++)if(C=L[V],C.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&C.getAttribute("rel")===(f.rel==null?null:f.rel)&&C.getAttribute("title")===(f.title==null?null:f.title)&&C.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){L.splice(V,1);break t}}C=d.createElement(p),_t(C,p,f),d.head.appendChild(C);break;case"meta":if(L=b4("meta","content",d).get(p+(f.content||""))){for(V=0;V<L.length;V++)if(C=L[V],C.getAttribute("content")===(f.content==null?null:""+f.content)&&C.getAttribute("name")===(f.name==null?null:f.name)&&C.getAttribute("property")===(f.property==null?null:f.property)&&C.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&C.getAttribute("charset")===(f.charSet==null?null:f.charSet)){L.splice(V,1);break t}}C=d.createElement(p),_t(C,p,f),d.head.appendChild(C);break;default:throw Error(r(468,p))}C[Lt]=a,xt(C),p=C}a.stateNode=p}else F4(d,a.type,a.stateNode);else a.stateNode=G4(d,p,a.memoizedProps);else C!==p?(C===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):C.count--,p===null?F4(d,a.type,a.stateNode):G4(d,p,a.memoizedProps)):p===null&&a.stateNode!==null&&nf(a,a.memoizedProps,f.memoizedProps)}break;case 27:Qt(o,a),Zt(a),p&512&&(ht||f===null||Wn(f,f.return)),f!==null&&p&4&&nf(a,a.memoizedProps,f.memoizedProps);break;case 5:if(Qt(o,a),Zt(a),p&512&&(ht||f===null||Wn(f,f.return)),a.flags&32){d=a.stateNode;try{h0(d,"")}catch(ce){He(a,a.return,ce)}}p&4&&a.stateNode!=null&&(d=a.memoizedProps,nf(a,d,f!==null?f.memoizedProps:d)),p&1024&&(sf=!0);break;case 6:if(Qt(o,a),Zt(a),p&4){if(a.stateNode===null)throw Error(r(162));p=a.memoizedProps,f=a.stateNode;try{f.nodeValue=p}catch(ce){He(a,a.return,ce)}}break;case 3:if(Po=null,d=Un,Un=Zo(o.containerInfo),Qt(o,a),Un=d,Zt(a),p&4&&f!==null&&f.memoizedState.isDehydrated)try{j0(o.containerInfo)}catch(ce){He(a,a.return,ce)}sf&&(sf=!1,F5(a));break;case 4:p=Un,Un=Zo(a.stateNode.containerInfo),Qt(o,a),Zt(a),Un=p;break;case 12:Qt(o,a),Zt(a);break;case 31:Qt(o,a),Zt(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,bo(a,p)));break;case 13:Qt(o,a),Zt(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(zo=nn()),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,bo(a,p)));break;case 22:d=a.memoizedState!==null;var b=f!==null&&f.memoizedState!==null,P=lr,ne=ht;if(lr=P||d,ht=ne||b,Qt(o,a),ht=ne,lr=P,Zt(a),p&8192)e:for(o=a.stateNode,o._visibility=d?o._visibility&-2:o._visibility|1,d&&(f===null||b||lr||ht||ba(a)),f=null,o=a;;){if(o.tag===5||o.tag===26){if(f===null){b=f=o;try{if(C=b.stateNode,d)L=C.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none";else{V=b.stateNode;var ae=b.memoizedProps.style,I=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;V.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(ce){He(b,b.return,ce)}}}else if(o.tag===6){if(f===null){b=o;try{b.stateNode.nodeValue=d?"":b.memoizedProps}catch(ce){He(b,b.return,ce)}}}else if(o.tag===18){if(f===null){b=o;try{var te=b.stateNode;d?M4(te,!0):M4(b.stateNode,!1)}catch(ce){He(b,b.return,ce)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;f===o&&(f=null),o=o.return}f===o&&(f=null),o.sibling.return=o.return,o=o.sibling}p&4&&(p=a.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,bo(a,f))));break;case 19:Qt(o,a),Zt(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,bo(a,p)));break;case 30:break;case 21:break;default:Qt(o,a),Zt(a)}}function Zt(a){var o=a.flags;if(o&2){try{for(var f,p=a.return;p!==null;){if(D5(p)){f=p;break}p=p.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var d=f.stateNode,C=rf(a);Go(a,C,d);break;case 5:var L=f.stateNode;f.flags&32&&(h0(L,""),f.flags&=-33);var V=rf(a);Go(a,V,L);break;case 3:case 4:var b=f.stateNode.containerInfo,P=rf(a);af(a,P,b);break;default:throw Error(r(161))}}catch(ne){He(a,a.return,ne)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function F5(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;F5(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function hr(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)V5(a,o.alternate,o),o=o.sibling}function ba(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:Ar(4,o,o.return),ba(o);break;case 1:Wn(o,o.return);var f=o.stateNode;typeof f.componentWillUnmount=="function"&&M5(o,o.return,f),ba(o);break;case 27:es(o.stateNode);case 26:case 5:Wn(o,o.return),ba(o);break;case 22:o.memoizedState===null&&ba(o);break;case 30:ba(o);break;default:ba(o)}a=a.sibling}}function pr(a,o,f){for(f=f&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var p=o.alternate,d=a,C=o,L=C.flags;switch(C.tag){case 0:case 11:case 15:pr(d,C,f),ji(4,C);break;case 1:if(pr(d,C,f),p=C,d=p.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(P){He(p,p.return,P)}if(p=C,d=p.updateQueue,d!==null){var V=p.stateNode;try{var b=d.shared.hiddenCallbacks;if(b!==null)for(d.shared.hiddenCallbacks=null,d=0;d<b.length;d++)pg(b[d],V)}catch(P){He(p,p.return,P)}}f&&L&64&&w5(C),Ki(C,C.return);break;case 27:L5(C);case 26:case 5:pr(d,C,f),f&&p===null&&L&4&&O5(C),Ki(C,C.return);break;case 12:pr(d,C,f);break;case 31:pr(d,C,f),f&&L&4&&U5(d,C);break;case 13:pr(d,C,f),f&&L&4&&G5(d,C);break;case 22:C.memoizedState===null&&pr(d,C,f),Ki(C,C.return);break;case 30:break;default:pr(d,C,f)}o=o.sibling}}function of(a,o){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&Vi(f))}function uf(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Vi(a))}function Gn(a,o,f,p){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)z5(a,o,f,p),o=o.sibling}function z5(a,o,f,p){var d=o.flags;switch(o.tag){case 0:case 11:case 15:Gn(a,o,f,p),d&2048&&ji(9,o);break;case 1:Gn(a,o,f,p);break;case 3:Gn(a,o,f,p),d&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Vi(a)));break;case 12:if(d&2048){Gn(a,o,f,p),a=o.stateNode;try{var C=o.memoizedProps,L=C.id,V=C.onPostCommit;typeof V=="function"&&V(L,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(b){He(o,o.return,b)}}else Gn(a,o,f,p);break;case 31:Gn(a,o,f,p);break;case 13:Gn(a,o,f,p);break;case 23:break;case 22:C=o.stateNode,L=o.alternate,o.memoizedState!==null?C._visibility&2?Gn(a,o,f,p):Xi(a,o):C._visibility&2?Gn(a,o,f,p):(C._visibility|=2,_0(a,o,f,p,(o.subtreeFlags&10256)!==0||!1)),d&2048&&of(L,o);break;case 24:Gn(a,o,f,p),d&2048&&uf(o.alternate,o);break;default:Gn(a,o,f,p)}}function _0(a,o,f,p,d){for(d=d&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var C=a,L=o,V=f,b=p,P=L.flags;switch(L.tag){case 0:case 11:case 15:_0(C,L,V,b,d),ji(8,L);break;case 23:break;case 22:var ne=L.stateNode;L.memoizedState!==null?ne._visibility&2?_0(C,L,V,b,d):Xi(C,L):(ne._visibility|=2,_0(C,L,V,b,d)),d&&P&2048&&of(L.alternate,L);break;case 24:_0(C,L,V,b,d),d&&P&2048&&uf(L.alternate,L);break;default:_0(C,L,V,b,d)}o=o.sibling}}function Xi(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var f=a,p=o,d=p.flags;switch(p.tag){case 22:Xi(f,p),d&2048&&of(p.alternate,p);break;case 24:Xi(f,p),d&2048&&uf(p.alternate,p);break;default:Xi(f,p)}o=o.sibling}}var Yi=8192;function U0(a,o,f){if(a.subtreeFlags&Yi)for(a=a.child;a!==null;)k5(a,o,f),a=a.sibling}function k5(a,o,f){switch(a.tag){case 26:U0(a,o,f),a.flags&Yi&&a.memoizedState!==null&&cT(f,Un,a.memoizedState,a.memoizedProps);break;case 5:U0(a,o,f);break;case 3:case 4:var p=Un;Un=Zo(a.stateNode.containerInfo),U0(a,o,f),Un=p;break;case 22:a.memoizedState===null&&(p=a.alternate,p!==null&&p.memoizedState!==null?(p=Yi,Yi=16777216,U0(a,o,f),Yi=p):U0(a,o,f));break;default:U0(a,o,f)}}function H5(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function qi(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var f=0;f<o.length;f++){var p=o[f];Et=p,A5(p,a)}H5(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)$5(a),a=a.sibling}function $5(a){switch(a.tag){case 0:case 11:case 15:qi(a),a.flags&2048&&Ar(9,a,a.return);break;case 3:qi(a);break;case 12:qi(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,Fo(a)):qi(a);break;default:qi(a)}}function Fo(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var f=0;f<o.length;f++){var p=o[f];Et=p,A5(p,a)}H5(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:Ar(8,o,o.return),Fo(o);break;case 22:f=o.stateNode,f._visibility&2&&(f._visibility&=-3,Fo(o));break;default:Fo(o)}a=a.sibling}}function A5(a,o){for(;Et!==null;){var f=Et;switch(f.tag){case 0:case 11:case 15:Ar(8,f,o);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Vi(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,Et=p;else e:for(f=a;Et!==null;){p=Et;var d=p.sibling,C=p.return;if(N5(p),p===f){Et=null;break e}if(d!==null){d.return=C,Et=d;break e}Et=C}}}var Rd={getCacheForType:function(a){var o=Vt(ft),f=o.data.get(a);return f===void 0&&(f=a(),o.data.set(a,f)),f},cacheSignal:function(){return Vt(ft).controller.signal}},wd=typeof WeakMap=="function"?WeakMap:Map,Ge=0,Xe=null,me=null,we=0,ke=0,fn=null,Wr=!1,G0=!1,cf=!1,vr=0,rt=0,jr=0,Fa=0,ff=0,ln=0,b0=0,Qi=null,Jt=null,lf=!1,zo=0,W5=0,ko=1/0,Ho=null,Kr=null,yt=0,Xr=null,F0=null,yr=0,gf=0,hf=null,j5=null,Zi=0,pf=null;function gn(){return(Ge&2)!==0&&we!==0?we&-we:G.T!==null?Cf():s3()}function K5(){if(ln===0)if((we&536870912)===0||Le){var a=Ys;Ys<<=1,(Ys&3932160)===0&&(Ys=262144),ln=a}else ln=536870912;return a=un.current,a!==null&&(a.flags|=32),ln}function Pt(a,o,f){(a===Xe&&(ke===2||ke===9)||a.cancelPendingCommit!==null)&&(z0(a,0),Yr(a,we,ln,!1)),di(a,f),((Ge&2)===0||a!==Xe)&&(a===Xe&&((Ge&2)===0&&(Fa|=f),rt===4&&Yr(a,we,ln,!1)),jn(a))}function X5(a,o,f){if((Ge&6)!==0)throw Error(r(327));var p=!f&&(o&127)===0&&(o&a.expiredLanes)===0||yi(a,o),d=p?Dd(a,o):yf(a,o,!0),C=p;do{if(d===0){G0&&!p&&Yr(a,o,0,!1);break}else{if(f=a.current.alternate,C&&!Md(f)){d=yf(a,o,!1),C=!1;continue}if(d===2){if(C=o,a.errorRecoveryDisabledLanes&C)var L=0;else L=a.pendingLanes&-536870913,L=L!==0?L:L&536870912?536870912:0;if(L!==0){o=L;e:{var V=a;d=Qi;var b=V.current.memoizedState.isDehydrated;if(b&&(z0(V,L).flags|=256),L=yf(V,L,!1),L!==2){if(cf&&!b){V.errorRecoveryDisabledLanes|=C,Fa|=C,d=4;break e}C=Jt,Jt=d,C!==null&&(Jt===null?Jt=C:Jt.push.apply(Jt,C))}d=L}if(C=!1,d!==2)continue}}if(d===1){z0(a,0),Yr(a,o,0,!0);break}e:{switch(p=a,C=d,C){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Yr(p,o,ln,!Wr);break e;case 2:Jt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(d=zo+300-nn(),10<d)){if(Yr(p,o,ln,!Wr),Qs(p,0,!0)!==0)break e;yr=o,p.timeoutHandle=m4(Y5.bind(null,p,f,Jt,Ho,lf,o,ln,Fa,b0,Wr,C,"Throttled",-0,0),d);break e}Y5(p,f,Jt,Ho,lf,o,ln,Fa,b0,Wr,C,null,-0,0)}}break}while(!0);jn(a)}function Y5(a,o,f,p,d,C,L,V,b,P,ne,ae,I,te){if(a.timeoutHandle=-1,ae=o.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:tr},k5(o,C,ae);var ce=(C&62914560)===C?zo-nn():(C&4194048)===C?W5-nn():0;if(ce=fT(ae,ce),ce!==null){yr=C,a.cancelPendingCommit=ce(t4.bind(null,a,o,C,f,p,d,L,V,b,ne,ae,null,I,te)),Yr(a,C,L,!P);return}}t4(a,o,C,f,p,d,L,V,b)}function Md(a){for(var o=a;;){var f=o.tag;if((f===0||f===11||f===15)&&o.flags&16384&&(f=o.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var d=f[p],C=d.getSnapshot;d=d.value;try{if(!sn(C(),d))return!1}catch{return!1}}if(f=o.child,o.subtreeFlags&16384&&f!==null)f.return=o,o=f;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Yr(a,o,f,p){o&=~ff,o&=~Fa,a.suspendedLanes|=o,a.pingedLanes&=~o,p&&(a.warmLanes|=o),p=a.expirationTimes;for(var d=o;0<d;){var C=31-an(d),L=1<<C;p[C]=-1,d&=~L}f!==0&&r3(a,f,o)}function $o(){return(Ge&6)===0?(Ji(0),!1):!0}function vf(){if(me!==null){if(ke===0)var a=me.return;else a=me,ir=Da=null,B1(a),D0=null,_i=0,a=me;for(;a!==null;)R5(a.alternate,a),a=a.return;me=null}}function z0(a,o){var f=a.timeoutHandle;f!==-1&&(a.timeoutHandle=-1,Xd(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),yr=0,vf(),Xe=a,me=f=rr(a.current,null),we=o,ke=0,fn=null,Wr=!1,G0=yi(a,o),cf=!1,b0=ln=ff=Fa=jr=rt=0,Jt=Qi=null,lf=!1,(o&8)!==0&&(o|=o&32);var p=a.entangledLanes;if(p!==0)for(a=a.entanglements,p&=o;0<p;){var d=31-an(p),C=1<<d;o|=a[d],p&=~C}return vr=o,oo(),f}function q5(a,o){de=null,G.H=$i,o===O0||o===vo?(o=fg(),ke=3):o===T1?(o=fg(),ke=4):ke=o===X1?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,fn=o,me===null&&(rt=1,Bo(a,Sn(o,a.current)))}function Q5(){var a=un.current;return a===null?!0:(we&4194048)===we?mn===null:(we&62914560)===we||(we&536870912)!==0?a===mn:!1}function Z5(){var a=G.H;return G.H=$i,a===null?$i:a}function J5(){var a=G.A;return G.A=Rd,a}function Ao(){rt=4,Wr||(we&4194048)!==we&&un.current!==null||(G0=!0),(jr&134217727)===0&&(Fa&134217727)===0||Xe===null||Yr(Xe,we,ln,!1)}function yf(a,o,f){var p=Ge;Ge|=2;var d=Z5(),C=J5();(Xe!==a||we!==o)&&(Ho=null,z0(a,o)),o=!1;var L=rt;e:do try{if(ke!==0&&me!==null){var V=me,b=fn;switch(ke){case 8:vf(),L=6;break e;case 3:case 2:case 9:case 6:un.current===null&&(o=!0);var P=ke;if(ke=0,fn=null,k0(a,V,b,P),f&&G0){L=0;break e}break;default:P=ke,ke=0,fn=null,k0(a,V,b,P)}}Od(),L=rt;break}catch(ne){q5(a,ne)}while(!0);return o&&a.shellSuspendCounter++,ir=Da=null,Ge=p,G.H=d,G.A=C,me===null&&(Xe=null,we=0,oo()),L}function Od(){for(;me!==null;)P5(me)}function Dd(a,o){var f=Ge;Ge|=2;var p=Z5(),d=J5();Xe!==a||we!==o?(Ho=null,ko=nn()+500,z0(a,o)):G0=yi(a,o);e:do try{if(ke!==0&&me!==null){o=me;var C=fn;t:switch(ke){case 1:ke=0,fn=null,k0(a,o,C,1);break;case 2:case 9:if(ug(C)){ke=0,fn=null,I5(o);break}o=function(){ke!==2&&ke!==9||Xe!==a||(ke=7),jn(a)},C.then(o,o);break e;case 3:ke=7;break e;case 4:ke=5;break e;case 7:ug(C)?(ke=0,fn=null,I5(o)):(ke=0,fn=null,k0(a,o,C,7));break;case 5:var L=null;switch(me.tag){case 26:L=me.memoizedState;case 5:case 27:var V=me;if(L?z4(L):V.stateNode.complete){ke=0,fn=null;var b=V.sibling;if(b!==null)me=b;else{var P=V.return;P!==null?(me=P,Wo(P)):me=null}break t}}ke=0,fn=null,k0(a,o,C,5);break;case 6:ke=0,fn=null,k0(a,o,C,6);break;case 8:vf(),rt=6;break e;default:throw Error(r(462))}}Ld();break}catch(ne){q5(a,ne)}while(!0);return ir=Da=null,G.H=p,G.A=d,Ge=f,me!==null?0:(Xe=null,we=0,oo(),rt)}function Ld(){for(;me!==null&&!Pv();)P5(me)}function P5(a){var o=E5(a.alternate,a,vr);a.memoizedProps=a.pendingProps,o===null?Wo(a):me=o}function I5(a){var o=a,f=o.alternate;switch(o.tag){case 15:case 0:o=y5(f,o,o.pendingProps,o.type,void 0,we);break;case 11:o=y5(f,o,o.pendingProps,o.type.render,o.ref,we);break;case 5:B1(o);default:R5(f,o),o=me=J3(o,vr),o=E5(f,o,vr)}a.memoizedProps=a.pendingProps,o===null?Wo(a):me=o}function k0(a,o,f,p){ir=Da=null,B1(o),D0=null,_i=0;var d=o.return;try{if(dd(a,d,o,f,we)){rt=1,Bo(a,Sn(f,a.current)),me=null;return}}catch(C){if(d!==null)throw me=d,C;rt=1,Bo(a,Sn(f,a.current)),me=null;return}o.flags&32768?(Le||p===1?a=!0:G0||(we&536870912)!==0?a=!1:(Wr=a=!0,(p===2||p===9||p===3||p===6)&&(p=un.current,p!==null&&p.tag===13&&(p.flags|=16384))),e4(o,a)):Wo(o)}function Wo(a){var o=a;do{if((o.flags&32768)!==0){e4(o,Wr);return}a=o.return;var f=Cd(o.alternate,o,vr);if(f!==null){me=f;return}if(o=o.sibling,o!==null){me=o;return}me=o=a}while(o!==null);rt===0&&(rt=5)}function e4(a,o){do{var f=xd(a.alternate,a);if(f!==null){f.flags&=32767,me=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!o&&(a=a.sibling,a!==null)){me=a;return}me=a=f}while(a!==null);rt=6,me=null}function t4(a,o,f,p,d,C,L,V,b){a.cancelPendingCommit=null;do jo();while(yt!==0);if((Ge&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(C=o.lanes|o.childLanes,C|=r1,uy(a,f,C,L,V,b),a===Xe&&(me=Xe=null,we=0),F0=o,Xr=a,yr=f,gf=C,hf=d,j5=p,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,_d(Ks,function(){return s4(),null})):(a.callbackNode=null,a.callbackPriority=0),p=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||p){p=G.T,G.T=null,d=W.p,W.p=2,L=Ge,Ge|=4;try{Ed(a,o,f)}finally{Ge=L,W.p=d,G.T=p}}yt=1,n4(),r4(),a4()}}function n4(){if(yt===1){yt=0;var a=Xr,o=F0,f=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||f){f=G.T,G.T=null;var p=W.p;W.p=2;var d=Ge;Ge|=4;try{b5(o,a);var C=Df,L=A3(a.containerInfo),V=C.focusedElem,b=C.selectionRange;if(L!==V&&V&&V.ownerDocument&&$3(V.ownerDocument.documentElement,V)){if(b!==null&&Pc(V)){var P=b.start,ne=b.end;if(ne===void 0&&(ne=P),"selectionStart"in V)V.selectionStart=P,V.selectionEnd=Math.min(ne,V.value.length);else{var ae=V.ownerDocument||document,I=ae&&ae.defaultView||window;if(I.getSelection){var te=I.getSelection(),ce=V.textContent.length,he=Math.min(b.start,ce),Ke=b.end===void 0?he:Math.min(b.end,ce);!te.extend&&he>Ke&&(L=Ke,Ke=he,he=L);var j=H3(V,he),k=H3(V,Ke);if(j&&k&&(te.rangeCount!==1||te.anchorNode!==j.node||te.anchorOffset!==j.offset||te.focusNode!==k.node||te.focusOffset!==k.offset)){var J=ae.createRange();J.setStart(j.node,j.offset),te.removeAllRanges(),he>Ke?(te.addRange(J),te.extend(k.node,k.offset)):(J.setEnd(k.node,k.offset),te.addRange(J))}}}}for(ae=[],te=V;te=te.parentNode;)te.nodeType===1&&ae.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<ae.length;V++){var re=ae[V];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}nu=!!Of,Df=Of=null}finally{Ge=d,W.p=p,G.T=f}}a.current=o,yt=2}}function r4(){if(yt===2){yt=0;var a=Xr,o=F0,f=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||f){f=G.T,G.T=null;var p=W.p;W.p=2;var d=Ge;Ge|=4;try{V5(a,o.alternate,o)}finally{Ge=d,W.p=p,G.T=f}}yt=3}}function a4(){if(yt===4||yt===3){yt=0,Iv();var a=Xr,o=F0,f=yr,p=j5;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?yt=5:(yt=0,F0=Xr=null,i4(a,a.pendingLanes));var d=a.pendingLanes;if(d===0&&(Kr=null),_c(f),o=o.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(vi,o,void 0,(o.current.flags&128)===128)}catch{}if(p!==null){o=G.T,d=W.p,W.p=2,G.T=null;try{for(var C=a.onRecoverableError,L=0;L<p.length;L++){var V=p[L];C(V.value,{componentStack:V.stack})}}finally{G.T=o,W.p=d}}(yr&3)!==0&&jo(),jn(a),d=a.pendingLanes,(f&261930)!==0&&(d&42)!==0?a===pf?Zi++:(Zi=0,pf=a):Zi=0,Ji(0)}}function i4(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Vi(o)))}function jo(){return n4(),r4(),a4(),s4()}function s4(){if(yt!==5)return!1;var a=Xr,o=gf;gf=0;var f=_c(yr),p=G.T,d=W.p;try{W.p=32>f?32:f,G.T=null,f=hf,hf=null;var C=Xr,L=yr;if(yt=0,F0=Xr=null,yr=0,(Ge&6)!==0)throw Error(r(331));var V=Ge;if(Ge|=4,$5(C.current),z5(C,C.current,L,f),Ge=V,Ji(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(vi,C)}catch{}return!0}finally{W.p=d,G.T=p,i4(a,o)}}function o4(a,o,f){o=Sn(f,o),o=K1(a.stateNode,o,2),a=kr(a,o,2),a!==null&&(di(a,2),jn(a))}function He(a,o,f){if(a.tag===3)o4(a,a,f);else for(;o!==null;){if(o.tag===3){o4(o,a,f);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Kr===null||!Kr.has(p))){a=Sn(f,a),f=u5(2),p=kr(o,f,2),p!==null&&(c5(f,p,o,a),di(p,2),jn(p));break}}o=o.return}}function df(a,o,f){var p=a.pingCache;if(p===null){p=a.pingCache=new wd;var d=new Set;p.set(o,d)}else d=p.get(o),d===void 0&&(d=new Set,p.set(o,d));d.has(f)||(cf=!0,d.add(f),a=Bd.bind(null,a,o,f),o.then(a,a))}function Bd(a,o,f){var p=a.pingCache;p!==null&&p.delete(o),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,Xe===a&&(we&f)===f&&(rt===4||rt===3&&(we&62914560)===we&&300>nn()-zo?(Ge&2)===0&&z0(a,0):ff|=f,b0===we&&(b0=0)),jn(a)}function u4(a,o){o===0&&(o=n3()),a=wa(a,o),a!==null&&(di(a,o),jn(a))}function Vd(a){var o=a.memoizedState,f=0;o!==null&&(f=o.retryLane),u4(a,f)}function Nd(a,o){var f=0;switch(a.tag){case 31:case 13:var p=a.stateNode,d=a.memoizedState;d!==null&&(f=d.retryLane);break;case 19:p=a.stateNode;break;case 22:p=a.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(o),u4(a,f)}function _d(a,o){return Lc(a,o)}var Ko=null,H0=null,Tf=!1,Xo=!1,Sf=!1,qr=0;function jn(a){a!==H0&&a.next===null&&(H0===null?Ko=H0=a:H0=H0.next=a),Xo=!0,Tf||(Tf=!0,Gd())}function Ji(a,o){if(!Sf&&Xo){Sf=!0;do for(var f=!1,p=Ko;p!==null;){if(a!==0){var d=p.pendingLanes;if(d===0)var C=0;else{var L=p.suspendedLanes,V=p.pingedLanes;C=(1<<31-an(42|a)+1)-1,C&=d&~(L&~V),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(f=!0,g4(p,C))}else C=we,C=Qs(p,p===Xe?C:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(C&3)===0||yi(p,C)||(f=!0,g4(p,C));p=p.next}while(f);Sf=!1}}function Ud(){c4()}function c4(){Xo=Tf=!1;var a=0;qr!==0&&Kd()&&(a=qr);for(var o=nn(),f=null,p=Ko;p!==null;){var d=p.next,C=f4(p,o);C===0?(p.next=null,f===null?Ko=d:f.next=d,d===null&&(H0=f)):(f=p,(a!==0||(C&3)!==0)&&(Xo=!0)),p=d}yt!==0&&yt!==5||Ji(a),qr!==0&&(qr=0)}function f4(a,o){for(var f=a.suspendedLanes,p=a.pingedLanes,d=a.expirationTimes,C=a.pendingLanes&-62914561;0<C;){var L=31-an(C),V=1<<L,b=d[L];b===-1?((V&f)===0||(V&p)!==0)&&(d[L]=oy(V,o)):b<=o&&(a.expiredLanes|=V),C&=~V}if(o=Xe,f=we,f=Qs(a,a===o?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p=a.callbackNode,f===0||a===o&&(ke===2||ke===9)||a.cancelPendingCommit!==null)return p!==null&&p!==null&&Bc(p),a.callbackNode=null,a.callbackPriority=0;if((f&3)===0||yi(a,f)){if(o=f&-f,o===a.callbackPriority)return o;switch(p!==null&&Bc(p),_c(f)){case 2:case 8:f=e3;break;case 32:f=Ks;break;case 268435456:f=t3;break;default:f=Ks}return p=l4.bind(null,a),f=Lc(f,p),a.callbackPriority=o,a.callbackNode=f,o}return p!==null&&p!==null&&Bc(p),a.callbackPriority=2,a.callbackNode=null,2}function l4(a,o){if(yt!==0&&yt!==5)return a.callbackNode=null,a.callbackPriority=0,null;var f=a.callbackNode;if(jo()&&a.callbackNode!==f)return null;var p=we;return p=Qs(a,a===Xe?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p===0?null:(X5(a,p,o),f4(a,nn()),a.callbackNode!=null&&a.callbackNode===f?l4.bind(null,a):null)}function g4(a,o){if(jo())return null;X5(a,o,!0)}function Gd(){Yd(function(){(Ge&6)!==0?Lc(I2,Ud):c4()})}function Cf(){if(qr===0){var a=w0;a===0&&(a=Xs,Xs<<=1,(Xs&261888)===0&&(Xs=256)),qr=a}return qr}function h4(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Is(""+a)}function p4(a,o){var f=o.ownerDocument.createElement("input");return f.name=o.name,f.value=o.value,a.id&&f.setAttribute("form",a.id),o.parentNode.insertBefore(f,o),a=new FormData(a),f.parentNode.removeChild(f),a}function bd(a,o,f,p,d){if(o==="submit"&&f&&f.stateNode===d){var C=h4((d[Xt]||null).action),L=p.submitter;L&&(o=(o=L[Xt]||null)?h4(o.formAction):L.getAttribute("formAction"),o!==null&&(C=o,L=null));var V=new ro("action","action",null,p,d);a.push({event:V,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(qr!==0){var b=L?p4(d,L):new FormData(d);k1(f,{pending:!0,data:b,method:d.method,action:C},null,b)}}else typeof C=="function"&&(V.preventDefault(),b=L?p4(d,L):new FormData(d),k1(f,{pending:!0,data:b,method:d.method,action:C},C,b))},currentTarget:d}]})}}for(var xf=0;xf<n1.length;xf++){var Ef=n1[xf],Fd=Ef.toLowerCase(),zd=Ef[0].toUpperCase()+Ef.slice(1);_n(Fd,"on"+zd)}_n(K3,"onAnimationEnd"),_n(X3,"onAnimationIteration"),_n(Y3,"onAnimationStart"),_n("dblclick","onDoubleClick"),_n("focusin","onFocus"),_n("focusout","onBlur"),_n(ed,"onTransitionRun"),_n(td,"onTransitionStart"),_n(nd,"onTransitionCancel"),_n(q3,"onTransitionEnd"),l0("onMouseEnter",["mouseout","mouseover"]),l0("onMouseLeave",["mouseout","mouseover"]),l0("onPointerEnter",["pointerout","pointerover"]),l0("onPointerLeave",["pointerout","pointerover"]),xa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xa("onBeforeInput",["compositionend","keypress","textInput","paste"]),xa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pi));function v4(a,o){o=(o&4)!==0;for(var f=0;f<a.length;f++){var p=a[f],d=p.event;p=p.listeners;e:{var C=void 0;if(o)for(var L=p.length-1;0<=L;L--){var V=p[L],b=V.instance,P=V.currentTarget;if(V=V.listener,b!==C&&d.isPropagationStopped())break e;C=V,d.currentTarget=P;try{C(d)}catch(ne){so(ne)}d.currentTarget=null,C=b}else for(L=0;L<p.length;L++){if(V=p[L],b=V.instance,P=V.currentTarget,V=V.listener,b!==C&&d.isPropagationStopped())break e;C=V,d.currentTarget=P;try{C(d)}catch(ne){so(ne)}d.currentTarget=null,C=b}}}}function Re(a,o){var f=o[Uc];f===void 0&&(f=o[Uc]=new Set);var p=a+"__bubble";f.has(p)||(y4(o,a,2,!1),f.add(p))}function mf(a,o,f){var p=0;o&&(p|=4),y4(f,a,p,o)}var Yo="_reactListening"+Math.random().toString(36).slice(2);function Rf(a){if(!a[Yo]){a[Yo]=!0,c3.forEach(function(f){f!=="selectionchange"&&(kd.has(f)||mf(f,!1,a),mf(f,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Yo]||(o[Yo]=!0,mf("selectionchange",!1,o))}}function y4(a,o,f,p){switch(K4(o)){case 2:var d=hT;break;case 8:d=pT;break;default:d=kf}f=d.bind(null,o,f,a),d=void 0,!Wc||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(d=!0),p?d!==void 0?a.addEventListener(o,f,{capture:!0,passive:d}):a.addEventListener(o,f,!0):d!==void 0?a.addEventListener(o,f,{passive:d}):a.addEventListener(o,f,!1)}function wf(a,o,f,p,d){var C=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var L=p.tag;if(L===3||L===4){var V=p.stateNode.containerInfo;if(V===d)break;if(L===4)for(L=p.return;L!==null;){var b=L.tag;if((b===3||b===4)&&L.stateNode.containerInfo===d)return;L=L.return}for(;V!==null;){if(L=u0(V),L===null)return;if(b=L.tag,b===5||b===6||b===26||b===27){p=C=L;continue e}V=V.parentNode}}p=p.return}x3(function(){var P=C,ne=$c(f),ae=[];e:{var I=Q3.get(a);if(I!==void 0){var te=ro,ce=a;switch(a){case"keypress":if(to(f)===0)break e;case"keydown":case"keyup":te=Ny;break;case"focusin":ce="focus",te=Yc;break;case"focusout":ce="blur",te=Yc;break;case"beforeblur":case"afterblur":te=Yc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=R3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Cy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Gy;break;case K3:case X3:case Y3:te=my;break;case q3:te=Fy;break;case"scroll":case"scrollend":te=Ty;break;case"wheel":te=ky;break;case"copy":case"cut":case"paste":te=wy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=M3;break;case"toggle":case"beforetoggle":te=$y}var he=(o&4)!==0,Ke=!he&&(a==="scroll"||a==="scrollend"),j=he?I!==null?I+"Capture":null:I;he=[];for(var k=P,J;k!==null;){var re=k;if(J=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||J===null||j===null||(re=Ci(k,j),re!=null&&he.push(Ii(k,re,J))),Ke)break;k=k.return}0<he.length&&(I=new te(I,ce,null,f,ne),ae.push({event:I,listeners:he}))}}if((o&7)===0){e:{if(I=a==="mouseover"||a==="pointerover",te=a==="mouseout"||a==="pointerout",I&&f!==Hc&&(ce=f.relatedTarget||f.fromElement)&&(u0(ce)||ce[o0]))break e;if((te||I)&&(I=ne.window===ne?ne:(I=ne.ownerDocument)?I.defaultView||I.parentWindow:window,te?(ce=f.relatedTarget||f.toElement,te=P,ce=ce?u0(ce):null,ce!==null&&(Ke=s(ce),he=ce.tag,ce!==Ke||he!==5&&he!==27&&he!==6)&&(ce=null)):(te=null,ce=P),te!==ce)){if(he=R3,re="onMouseLeave",j="onMouseEnter",k="mouse",(a==="pointerout"||a==="pointerover")&&(he=M3,re="onPointerLeave",j="onPointerEnter",k="pointer"),Ke=te==null?I:Si(te),J=ce==null?I:Si(ce),I=new he(re,k+"leave",te,f,ne),I.target=Ke,I.relatedTarget=J,re=null,u0(ne)===P&&(he=new he(j,k+"enter",ce,f,ne),he.target=J,he.relatedTarget=Ke,re=he),Ke=re,te&&ce)t:{for(he=Hd,j=te,k=ce,J=0,re=j;re;re=he(re))J++;re=0;for(var le=k;le;le=he(le))re++;for(;0<J-re;)j=he(j),J--;for(;0<re-J;)k=he(k),re--;for(;J--;){if(j===k||k!==null&&j===k.alternate){he=j;break t}j=he(j),k=he(k)}he=null}else he=null;te!==null&&d4(ae,I,te,he,!1),ce!==null&&Ke!==null&&d4(ae,Ke,ce,he,!0)}}e:{if(I=P?Si(P):window,te=I.nodeName&&I.nodeName.toLowerCase(),te==="select"||te==="input"&&I.type==="file")var Ne=U3;else if(N3(I))if(G3)Ne=Jy;else{Ne=Qy;var fe=qy}else te=I.nodeName,!te||te.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?P&&kc(P.elementType)&&(Ne=U3):Ne=Zy;if(Ne&&(Ne=Ne(a,P))){_3(ae,Ne,f,ne);break e}fe&&fe(a,I,P),a==="focusout"&&P&&I.type==="number"&&P.memoizedProps.value!=null&&zc(I,"number",I.value)}switch(fe=P?Si(P):window,a){case"focusin":(N3(fe)||fe.contentEditable==="true")&&(d0=fe,Ic=P,Di=null);break;case"focusout":Di=Ic=d0=null;break;case"mousedown":e1=!0;break;case"contextmenu":case"mouseup":case"dragend":e1=!1,W3(ae,f,ne);break;case"selectionchange":if(Iy)break;case"keydown":case"keyup":W3(ae,f,ne)}var Se;if(Qc)e:{switch(a){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else y0?B3(a,f)&&(Me="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Me="onCompositionStart");Me&&(O3&&f.locale!=="ko"&&(y0||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&y0&&(Se=E3()):(Nr=ne,jc="value"in Nr?Nr.value:Nr.textContent,y0=!0)),fe=qo(P,Me),0<fe.length&&(Me=new w3(Me,a,null,f,ne),ae.push({event:Me,listeners:fe}),Se?Me.data=Se:(Se=V3(f),Se!==null&&(Me.data=Se)))),(Se=Wy?jy(a,f):Ky(a,f))&&(Me=qo(P,"onBeforeInput"),0<Me.length&&(fe=new w3("onBeforeInput","beforeinput",null,f,ne),ae.push({event:fe,listeners:Me}),fe.data=Se)),bd(ae,a,P,f,ne)}v4(ae,o)})}function Ii(a,o,f){return{instance:a,listener:o,currentTarget:f}}function qo(a,o){for(var f=o+"Capture",p=[];a!==null;){var d=a,C=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||C===null||(d=Ci(a,f),d!=null&&p.unshift(Ii(a,d,C)),d=Ci(a,o),d!=null&&p.push(Ii(a,d,C))),a.tag===3)return p;a=a.return}return[]}function Hd(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function d4(a,o,f,p,d){for(var C=o._reactName,L=[];f!==null&&f!==p;){var V=f,b=V.alternate,P=V.stateNode;if(V=V.tag,b!==null&&b===p)break;V!==5&&V!==26&&V!==27||P===null||(b=P,d?(P=Ci(f,C),P!=null&&L.unshift(Ii(f,P,b))):d||(P=Ci(f,C),P!=null&&L.push(Ii(f,P,b)))),f=f.return}L.length!==0&&a.push({event:o,listeners:L})}var $d=/\r\n?/g,Ad=/\u0000|\uFFFD/g;function T4(a){return(typeof a=="string"?a:""+a).replace($d,`
`).replace(Ad,"")}function S4(a,o){return o=T4(o),T4(a)===o}function je(a,o,f,p,d,C){switch(f){case"children":typeof p=="string"?o==="body"||o==="textarea"&&p===""||h0(a,p):(typeof p=="number"||typeof p=="bigint")&&o!=="body"&&h0(a,""+p);break;case"className":Js(a,"class",p);break;case"tabIndex":Js(a,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Js(a,f,p);break;case"style":S3(a,p,C);break;case"data":if(o!=="object"){Js(a,"data",p);break}case"src":case"href":if(p===""&&(o!=="a"||f!=="href")){a.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(f);break}p=Is(""+p),a.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){a.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(f==="formAction"?(o!=="input"&&je(a,o,"name",d.name,d,null),je(a,o,"formEncType",d.formEncType,d,null),je(a,o,"formMethod",d.formMethod,d,null),je(a,o,"formTarget",d.formTarget,d,null)):(je(a,o,"encType",d.encType,d,null),je(a,o,"method",d.method,d,null),je(a,o,"target",d.target,d,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(f);break}p=Is(""+p),a.setAttribute(f,p);break;case"onClick":p!=null&&(a.onclick=tr);break;case"onScroll":p!=null&&Re("scroll",a);break;case"onScrollEnd":p!=null&&Re("scrollend",a);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(d.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"multiple":a.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":a.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){a.removeAttribute("xlink:href");break}f=Is(""+p),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(f,""+p):a.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(f,""):a.removeAttribute(f);break;case"capture":case"download":p===!0?a.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(f,p):a.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?a.setAttribute(f,p):a.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?a.removeAttribute(f):a.setAttribute(f,p);break;case"popover":Re("beforetoggle",a),Re("toggle",a),Zs(a,"popover",p);break;case"xlinkActuate":er(a,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":er(a,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":er(a,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":er(a,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":er(a,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":er(a,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":er(a,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":er(a,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":er(a,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Zs(a,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=yy.get(f)||f,Zs(a,f,p))}}function Mf(a,o,f,p,d,C){switch(f){case"style":S3(a,p,C);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(d.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"children":typeof p=="string"?h0(a,p):(typeof p=="number"||typeof p=="bigint")&&h0(a,""+p);break;case"onScroll":p!=null&&Re("scroll",a);break;case"onScrollEnd":p!=null&&Re("scrollend",a);break;case"onClick":p!=null&&(a.onclick=tr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!f3.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(d=f.endsWith("Capture"),o=f.slice(2,d?f.length-7:void 0),C=a[Xt]||null,C=C!=null?C[f]:null,typeof C=="function"&&a.removeEventListener(o,C,d),typeof p=="function")){typeof C!="function"&&C!==null&&(f in a?a[f]=null:a.hasAttribute(f)&&a.removeAttribute(f)),a.addEventListener(o,p,d);break e}f in a?a[f]=p:p===!0?a.setAttribute(f,""):Zs(a,f,p)}}}function _t(a,o,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",a),Re("load",a);var p=!1,d=!1,C;for(C in f)if(f.hasOwnProperty(C)){var L=f[C];if(L!=null)switch(C){case"src":p=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:je(a,o,C,L,f,null)}}d&&je(a,o,"srcSet",f.srcSet,f,null),p&&je(a,o,"src",f.src,f,null);return;case"input":Re("invalid",a);var V=C=L=d=null,b=null,P=null;for(p in f)if(f.hasOwnProperty(p)){var ne=f[p];if(ne!=null)switch(p){case"name":d=ne;break;case"type":L=ne;break;case"checked":b=ne;break;case"defaultChecked":P=ne;break;case"value":C=ne;break;case"defaultValue":V=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,o));break;default:je(a,o,p,ne,f,null)}}v3(a,C,V,b,P,L,d,!1);return;case"select":Re("invalid",a),p=L=C=null;for(d in f)if(f.hasOwnProperty(d)&&(V=f[d],V!=null))switch(d){case"value":C=V;break;case"defaultValue":L=V;break;case"multiple":p=V;default:je(a,o,d,V,f,null)}o=C,f=L,a.multiple=!!p,o!=null?g0(a,!!p,o,!1):f!=null&&g0(a,!!p,f,!0);return;case"textarea":Re("invalid",a),C=d=p=null;for(L in f)if(f.hasOwnProperty(L)&&(V=f[L],V!=null))switch(L){case"value":p=V;break;case"defaultValue":d=V;break;case"children":C=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(91));break;default:je(a,o,L,V,f,null)}d3(a,p,d,C);return;case"option":for(b in f)if(f.hasOwnProperty(b)&&(p=f[b],p!=null))switch(b){case"selected":a.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:je(a,o,b,p,f,null)}return;case"dialog":Re("beforetoggle",a),Re("toggle",a),Re("cancel",a),Re("close",a);break;case"iframe":case"object":Re("load",a);break;case"video":case"audio":for(p=0;p<Pi.length;p++)Re(Pi[p],a);break;case"image":Re("error",a),Re("load",a);break;case"details":Re("toggle",a);break;case"embed":case"source":case"link":Re("error",a),Re("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in f)if(f.hasOwnProperty(P)&&(p=f[P],p!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:je(a,o,P,p,f,null)}return;default:if(kc(o)){for(ne in f)f.hasOwnProperty(ne)&&(p=f[ne],p!==void 0&&Mf(a,o,ne,p,f,void 0));return}}for(V in f)f.hasOwnProperty(V)&&(p=f[V],p!=null&&je(a,o,V,p,f,null))}function Wd(a,o,f,p){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,C=null,L=null,V=null,b=null,P=null,ne=null;for(te in f){var ae=f[te];if(f.hasOwnProperty(te)&&ae!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":b=ae;default:p.hasOwnProperty(te)||je(a,o,te,null,p,ae)}}for(var I in p){var te=p[I];if(ae=f[I],p.hasOwnProperty(I)&&(te!=null||ae!=null))switch(I){case"type":C=te;break;case"name":d=te;break;case"checked":P=te;break;case"defaultChecked":ne=te;break;case"value":L=te;break;case"defaultValue":V=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,o));break;default:te!==ae&&je(a,o,I,te,p,ae)}}Fc(a,L,V,b,P,ne,C,d);return;case"select":te=L=V=I=null;for(C in f)if(b=f[C],f.hasOwnProperty(C)&&b!=null)switch(C){case"value":break;case"multiple":te=b;default:p.hasOwnProperty(C)||je(a,o,C,null,p,b)}for(d in p)if(C=p[d],b=f[d],p.hasOwnProperty(d)&&(C!=null||b!=null))switch(d){case"value":I=C;break;case"defaultValue":V=C;break;case"multiple":L=C;default:C!==b&&je(a,o,d,C,p,b)}o=V,f=L,p=te,I!=null?g0(a,!!f,I,!1):!!p!=!!f&&(o!=null?g0(a,!!f,o,!0):g0(a,!!f,f?[]:"",!1));return;case"textarea":te=I=null;for(V in f)if(d=f[V],f.hasOwnProperty(V)&&d!=null&&!p.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:je(a,o,V,null,p,d)}for(L in p)if(d=p[L],C=f[L],p.hasOwnProperty(L)&&(d!=null||C!=null))switch(L){case"value":I=d;break;case"defaultValue":te=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==C&&je(a,o,L,d,p,C)}y3(a,I,te);return;case"option":for(var ce in f)if(I=f[ce],f.hasOwnProperty(ce)&&I!=null&&!p.hasOwnProperty(ce))switch(ce){case"selected":a.selected=!1;break;default:je(a,o,ce,null,p,I)}for(b in p)if(I=p[b],te=f[b],p.hasOwnProperty(b)&&I!==te&&(I!=null||te!=null))switch(b){case"selected":a.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:je(a,o,b,I,p,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var he in f)I=f[he],f.hasOwnProperty(he)&&I!=null&&!p.hasOwnProperty(he)&&je(a,o,he,null,p,I);for(P in p)if(I=p[P],te=f[P],p.hasOwnProperty(P)&&I!==te&&(I!=null||te!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(137,o));break;default:je(a,o,P,I,p,te)}return;default:if(kc(o)){for(var Ke in f)I=f[Ke],f.hasOwnProperty(Ke)&&I!==void 0&&!p.hasOwnProperty(Ke)&&Mf(a,o,Ke,void 0,p,I);for(ne in p)I=p[ne],te=f[ne],!p.hasOwnProperty(ne)||I===te||I===void 0&&te===void 0||Mf(a,o,ne,I,p,te);return}}for(var j in f)I=f[j],f.hasOwnProperty(j)&&I!=null&&!p.hasOwnProperty(j)&&je(a,o,j,null,p,I);for(ae in p)I=p[ae],te=f[ae],!p.hasOwnProperty(ae)||I===te||I==null&&te==null||je(a,o,ae,I,p,te)}function C4(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function jd(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,f=performance.getEntriesByType("resource"),p=0;p<f.length;p++){var d=f[p],C=d.transferSize,L=d.initiatorType,V=d.duration;if(C&&V&&C4(L)){for(L=0,V=d.responseEnd,p+=1;p<f.length;p++){var b=f[p],P=b.startTime;if(P>V)break;var ne=b.transferSize,ae=b.initiatorType;ne&&C4(ae)&&(b=b.responseEnd,L+=ne*(b<V?1:(V-P)/(b-P)))}if(--p,o+=8*(C+L)/(d.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var Of=null,Df=null;function Qo(a){return a.nodeType===9?a:a.ownerDocument}function x4(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function E4(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Lf(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Bf=null;function Kd(){var a=window.event;return a&&a.type==="popstate"?a===Bf?!1:(Bf=a,!0):(Bf=null,!1)}var m4=typeof setTimeout=="function"?setTimeout:void 0,Xd=typeof clearTimeout=="function"?clearTimeout:void 0,R4=typeof Promise=="function"?Promise:void 0,Yd=typeof queueMicrotask=="function"?queueMicrotask:typeof R4<"u"?function(a){return R4.resolve(null).then(a).catch(qd)}:m4;function qd(a){setTimeout(function(){throw a})}function Qr(a){return a==="head"}function w4(a,o){var f=o,p=0;do{var d=f.nextSibling;if(a.removeChild(f),d&&d.nodeType===8)if(f=d.data,f==="/$"||f==="/&"){if(p===0){a.removeChild(d),j0(o);return}p--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")p++;else if(f==="html")es(a.ownerDocument.documentElement);else if(f==="head"){f=a.ownerDocument.head,es(f);for(var C=f.firstChild;C;){var L=C.nextSibling,V=C.nodeName;C[Ti]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&C.rel.toLowerCase()==="stylesheet"||f.removeChild(C),C=L}}else f==="body"&&es(a.ownerDocument.body);f=d}while(f);j0(o)}function M4(a,o){var f=a;a=0;do{var p=f.nextSibling;if(f.nodeType===1?o?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(o?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),p&&p.nodeType===8)if(f=p.data,f==="/$"){if(a===0)break;a--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||a++;f=p}while(f)}function Vf(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var f=o;switch(o=o.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Vf(f),Gc(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}a.removeChild(f)}}function Qd(a,o,f,p){for(;a.nodeType===1;){var d=f;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!p&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(p){if(!a[Ti])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(C=a.getAttribute("rel"),C==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(C!==d.rel||a.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||a.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||a.getAttribute("title")!==(d.title==null?null:d.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(C=a.getAttribute("src"),(C!==(d.src==null?null:d.src)||a.getAttribute("type")!==(d.type==null?null:d.type)||a.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&C&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var C=d.name==null?null:""+d.name;if(d.type==="hidden"&&a.getAttribute("name")===C)return a}else return a;if(a=Rn(a.nextSibling),a===null)break}return null}function Zd(a,o,f){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!f||(a=Rn(a.nextSibling),a===null))return null;return a}function O4(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=Rn(a.nextSibling),a===null))return null;return a}function Nf(a){return a.data==="$?"||a.data==="$~"}function _f(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function Jd(a,o){var f=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||f.readyState!=="loading")o();else{var p=function(){o(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),a._reactRetry=p}}function Rn(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var Uf=null;function D4(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"||f==="/&"){if(o===0)return Rn(a.nextSibling);o--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||o++}a=a.nextSibling}return null}function L4(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(o===0)return a;o--}else f!=="/$"&&f!=="/&"||o++}a=a.previousSibling}return null}function B4(a,o,f){switch(o=Qo(f),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function es(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Gc(a)}var wn=new Map,V4=new Set;function Zo(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var dr=W.d;W.d={f:Pd,r:Id,D:eT,C:tT,L:nT,m:rT,X:iT,S:aT,M:sT};function Pd(){var a=dr.f(),o=$o();return a||o}function Id(a){var o=c0(a);o!==null&&o.tag===5&&o.type==="form"?qg(o):dr.r(a)}var $0=typeof document>"u"?null:document;function N4(a,o,f){var p=$0;if(p&&typeof o=="string"&&o){var d=dn(o);d='link[rel="'+a+'"][href="'+d+'"]',typeof f=="string"&&(d+='[crossorigin="'+f+'"]'),V4.has(d)||(V4.add(d),a={rel:a,crossOrigin:f,href:o},p.querySelector(d)===null&&(o=p.createElement("link"),_t(o,"link",a),xt(o),p.head.appendChild(o)))}}function eT(a){dr.D(a),N4("dns-prefetch",a,null)}function tT(a,o){dr.C(a,o),N4("preconnect",a,o)}function nT(a,o,f){dr.L(a,o,f);var p=$0;if(p&&a&&o){var d='link[rel="preload"][as="'+dn(o)+'"]';o==="image"&&f&&f.imageSrcSet?(d+='[imagesrcset="'+dn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(d+='[imagesizes="'+dn(f.imageSizes)+'"]')):d+='[href="'+dn(a)+'"]';var C=d;switch(o){case"style":C=A0(a);break;case"script":C=W0(a)}wn.has(C)||(a=h({rel:"preload",href:o==="image"&&f&&f.imageSrcSet?void 0:a,as:o},f),wn.set(C,a),p.querySelector(d)!==null||o==="style"&&p.querySelector(ts(C))||o==="script"&&p.querySelector(ns(C))||(o=p.createElement("link"),_t(o,"link",a),xt(o),p.head.appendChild(o)))}}function rT(a,o){dr.m(a,o);var f=$0;if(f&&a){var p=o&&typeof o.as=="string"?o.as:"script",d='link[rel="modulepreload"][as="'+dn(p)+'"][href="'+dn(a)+'"]',C=d;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=W0(a)}if(!wn.has(C)&&(a=h({rel:"modulepreload",href:a},o),wn.set(C,a),f.querySelector(d)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(ns(C)))return}p=f.createElement("link"),_t(p,"link",a),xt(p),f.head.appendChild(p)}}}function aT(a,o,f){dr.S(a,o,f);var p=$0;if(p&&a){var d=f0(p).hoistableStyles,C=A0(a);o=o||"default";var L=d.get(C);if(!L){var V={loading:0,preload:null};if(L=p.querySelector(ts(C)))V.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":o},f),(f=wn.get(C))&&Gf(a,f);var b=L=p.createElement("link");xt(b),_t(b,"link",a),b._p=new Promise(function(P,ne){b.onload=P,b.onerror=ne}),b.addEventListener("load",function(){V.loading|=1}),b.addEventListener("error",function(){V.loading|=2}),V.loading|=4,Jo(L,o,p)}L={type:"stylesheet",instance:L,count:1,state:V},d.set(C,L)}}}function iT(a,o){dr.X(a,o);var f=$0;if(f&&a){var p=f0(f).hoistableScripts,d=W0(a),C=p.get(d);C||(C=f.querySelector(ns(d)),C||(a=h({src:a,async:!0},o),(o=wn.get(d))&&bf(a,o),C=f.createElement("script"),xt(C),_t(C,"link",a),f.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},p.set(d,C))}}function sT(a,o){dr.M(a,o);var f=$0;if(f&&a){var p=f0(f).hoistableScripts,d=W0(a),C=p.get(d);C||(C=f.querySelector(ns(d)),C||(a=h({src:a,async:!0,type:"module"},o),(o=wn.get(d))&&bf(a,o),C=f.createElement("script"),xt(C),_t(C,"link",a),f.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},p.set(d,C))}}function _4(a,o,f,p){var d=(d=ue.current)?Zo(d):null;if(!d)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(o=A0(f.href),f=f0(d).hoistableStyles,p=f.get(o),p||(p={type:"style",instance:null,count:0,state:null},f.set(o,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){a=A0(f.href);var C=f0(d).hoistableStyles,L=C.get(a);if(L||(d=d.ownerDocument||d,L={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(a,L),(C=d.querySelector(ts(a)))&&!C._p&&(L.instance=C,L.state.loading=5),wn.has(a)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},wn.set(a,f),C||oT(d,a,f,L.state))),o&&p===null)throw Error(r(528,""));return L}if(o&&p!==null)throw Error(r(529,""));return null;case"script":return o=f.async,f=f.src,typeof f=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=W0(f),f=f0(d).hoistableScripts,p=f.get(o),p||(p={type:"script",instance:null,count:0,state:null},f.set(o,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function A0(a){return'href="'+dn(a)+'"'}function ts(a){return'link[rel="stylesheet"]['+a+"]"}function U4(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function oT(a,o,f,p){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?p.loading=1:(o=a.createElement("link"),p.preload=o,o.addEventListener("load",function(){return p.loading|=1}),o.addEventListener("error",function(){return p.loading|=2}),_t(o,"link",f),xt(o),a.head.appendChild(o))}function W0(a){return'[src="'+dn(a)+'"]'}function ns(a){return"script[async]"+a}function G4(a,o,f){if(o.count++,o.instance===null)switch(o.type){case"style":var p=a.querySelector('style[data-href~="'+dn(f.href)+'"]');if(p)return o.instance=p,xt(p),p;var d=h({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(a.ownerDocument||a).createElement("style"),xt(p),_t(p,"style",d),Jo(p,f.precedence,a),o.instance=p;case"stylesheet":d=A0(f.href);var C=a.querySelector(ts(d));if(C)return o.state.loading|=4,o.instance=C,xt(C),C;p=U4(f),(d=wn.get(d))&&Gf(p,d),C=(a.ownerDocument||a).createElement("link"),xt(C);var L=C;return L._p=new Promise(function(V,b){L.onload=V,L.onerror=b}),_t(C,"link",p),o.state.loading|=4,Jo(C,f.precedence,a),o.instance=C;case"script":return C=W0(f.src),(d=a.querySelector(ns(C)))?(o.instance=d,xt(d),d):(p=f,(d=wn.get(C))&&(p=h({},f),bf(p,d)),a=a.ownerDocument||a,d=a.createElement("script"),xt(d),_t(d,"link",p),a.head.appendChild(d),o.instance=d);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(p=o.instance,o.state.loading|=4,Jo(p,f.precedence,a));return o.instance}function Jo(a,o,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=p.length?p[p.length-1]:null,C=d,L=0;L<p.length;L++){var V=p[L];if(V.dataset.precedence===o)C=V;else if(C!==d)break}C?C.parentNode.insertBefore(a,C.nextSibling):(o=f.nodeType===9?f.head:f,o.insertBefore(a,o.firstChild))}function Gf(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function bf(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var Po=null;function b4(a,o,f){if(Po===null){var p=new Map,d=Po=new Map;d.set(f,p)}else d=Po,p=d.get(f),p||(p=new Map,d.set(f,p));if(p.has(a))return p;for(p.set(a,null),f=f.getElementsByTagName(a),d=0;d<f.length;d++){var C=f[d];if(!(C[Ti]||C[Lt]||a==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var L=C.getAttribute(o)||"";L=a+L;var V=p.get(L);V?V.push(C):p.set(L,[C])}}return p}function F4(a,o,f){a=a.ownerDocument||a,a.head.insertBefore(f,o==="title"?a.querySelector("head > title"):null)}function uT(a,o,f){if(f===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function z4(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function cT(a,o,f,p){if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var d=A0(p.href),C=o.querySelector(ts(d));if(C){o=C._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=Io.bind(a),o.then(a,a)),f.state.loading|=4,f.instance=C,xt(C);return}C=o.ownerDocument||o,p=U4(p),(d=wn.get(d))&&Gf(p,d),C=C.createElement("link"),xt(C);var L=C;L._p=new Promise(function(V,b){L.onload=V,L.onerror=b}),_t(C,"link",p),f.instance=C}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(f,o),(o=f.state.preload)&&(f.state.loading&3)===0&&(a.count++,f=Io.bind(a),o.addEventListener("load",f),o.addEventListener("error",f))}}var Ff=0;function fT(a,o){return a.stylesheets&&a.count===0&&tu(a,a.stylesheets),0<a.count||0<a.imgCount?function(f){var p=setTimeout(function(){if(a.stylesheets&&tu(a,a.stylesheets),a.unsuspend){var C=a.unsuspend;a.unsuspend=null,C()}},6e4+o);0<a.imgBytes&&Ff===0&&(Ff=62500*jd());var d=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&tu(a,a.stylesheets),a.unsuspend)){var C=a.unsuspend;a.unsuspend=null,C()}},(a.imgBytes>Ff?50:800)+o);return a.unsuspend=f,function(){a.unsuspend=null,clearTimeout(p),clearTimeout(d)}}:null}function Io(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tu(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var eu=null;function tu(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,eu=new Map,o.forEach(lT,a),eu=null,Io.call(a))}function lT(a,o){if(!(o.state.loading&4)){var f=eu.get(a);if(f)var p=f.get(null);else{f=new Map,eu.set(a,f);for(var d=a.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<d.length;C++){var L=d[C];(L.nodeName==="LINK"||L.getAttribute("media")!=="not all")&&(f.set(L.dataset.precedence,L),p=L)}p&&f.set(null,p)}d=o.instance,L=d.getAttribute("data-precedence"),C=f.get(L)||p,C===p&&f.set(null,d),f.set(L,d),this.count++,p=Io.bind(this),d.addEventListener("load",p),d.addEventListener("error",p),C?C.parentNode.insertBefore(d,C.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(d,a.firstChild)),o.state.loading|=4}}var rs={$$typeof:R,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function gT(a,o,f,p,d,C,L,V,b){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vc(0),this.hiddenUpdates=Vc(null),this.identifierPrefix=p,this.onUncaughtError=d,this.onCaughtError=C,this.onRecoverableError=L,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function k4(a,o,f,p,d,C,L,V,b,P,ne,ae){return a=new gT(a,o,f,L,b,P,ne,ae,V),o=1,C===!0&&(o|=24),C=on(3,null,null,o),a.current=C,C.stateNode=a,o=v1(),o.refCount++,a.pooledCache=o,o.refCount++,C.memoizedState={element:p,isDehydrated:f,cache:o},S1(C),a}function H4(a){return a?(a=C0,a):C0}function $4(a,o,f,p,d,C){d=H4(d),p.context===null?p.context=d:p.pendingContext=d,p=zr(o),p.payload={element:f},C=C===void 0?null:C,C!==null&&(p.callback=C),f=kr(a,p,o),f!==null&&(Pt(f,a,o),Gi(f,a,o))}function A4(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<o?f:o}}function zf(a,o){A4(a,o),(a=a.alternate)&&A4(a,o)}function W4(a){if(a.tag===13||a.tag===31){var o=wa(a,67108864);o!==null&&Pt(o,a,67108864),zf(a,67108864)}}function j4(a){if(a.tag===13||a.tag===31){var o=gn();o=Nc(o);var f=wa(a,o);f!==null&&Pt(f,a,o),zf(a,o)}}var nu=!0;function hT(a,o,f,p){var d=G.T;G.T=null;var C=W.p;try{W.p=2,kf(a,o,f,p)}finally{W.p=C,G.T=d}}function pT(a,o,f,p){var d=G.T;G.T=null;var C=W.p;try{W.p=8,kf(a,o,f,p)}finally{W.p=C,G.T=d}}function kf(a,o,f,p){if(nu){var d=Hf(p);if(d===null)wf(a,o,p,ru,f),X4(a,p);else if(yT(d,a,o,f,p))p.stopPropagation();else if(X4(a,p),o&4&&-1<vT.indexOf(a)){for(;d!==null;){var C=c0(d);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var L=Ca(C.pendingLanes);if(L!==0){var V=C;for(V.pendingLanes|=2,V.entangledLanes|=2;L;){var b=1<<31-an(L);V.entanglements[1]|=b,L&=~b}jn(C),(Ge&6)===0&&(ko=nn()+500,Ji(0))}}break;case 31:case 13:V=wa(C,2),V!==null&&Pt(V,C,2),$o(),zf(C,2)}if(C=Hf(p),C===null&&wf(a,o,p,ru,f),C===d)break;d=C}d!==null&&p.stopPropagation()}else wf(a,o,p,null,f)}}function Hf(a){return a=$c(a),$f(a)}var ru=null;function $f(a){if(ru=null,a=u0(a),a!==null){var o=s(a);if(o===null)a=null;else{var f=o.tag;if(f===13){if(a=u(o),a!==null)return a;a=null}else if(f===31){if(a=c(o),a!==null)return a;a=null}else if(f===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return ru=a,null}function K4(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ey()){case I2:return 2;case e3:return 8;case Ks:case ty:return 32;case t3:return 268435456;default:return 32}default:return 32}}var Af=!1,Zr=null,Jr=null,Pr=null,as=new Map,is=new Map,Ir=[],vT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X4(a,o){switch(a){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":as.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":is.delete(o.pointerId)}}function ss(a,o,f,p,d,C){return a===null||a.nativeEvent!==C?(a={blockedOn:o,domEventName:f,eventSystemFlags:p,nativeEvent:C,targetContainers:[d]},o!==null&&(o=c0(o),o!==null&&W4(o)),a):(a.eventSystemFlags|=p,o=a.targetContainers,d!==null&&o.indexOf(d)===-1&&o.push(d),a)}function yT(a,o,f,p,d){switch(o){case"focusin":return Zr=ss(Zr,a,o,f,p,d),!0;case"dragenter":return Jr=ss(Jr,a,o,f,p,d),!0;case"mouseover":return Pr=ss(Pr,a,o,f,p,d),!0;case"pointerover":var C=d.pointerId;return as.set(C,ss(as.get(C)||null,a,o,f,p,d)),!0;case"gotpointercapture":return C=d.pointerId,is.set(C,ss(is.get(C)||null,a,o,f,p,d)),!0}return!1}function Y4(a){var o=u0(a.target);if(o!==null){var f=s(o);if(f!==null){if(o=f.tag,o===13){if(o=u(f),o!==null){a.blockedOn=o,o3(a.priority,function(){j4(f)});return}}else if(o===31){if(o=c(f),o!==null){a.blockedOn=o,o3(a.priority,function(){j4(f)});return}}else if(o===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function au(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var f=Hf(a.nativeEvent);if(f===null){f=a.nativeEvent;var p=new f.constructor(f.type,f);Hc=p,f.target.dispatchEvent(p),Hc=null}else return o=c0(f),o!==null&&W4(o),a.blockedOn=f,!1;o.shift()}return!0}function q4(a,o,f){au(a)&&f.delete(o)}function dT(){Af=!1,Zr!==null&&au(Zr)&&(Zr=null),Jr!==null&&au(Jr)&&(Jr=null),Pr!==null&&au(Pr)&&(Pr=null),as.forEach(q4),is.forEach(q4)}function iu(a,o){a.blockedOn===o&&(a.blockedOn=null,Af||(Af=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,dT)))}var su=null;function Q4(a){su!==a&&(su=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){su===a&&(su=null);for(var o=0;o<a.length;o+=3){var f=a[o],p=a[o+1],d=a[o+2];if(typeof p!="function"){if($f(p||f)===null)continue;break}var C=c0(f);C!==null&&(a.splice(o,3),o-=3,k1(C,{pending:!0,data:d,method:f.method,action:p},p,d))}}))}function j0(a){function o(b){return iu(b,a)}Zr!==null&&iu(Zr,a),Jr!==null&&iu(Jr,a),Pr!==null&&iu(Pr,a),as.forEach(o),is.forEach(o);for(var f=0;f<Ir.length;f++){var p=Ir[f];p.blockedOn===a&&(p.blockedOn=null)}for(;0<Ir.length&&(f=Ir[0],f.blockedOn===null);)Y4(f),f.blockedOn===null&&Ir.shift();if(f=(a.ownerDocument||a).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var d=f[p],C=f[p+1],L=d[Xt]||null;if(typeof C=="function")L||Q4(f);else if(L){var V=null;if(C&&C.hasAttribute("formAction")){if(d=C,L=C[Xt]||null)V=L.formAction;else if($f(d)!==null)continue}else V=L.action;typeof V=="function"?f[p+1]=V:(f.splice(p,3),p-=3),Q4(f)}}}function Z4(){function a(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(L){return d=L})},focusReset:"manual",scroll:"manual"})}function o(){d!==null&&(d(),d=null),p||setTimeout(f,20)}function f(){if(!p&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,d=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(f,100),function(){p=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),d!==null&&(d(),d=null)}}}function Wf(a){this._internalRoot=a}ou.prototype.render=Wf.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var f=o.current,p=gn();$4(f,p,a,o,null,null)},ou.prototype.unmount=Wf.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;$4(a.current,2,null,a,null,null),$o(),o[o0]=null}};function ou(a){this._internalRoot=a}ou.prototype.unstable_scheduleHydration=function(a){if(a){var o=s3();a={blockedOn:null,target:a,priority:o};for(var f=0;f<Ir.length&&o!==0&&o<Ir[f].priority;f++);Ir.splice(f,0,a),f===0&&Y4(a)}};var J4=e.version;if(J4!=="19.2.0")throw Error(r(527,J4,"19.2.0"));W.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=g(o),a=a!==null?v(a):null,a=a===null?null:a.stateNode,a};var TT={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uu.isDisabled&&uu.supportsFiber)try{vi=uu.inject(TT),rn=uu}catch{}}return cs.createRoot=function(a,o){if(!i(a))throw Error(r(299));var f=!1,p="",d=a5,C=i5,L=s5;return o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(d=o.onUncaughtError),o.onCaughtError!==void 0&&(C=o.onCaughtError),o.onRecoverableError!==void 0&&(L=o.onRecoverableError)),o=k4(a,1,!1,null,null,f,p,null,d,C,L,Z4),a[o0]=o.current,Rf(a),new Wf(o)},cs.hydrateRoot=function(a,o,f){if(!i(a))throw Error(r(299));var p=!1,d="",C=a5,L=i5,V=s5,b=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(d=f.identifierPrefix),f.onUncaughtError!==void 0&&(C=f.onUncaughtError),f.onCaughtError!==void 0&&(L=f.onCaughtError),f.onRecoverableError!==void 0&&(V=f.onRecoverableError),f.formState!==void 0&&(b=f.formState)),o=k4(a,1,!0,o,f??null,p,d,b,C,L,V,Z4),o.context=H4(null),f=o.current,p=gn(),p=Nc(p),d=zr(p),d.callback=null,kr(f,d,p),f=p,o.current.lanes=f,di(o,f),jn(o),a[o0]=o.current,Rf(a),new ou(o)},cs.version="19.2.0",cs}var o9;function BT(){if(o9)return Xf.exports;o9=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Xf.exports=LT(),Xf.exports}var VT=BT();const NT=ci(VT);var Be=1e-6,Ot=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function f6(){var t=new Ot(9);return Ot!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function f2(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function _T(t){var e=new Ot(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function UT(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function GT(t,e,n,r,i,s,u,c,l){var g=new Ot(9);return g[0]=t,g[1]=e,g[2]=n,g[3]=r,g[4]=i,g[5]=s,g[6]=u,g[7]=c,g[8]=l,g}function bT(t,e,n,r,i,s,u,c,l,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=g,t}function ya(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function l6(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function l2(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],u=e[4],c=e[5],l=e[6],g=e[7],v=e[8],h=v*u-c*g,y=-v*s+c*l,T=g*s-u*l,E=n*h+r*y+i*T;return E?(E=1/E,t[0]=h*E,t[1]=(-v*r+i*g)*E,t[2]=(c*r-i*u)*E,t[3]=y*E,t[4]=(v*n-i*l)*E,t[5]=(-c*n+i*s)*E,t[6]=T*E,t[7]=(-g*n+r*l)*E,t[8]=(u*n-r*s)*E,t):null}function FT(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],u=e[4],c=e[5],l=e[6],g=e[7],v=e[8];return t[0]=u*v-c*g,t[1]=i*g-r*v,t[2]=r*c-i*u,t[3]=c*l-s*v,t[4]=n*v-i*l,t[5]=i*s-n*c,t[6]=s*g-u*l,t[7]=r*l-n*g,t[8]=n*u-r*s,t}function zT(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],g=t[8];return e*(g*s-u*l)+n*(-g*i+u*c)+r*(l*i-s*c)}function g6(t,e,n){var r=e[0],i=e[1],s=e[2],u=e[3],c=e[4],l=e[5],g=e[6],v=e[7],h=e[8],y=n[0],T=n[1],E=n[2],S=n[3],x=n[4],m=n[5],M=n[6],R=n[7],w=n[8];return t[0]=y*r+T*u+E*g,t[1]=y*i+T*c+E*v,t[2]=y*s+T*l+E*h,t[3]=S*r+x*u+m*g,t[4]=S*i+x*c+m*v,t[5]=S*s+x*l+m*h,t[6]=M*r+R*u+w*g,t[7]=M*i+R*c+w*v,t[8]=M*s+R*l+w*h,t}function kT(t,e,n){var r=e[0],i=e[1],s=e[2],u=e[3],c=e[4],l=e[5],g=e[6],v=e[7],h=e[8],y=n[0],T=n[1];return t[0]=r,t[1]=i,t[2]=s,t[3]=u,t[4]=c,t[5]=l,t[6]=y*r+T*u+g,t[7]=y*i+T*c+v,t[8]=y*s+T*l+h,t}function HT(t,e,n){var r=e[0],i=e[1],s=e[2],u=e[3],c=e[4],l=e[5],g=e[6],v=e[7],h=e[8],y=Math.sin(n),T=Math.cos(n);return t[0]=T*r+y*u,t[1]=T*i+y*c,t[2]=T*s+y*l,t[3]=T*u-y*r,t[4]=T*c-y*i,t[5]=T*l-y*s,t[6]=g,t[7]=v,t[8]=h,t}function $T(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function AT(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function WT(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function jT(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function KT(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function XT(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],u=n+n,c=r+r,l=i+i,g=n*u,v=r*u,h=r*c,y=i*u,T=i*c,E=i*l,S=s*u,x=s*c,m=s*l;return t[0]=1-h-E,t[3]=v-m,t[6]=y+x,t[1]=v+m,t[4]=1-g-E,t[7]=T-S,t[2]=y-x,t[5]=T+S,t[8]=1-g-h,t}function YT(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],u=e[4],c=e[5],l=e[6],g=e[7],v=e[8],h=e[9],y=e[10],T=e[11],E=e[12],S=e[13],x=e[14],m=e[15],M=n*c-r*u,R=n*l-i*u,w=n*g-s*u,D=r*l-i*c,O=r*g-s*c,_=i*g-s*l,N=v*S-h*E,F=v*x-y*E,z=v*m-T*E,$=h*x-y*S,Y=h*m-T*S,A=y*m-T*x,K=M*A-R*Y+w*$+D*z-O*F+_*N;return K?(K=1/K,t[0]=(c*A-l*Y+g*$)*K,t[1]=(l*z-u*A-g*F)*K,t[2]=(u*Y-c*z+g*N)*K,t[3]=(i*Y-r*A-s*$)*K,t[4]=(n*A-i*z+s*F)*K,t[5]=(r*z-n*Y-s*N)*K,t[6]=(S*_-x*O+m*D)*K,t[7]=(x*w-E*_-m*R)*K,t[8]=(E*O-S*w+m*M)*K,t):null}function qT(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function QT(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function ZT(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function JT(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function h6(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function PT(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function IT(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function eS(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function tS(t,e){var n=t[0],r=t[1],i=t[2],s=t[3],u=t[4],c=t[5],l=t[6],g=t[7],v=t[8],h=e[0],y=e[1],T=e[2],E=e[3],S=e[4],x=e[5],m=e[6],M=e[7],R=e[8];return Math.abs(n-h)<=Be*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-y)<=Be*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(i-T)<=Be*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(s-E)<=Be*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-S)<=Be*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-x)<=Be*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(l-m)<=Be*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(g-M)<=Be*Math.max(1,Math.abs(g),Math.abs(M))&&Math.abs(v-R)<=Be*Math.max(1,Math.abs(v),Math.abs(R))}var nS=g6,rS=h6;const aS=Object.freeze(Object.defineProperty({__proto__:null,add:JT,adjoint:FT,clone:_T,copy:UT,create:f6,determinant:zT,equals:tS,exactEquals:eS,frob:ZT,fromMat2d:KT,fromMat4:f2,fromQuat:XT,fromRotation:WT,fromScaling:jT,fromTranslation:AT,fromValues:GT,identity:ya,invert:l2,mul:nS,multiply:g6,multiplyScalar:PT,multiplyScalarAndAdd:IT,normalFromMat4:YT,projection:qT,rotate:HT,scale:$T,set:bT,str:QT,sub:rS,subtract:h6,translate:kT,transpose:l6},Symbol.toStringTag,{value:"Module"}));function hc(){var t=new Ot(16);return Ot!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function iS(t){var e=new Ot(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ft(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function sS(t,e,n,r,i,s,u,c,l,g,v,h,y,T,E,S){var x=new Ot(16);return x[0]=t,x[1]=e,x[2]=n,x[3]=r,x[4]=i,x[5]=s,x[6]=u,x[7]=c,x[8]=l,x[9]=g,x[10]=v,x[11]=h,x[12]=y,x[13]=T,x[14]=E,x[15]=S,x}function oS(t,e,n,r,i,s,u,c,l,g,v,h,y,T,E,S,x){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=g,t[9]=v,t[10]=h,t[11]=y,t[12]=T,t[13]=E,t[14]=S,t[15]=x,t}function Oe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Qe(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],s=e[6],u=e[7],c=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=u,t[14]=c}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function tn(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],u=e[4],c=e[5],l=e[6],g=e[7],v=e[8],h=e[9],y=e[10],T=e[11],E=e[12],S=e[13],x=e[14],m=e[15],M=n*c-r*u,R=n*l-i*u,w=n*g-s*u,D=r*l-i*c,O=r*g-s*c,_=i*g-s*l,N=v*S-h*E,F=v*x-y*E,z=v*m-T*E,$=h*x-y*S,Y=h*m-T*S,A=y*m-T*x,K=M*A-R*Y+w*$+D*z-O*F+_*N;return K?(K=1/K,t[0]=(c*A-l*Y+g*$)*K,t[1]=(i*Y-r*A-s*$)*K,t[2]=(S*_-x*O+m*D)*K,t[3]=(y*O-h*_-T*D)*K,t[4]=(l*z-u*A-g*F)*K,t[5]=(n*A-i*z+s*F)*K,t[6]=(x*w-E*_-m*R)*K,t[7]=(v*_-y*w+T*R)*K,t[8]=(u*Y-c*z+g*N)*K,t[9]=(r*z-n*Y-s*N)*K,t[10]=(E*O-S*w+m*M)*K,t[11]=(h*w-v*O-T*M)*K,t[12]=(c*F-u*$-l*N)*K,t[13]=(n*$-r*F+i*N)*K,t[14]=(S*R-E*D-x*M)*K,t[15]=(v*D-h*R+y*M)*K,t):null}function uS(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],u=e[4],c=e[5],l=e[6],g=e[7],v=e[8],h=e[9],y=e[10],T=e[11],E=e[12],S=e[13],x=e[14],m=e[15];return t[0]=c*(y*m-T*x)-h*(l*m-g*x)+S*(l*T-g*y),t[1]=-(r*(y*m-T*x)-h*(i*m-s*x)+S*(i*T-s*y)),t[2]=r*(l*m-g*x)-c*(i*m-s*x)+S*(i*g-s*l),t[3]=-(r*(l*T-g*y)-c*(i*T-s*y)+h*(i*g-s*l)),t[4]=-(u*(y*m-T*x)-v*(l*m-g*x)+E*(l*T-g*y)),t[5]=n*(y*m-T*x)-v*(i*m-s*x)+E*(i*T-s*y),t[6]=-(n*(l*m-g*x)-u*(i*m-s*x)+E*(i*g-s*l)),t[7]=n*(l*T-g*y)-u*(i*T-s*y)+v*(i*g-s*l),t[8]=u*(h*m-T*S)-v*(c*m-g*S)+E*(c*T-g*h),t[9]=-(n*(h*m-T*S)-v*(r*m-s*S)+E*(r*T-s*h)),t[10]=n*(c*m-g*S)-u*(r*m-s*S)+E*(r*g-s*c),t[11]=-(n*(c*T-g*h)-u*(r*T-s*h)+v*(r*g-s*c)),t[12]=-(u*(h*x-y*S)-v*(c*x-l*S)+E*(c*y-l*h)),t[13]=n*(h*x-y*S)-v*(r*x-i*S)+E*(r*y-i*h),t[14]=-(n*(c*x-l*S)-u*(r*x-i*S)+E*(r*l-i*c)),t[15]=n*(c*y-l*h)-u*(r*y-i*h)+v*(r*l-i*c),t}function cS(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],g=t[8],v=t[9],h=t[10],y=t[11],T=t[12],E=t[13],S=t[14],x=t[15],m=e*u-n*s,M=e*c-r*s,R=e*l-i*s,w=n*c-r*u,D=n*l-i*u,O=r*l-i*c,_=g*E-v*T,N=g*S-h*T,F=g*x-y*T,z=v*S-h*E,$=v*x-y*E,Y=h*x-y*S;return m*Y-M*$+R*z+w*F-D*N+O*_}function wt(t,e,n){var r=e[0],i=e[1],s=e[2],u=e[3],c=e[4],l=e[5],g=e[6],v=e[7],h=e[8],y=e[9],T=e[10],E=e[11],S=e[12],x=e[13],m=e[14],M=e[15],R=n[0],w=n[1],D=n[2],O=n[3];return t[0]=R*r+w*c+D*h+O*S,t[1]=R*i+w*l+D*y+O*x,t[2]=R*s+w*g+D*T+O*m,t[3]=R*u+w*v+D*E+O*M,R=n[4],w=n[5],D=n[6],O=n[7],t[4]=R*r+w*c+D*h+O*S,t[5]=R*i+w*l+D*y+O*x,t[6]=R*s+w*g+D*T+O*m,t[7]=R*u+w*v+D*E+O*M,R=n[8],w=n[9],D=n[10],O=n[11],t[8]=R*r+w*c+D*h+O*S,t[9]=R*i+w*l+D*y+O*x,t[10]=R*s+w*g+D*T+O*m,t[11]=R*u+w*v+D*E+O*M,R=n[12],w=n[13],D=n[14],O=n[15],t[12]=R*r+w*c+D*h+O*S,t[13]=R*i+w*l+D*y+O*x,t[14]=R*s+w*g+D*T+O*m,t[15]=R*u+w*v+D*E+O*M,t}function vt(t,e,n){var r=n[0],i=n[1],s=n[2],u,c,l,g,v,h,y,T,E,S,x,m;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(u=e[0],c=e[1],l=e[2],g=e[3],v=e[4],h=e[5],y=e[6],T=e[7],E=e[8],S=e[9],x=e[10],m=e[11],t[0]=u,t[1]=c,t[2]=l,t[3]=g,t[4]=v,t[5]=h,t[6]=y,t[7]=T,t[8]=E,t[9]=S,t[10]=x,t[11]=m,t[12]=u*r+v*i+E*s+e[12],t[13]=c*r+h*i+S*s+e[13],t[14]=l*r+y*i+x*s+e[14],t[15]=g*r+T*i+m*s+e[15]),t}function ti(t,e,n){var r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Yn(t,e,n,r){var i=r[0],s=r[1],u=r[2],c=Math.hypot(i,s,u),l,g,v,h,y,T,E,S,x,m,M,R,w,D,O,_,N,F,z,$,Y,A,K,ee;return c<Be?null:(c=1/c,i*=c,s*=c,u*=c,l=Math.sin(n),g=Math.cos(n),v=1-g,h=e[0],y=e[1],T=e[2],E=e[3],S=e[4],x=e[5],m=e[6],M=e[7],R=e[8],w=e[9],D=e[10],O=e[11],_=i*i*v+g,N=s*i*v+u*l,F=u*i*v-s*l,z=i*s*v-u*l,$=s*s*v+g,Y=u*s*v+i*l,A=i*u*v+s*l,K=s*u*v-i*l,ee=u*u*v+g,t[0]=h*_+S*N+R*F,t[1]=y*_+x*N+w*F,t[2]=T*_+m*N+D*F,t[3]=E*_+M*N+O*F,t[4]=h*z+S*$+R*Y,t[5]=y*z+x*$+w*Y,t[6]=T*z+m*$+D*Y,t[7]=E*z+M*$+O*Y,t[8]=h*A+S*K+R*ee,t[9]=y*A+x*K+w*ee,t[10]=T*A+m*K+D*ee,t[11]=E*A+M*K+O*ee,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function p6(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[4],u=e[5],c=e[6],l=e[7],g=e[8],v=e[9],h=e[10],y=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+g*r,t[5]=u*i+v*r,t[6]=c*i+h*r,t[7]=l*i+y*r,t[8]=g*i-s*r,t[9]=v*i-u*r,t[10]=h*i-c*r,t[11]=y*i-l*r,t}function v6(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],u=e[1],c=e[2],l=e[3],g=e[8],v=e[9],h=e[10],y=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-g*r,t[1]=u*i-v*r,t[2]=c*i-h*r,t[3]=l*i-y*r,t[8]=s*r+g*i,t[9]=u*r+v*i,t[10]=c*r+h*i,t[11]=l*r+y*i,t}function y6(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],u=e[1],c=e[2],l=e[3],g=e[4],v=e[5],h=e[6],y=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+g*r,t[1]=u*i+v*r,t[2]=c*i+h*r,t[3]=l*i+y*r,t[4]=g*i-s*r,t[5]=v*i-u*r,t[6]=h*i-c*r,t[7]=y*i-l*r,t}function d6(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function T6(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fS(t,e,n){var r=n[0],i=n[1],s=n[2],u=Math.hypot(r,i,s),c,l,g;return u<Be?null:(u=1/u,r*=u,i*=u,s*=u,c=Math.sin(e),l=Math.cos(e),g=1-l,t[0]=r*r*g+l,t[1]=i*r*g+s*c,t[2]=s*r*g-i*c,t[3]=0,t[4]=r*i*g-s*c,t[5]=i*i*g+l,t[6]=s*i*g+r*c,t[7]=0,t[8]=r*s*g+i*c,t[9]=i*s*g-r*c,t[10]=s*s*g+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function lS(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gS(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function hS(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S6(t,e,n){var r=e[0],i=e[1],s=e[2],u=e[3],c=r+r,l=i+i,g=s+s,v=r*c,h=r*l,y=r*g,T=i*l,E=i*g,S=s*g,x=u*c,m=u*l,M=u*g;return t[0]=1-(T+S),t[1]=h+M,t[2]=y-m,t[3]=0,t[4]=h-M,t[5]=1-(v+S),t[6]=E+x,t[7]=0,t[8]=y+m,t[9]=E-x,t[10]=1-(v+T),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function pS(t,e){var n=new Ot(3),r=-e[0],i=-e[1],s=-e[2],u=e[3],c=e[4],l=e[5],g=e[6],v=e[7],h=r*r+i*i+s*s+u*u;return h>0?(n[0]=(c*u+v*r+l*s-g*i)*2/h,n[1]=(l*u+v*i+g*r-c*s)*2/h,n[2]=(g*u+v*s+c*i-l*r)*2/h):(n[0]=(c*u+v*r+l*s-g*i)*2,n[1]=(l*u+v*i+g*r-c*s)*2,n[2]=(g*u+v*s+c*i-l*r)*2),S6(t,e,n),t}function vS(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function C6(t,e){var n=e[0],r=e[1],i=e[2],s=e[4],u=e[5],c=e[6],l=e[8],g=e[9],v=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(s,u,c),t[2]=Math.hypot(l,g,v),t}function Ul(t,e){var n=new Ot(3);C6(n,e);var r=1/n[0],i=1/n[1],s=1/n[2],u=e[0]*r,c=e[1]*i,l=e[2]*s,g=e[4]*r,v=e[5]*i,h=e[6]*s,y=e[8]*r,T=e[9]*i,E=e[10]*s,S=u+v+E,x=0;return S>0?(x=Math.sqrt(S+1)*2,t[3]=.25*x,t[0]=(h-T)/x,t[1]=(y-l)/x,t[2]=(c-g)/x):u>v&&u>E?(x=Math.sqrt(1+u-v-E)*2,t[3]=(h-T)/x,t[0]=.25*x,t[1]=(c+g)/x,t[2]=(y+l)/x):v>E?(x=Math.sqrt(1+v-u-E)*2,t[3]=(y-l)/x,t[0]=(c+g)/x,t[1]=.25*x,t[2]=(h+T)/x):(x=Math.sqrt(1+E-u-v)*2,t[3]=(c-g)/x,t[0]=(y+l)/x,t[1]=(h+T)/x,t[2]=.25*x),t}function x6(t,e,n,r){var i=e[0],s=e[1],u=e[2],c=e[3],l=i+i,g=s+s,v=u+u,h=i*l,y=i*g,T=i*v,E=s*g,S=s*v,x=u*v,m=c*l,M=c*g,R=c*v,w=r[0],D=r[1],O=r[2];return t[0]=(1-(E+x))*w,t[1]=(y+R)*w,t[2]=(T-M)*w,t[3]=0,t[4]=(y-R)*D,t[5]=(1-(h+x))*D,t[6]=(S+m)*D,t[7]=0,t[8]=(T+M)*O,t[9]=(S-m)*O,t[10]=(1-(h+E))*O,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function yS(t,e,n,r,i){var s=e[0],u=e[1],c=e[2],l=e[3],g=s+s,v=u+u,h=c+c,y=s*g,T=s*v,E=s*h,S=u*v,x=u*h,m=c*h,M=l*g,R=l*v,w=l*h,D=r[0],O=r[1],_=r[2],N=i[0],F=i[1],z=i[2],$=(1-(S+m))*D,Y=(T+w)*D,A=(E-R)*D,K=(T-w)*O,ee=(1-(y+m))*O,G=(x+M)*O,W=(E+R)*_,q=(x-M)*_,X=(1-(y+S))*_;return t[0]=$,t[1]=Y,t[2]=A,t[3]=0,t[4]=K,t[5]=ee,t[6]=G,t[7]=0,t[8]=W,t[9]=q,t[10]=X,t[11]=0,t[12]=n[0]+N-($*N+K*F+W*z),t[13]=n[1]+F-(Y*N+ee*F+q*z),t[14]=n[2]+z-(A*N+G*F+X*z),t[15]=1,t}function ws(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],u=n+n,c=r+r,l=i+i,g=n*u,v=r*u,h=r*c,y=i*u,T=i*c,E=i*l,S=s*u,x=s*c,m=s*l;return t[0]=1-h-E,t[1]=v+m,t[2]=y-x,t[3]=0,t[4]=v-m,t[5]=1-g-E,t[6]=T+S,t[7]=0,t[8]=y+x,t[9]=T-S,t[10]=1-g-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function dS(t,e,n,r,i,s,u){var c=1/(n-e),l=1/(i-r),g=1/(s-u);return t[0]=s*2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(n+e)*c,t[9]=(i+r)*l,t[10]=(u+s)*g,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*s*2*g,t[15]=0,t}function E6(t,e,n,r,i){var s=1/Math.tan(e/2),u;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(u=1/(r-i),t[10]=(i+r)*u,t[14]=2*i*r*u):(t[10]=-1,t[14]=-2*r),t}var TS=E6;function SS(t,e,n,r,i){var s=1/Math.tan(e/2),u;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(u=1/(r-i),t[10]=i*u,t[14]=i*r*u):(t[10]=-1,t[14]=-r),t}function CS(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),u=Math.tan(e.leftDegrees*Math.PI/180),c=Math.tan(e.rightDegrees*Math.PI/180),l=2/(u+c),g=2/(i+s);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=g,t[6]=0,t[7]=0,t[8]=-((u-c)*l*.5),t[9]=(i-s)*g*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function m6(t,e,n,r,i,s,u){var c=1/(e-n),l=1/(r-i),g=1/(s-u);return t[0]=-2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*g,t[11]=0,t[12]=(e+n)*c,t[13]=(i+r)*l,t[14]=(u+s)*g,t[15]=1,t}var R6=m6;function xS(t,e,n,r,i,s,u){var c=1/(e-n),l=1/(r-i),g=1/(s-u);return t[0]=-2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=g,t[11]=0,t[12]=(e+n)*c,t[13]=(i+r)*l,t[14]=s*g,t[15]=1,t}function w6(t,e,n,r){var i,s,u,c,l,g,v,h,y,T,E=e[0],S=e[1],x=e[2],m=r[0],M=r[1],R=r[2],w=n[0],D=n[1],O=n[2];return Math.abs(E-w)<Be&&Math.abs(S-D)<Be&&Math.abs(x-O)<Be?Oe(t):(v=E-w,h=S-D,y=x-O,T=1/Math.hypot(v,h,y),v*=T,h*=T,y*=T,i=M*y-R*h,s=R*v-m*y,u=m*h-M*v,T=Math.hypot(i,s,u),T?(T=1/T,i*=T,s*=T,u*=T):(i=0,s=0,u=0),c=h*u-y*s,l=y*i-v*u,g=v*s-h*i,T=Math.hypot(c,l,g),T?(T=1/T,c*=T,l*=T,g*=T):(c=0,l=0,g=0),t[0]=i,t[1]=c,t[2]=v,t[3]=0,t[4]=s,t[5]=l,t[6]=h,t[7]=0,t[8]=u,t[9]=g,t[10]=y,t[11]=0,t[12]=-(i*E+s*S+u*x),t[13]=-(c*E+l*S+g*x),t[14]=-(v*E+h*S+y*x),t[15]=1,t)}function ES(t,e,n,r){var i=e[0],s=e[1],u=e[2],c=r[0],l=r[1],g=r[2],v=i-n[0],h=s-n[1],y=u-n[2],T=v*v+h*h+y*y;T>0&&(T=1/Math.sqrt(T),v*=T,h*=T,y*=T);var E=l*y-g*h,S=g*v-c*y,x=c*h-l*v;return T=E*E+S*S+x*x,T>0&&(T=1/Math.sqrt(T),E*=T,S*=T,x*=T),t[0]=E,t[1]=S,t[2]=x,t[3]=0,t[4]=h*x-y*S,t[5]=y*E-v*x,t[6]=v*S-h*E,t[7]=0,t[8]=v,t[9]=h,t[10]=y,t[11]=0,t[12]=i,t[13]=s,t[14]=u,t[15]=1,t}function mS(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function RS(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function wS(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function M6(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function MS(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function OS(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function DS(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function LS(t,e){var n=t[0],r=t[1],i=t[2],s=t[3],u=t[4],c=t[5],l=t[6],g=t[7],v=t[8],h=t[9],y=t[10],T=t[11],E=t[12],S=t[13],x=t[14],m=t[15],M=e[0],R=e[1],w=e[2],D=e[3],O=e[4],_=e[5],N=e[6],F=e[7],z=e[8],$=e[9],Y=e[10],A=e[11],K=e[12],ee=e[13],G=e[14],W=e[15];return Math.abs(n-M)<=Be*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(r-R)<=Be*Math.max(1,Math.abs(r),Math.abs(R))&&Math.abs(i-w)<=Be*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(s-D)<=Be*Math.max(1,Math.abs(s),Math.abs(D))&&Math.abs(u-O)<=Be*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(c-_)<=Be*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(l-N)<=Be*Math.max(1,Math.abs(l),Math.abs(N))&&Math.abs(g-F)<=Be*Math.max(1,Math.abs(g),Math.abs(F))&&Math.abs(v-z)<=Be*Math.max(1,Math.abs(v),Math.abs(z))&&Math.abs(h-$)<=Be*Math.max(1,Math.abs(h),Math.abs($))&&Math.abs(y-Y)<=Be*Math.max(1,Math.abs(y),Math.abs(Y))&&Math.abs(T-A)<=Be*Math.max(1,Math.abs(T),Math.abs(A))&&Math.abs(E-K)<=Be*Math.max(1,Math.abs(E),Math.abs(K))&&Math.abs(S-ee)<=Be*Math.max(1,Math.abs(S),Math.abs(ee))&&Math.abs(x-G)<=Be*Math.max(1,Math.abs(x),Math.abs(G))&&Math.abs(m-W)<=Be*Math.max(1,Math.abs(m),Math.abs(W))}var Gl=wt,BS=M6;const bl=Object.freeze(Object.defineProperty({__proto__:null,add:wS,adjoint:uS,clone:iS,copy:Ft,create:hc,determinant:cS,equals:LS,exactEquals:DS,frob:RS,fromQuat:ws,fromQuat2:pS,fromRotation:fS,fromRotationTranslation:S6,fromRotationTranslationScale:x6,fromRotationTranslationScaleOrigin:yS,fromScaling:T6,fromTranslation:d6,fromValues:sS,fromXRotation:lS,fromYRotation:gS,fromZRotation:hS,frustum:dS,getRotation:Ul,getScaling:C6,getTranslation:vS,identity:Oe,invert:tn,lookAt:w6,mul:Gl,multiply:wt,multiplyScalar:MS,multiplyScalarAndAdd:OS,ortho:R6,orthoNO:m6,orthoZO:xS,perspective:TS,perspectiveFromFieldOfView:CS,perspectiveNO:E6,perspectiveZO:SS,rotate:Yn,rotateX:p6,rotateY:v6,rotateZ:y6,scale:ti,set:oS,str:mS,sub:BS,subtract:M6,targetTo:ES,translate:vt,transpose:Qe},Symbol.toStringTag,{value:"Module"}));function O6(){var t=new Ot(3);return Ot!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function VS(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function u9(t,e,n){var r=new Ot(3);return r[0]=t,r[1]=e,r[2]=n,r}function NS(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Qu(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function ys(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function ga(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function oa(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function _S(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function US(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Bs(t,e){var n=e[0],r=e[1],i=e[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function D6(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Zf(t,e,n){var r=e[0],i=e[1],s=e[2],u=n[0],c=n[1],l=n[2];return t[0]=i*l-s*c,t[1]=s*u-r*l,t[2]=r*c-i*u,t}function Ae(t,e,n){var r=e[0],i=e[1],s=e[2],u=n[3]*r+n[7]*i+n[11]*s+n[15];return u=u||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/u,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/u,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/u,t}function c9(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function f9(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],u=e[1],c=e[2];return Math.abs(n-s)<=Be*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-u)<=Be*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-c)<=Be*Math.max(1,Math.abs(i),Math.abs(c))}var Fl=ga,GS=_S,L6=VS;(function(){var t=O6();return function(e,n,r,i,s,u){var c,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,c=r;c<l;c+=n)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],s(t,t,u),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2];return e}})();function bS(){var t=new Ot(4);return Ot!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function FS(t,e,n,r){var i=new Ot(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function zS(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],u=n*n+r*r+i*i+s*s;return u>0&&(u=1/Math.sqrt(u)),t[0]=n*u,t[1]=r*u,t[2]=i*u,t[3]=s*u,t}function fs(t,e,n){var r=e[0],i=e[1],s=e[2],u=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*u,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*u,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*u,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*u,t}(function(){var t=bS();return function(e,n,r,i,s,u){var c,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,c=r;c<l;c+=n)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],t[3]=e[c+3],s(t,t,u),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2],e[c+3]=t[3];return e}})();function n0(){var t=new Ot(4);return Ot!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function g2(t,e,n){n=n*.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function kS(t,e){var n=Math.acos(e[3])*2,r=Math.sin(n/2);return r>Be?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function l9(t,e,n){var r=e[0],i=e[1],s=e[2],u=e[3],c=n[0],l=n[1],g=n[2],v=n[3];return t[0]=r*v+u*c+i*g-s*l,t[1]=i*v+u*l+s*c-r*g,t[2]=s*v+u*g+r*l-i*c,t[3]=u*v-r*c-i*l-s*g,t}function Uu(t,e,n,r){var i=e[0],s=e[1],u=e[2],c=e[3],l=n[0],g=n[1],v=n[2],h=n[3],y,T,E,S,x;return T=i*l+s*g+u*v+c*h,T<0&&(T=-T,l=-l,g=-g,v=-v,h=-h),1-T>Be?(y=Math.acos(T),E=Math.sin(y),S=Math.sin((1-r)*y)/E,x=Math.sin(r*y)/E):(S=1-r,x=r),t[0]=S*i+x*l,t[1]=S*s+x*g,t[2]=S*u+x*v,t[3]=S*c+x*h,t}function HS(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function $S(t,e){var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var s=(i+1)%3,u=(i+2)%3;r=Math.sqrt(e[i*3+i]-e[s*3+s]-e[u*3+u]+1),t[i]=.5*r,r=.5/r,t[3]=(e[s*3+u]-e[u*3+s])*r,t[s]=(e[s*3+i]+e[i*3+s])*r,t[u]=(e[u*3+i]+e[i*3+u])*r}return t}var g9=FS,B6=zS;(function(){var t=O6(),e=u9(1,0,0),n=u9(0,1,0);return function(r,i,s){var u=D6(i,s);return u<-.999999?(Zf(t,e,i),L6(t)<1e-6&&Zf(t,n,i),Bs(t,t),g2(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Zf(t,i,s),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,B6(r,r))}})();(function(){var t=n0(),e=n0();return function(n,r,i,s,u,c){return Uu(t,r,u,c),Uu(e,i,s,c),Uu(n,t,e,2*c*(1-c)),n}})();(function(){var t=f6();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],B6(e,$S(e,t))}})();var Jf,h9;function AS(){return h9||(h9=1,Jf=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var u=s[i];if(!t(e[u],n[u]))return!1}return!0}return e!==e&&n!==n}),Jf}var WS=AS();const V6=ci(WS);var Pf,p9;function N6(){if(p9)return Pf;p9=1;var t=Object.prototype.toString;return Pf=function(n){var r=t.call(n),i=r==="[object Arguments]";return i||(i=r!=="[object Array]"&&n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&t.call(n.callee)==="[object Function]"),i},Pf}var If,v9;function jS(){if(v9)return If;v9=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=N6(),i=Object.prototype.propertyIsEnumerable,s=!i.call({toString:null},"toString"),u=i.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(y){var T=y.constructor;return T&&T.prototype===y},g={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},v=(function(){if(typeof window>"u")return!1;for(var y in window)try{if(!g["$"+y]&&e.call(window,y)&&window[y]!==null&&typeof window[y]=="object")try{l(window[y])}catch{return!0}}catch{return!0}return!1})(),h=function(y){if(typeof window>"u"||!v)return l(y);try{return l(y)}catch{return!1}};t=function(T){var E=T!==null&&typeof T=="object",S=n.call(T)==="[object Function]",x=r(T),m=E&&n.call(T)==="[object String]",M=[];if(!E&&!S&&!x)throw new TypeError("Object.keys called on a non-object");var R=u&&S;if(m&&T.length>0&&!e.call(T,0))for(var w=0;w<T.length;++w)M.push(String(w));if(x&&T.length>0)for(var D=0;D<T.length;++D)M.push(String(D));else for(var O in T)!(R&&O==="prototype")&&e.call(T,O)&&M.push(String(O));if(s)for(var _=h(T),N=0;N<c.length;++N)!(_&&c[N]==="constructor")&&e.call(T,c[N])&&M.push(c[N]);return M}}return If=t,If}var el,y9;function KS(){if(y9)return el;y9=1;var t=Array.prototype.slice,e=N6(),n=Object.keys,r=n?function(u){return n(u)}:jS(),i=Object.keys;return r.shim=function(){if(Object.keys){var u=(function(){var c=Object.keys(arguments);return c&&c.length===arguments.length})(1,2);u||(Object.keys=function(l){return e(l)?i(t.call(l)):i(l)})}else Object.keys=r;return Object.keys||r},el=r,el}var tl,d9;function _6(){if(d9)return tl;d9=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return tl=t,tl}var nl,T9;function XS(){return T9||(T9=1,nl=SyntaxError),nl}var rl,S9;function YS(){return S9||(S9=1,rl=TypeError),rl}var al,C9;function qS(){return C9||(C9=1,al=Object.getOwnPropertyDescriptor),al}var il,x9;function QS(){if(x9)return il;x9=1;var t=qS();if(t)try{t([],"length")}catch{t=null}return il=t,il}var sl,E9;function ZS(){if(E9)return sl;E9=1;var t=_6(),e=XS(),n=YS(),r=QS();return sl=function(s,u,c){if(!s||typeof s!="object"&&typeof s!="function")throw new n("`obj` must be an object or a function`");if(typeof u!="string"&&typeof u!="symbol")throw new n("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new n("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new n("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new n("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new n("`loose`, if provided, must be a boolean");var l=arguments.length>3?arguments[3]:null,g=arguments.length>4?arguments[4]:null,v=arguments.length>5?arguments[5]:null,h=arguments.length>6?arguments[6]:!1,y=!!r&&r(s,u);if(t)t(s,u,{configurable:v===null&&y?y.configurable:!v,enumerable:l===null&&y?y.enumerable:!l,value:c,writable:g===null&&y?y.writable:!g});else if(h||!l&&!g&&!v)s[u]=c;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},sl}var ol,m9;function JS(){if(m9)return ol;m9=1;var t=_6(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return t([],"length",{value:1}).length!==1}catch{return!0}},ol=e,ol}var ul,R9;function U6(){if(R9)return ul;R9=1;var t=KS(),e=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",n=Object.prototype.toString,r=Array.prototype.concat,i=ZS(),s=function(g){return typeof g=="function"&&n.call(g)==="[object Function]"},u=JS()(),c=function(g,v,h,y){if(v in g){if(y===!0){if(g[v]===h)return}else if(!s(y)||!y())return}u?i(g,v,h,!0):i(g,v,h)},l=function(g,v){var h=arguments.length>2?arguments[2]:{},y=t(v);e&&(y=r.call(y,Object.getOwnPropertySymbols(v)));for(var T=0;T<y.length;T+=1)c(g,y[T],v[y[T]],h[y[T]])};return l.supportsDescriptors=!!u,ul=l,ul}var ls={exports:{}},w9;function G6(){return w9||(w9=1,typeof self<"u"?ls.exports=self:typeof window<"u"?ls.exports=window:ls.exports=Function("return this")()),ls.exports}var cl,M9;function b6(){if(M9)return cl;M9=1;var t=G6();return cl=function(){return typeof os!="object"||!os||os.Math!==Math||os.Array!==Array?t:os},cl}var fl,O9;function PS(){if(O9)return fl;O9=1;var t=U6(),e=b6();return fl=function(){var r=e();if(t.supportsDescriptors){var i=Object.getOwnPropertyDescriptor(r,"globalThis");(!i||i.configurable&&(i.enumerable||!i.writable||globalThis!==r))&&Object.defineProperty(r,"globalThis",{configurable:!0,enumerable:!1,value:r,writable:!0})}else(typeof globalThis!="object"||globalThis!==r)&&(r.globalThis=r);return r},fl}var ll,D9;function IS(){if(D9)return ll;D9=1;var t=U6(),e=G6(),n=b6(),r=PS(),i=n(),s=function(){return i};return t(s,{getPolyfill:n,implementation:e,shim:r}),ll=s,ll}var eC=IS();const tC=ci(eC),Fn=tC(),F6={vtkObject:()=>null};function Hn(t){if(t==null||t.isA)return t;if(!t.vtkClass)return Fn.console&&Fn.console.error&&Fn.console.error("Invalid VTK object"),null;const e=F6[t.vtkClass];if(!e)return Fn.console&&Fn.console.error&&Fn.console.error(`No vtk class found for Object of type ${t.vtkClass}`),null;const n={...t};Object.keys(n).forEach(i=>{n[i]&&typeof n[i]=="object"&&n[i].vtkClass&&(n[i]=Hn(n[i]))});const r=e(n);return r&&r.modified&&r.modified(),r}function nC(t,e){F6[t]=e}Hn.register=nC;class gl extends Array{push(){for(let e=0;e<arguments.length;e++)this.includes(arguments[e])||super.push(arguments[e]);return this.length}}let zl=0;const z6=t=>{throw new Error(`Named parameter '${t}' is missing`)},k6=Symbol("void");function rC(){return zl}const H6={};function qa(){}const aC=["log","debug","info","warn","error","time","timeEnd","group","groupEnd"];aC.forEach(t=>{H6[t]=qa});Fn.console=console.hasOwnProperty("log")?console:H6;const ha={debug:qa,error:Fn.console.error||qa,info:Fn.console.info||qa,log:Fn.console.log||qa,warn:Fn.console.warn||qa};function $6(t,e){ha[t]&&(ha[t]=e||qa)}function A6(){ha.log(...arguments)}function W6(){ha.info(...arguments)}function Zu(){ha.debug(...arguments)}function xe(){ha.error(...arguments)}function pc(){ha.warn(...arguments)}const L9={};function j6(t){L9[t]||(ha.error(t),L9[t]=!0)}const Ut=Object.create(null);Ut.Float32Array=Float32Array;Ut.Float64Array=Float64Array;Ut.Uint8Array=Uint8Array;Ut.Int8Array=Int8Array;Ut.Uint16Array=Uint16Array;Ut.Int16Array=Int16Array;Ut.Uint32Array=Uint32Array;Ut.Int32Array=Int32Array;Ut.Uint8ClampedArray=Uint8ClampedArray;try{Ut.BigInt64Array=BigInt64Array,Ut.BigUint64Array=BigUint64Array}catch{}function fi(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new(Ut[t]||Float64Array)(...n)}function h2(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return(Ut[t]||Float64Array).from(...n)}function vc(t){return t.charAt(0).toUpperCase()+t.slice(1)}function it(t){return vc(t[0]==="_"?t.slice(1):t)}function K6(t){return t.charAt(0).toLowerCase()+t.slice(1)}function X6(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;const r=["TB","GB","MB","KB"];let i=Number(t),s="B";for(;i>n;)i/=n,s=r.pop();return`${i.toFixed(e)} ${s}`}function Y6(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ";const n=[];let r=t;for(;r>1e3;)n.push(`000${r%1e3}`.slice(-3)),r=Math.floor(r/1e3);return r>0&&n.push(r),n.reverse(),n.join(e)}function q6(t){Object.keys(t).forEach(e=>{Array.isArray(t[e])&&(t[e]=[].concat(t[e]))})}function iC(t){return Object.values(Ut).some(e=>t instanceof e)}function sC(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}function oC(t,e){return Object.keys(t).find(n=>t[n]===e)}function Q6(t){return t&&t.isA?t.getState():t}function p2(t){setTimeout(t,0)}function Z6(t,e){const n=performance.now();t.finally(()=>{const r=performance.now()-n;e(r)})}function Dt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};q6(e);const n=[];if(Number.isInteger(e.mtime)||(e.mtime=++zl),!("classHierarchy"in e))e.classHierarchy=new gl("vtkObject");else if(!(e.classHierarchy instanceof gl)){const s=new gl;for(let u=0;u<e.classHierarchy.length;u++)s.push(e.classHierarchy[u]);e.classHierarchy=s}function r(s){n[s]=null}function i(s){function u(){r(s)}return Object.freeze({unsubscribe:u})}return t.isDeleted=()=>!!e.deleted,t.modified=s=>{if(e.deleted){xe("instance deleted - cannot call any method");return}s&&s<t.getMTime()||(e.mtime=++zl,n.forEach(u=>u&&u(t)))},t.onModified=s=>{if(e.deleted)return xe("instance deleted - cannot call any method"),null;const u=n.length;return n.push(s),i(u)},t.getMTime=()=>e.mtime,t.isA=s=>{let u=e.classHierarchy.length;for(;u--;)if(e.classHierarchy[u]===s)return!0;return!1},t.getClassName=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.classHierarchy[e.classHierarchy.length-1-s]},t.set=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,l=!1;return Object.keys(s).forEach(g=>{const v=c?null:t[`set${vc(g)}`];v&&Array.isArray(s[g])&&v.length>1?l=v(...s[g])||l:v?l=v(s[g])||l:(["mtime"].indexOf(g)===-1&&!u&&pc(`Warning: Set value to model directly ${g}, ${s[g]}`),l=e[g]!==s[g]||l,e[g]=s[g])}),l},t.get=function(){for(var s=arguments.length,u=new Array(s),c=0;c<s;c++)u[c]=arguments[c];if(!u.length)return e;const l={};return u.forEach(g=>{l[g]=e[g]}),l},t.getReferenceByName=s=>e[s],t.delete=()=>{Object.keys(e).forEach(s=>delete e[s]),n.forEach((s,u)=>r(u)),e.deleted=!0},t.getState=()=>{if(e.deleted)return null;const s={...e,vtkClass:t.getClassName()};Object.keys(s).forEach(c=>{s[c]===null||s[c]===void 0||c[0]==="_"?delete s[c]:s[c].isA?s[c]=s[c].getState():Array.isArray(s[c])?s[c]=s[c].map(Q6):iC(s[c])&&(s[c]=Array.from(s[c]))});const u={};return Object.keys(s).sort().forEach(c=>{u[c]=s[c]}),u.mtime&&delete u.mtime,u},t.shallowCopy=function(s){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(s.getClassName()!==t.getClassName())throw new Error(`Cannot ShallowCopy ${s.getClassName()} into ${t.getClassName()}`);const c=s.get(),l=Object.keys(e).sort();Object.keys(c).sort().forEach(v=>{const h=l.indexOf(v);h===-1?u&&Zu(`add ${v} in shallowCopy`):l.splice(h,1),e[v]=c[v]}),l.length&&u&&Zu(`Untouched keys: ${l.join(", ")}`),t.modified()},t.toJSON=function(){return t.getState()},t}const uC={object(t,e,n){return function(){return{...e[n.name]}}}};function Kt(t,e,n){n.forEach(r=>{if(typeof r=="object"){const i=uC[r.type];i?t[`get${it(r.name)}`]=i(t,e,r):t[`get${it(r.name)}`]=()=>e[r.name]}else t[`get${it(r)}`]=()=>e[r]})}const J6={enum(t,e,n){const r=`_on${it(n.name)}Changed`;return i=>{if(typeof i=="string"){if(n.enum[i]!==void 0)return e[n.name]!==n.enum[i]?(e[n.name]=n.enum[i],t.modified(),!0):!1;throw xe(`Set Enum with invalid argument ${n}, ${i}`),new RangeError("Set Enum with invalid string argument")}if(typeof i=="number"){if(e[n.name]!==i){if(Object.keys(n.enum).map(s=>n.enum[s]).indexOf(i)!==-1){const s=e[n.name];return e[n.name]=i,e[r]?.(t,e,i,s),t.modified(),!0}throw xe(`Set Enum outside numeric range ${n}, ${i}`),new RangeError("Set Enum outside numeric range")}return!1}throw xe(`Set Enum with invalid argument (String/Number) ${n}, ${i}`),new TypeError("Set Enum with invalid argument (String/Number)")}},object(t,e,n){n.params?.length===1&&pc('Setter of type "object" with a single "param" field is not supported');const r=`_on${it(n.name)}Changed`;return function(){for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];let c;if(s.length>1&&n.params?.length?c=n.params.reduce((l,g,v)=>Object.assign(l,{[g]:s[v]}),{}):c=s[0],!V6(e[n.name],c)){const l=e[n.name];return e[n.name]=c,e[r]?.(t,e,c,l),t.modified(),!0}return!1}}};function B9(t){if(typeof t=="object"){const e=J6[t.type];if(e)return(n,r)=>e(n,r,t);throw xe(`No setter for field ${t}`),new TypeError("No setter for field")}return function(n,r){const i=`_on${it(t)}Changed`;return function(u){if(r.deleted)return xe("instance deleted - cannot call any method"),!1;if(r[t]!==u){const c=r[t.name];return r[t]=u,r[i]?.(n,r,u,c),n.modified(),!0}return!1}}}function Fs(t,e,n){n.forEach(r=>{typeof r=="object"?t[`set${it(r.name)}`]=B9(r)(t,e):t[`set${it(r)}`]=B9(r)(t,e)})}function St(t,e,n){Kt(t,e,n),Fs(t,e,n)}function li(t,e,n){n.forEach(r=>{t[`get${it(r)}`]=()=>e[r]?Array.from(e[r]):e[r],t[`get${it(r)}ByReference`]=()=>e[r]})}function v2(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;n.forEach(s=>{if(e[s]&&r&&e[s].length!==r)throw new RangeError(`Invalid initial number of values for array (${s})`);const u=`_on${it(s)}Changed`;t[`set${it(s)}`]=function(){if(e.deleted)return xe("instance deleted - cannot call any method"),!1;for(var c=arguments.length,l=new Array(c),g=0;g<c;g++)l[g]=arguments[g];let v=l,h,y=!1;if(v.length===1&&(v[0]==null||v[0].length>=0)&&(v=v[0],y=!0),v==null)h=e[s]!==v;else{if(r&&v.length!==r)if(v.length<r&&i!==void 0)for(v=Array.from(v),y=!1;v.length<r;)v.push(i);else throw new RangeError(`Invalid number of values for array setter (${s})`);h=e[s]==null||e[s].length!==v.length;for(let T=0;!h&&T<v.length;++T)h=e[s][T]!==v[T];h&&y&&(v=Array.from(v))}if(h){const T=e[s.name];e[s]=v,e[u]?.(t,e,v,T),t.modified()}return h},t[`set${it(s)}From`]=c=>{const l=e[s];c.forEach((g,v)=>{l[v]=g})}})}function y2(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;li(t,e,n),v2(t,e,n,r,i)}function zs(t,e,n){for(let r=0;r<n.length;r++){const i=n[r];e[i]!==void 0&&(e[`_${i}`]=e[i],delete e[i])}}function P6(t,e,n,r){e.inputData?e.inputData=e.inputData.map(Hn):e.inputData=[],e.inputConnection?e.inputConnection=e.inputConnection.map(Hn):e.inputConnection=[],e.output?e.output=e.output.map(Hn):e.output=[],e.inputArrayToProcess?e.inputArrayToProcess=e.inputArrayToProcess.map(Hn):e.inputArrayToProcess=[],e.numberOfInputs=n;function i(T){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){xe("instance deleted - cannot call any method");return}if(E>=e.numberOfInputs){xe(`algorithm ${t.getClassName()} only has ${e.numberOfInputs} input ports. To add more input ports, use addInputData()`);return}(e.inputData[E]!==T||e.inputConnection[E])&&(e.inputData[E]=T,e.inputConnection[E]=null,t.modified&&t.modified())}function s(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[T]&&(e.inputData[T]=e.inputConnection[T]()),e.inputData[T]}function u(T){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){xe("instance deleted - cannot call any method");return}if(E>=e.numberOfInputs){let S=`algorithm ${t.getClassName()} only has `;S+=`${e.numberOfInputs}`,S+=" input ports. To add more input ports, use addInputConnection()",xe(S);return}e.inputData[E]=null,e.inputConnection[E]=T}function c(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[T]}function l(){let T=e.numberOfInputs;for(;T&&!e.inputData[T-1]&&!e.inputConnection[T-1];)T--;return T===e.numberOfInputs&&e.numberOfInputs++,T}function g(T){if(e.deleted){xe("instance deleted - cannot call any method");return}u(T,l())}function v(T){if(e.deleted){xe("instance deleted - cannot call any method");return}i(T,l())}function h(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.deleted?(xe("instance deleted - cannot call any method"),null):(t.shouldUpdate()&&t.update(),e.output[T])}t.shouldUpdate=()=>{const T=t.getMTime();let E=1/0,S=r;for(;S--;){if(!e.output[S]||e.output[S].isDeleted())return!0;const x=e.output[S].getMTime();if(x<T)return!0;x<E&&(E=x)}for(S=e.numberOfInputs;S--;)if(e.inputConnection[S]?.filter.shouldUpdate()||t.getInputData(S)?.getMTime()>E)return!0;return!1};function y(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const E=()=>h(T);return E.filter=t,E}if(e.numberOfInputs){let T=e.numberOfInputs;for(;T--;)e.inputData.push(null),e.inputConnection.push(null);t.setInputData=i,t.setInputConnection=u,t.addInputData=v,t.addInputConnection=g,t.getInputData=s,t.getInputConnection=c}r&&(t.getOutputData=h,t.getOutputPort=y),t.update=()=>{const T=[];if(e.numberOfInputs){let E=0;for(;E<e.numberOfInputs;)T[E]=t.getInputData(E),E++}t.requestData&&!t.isDeleted()&&t.shouldUpdate()&&t.requestData(T,e.output)},t.getNumberOfInputPorts=()=>e.numberOfInputs,t.getNumberOfOutputPorts=()=>r||e.output.length,t.getInputArrayToProcess=T=>{const E=e.inputArrayToProcess[T],S=e.inputData[T];return E&&S?S[`get${E.fieldAssociation}`]().getArray(E.arrayName):null},t.setInputArrayToProcess=function(T,E,S){let x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Scalars";for(;e.inputArrayToProcess.length<T;)e.inputArrayToProcess.push(null);e.inputArrayToProcess[T]={arrayName:E,fieldAssociation:S,attributeType:x}}}const d2=Symbol("Event abort");function I6(t,e,n){const r=[],i=t.delete;let s=1;function u(g){for(let v=0;v<r.length;++v){const[h]=r[v];if(h===g){r.splice(v,1);return}}}function c(g){function v(){u(g)}return Object.freeze({unsubscribe:v})}function l(){if(e.deleted){xe("instance deleted - cannot call any method");return}const g=r.slice();for(let v=0;v<g.length;++v){const[,h,y]=g[v];if(h){if(y<0)setTimeout(()=>h.apply(t,arguments),1-y);else if(h.apply(t,arguments)===d2)break}}}t[`invoke${it(n)}`]=l,t[`on${it(n)}`]=function(g){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!g.apply)return console.error(`Invalid callback for event ${n}`),null;if(e.deleted)return xe("instance deleted - cannot call any method"),null;const h=s++;return r.push([h,g,v]),r.sort((y,T)=>T[2]-y[2]),c(h)},t.delete=()=>{i(),r.forEach(g=>{let[v]=g;return u(v)})}}function Ye(t,e){const n=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i={},s={};return t(s,i,r),Object.freeze(s)};return e&&Hn.register(e,n),n}function e7(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e.filter(u=>!!u).map(u=>u(...i))}}function T2(t){return t&&t.isA&&t.isA("vtkObject")}function Ju(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];if(T2(t)){if(r.indexOf(t)>=0)return n;r.push(t);const i=e(t);i!==void 0&&n.push(i);const s=t.get();Object.keys(s).forEach(u=>{const c=s[u];Array.isArray(c)?c.forEach(l=>{Ju(l,e,n,r)}):Ju(c,e,n,r)})}return n}function t7(t,e,n){var r=this;let i;const s=function(){for(var u=arguments.length,c=new Array(u),l=0;l<u;l++)c[l]=arguments[l];const g=r,v=()=>{i=null,n||t.apply(g,c)},h=n&&!i;clearTimeout(i),i=setTimeout(v,e),h&&t.apply(g,c)};return s.cancel=()=>clearTimeout(i),s}function n7(t,e){let n=!1,r=null;function i(){n=!1,r!==null&&(s(...r),r=null)}function s(){for(var u=arguments.length,c=new Array(u),l=0;l<u;l++)c[l]=arguments[l];if(n){r=c;return}n=!0,t(...c),setTimeout(i,e)}return s}function S2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};e.keystore=Object.assign(e.keystore||{},n),t.setKey=(r,i)=>{e.keystore[r]=i},t.getKey=r=>e.keystore[r],t.getAllKeys=()=>Object.keys(e.keystore),t.deleteKey=r=>delete e.keystore[r],t.clearKeystore=()=>t.getAllKeys().forEach(r=>delete e.keystore[r])}let cC=1;const cu="__root__";function r7(t,e){S2(t,e);const n=t.delete;e.proxyId=`${cC++}`,e.ui=JSON.parse(JSON.stringify(e.ui||[])),Kt(t,e,["proxyId","proxyGroup","proxyName"]),St(t,e,["proxyManager"]);const r={},i={};function s(g,v){i[v]||(i[v]=[]);const h=i[v];for(let y=0;y<g.length;y++)h.push(g[y].name),r[g[y].name]=g[y],g[y].children&&g[y].children.length&&s(g[y].children,g[y].name)}s(e.ui,cu),t.updateUI=g=>{e.ui=JSON.parse(JSON.stringify(g||[])),Object.keys(r).forEach(v=>delete r[v]),Object.keys(i).forEach(v=>delete i[v]),s(e.ui,cu),t.modified()};function u(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cu;return i[g]}t.updateProxyProperty=(g,v)=>{const h=r[g];h?Object.assign(h,v):r[g]={...v}},t.activate=()=>{if(e.proxyManager){const g=`setActive${it(t.getProxyGroup().slice(0,-1))}`;e.proxyManager[g]&&e.proxyManager[g](t)}},e.propertyLinkSubscribers={},t.registerPropertyLinkForGC=(g,v)=>{v in e.propertyLinkSubscribers||(e.propertyLinkSubscribers[v]=[]),e.propertyLinkSubscribers[v].push(g)},t.gcPropertyLinks=g=>{const v=e.propertyLinkSubscribers[g]||[];for(;v.length;)v.pop().unbind(t)},e.propertyLinkMap={},t.getPropertyLink=function(g){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.propertyLinkMap[g])return e.propertyLinkMap[g];let h=null;const y=[];let T=0,E=!1;function S(w){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(E)return null;const O=[];let _=null;for(T=y.length;T--;){const F=y[T];F.instance===w?_=F:O.push(F)}if(!_)return null;const N=_.instance[`get${it(_.propertyName)}`]();if(!sC(N,h)||D){for(h=N,E=!0;O.length;){const F=O.pop();F.instance.set({[F.propertyName]:h})}E=!1}return e.propertyLinkMap[g].persistent&&(e.propertyLinkMap[g].value=N),N}function x(w,D){const O=[];for(T=y.length;T--;){const _=y[T];_.instance===w&&(_.propertyName===D||D===void 0)&&(_.subscription.unsubscribe(),O.push(T))}for(;O.length;)y.splice(O.pop(),1)}function m(w,D){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const _=w.onModified(S),N=y[0];return y.push({instance:w,propertyName:D,subscription:_}),O&&(e.propertyLinkMap[g].persistent&&e.propertyLinkMap[g].value!==void 0?w.set({[D]:e.propertyLinkMap[g].value}):N&&S(N.instance,!0)),{unsubscribe:()=>x(w,D)}}function M(){for(;y.length;)y.pop().subscription.unsubscribe()}const R={bind:m,unbind:x,unsubscribe:M,persistent:v};return e.propertyLinkMap[g]=R,R};function c(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cu;const v=[],h=e.proxyId,y=u(g)||[];for(let T=0;T<y.length;T++){const E=y[T],S=t[`get${it(E)}`],x=S?S():void 0,m={id:h,name:E,value:x},M=c(E);M.length&&(m.children=M),v.push(m)}return v}t.listPropertyNames=()=>c().map(g=>g.name),t.getPropertyByName=g=>c().find(v=>v.name===g),t.getPropertyDomainByName=g=>(r[g]||{}).domain,t.getProxySection=()=>({id:e.proxyId,name:e.proxyGroup,ui:e.ui,properties:c()}),t.delete=()=>{const g=Object.keys(e.propertyLinkMap);let v=g.length;for(;v--;)e.propertyLinkMap[g[v]].unsubscribe();Object.keys(e.propertyLinkSubscribers).forEach(t.gcPropertyLinks),n()},t.getState=()=>null;function l(){if(e.links)for(let g=0;g<e.links.length;g++){const{link:v,property:h,persistent:y,updateOnBind:T,type:E}=e.links[g];if(E==="application"){const S=e.proxyManager.getPropertyLink(v,y);t.registerPropertyLinkForGC(S,"application"),S.bind(t,h,T)}}}p2(l)}function a7(t,e,n){const r=t.delete,i=[],s=Object.keys(n);let u=s.length;for(;u--;){const c=s[u],{modelKey:l,property:g,modified:v=!0}=n[c],h=it(g),y=it(c);t[`get${y}`]=e[l][`get${h}`],t[`set${y}`]=e[l][`set${h}`],v&&i.push(e[l].onModified(t.modified))}t.delete=()=>{for(;i.length;)i.pop().unsubscribe();r()}}function i7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};e.this=t;function i(c){const l=Object.keys(c);let g=l.length;for(;g--;){const v=l[g];e[v].set(c[v])}}const s=Object.keys(r);let u=s.length;for(;u--;){const c=s[u];e[c]=r[c];const l=n[c];t[`set${it(c)}`]=g=>{if(g!==e[c]){e[c]=g;const v=l[g];i(v),t.modified()}}}s.length&&Kt(t,e,s)}const V9=10,N9=40,_9=800;function s7(t){let e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*V9,i=n*V9,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||i)&&t.deltaMode&&(t.deltaMode===1?(r*=N9,i*=N9):(r*=_9,i*=_9)),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n||e,pixelX:r,pixelY:i||r}}var B={algo:P6,capitalize:vc,chain:e7,debounce:t7,enumToString:oC,event:I6,EVENT_ABORT:d2,formatBytesToProperUnit:X6,formatNumbersWithThousandSeparator:Y6,get:Kt,getArray:li,getCurrentGlobalMTime:rC,getStateArrayMapFunc:Q6,isVtkObject:T2,keystore:S2,measurePromiseExecution:Z6,moveToProtected:zs,newInstance:Ye,newTypedArray:fi,newTypedArrayFrom:h2,normalizeWheel:s7,obj:Dt,proxy:r7,proxyPropertyMapping:a7,proxyPropertyState:i7,safeArrays:q6,set:Fs,setArray:v2,setGet:St,setGetArray:y2,setImmediate:p2,setLoggerFunction:$6,throttle:n7,traverseInstanceTree:Ju,TYPED_ARRAYS:Ut,uncapitalize:K6,VOID:k6,vtkDebugMacro:Zu,vtkErrorMacro:xe,vtkInfoMacro:W6,vtkLogMacro:A6,vtkOnceErrorMacro:j6,vtkWarningMacro:pc,objectSetterMap:J6,requiredParam:z6},Pn=Object.freeze({__proto__:null,requiredParam:z6,VOID:k6,setLoggerFunction:$6,vtkLogMacro:A6,vtkInfoMacro:W6,vtkDebugMacro:Zu,vtkErrorMacro:xe,vtkWarningMacro:pc,vtkOnceErrorMacro:j6,TYPED_ARRAYS:Ut,newTypedArray:fi,newTypedArrayFrom:h2,capitalize:vc,_capitalize:it,uncapitalize:K6,formatBytesToProperUnit:X6,formatNumbersWithThousandSeparator:Y6,setImmediateVTK:p2,measurePromiseExecution:Z6,obj:Dt,get:Kt,set:Fs,setGet:St,getArray:li,setArray:v2,setGetArray:y2,moveToProtected:zs,algo:P6,EVENT_ABORT:d2,event:I6,newInstance:Ye,chain:e7,isVtkObject:T2,traverseInstanceTree:Ju,debounce:t7,throttle:n7,keystore:S2,proxy:r7,proxyPropertyMapping:a7,proxyPropertyState:i7,normalizeWheel:s7,default:B});const{vtkErrorMacro:fC}=B,lC=["Build","Render"];function gC(t,e){e.classHierarchy.push("vtkViewNode"),t.build=r=>{},t.render=r=>{},t.traverse=r=>{const i=r.getTraverseOperation(),s=t[i];if(s){s(r);return}t.apply(r,!0);for(let u=0;u<e.children.length;u++)e.children[u].traverse(r);t.apply(r,!1)},t.apply=(r,i)=>{const s=t[r.getOperation()];s&&s(i,r)},t.getViewNodeFor=r=>{if(e.renderable===r)return t;for(let i=0;i<e.children.length;++i){const u=e.children[i].getViewNodeFor(r);if(u)return u}},t.getFirstAncestorOfType=r=>e._parent?e._parent.isA(r)?e._parent:e._parent.getFirstAncestorOfType(r):null,t.getLastAncestorOfType=r=>{if(!e._parent)return null;const i=e._parent.getLastAncestorOfType(r);return i||(e._parent.isA(r)?e._parent:null)},t.addMissingNode=r=>{if(!r)return;const i=e._renderableChildMap.get(r);if(i!==void 0)return i.setVisited(!0),i;const s=t.createViewNode(r);if(s)return s.setParent(t),s.setVisited(!0),e._renderableChildMap.set(r,s),e.children.push(s),s},t.addMissingNodes=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!(!r||!r.length))for(let s=0;s<r.length;++s){const u=r[s],c=t.addMissingNode(u);if(i&&c!==void 0&&e.children[s]!==c){for(let l=s+1;l<e.children.length;++l)if(e.children[l]===c){e.children.splice(l,1),e.children.splice(s,0,c);break}}}},t.addMissingChildren=r=>{if(!(!r||!r.length))for(let i=0;i<r.length;++i){const s=r[i];if(e.children.indexOf(s)===-1){s.setParent(t),e.children.push(s);const c=s.getRenderable();c&&e._renderableChildMap.set(c,s)}s.setVisited(!0)}},t.removeNode=r=>{const i=e.children.findIndex(u=>u===r);if(i<0)return!1;const s=r.getRenderable();return s&&e._renderableChildMap.delete(s),r.delete(),e.children.splice(i,1),!0},t.prepareNodes=()=>{for(let r=0;r<e.children.length;++r)e.children[r].setVisited(!1)},t.setVisited=r=>{e.visited=r},t.removeUnusedNodes=()=>{let r=0;for(let i=0;i<e.children.length;++i){const s=e.children[i];if(s.getVisited())e.children[r++]=s,s.setVisited(!1);else{const c=s.getRenderable();c&&e._renderableChildMap.delete(c),s.delete()}}e.children.length=r},t.createViewNode=r=>{if(!e.myFactory)return fC("Cannot create view nodes without my own factory"),null;const i=e.myFactory.createNode(r);return i&&i.setRenderable(r),i};const n=t.delete;t.delete=()=>{for(let r=0;r<e.children.length;r++)e.children[r].delete();n()}}const hC={renderable:null,myFactory:null,children:[],visited:!1};function o7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,hC,n),B.obj(t,e),B.event(t,e,"event"),e._renderableChildMap=new Map,B.get(t,e,["visited"]),B.setGet(t,e,["_parent","renderable","myFactory"]),B.getArray(t,e,["children"]),B.moveToProtected(t,e,["parent"]),gC(t,e)}const pC=B.newInstance(o7,"vtkViewNode");var st={newInstance:pC,extend:o7,PASS_TYPES:lC};function vC(t,e){e.overrides||(e.overrides={}),e.classHierarchy.push("vtkViewNodeFactory"),t.createNode=n=>{if(n.isDeleted())return null;let r=0,i=n.getClassName(r++),s=!1;const u=Object.keys(e.overrides);for(;i&&!s;)u.indexOf(i)!==-1?s=!0:i=n.getClassName(r++);if(!s)return null;const c=e.overrides[i]();return c.setMyFactory(t),c}}const yC={};function u7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,yC,n),B.obj(t,e),vC(t,e)}const dC=B.newInstance(u7,"vtkViewNodeFactory");var c7={newInstance:dC,extend:u7};const f7=Object.create(null);function Nn(t,e){f7[t]=e}function TC(t,e){e.classHierarchy.push("vtkOpenGLViewNodeFactory")}const SC={};function l7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,SC,n),e.overrides=f7,c7.extend(t,e,n),TC(t,e)}const CC=B.newInstance(l7,"vtkOpenGLViewNodeFactory");var xC={newInstance:CC,extend:l7};function EC(t,e){e.classHierarchy.push("vtkOpenGLCamera"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext())},t.opaquePass=n=>{if(n){const r=e._openGLRenderer.getTiledSizeAndOrigin();e.context.viewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize),e.context.scissor(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)}},t.translucentPass=t.opaquePass,t.zBufferPass=t.opaquePass,t.opaqueZBufferPass=t.opaquePass,t.volumePass=t.opaquePass,t.getKeyMatrices=n=>{if(n!==e.lastRenderer||e._openGLRenderWindow.getMTime()>e.keyMatrixTime.getMTime()||t.getMTime()>e.keyMatrixTime.getMTime()||n.getMTime()>e.keyMatrixTime.getMTime()||e.renderable.getMTime()>e.keyMatrixTime.getMTime()){Ft(e.keyMatrices.wcvc,e.renderable.getViewMatrix()),f2(e.keyMatrices.normalMatrix,e.keyMatrices.wcvc),l2(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),Qe(e.keyMatrices.wcvc,e.keyMatrices.wcvc);const r=e._openGLRenderer.getAspectRatio();Ft(e.keyMatrices.vcpc,e.renderable.getProjectionMatrix(r,-1,1)),Qe(e.keyMatrices.vcpc,e.keyMatrices.vcpc),wt(e.keyMatrices.wcpc,e.keyMatrices.vcpc,e.keyMatrices.wcvc),e.keyMatrixTime.modified(),e.lastRenderer=n}return e.keyMatrices}}const mC={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null};function RC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,mC,n),st.extend(t,e,n),e.keyMatrixTime={},Dt(e.keyMatrixTime),e.keyMatrices={normalMatrix:new Float64Array(9),vcpc:new Float64Array(16),wcvc:new Float64Array(16),wcpc:new Float64Array(16)},St(t,e,["context","keyMatrixTime"]),EC(t,e)}const wC=Ye(RC);Nn("vtkCamera",wC);const{vtkDebugMacro:MC}=Pn;function OC(t,e){e.classHierarchy.push("vtkOpenGLRenderer"),t.buildPass=n=>{if(n){if(!e.renderable)return;t.updateLights(),t.prepareNodes(),t.addMissingNode(e.renderable.getActiveCamera()),t.addMissingNodes(e.renderable.getViewPropsWithNestedProps(),!0),t.removeUnusedNodes()}},t.updateLights=()=>{let n=0;const r=e.renderable.getLightsByReference();for(let i=0;i<r.length;++i)r[i].getSwitch()>0&&n++;return n||(MC("No lights are on, creating one."),e.renderable.createLight()),n},t.zBufferPass=n=>{if(n){let r=0;const i=e.context;e.renderable.getTransparent()||(e.context.clearColor(1,0,0,1),r|=i.COLOR_BUFFER_BIT),e.renderable.getPreserveDepthBuffer()||(i.clearDepth(1),r|=i.DEPTH_BUFFER_BIT,e.context.depthMask(!0));const s=t.getTiledSizeAndOrigin();i.enable(i.SCISSOR_TEST),i.scissor(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize),i.viewport(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize),i.colorMask(!0,!0,!0,!0),r&&i.clear(r),i.enable(i.DEPTH_TEST)}},t.opaqueZBufferPass=n=>t.zBufferPass(n),t.cameraPass=n=>{n&&t.clear()},t.getAspectRatio=()=>{const n=e._parent.getSizeByReference(),r=e.renderable.getViewportByReference();return n[0]*(r[2]-r[0])/((r[3]-r[1])*n[1])},t.getTiledSizeAndOrigin=()=>{const n=e.renderable.getViewportByReference(),r=[0,0,1,1],i=n[0]-r[0],s=n[1]-r[1],u=e._parent.normalizedDisplayToDisplay(i,s),c=Math.round(u[0]),l=Math.round(u[1]),g=n[2]-r[0],v=n[3]-r[1],h=e._parent.normalizedDisplayToDisplay(g,v);let y=Math.round(h[0])-c,T=Math.round(h[1])-l;return y<0&&(y=0),T<0&&(T=0),{usize:y,vsize:T,lowerLeftU:c,lowerLeftV:l}},t.clear=()=>{let n=0;const r=e.context;if(!e.renderable.getTransparent()){const s=e.renderable.getBackgroundByReference();r.clearColor(s[0],s[1],s[2],s[3]),n|=r.COLOR_BUFFER_BIT}e.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),n|=r.DEPTH_BUFFER_BIT,r.depthMask(!0)),r.colorMask(!0,!0,!0,!0);const i=t.getTiledSizeAndOrigin();r.enable(r.SCISSOR_TEST),r.scissor(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),r.viewport(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),n&&r.clear(n),r.enable(r.DEPTH_TEST)},t.releaseGraphicsResources=()=>{e.selector!==null&&e.selector.releaseGraphicsResources(),e.renderable&&e.renderable.getViewProps().forEach(n=>{n.modified()})},t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))}}const DC={context:null,_openGLRenderWindow:null,selector:null};function LC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,DC,n),st.extend(t,e,n),Kt(t,e,["shaderCache"]),St(t,e,["selector"]),zs(t,e,["openGLRenderWindow"]),OC(t,e)}const BC=Ye(LC,"vtkOpenGLRenderer");Nn("vtkRenderer",BC);function VC(t,e){e.classHierarchy.push("vtkOpenGLActor"),t.buildPass=n=>{if(n){e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let r=0;r<e.children.length;r++){const i=e.children[r];i.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(i)):e.oglmapper=i}}},t.traverseZBufferPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseOpaqueZBufferPass=n=>t.traverseOpaquePass(n),t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let n=0;n<e.ogltextures.length;n++){const r=e.ogltextures[n];r.render(),r.getHandle()&&e.activeTextures.push(r)}}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.zBufferPass=(n,r)=>t.opaquePass(n,r),t.opaqueZBufferPass=(n,r)=>t.opaquePass(n,r),t.opaquePass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()},t.translucentPass=(n,r)=>{if(n)e.context.depthMask(e._openGLRenderer.getSelector()&&e.renderable.getNestedPickable()),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(e.renderable.computeMatrix(),Ft(e.keyMatrices.mcwc,e.renderable.getMatrix()),Qe(e.keyMatrices.mcwc,e.keyMatrices.mcwc),e.renderable.getIsIdentity()?ya(e.keyMatrices.normalMatrix):(f2(e.keyMatrices.normalMatrix,e.keyMatrices.mcwc),l2(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),l6(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),e.keyMatrixTime.modified()),e.keyMatrices)}const NC={context:null,keyMatrixTime:null,keyMatrices:null,activeTextures:null};function _C(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,NC,n),st.extend(t,e,n),e.keyMatrixTime={},Dt(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:ya(new Float64Array(9)),mcwc:Oe(new Float64Array(16))},St(t,e,["context"]),Kt(t,e,["activeTextures"]),VC(t,e)}const UC=Ye(_C);Nn("vtkActor",UC);function GC(t,e){e.classHierarchy.push("vtkOpenGLActor2D"),t.buildPass=n=>{if(n){if(!e.renderable)return;e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let r=0;r<e.children.length;r++){const i=e.children[r];i.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(i)):e.oglmapper=i}}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementOverlayActorCount()}},t.traverseOpaquePass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseOverlayPass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let n=0;n<e.ogltextures.length;n++){const r=e.ogltextures[n];r.render(),r.getHandle()&&e.activeTextures.push(r)}}},t.opaquePass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()},t.translucentPass=(n,r)=>{if(n)e.context.depthMask(!1),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()},t.overlayPass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()}}const bC={context:null,activeTextures:null};function FC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bC,n),st.extend(t,e,n),St(t,e,["context"]),Kt(t,e,["activeTextures"]),GC(t,e)}const zC=Ye(FC);Nn("vtkActor2D",zC);function Gu(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function kC(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function g7(t){let e,n,r;t.length!==2?(e=Gu,n=(c,l)=>Gu(t(c),l),r=(c,l)=>t(c)-l):(e=t===Gu||t===kC?t:HC,n=t,r=t);function i(c,l,g=0,v=c.length){if(g<v){if(e(l,l)!==0)return v;do{const h=g+v>>>1;n(c[h],l)<0?g=h+1:v=h}while(g<v)}return g}function s(c,l,g=0,v=c.length){if(g<v){if(e(l,l)!==0)return v;do{const h=g+v>>>1;n(c[h],l)<=0?g=h+1:v=h}while(g<v)}return g}function u(c,l,g=0,v=c.length){const h=i(c,l,g,v-1);return h>g&&r(c[h-1],l)>-r(c[h],l)?h-1:h}return{left:i,center:u,right:s}}function HC(){return 0}function $C(t){return t===null?NaN:+t}const AC=g7(Gu),WC=AC.right;g7($C).center;const jC=Math.sqrt(50),KC=Math.sqrt(10),XC=Math.sqrt(2);function Pu(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),u=s>=jC?10:s>=KC?5:s>=XC?2:1;let c,l,g;return i<0?(g=Math.pow(10,-i)/u,c=Math.round(t*g),l=Math.round(e*g),c/g<t&&++c,l/g>e&&--l,g=-g):(g=Math.pow(10,i)*u,c=Math.round(t/g),l=Math.round(e/g),c*g<t&&++c,l*g>e&&--l),l<c&&.5<=n&&n<2?Pu(t,e,n*2):[c,l,g]}function YC(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,u]=r?Pu(e,t,n):Pu(t,e,n);if(!(s>=i))return[];const c=s-i+1,l=new Array(c);if(r)if(u<0)for(let g=0;g<c;++g)l[g]=(s-g)/-u;else for(let g=0;g<c;++g)l[g]=(s-g)*u;else if(u<0)for(let g=0;g<c;++g)l[g]=(i+g)/-u;else for(let g=0;g<c;++g)l[g]=(i+g)*u;return l}function kl(t,e,n){return e=+e,t=+t,n=+n,Pu(t,e,n)[2]}function qC(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?kl(e,t,n):kl(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function QC(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function C2(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function h7(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ks(){}var Vs=.7,Iu=1/Vs,I0="\\s*([+-]?\\d+)\\s*",Ns="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ZC=/^#([0-9a-f]{3,8})$/,JC=new RegExp(`^rgb\\(${I0},${I0},${I0}\\)$`),PC=new RegExp(`^rgb\\(${Zn},${Zn},${Zn}\\)$`),IC=new RegExp(`^rgba\\(${I0},${I0},${I0},${Ns}\\)$`),ex=new RegExp(`^rgba\\(${Zn},${Zn},${Zn},${Ns}\\)$`),tx=new RegExp(`^hsl\\(${Ns},${Zn},${Zn}\\)$`),nx=new RegExp(`^hsla\\(${Ns},${Zn},${Zn},${Ns}\\)$`),U9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};C2(ks,_s,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:G9,formatHex:G9,formatHex8:rx,formatHsl:ax,formatRgb:b9,toString:b9});function G9(){return this.rgb().formatHex()}function rx(){return this.rgb().formatHex8()}function ax(){return p7(this).formatHsl()}function b9(){return this.rgb().formatRgb()}function _s(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ZC.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?F9(e):n===3?new en(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?fu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?fu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=JC.exec(t))?new en(e[1],e[2],e[3],1):(e=PC.exec(t))?new en(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=IC.exec(t))?fu(e[1],e[2],e[3],e[4]):(e=ex.exec(t))?fu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=tx.exec(t))?H9(e[1],e[2]/100,e[3]/100,1):(e=nx.exec(t))?H9(e[1],e[2]/100,e[3]/100,e[4]):U9.hasOwnProperty(t)?F9(U9[t]):t==="transparent"?new en(NaN,NaN,NaN,0):null}function F9(t){return new en(t>>16&255,t>>8&255,t&255,1)}function fu(t,e,n,r){return r<=0&&(t=e=n=NaN),new en(t,e,n,r)}function ix(t){return t instanceof ks||(t=_s(t)),t?(t=t.rgb(),new en(t.r,t.g,t.b,t.opacity)):new en}function Hl(t,e,n,r){return arguments.length===1?ix(t):new en(t,e,n,r??1)}function en(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}C2(en,Hl,h7(ks,{brighter(t){return t=t==null?Iu:Math.pow(Iu,t),new en(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Vs:Math.pow(Vs,t),new en(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new en(e0(this.r),e0(this.g),e0(this.b),ec(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:z9,formatHex:z9,formatHex8:sx,formatRgb:k9,toString:k9}));function z9(){return`#${Pa(this.r)}${Pa(this.g)}${Pa(this.b)}`}function sx(){return`#${Pa(this.r)}${Pa(this.g)}${Pa(this.b)}${Pa((isNaN(this.opacity)?1:this.opacity)*255)}`}function k9(){const t=ec(this.opacity);return`${t===1?"rgb(":"rgba("}${e0(this.r)}, ${e0(this.g)}, ${e0(this.b)}${t===1?")":`, ${t})`}`}function ec(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function e0(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Pa(t){return t=e0(t),(t<16?"0":"")+t.toString(16)}function H9(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new zn(t,e,n,r)}function p7(t){if(t instanceof zn)return new zn(t.h,t.s,t.l,t.opacity);if(t instanceof ks||(t=_s(t)),!t)return new zn;if(t instanceof zn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),u=NaN,c=s-i,l=(s+i)/2;return c?(e===s?u=(n-r)/c+(n<r)*6:n===s?u=(r-e)/c+2:u=(e-n)/c+4,c/=l<.5?s+i:2-s-i,u*=60):c=l>0&&l<1?0:u,new zn(u,c,l,t.opacity)}function ox(t,e,n,r){return arguments.length===1?p7(t):new zn(t,e,n,r??1)}function zn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}C2(zn,ox,h7(ks,{brighter(t){return t=t==null?Iu:Math.pow(Iu,t),new zn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Vs:Math.pow(Vs,t),new zn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new en(hl(t>=240?t-240:t+120,i,r),hl(t,i,r),hl(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new zn($9(this.h),lu(this.s),lu(this.l),ec(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ec(this.opacity);return`${t===1?"hsl(":"hsla("}${$9(this.h)}, ${lu(this.s)*100}%, ${lu(this.l)*100}%${t===1?")":`, ${t})`}`}}));function $9(t){return t=(t||0)%360,t<0?t+360:t}function lu(t){return Math.max(0,Math.min(1,t||0))}function hl(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const x2=t=>()=>t;function ux(t,e){return function(n){return t+n*e}}function cx(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function fx(t){return(t=+t)==1?v7:function(e,n){return n-e?cx(e,n,t):x2(isNaN(e)?n:e)}}function v7(t,e){var n=e-t;return n?ux(t,n):x2(isNaN(t)?e:t)}const A9=(function t(e){var n=fx(e);function r(i,s){var u=n((i=Hl(i)).r,(s=Hl(s)).r),c=n(i.g,s.g),l=n(i.b,s.b),g=v7(i.opacity,s.opacity);return function(v){return i.r=u(v),i.g=c(v),i.b=l(v),i.opacity=g(v),i+""}}return r.gamma=t,r})(1);function lx(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function gx(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function hx(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),u;for(u=0;u<r;++u)i[u]=E2(t[u],e[u]);for(;u<n;++u)s[u]=e[u];return function(c){for(u=0;u<r;++u)s[u]=i[u](c);return s}}function px(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function tc(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function vx(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=E2(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var $l=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pl=new RegExp($l.source,"g");function yx(t){return function(){return t}}function dx(t){return function(e){return t(e)+""}}function Tx(t,e){var n=$l.lastIndex=pl.lastIndex=0,r,i,s,u=-1,c=[],l=[];for(t=t+"",e=e+"";(r=$l.exec(t))&&(i=pl.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),c[u]?c[u]+=s:c[++u]=s),(r=r[0])===(i=i[0])?c[u]?c[u]+=i:c[++u]=i:(c[++u]=null,l.push({i:u,x:tc(r,i)})),n=pl.lastIndex;return n<e.length&&(s=e.slice(n),c[u]?c[u]+=s:c[++u]=s),c.length<2?l[0]?dx(l[0].x):yx(e):(e=l.length,function(g){for(var v=0,h;v<e;++v)c[(h=l[v]).i]=h.x(g);return c.join("")})}function E2(t,e){var n=typeof e,r;return e==null||n==="boolean"?x2(e):(n==="number"?tc:n==="string"?(r=_s(e))?(e=r,A9):Tx:e instanceof _s?A9:e instanceof Date?px:gx(e)?lx:Array.isArray(e)?hx:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?vx:tc)(t,e)}function Sx(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Cx(t){return function(){return t}}function xx(t){return+t}var W9=[0,1];function J0(t){return t}function Al(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Cx(isNaN(e)?NaN:.5)}function Ex(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function mx(t,e,n){var r=t[0],i=t[1],s=e[0],u=e[1];return i<r?(r=Al(i,r),s=n(u,s)):(r=Al(r,i),s=n(s,u)),function(c){return s(r(c))}}function Rx(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),u=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++u<r;)i[u]=Al(t[u],t[u+1]),s[u]=n(e[u],e[u+1]);return function(c){var l=WC(t,c,1,r)-1;return s[l](i[l](c))}}function wx(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Mx(){var t=W9,e=W9,n=E2,r,i,s,u=J0,c,l,g;function v(){var y=Math.min(t.length,e.length);return u!==J0&&(u=Ex(t[0],t[y-1])),c=y>2?Rx:mx,l=g=null,h}function h(y){return y==null||isNaN(y=+y)?s:(l||(l=c(t.map(r),e,n)))(r(u(y)))}return h.invert=function(y){return u(i((g||(g=c(e,t.map(r),tc)))(y)))},h.domain=function(y){return arguments.length?(t=Array.from(y,xx),v()):t.slice()},h.range=function(y){return arguments.length?(e=Array.from(y),v()):e.slice()},h.rangeRound=function(y){return e=Array.from(y),n=Sx,v()},h.clamp=function(y){return arguments.length?(u=y?!0:J0,v()):u!==J0},h.interpolate=function(y){return arguments.length?(n=y,v()):n},h.unknown=function(y){return arguments.length?(s=y,h):s},function(y,T){return r=y,i=T,v()}}function Ox(){return Mx()(J0,J0)}function Dx(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function nc(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function ni(t){return t=nc(Math.abs(t)),t?t[1]:NaN}function Lx(t,e){return function(n,r){for(var i=n.length,s=[],u=0,c=t[0],l=0;i>0&&c>0&&(l+c+1>r&&(c=Math.max(1,r-l)),s.push(n.substring(i-=c,i+c)),!((l+=c+1)>r));)c=t[u=(u+1)%t.length];return s.reverse().join(e)}}function Bx(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Vx=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function rc(t){if(!(e=Vx.exec(t)))throw new Error("invalid format: "+t);var e;return new m2({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}rc.prototype=m2.prototype;function m2(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}m2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Nx(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var y7;function _x(t,e){var n=nc(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(y7=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,u=r.length;return s===u?r:s>u?r+new Array(s-u+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+nc(t,Math.max(0,e+s-1))[0]}function j9(t,e){var n=nc(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const K9={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Dx,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>j9(t*100,e),r:j9,s:_x,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function X9(t){return t}var Y9=Array.prototype.map,q9=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ux(t){var e=t.grouping===void 0||t.thousands===void 0?X9:Lx(Y9.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?X9:Bx(Y9.call(t.numerals,String)),u=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function g(h){h=rc(h);var y=h.fill,T=h.align,E=h.sign,S=h.symbol,x=h.zero,m=h.width,M=h.comma,R=h.precision,w=h.trim,D=h.type;D==="n"?(M=!0,D="g"):K9[D]||(R===void 0&&(R=12),w=!0,D="g"),(x||y==="0"&&T==="=")&&(x=!0,y="0",T="=");var O=S==="$"?n:S==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",_=S==="$"?r:/[%p]/.test(D)?u:"",N=K9[D],F=/[defgprs%]/.test(D);R=R===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,R)):Math.max(0,Math.min(20,R));function z($){var Y=O,A=_,K,ee,G;if(D==="c")A=N($)+A,$="";else{$=+$;var W=$<0||1/$<0;if($=isNaN($)?l:N(Math.abs($),R),w&&($=Nx($)),W&&+$==0&&E!=="+"&&(W=!1),Y=(W?E==="("?E:c:E==="-"||E==="("?"":E)+Y,A=(D==="s"?q9[8+y7/3]:"")+A+(W&&E==="("?")":""),F){for(K=-1,ee=$.length;++K<ee;)if(G=$.charCodeAt(K),48>G||G>57){A=(G===46?i+$.slice(K+1):$.slice(K))+A,$=$.slice(0,K);break}}}M&&!x&&($=e($,1/0));var q=Y.length+$.length+A.length,X=q<m?new Array(m-q+1).join(y):"";switch(M&&x&&($=e(X+$,X.length?m-A.length:1/0),X=""),T){case"<":$=Y+$+A+X;break;case"=":$=Y+X+$+A;break;case"^":$=X.slice(0,q=X.length>>1)+Y+$+A+X.slice(q);break;default:$=X+Y+$+A;break}return s($)}return z.toString=function(){return h+""},z}function v(h,y){var T=g((h=rc(h),h.type="f",h)),E=Math.max(-8,Math.min(8,Math.floor(ni(y)/3)))*3,S=Math.pow(10,-E),x=q9[8+E/3];return function(m){return T(S*m)+x}}return{format:g,formatPrefix:v}}var gu,d7,T7;Gx({thousands:",",grouping:[3],currency:["$",""]});function Gx(t){return gu=Ux(t),d7=gu.format,T7=gu.formatPrefix,gu}function bx(t){return Math.max(0,-ni(Math.abs(t)))}function Fx(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ni(e)/3)))*3-ni(Math.abs(t)))}function zx(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ni(e)-ni(t))+1}function kx(t,e,n,r){var i=qC(t,e,n),s;switch(r=rc(r??",f"),r.type){case"s":{var u=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Fx(i,u))&&(r.precision=s),T7(r,u)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=zx(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=bx(i))&&(r.precision=s-(r.type==="%")*2);break}}return d7(r)}function Hx(t){var e=t.domain;return t.ticks=function(n){var r=e();return YC(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return kx(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,u=r[i],c=r[s],l,g,v=10;for(c<u&&(g=u,u=c,c=g,g=i,i=s,s=g);v-- >0;){if(g=kl(u,c,n),g===l)return r[i]=u,r[s]=c,e(r);if(g>0)u=Math.floor(u/g)*g,c=Math.ceil(c/g)*g;else if(g<0)u=Math.ceil(u*g)/g,c=Math.floor(c*g)/g;else break;l=g}return t},t}function R2(){var t=Ox();return t.copy=function(){return wx(t,R2())},QC.apply(t,arguments),Hx(t)}var bu={exports:{}},$x=bu.exports,Q9;function Ax(){return Q9||(Q9=1,(function(t){(function(e,n,r){function i(l){var g=this,v=c();g.next=function(){var h=2091639*g.s0+g.c*23283064365386963e-26;return g.s0=g.s1,g.s1=g.s2,g.s2=h-(g.c=h|0)},g.c=1,g.s0=v(" "),g.s1=v(" "),g.s2=v(" "),g.s0-=v(l),g.s0<0&&(g.s0+=1),g.s1-=v(l),g.s1<0&&(g.s1+=1),g.s2-=v(l),g.s2<0&&(g.s2+=1),v=null}function s(l,g){return g.c=l.c,g.s0=l.s0,g.s1=l.s1,g.s2=l.s2,g}function u(l,g){var v=new i(l),h=g&&g.state,y=v.next;return y.int32=function(){return v.next()*4294967296|0},y.double=function(){return y()+(y()*2097152|0)*11102230246251565e-32},y.quick=y,h&&(typeof h=="object"&&s(h,v),y.state=function(){return s(v,{})}),y}function c(){var l=4022871197,g=function(v){v=String(v);for(var h=0;h<v.length;h++){l+=v.charCodeAt(h);var y=.02519603282416938*l;l=y>>>0,y-=l,y*=l,l=y>>>0,y-=l,l+=y*4294967296}return(l>>>0)*23283064365386963e-26};return g}n&&n.exports?n.exports=u:this.alea=u})($x,t)})(bu)),bu.exports}var Fu={exports:{}},Wx=Fu.exports,Z9;function jx(){return Z9||(Z9=1,(function(t){(function(e,n,r){function i(c){var l=this,g="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},c===(c|0)?l.x=c:g+=c;for(var v=0;v<g.length+64;v++)l.x^=g.charCodeAt(v)|0,l.next()}function s(c,l){return l.x=c.x,l.y=c.y,l.z=c.z,l.w=c.w,l}function u(c,l){var g=new i(c),v=l&&l.state,h=function(){return(g.next()>>>0)/4294967296};return h.double=function(){do var y=g.next()>>>11,T=(g.next()>>>0)/4294967296,E=(y+T)/(1<<21);while(E===0);return E},h.int32=g.next,h.quick=h,v&&(typeof v=="object"&&s(v,g),h.state=function(){return s(g,{})}),h}n&&n.exports?n.exports=u:this.xor128=u})(Wx,t)})(Fu)),Fu.exports}var zu={exports:{}},Kx=zu.exports,J9;function Xx(){return J9||(J9=1,(function(t){(function(e,n,r){function i(c){var l=this,g="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,c===(c|0)?l.x=c:g+=c;for(var v=0;v<g.length+64;v++)l.x^=g.charCodeAt(v)|0,v==g.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(c,l){return l.x=c.x,l.y=c.y,l.z=c.z,l.w=c.w,l.v=c.v,l.d=c.d,l}function u(c,l){var g=new i(c),v=l&&l.state,h=function(){return(g.next()>>>0)/4294967296};return h.double=function(){do var y=g.next()>>>11,T=(g.next()>>>0)/4294967296,E=(y+T)/(1<<21);while(E===0);return E},h.int32=g.next,h.quick=h,v&&(typeof v=="object"&&s(v,g),h.state=function(){return s(g,{})}),h}n&&n.exports?n.exports=u:this.xorwow=u})(Kx,t)})(zu)),zu.exports}var ku={exports:{}},Yx=ku.exports,P9;function qx(){return P9||(P9=1,(function(t){(function(e,n,r){function i(c){var l=this;l.next=function(){var v=l.x,h=l.i,y,T;return y=v[h],y^=y>>>7,T=y^y<<24,y=v[h+1&7],T^=y^y>>>10,y=v[h+3&7],T^=y^y>>>3,y=v[h+4&7],T^=y^y<<7,y=v[h+7&7],y=y^y<<13,T^=y^y<<9,v[h]=T,l.i=h+1&7,T};function g(v,h){var y,T=[];if(h===(h|0))T[0]=h;else for(h=""+h,y=0;y<h.length;++y)T[y&7]=T[y&7]<<15^h.charCodeAt(y)+T[y+1&7]<<13;for(;T.length<8;)T.push(0);for(y=0;y<8&&T[y]===0;++y);for(y==8?T[7]=-1:T[y],v.x=T,v.i=0,y=256;y>0;--y)v.next()}g(l,c)}function s(c,l){return l.x=c.x.slice(),l.i=c.i,l}function u(c,l){c==null&&(c=+new Date);var g=new i(c),v=l&&l.state,h=function(){return(g.next()>>>0)/4294967296};return h.double=function(){do var y=g.next()>>>11,T=(g.next()>>>0)/4294967296,E=(y+T)/(1<<21);while(E===0);return E},h.int32=g.next,h.quick=h,v&&(v.x&&s(v,g),h.state=function(){return s(g,{})}),h}n&&n.exports?n.exports=u:this.xorshift7=u})(Yx,t)})(ku)),ku.exports}var Hu={exports:{}},Qx=Hu.exports,I9;function Zx(){return I9||(I9=1,(function(t){(function(e,n,r){function i(c){var l=this;l.next=function(){var v=l.w,h=l.X,y=l.i,T,E;return l.w=v=v+1640531527|0,E=h[y+34&127],T=h[y=y+1&127],E^=E<<13,T^=T<<17,E^=E>>>15,T^=T>>>12,E=h[y]=E^T,l.i=y,E+(v^v>>>16)|0};function g(v,h){var y,T,E,S,x,m=[],M=128;for(h===(h|0)?(T=h,h=null):(h=h+"\0",T=0,M=Math.max(M,h.length)),E=0,S=-32;S<M;++S)h&&(T^=h.charCodeAt((S+32)%h.length)),S===0&&(x=T),T^=T<<10,T^=T>>>15,T^=T<<4,T^=T>>>13,S>=0&&(x=x+1640531527|0,y=m[S&127]^=T+x,E=y==0?E+1:0);for(E>=128&&(m[(h&&h.length||0)&127]=-1),E=127,S=512;S>0;--S)T=m[E+34&127],y=m[E=E+1&127],T^=T<<13,y^=y<<17,T^=T>>>15,y^=y>>>12,m[E]=T^y;v.w=x,v.X=m,v.i=E}g(l,c)}function s(c,l){return l.i=c.i,l.w=c.w,l.X=c.X.slice(),l}function u(c,l){c==null&&(c=+new Date);var g=new i(c),v=l&&l.state,h=function(){return(g.next()>>>0)/4294967296};return h.double=function(){do var y=g.next()>>>11,T=(g.next()>>>0)/4294967296,E=(y+T)/(1<<21);while(E===0);return E},h.int32=g.next,h.quick=h,v&&(v.X&&s(v,g),h.state=function(){return s(g,{})}),h}n&&n.exports?n.exports=u:this.xor4096=u})(Qx,t)})(Hu)),Hu.exports}var $u={exports:{}},Jx=$u.exports,e8;function Px(){return e8||(e8=1,(function(t){(function(e,n,r){function i(c){var l=this,g="";l.next=function(){var h=l.b,y=l.c,T=l.d,E=l.a;return h=h<<25^h>>>7^y,y=y-T|0,T=T<<24^T>>>8^E,E=E-h|0,l.b=h=h<<20^h>>>12^y,l.c=y=y-T|0,l.d=T<<16^y>>>16^E,l.a=E-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,c===Math.floor(c)?(l.a=c/4294967296|0,l.b=c|0):g+=c;for(var v=0;v<g.length+20;v++)l.b^=g.charCodeAt(v)|0,l.next()}function s(c,l){return l.a=c.a,l.b=c.b,l.c=c.c,l.d=c.d,l}function u(c,l){var g=new i(c),v=l&&l.state,h=function(){return(g.next()>>>0)/4294967296};return h.double=function(){do var y=g.next()>>>11,T=(g.next()>>>0)/4294967296,E=(y+T)/(1<<21);while(E===0);return E},h.int32=g.next,h.quick=h,v&&(typeof v=="object"&&s(v,g),h.state=function(){return s(g,{})}),h}n&&n.exports?n.exports=u:this.tychei=u})(Jx,t)})($u)),$u.exports}var Au={exports:{}};const Ix={},eE=Object.freeze(Object.defineProperty({__proto__:null,default:Ix},Symbol.toStringTag,{value:"Module"})),tE=CT(eE);var nE=Au.exports,t8;function rE(){return t8||(t8=1,(function(t){(function(e,n,r){var i=256,s=6,u=52,c="random",l=r.pow(i,s),g=r.pow(2,u),v=g*2,h=i-1,y;function T(w,D,O){var _=[];D=D==!0?{entropy:!0}:D||{};var N=m(x(D.entropy?[w,R(n)]:w??M(),3),_),F=new E(_),z=function(){for(var $=F.g(s),Y=l,A=0;$<g;)$=($+A)*i,Y*=i,A=F.g(1);for(;$>=v;)$/=2,Y/=2,A>>>=1;return($+A)/Y};return z.int32=function(){return F.g(4)|0},z.quick=function(){return F.g(4)/4294967296},z.double=z,m(R(F.S),n),(D.pass||O||function($,Y,A,K){return K&&(K.S&&S(K,F),$.state=function(){return S(F,{})}),A?(r[c]=$,Y):$})(z,N,"global"in D?D.global:this==r,D.state)}function E(w){var D,O=w.length,_=this,N=0,F=_.i=_.j=0,z=_.S=[];for(O||(w=[O++]);N<i;)z[N]=N++;for(N=0;N<i;N++)z[N]=z[F=h&F+w[N%O]+(D=z[N])],z[F]=D;(_.g=function($){for(var Y,A=0,K=_.i,ee=_.j,G=_.S;$--;)Y=G[K=h&K+1],A=A*i+G[h&(G[K]=G[ee=h&ee+Y])+(G[ee]=Y)];return _.i=K,_.j=ee,A})(i)}function S(w,D){return D.i=w.i,D.j=w.j,D.S=w.S.slice(),D}function x(w,D){var O=[],_=typeof w,N;if(D&&_=="object")for(N in w)try{O.push(x(w[N],D-1))}catch{}return O.length?O:_=="string"?w:w+"\0"}function m(w,D){for(var O=w+"",_,N=0;N<O.length;)D[h&N]=h&(_^=D[h&N]*19)+O.charCodeAt(N++);return R(D)}function M(){try{var w;return y&&(w=y.randomBytes)?w=w(i):(w=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(w)),R(w)}catch{var D=e.navigator,O=D&&D.plugins;return[+new Date,e,O,e.screen,R(n)]}}function R(w){return String.fromCharCode.apply(0,w)}if(m(r.random(),n),t.exports){t.exports=T;try{y=tE}catch{}}else r["seed"+c]=T})(typeof self<"u"?self:nE,[],Math)})(Au)),Au.exports}var vl,n8;function aE(){if(n8)return vl;n8=1;var t=Ax(),e=jx(),n=Xx(),r=qx(),i=Zx(),s=Px(),u=rE();return u.alea=t,u.xor128=e,u.xorwow=n,u.xorshift7=r,u.xor4096=i,u.tychei=s,vl=u,vl}var iE=aE();const sE=ci(iE),oE=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],uE=[1,0,0,0,1,0,0,0,1],w2=1e-6,M2=1e-12,{vtkErrorMacro:S7,vtkWarningMacro:r0}=B;let C7=0;const r8=20;function Hs(t){return()=>S7(`vtkMath::${t} - NOT IMPLEMENTED`)}function Ms(t,e,n,r){let i;for(let s=0;s<e;s++)i=t[n*e+s],t[n*e+s]=t[r*e+s],t[r*e+s]=i}function ds(t,e,n,r){let i;for(let s=0;s<e;s++)i=t[s*e+n],t[s*e+n]=t[s*e+r],t[s*e+r]=i}function qe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3;const e=Array(t);for(let n=0;n<t;++n)e[n]=0;return e}const cE=()=>Math.PI;function fE(t,e){return e>1023?t*2**1023*2**(e-1023):e<-1074?t*2**-1074*2**(e+1074):t*2**e}function at(t){return t/180*Math.PI}function ri(t){return t*180/Math.PI}const{round:Ts,floor:x7,ceil:lE,min:gE,max:hE}=Math;function pE(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=1/0;for(let i=e,s=t.length;i<s;i+=n)t[i]<r&&(r=t[i]);return r}function vE(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=-1/0;for(let i=e,s=t.length;i<s;i+=n)r<t[i]&&(r=t[i]);return r}function yE(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=1/0,i=-1/0;for(let s=e,u=t.length;s<u;s+=n)t[s]<r&&(r=t[s]),i<t[s]&&(i=t[s]);return[r,i]}const dE=Hs("ceilLog2"),TE=Hs("factorial");function Bn(t){let e=1;for(;e<t;)e*=2;return e}function Ss(t){return t===Bn(t)}function SE(t,e){let n=1;for(let r=1;r<=e;++r)n*=(t-r+1)/r;return Math.floor(n)}function CE(t,e){if(t<e)return 0;const n=qe(e);for(let r=0;r<e;++r)n[r]=r;return n}function xE(t,e,n){let r=0;for(let i=e-1;i>=0;--i)if(n[i]<t-e+i){let s=n[i]+1;for(;i<e;)n[i++]=s++;r=1;break}return r}function EE(t){sE(`${t}`,{global:!0}),C7=t}function mE(){return C7}function RE(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:1)-t;return t+n*Math.random()}const wE=Hs("gaussian");function ai(t,e,n){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function Tt(t,e,n){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}function E7(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,t}function m7(t,e){return t[0]*=e,t[1]*=e,t}function Wl(t,e,n,r){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r[2]=t[2]+e[2]*n,r}function ME(t,e,n,r){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r}function pe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function OE(t,e,n){n[0]=t[0]*e[0],n[1]=t[0]*e[1],n[2]=t[0]*e[2],n[3]=t[1]*e[0],n[4]=t[1]*e[1],n[5]=t[1]*e[2],n[6]=t[2]*e[0],n[7]=t[2]*e[1],n[8]=t[2]*e[2]}function jt(t,e,n){const r=t[1]*e[2]-t[2]*e[1],i=t[2]*e[0]-t[0]*e[2],s=t[0]*e[1]-t[1]*e[0];return n[0]=r,n[1]=i,n[2]=s,n}function hn(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;switch(e){case 1:return Math.abs(t);case 2:return Math.sqrt(t[0]*t[0]+t[1]*t[1]);case 3:return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);default:{let n=0;for(let r=0;r<e;r++)n+=t[r]*t[r];return Math.sqrt(n)}}}function pn(t){const e=hn(t);return e!==0&&(t[0]/=e,t[1]/=e,t[2]/=e),e}function DE(t){const e=hn(t,3);return e!==0&&(t[0]/=e,t[1]/=e,t[2]/=e,t[3]/=e),e}function LE(t,e,n,r){const i=t[0]*t[0],s=t[1]*t[1],u=t[2]*t[2],c=Math.sqrt(i+s+u);let l,g,v;i>s&&i>u?(l=0,g=1,v=2):s>u?(l=1,g=2,v=0):(l=2,g=0,v=1);const h=t[l]/c,y=t[g]/c,T=t[v]/c,E=Math.sqrt(h*h+T*T);if(r!==0){const S=Math.sin(r),x=Math.cos(r);e&&(e[l]=(T*x-h*y*S)/E,e[g]=S*E,e[v]=(-(h*x)-y*T*S)/E),n&&(n[l]=(-(T*S)-h*y*x)/E,n[g]=x*E,n[v]=(h*S-y*T*x)/E)}else e&&(e[l]=T/E,e[g]=0,e[v]=-h/E),n&&(n[l]=-h*y/E,n[g]=E,n[v]=-y*T/E)}function BE(t,e,n){const r=pe(e,e);if(r===0)return n[0]=0,n[1]=0,n[2]=0,!1;const i=pe(t,e)/r;for(let s=0;s<3;s++)n[s]=e[s];return E7(n,i),!0}function jl(t,e){return t[0]*e[0]+t[1]*e[1]}function VE(t,e,n){const r=jl(e,e);if(r===0)return n[0]=0,n[1]=0,!1;const i=jl(t,e)/r;for(let s=0;s<2;s++)n[s]=e[s];return m7(n,i),!0}function It(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2])}function NE(t,e){const n=[0,0,0];return jt(t,e,n),Math.atan2(hn(n),pe(t,e))}function _E(t,e,n){const r=Math.abs(t-n);return 1/Math.sqrt(2*Math.PI*e)*Math.exp(-(r**2)/(2*e))}function UE(t,e,n){const r=Math.abs(t-n);return Math.exp(-(r**2)/(2*e))}function GE(t,e,n){n[0]=t[0]*e[0],n[1]=t[0]*e[1],n[2]=t[1]*e[0],n[3]=t[1]*e[1]}function R7(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function w7(t){const e=R7(t);return e!==0&&(t[0]/=e,t[1]/=e),e}function tt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===2?e[0][0]*e[1][1]-e[1][0]*e[0][1]:e.length===4?e[0]*e[3]-e[1]*e[2]:Number.NaN}function bE(t,e){let n,r,i;const s=[0,0,0];for(let u=0;u<3;u++)i=Math.abs(t[u*3]),(r=Math.abs(t[u*3+1]))>i&&(i=r),(r=Math.abs(t[u*3+2]))>i&&(i=r),s[u]=1/i;i=s[0]*Math.abs(t[0]),n=0,(r=s[1]*Math.abs(t[3]))>=i&&(i=r,n=1),(r=s[2]*Math.abs(t[6]))>=i&&(n=2),n!==0&&(Ms(t,3,n,0),s[n]=s[0]),e[0]=n,t[3]/=t[0],t[6]/=t[0],t[4]-=t[3]*t[1],t[7]-=t[6]*t[1],i=s[1]*Math.abs(t[4]),n=1,(r=s[2]*Math.abs(t[7]))>=i&&(n=2,Ms(t,3,1,2),s[2]=s[1]),e[1]=n,t[7]/=t[4],t[5]-=t[3]*t[2],t[8]-=t[6]*t[2]+t[7]*t[5],e[2]=2}function FE(t,e,n){let r=n[e[0]];n[e[0]]=n[0],n[0]=r,r=n[e[1]],n[e[1]]=n[1],n[1]=r-t[3]*n[0],r=n[e[2]],n[e[2]]=n[2],n[2]=r-t[6]*n[0]-t[7]*n[1],n[2]/=t[8],n[1]=(n[1]-t[5]*n[2])/t[4],n[0]=(n[0]-t[1]*n[1]-t[2]*n[2])/t[0]}function zE(t,e,n){const r=t[0],i=t[1],s=t[2],u=t[3],c=t[4],l=t[5],g=t[6],v=t[7],h=t[8],y=+tt(c,v,l,h),T=-tt(u,g,l,h),E=+tt(u,g,c,v),S=-tt(i,v,s,h),x=+tt(r,g,s,h),m=-tt(r,g,i,v),M=+tt(i,c,s,l),R=-tt(r,u,s,l),w=+tt(r,u,i,c),D=r*y+i*T+s*E,O=y*e[0]+S*e[1]+M*e[2],_=T*e[0]+x*e[1]+R*e[2],N=E*e[0]+m*e[1]+w*e[2];n[0]=O/D,n[1]=_/D,n[2]=N/D}function kE(t,e,n){const r=t[0]*e[0]+t[1]*e[1]+t[2]*e[2],i=t[3]*e[0]+t[4]*e[1]+t[5]*e[2],s=t[6]*e[0]+t[7]*e[1]+t[8]*e[2];n[0]=r,n[1]=i,n[2]=s}function Kl(t,e,n){const r=[...t],i=[...e];for(let s=0;s<3;s++)n[s]=r[0]*i[s]+r[1]*i[s+3]+r[2]*i[s+6],n[s+3]=r[3]*i[s]+r[4]*i[s+3]+r[5]*i[s+6],n[s+6]=r[6]*i[s]+r[7]*i[s+3]+r[8]*i[s+6]}function HE(t,e,n,r,i,s,u){r!==i&&S7("Number of columns of A must match number of rows of B.");const c=[...t],l=[...e];for(let g=0;g<n;g++)for(let v=0;v<s;v++){u[g*s+v]=0;for(let h=0;h<r;h++)u[g*s+v]+=c[g*r+h]*l[v+s*h]}}function ei(t,e){let n;n=t[3],e[3]=t[1],e[1]=n,n=t[6],e[6]=t[2],e[2]=n,n=t[7],e[7]=t[5],e[5]=n,e[0]=t[0],e[4]=t[4],e[8]=t[8]}function $E(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],u=t[4],c=t[5],l=t[6],g=t[7],v=t[8],h=+tt(u,g,c,v),y=-tt(s,l,c,v),T=+tt(s,l,u,g),E=-tt(r,g,i,v),S=+tt(n,l,i,v),x=-tt(n,l,r,g),m=+tt(r,u,i,c),M=-tt(n,s,i,c),R=+tt(n,s,r,u),w=n*h+r*y+i*T;w===0&&r0("Matrix has 0 determinant"),e[0]=h/w,e[3]=y/w,e[6]=T/w,e[1]=E/w,e[4]=S/w,e[7]=x/w,e[2]=m/w,e[5]=M/w,e[8]=R/w}function yc(t){return t[0]*t[4]*t[8]+t[3]*t[7]*t[2]+t[6]*t[1]*t[5]-t[0]*t[7]*t[5]-t[3]*t[1]*t[8]-t[6]*t[4]*t[2]}function M7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:w2;if(t.length!==e.length)return!1;function r(i,s){return Math.abs(i-e[s])<=n}return t.every(r)}const Us=M7;function O7(t){for(let e=0;e<3;e++)t[e*3]=t[e*3+1]=t[e*3+2]=0,t[e*3+e]=1}function D7(t,e){for(let n=0;n<t;n++){for(let r=0;r<t;r++)e[n*t+r]=0;e[n*t+n]=1}return e}function AE(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w2;return Us(t,oE,e)}function WE(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w2;return Us(t,uE,e)}function L7(t,e){const n=t[0]*t[0],r=t[0]*t[1],i=t[0]*t[2],s=t[0]*t[3],u=t[1]*t[1],c=t[2]*t[2],l=t[3]*t[3],g=t[1]*t[2],v=t[1]*t[3],h=t[2]*t[3],y=u+c+l;let T=1/(n+y);const E=(n-y)*T;T*=2,e[0]=u*T+E,e[3]=(g+s)*T,e[6]=(v-i)*T,e[1]=(g-s)*T,e[4]=c*T+E,e[7]=(h+r)*T,e[2]=(v+i)*T,e[5]=(h-r)*T,e[8]=l*T+E}function Wu(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!`${t}`.includes("e"))return+`${Math.round(`${t}e+${e}`)}e-${e}`;const n=`${t}`.split("e");let r="";return+n[1]+e>0&&(r="+"),+`${Math.round(`${+n[0]}e${r}${+n[1]+e}`)}e-${e}`}function Xl(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return e[0]=Wu(t[0],n),e[1]=Wu(t[1],n),e[2]=Wu(t[2],n),e}function $s(t,e,n,r){let i,s,u,c,l,g,v,h,y,T,E,S,x,m,M,R;const w=qe(e),D=qe(e),O=(N,F,z)=>{m=N[F],x=N[z],N[F]=m-S*(x+m*T),N[z]=x+S*(m-x*T)};for(D7(e,r),l=0;l<e;l++)w[l]=n[l]=t[l+l*e],D[l]=0;for(i=0;i<r8;i++){for(E=0,l=0;l<e-1;l++)for(c=l+1;c<e;c++)E+=Math.abs(t[l*e+c]);if(E===0)break;for(i<3?v=.2*E/(e*e):v=0,l=0;l<e-1;l++)for(c=l+1;c<e;c++)if(m=100*Math.abs(t[l*e+c]),i>3&&Math.abs(n[l])+m===Math.abs(n[l])&&Math.abs(n[c])+m===Math.abs(n[c]))t[l*e+c]=0;else if(Math.abs(t[l*e+c])>v){for(x=n[c]-n[l],Math.abs(x)+m===Math.abs(x)?y=t[l*e+c]/x:(h=.5*x/t[l*e+c],y=1/(Math.abs(h)+Math.sqrt(1+h*h)),h<0&&(y=-y)),M=1/Math.sqrt(1+y*y),S=y*M,T=S/(1+M),x=y*t[l*e+c],D[l]-=x,D[c]+=x,n[l]-=x,n[c]+=x,t[l*e+c]=0,s=0;s<=l-1;s++)O(t,s*e+l,s*e+c);for(s=l+1;s<=c-1;s++)O(t,l*e+s,s*e+c);for(s=c+1;s<e;s++)O(t,l*e+s,c*e+s);for(s=0;s<e;s++)O(r,s*e+l,s*e+c)}for(l=0;l<e;l++)w[l]+=D[l],n[l]=w[l],D[l]=0}if(i>=r8)return r0("vtkMath::Jacobi: Error extracting eigenfunctions"),0;for(s=0;s<e-1;s++){for(u=s,R=n[u],i=s+1;i<e;i++)(n[i]>=R||Math.abs(n[i]-R)<M2)&&(u=i,R=n[u]);u!==s&&(n[u]=n[s],n[s]=R,ds(r,e,s,u))}const _=(e>>1)+(e&1);for(g=0,i=0;i<e*e;i++)r[i]>=0&&g++;if(g<_)for(i=0;i<e;i++)r[i*e+s]*=-1;return 1}function B7(t,e){const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];n[0]=t[0]+t[4]+t[8],n[5]=t[0]-t[4]-t[8],n[10]=-t[0]+t[4]-t[8],n[15]=-t[0]-t[4]+t[8],n[1]=n[4]=t[7]-t[5],n[2]=n[8]=t[2]-t[6],n[3]=n[12]=t[3]-t[1],n[6]=n[9]=t[3]+t[1],n[7]=n[13]=t[2]+t[6],n[11]=n[14]=t[7]+t[5];const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],s=[...n];$s(s,4,i,r),e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12]}function jE(t,e,n){const r=t[0]*e[0],i=t[0]*e[1],s=t[0]*e[2],u=t[0]*e[3],c=t[1]*e[0],l=t[1]*e[1],g=t[1]*e[2],v=t[1]*e[3],h=t[2]*e[0],y=t[2]*e[1],T=t[2]*e[2],E=t[2]*e[3],S=t[3]*e[0],x=t[3]*e[1],m=t[3]*e[2],M=t[3]*e[3];n[0]=r-l-T-M,n[1]=i+c+E-m,n[2]=s-v+h+x,n[3]=u+g-y+S}function V7(t,e){for(let y=0;y<9;y++)e[y]=t[y];const n=qe(3),r=qe(3);let i;for(let y=0;y<3;y++){const T=Math.abs(e[y*3]),E=Math.abs(e[y*3+1]),S=Math.abs(e[y*3+2]);i=E>T?E:T,i=S>i?S:i,n[y]=1,i!==0&&(n[y]/=i)}const s=Math.abs(e[0])*n[0],u=Math.abs(e[3])*n[1],c=Math.abs(e[6])*n[2];r[0]=0,i=s,u>=i&&(i=u,r[0]=1),c>=i&&(r[0]=2),r[0]!==0&&(ds(e,3,r[0],0),n[r[0]]=n[0]);const l=Math.abs(e[4])*n[1],g=Math.abs(e[7])*n[2];r[1]=1,i=l,g>=i&&(r[1]=2,ds(e,3,1,2)),r[2]=2;let v=0;if(yc(e)<0){v=1;for(let y=0;y<9;y++)e[y]=-e[y]}const h=qe(4);if(B7(e,h),L7(h,e),v)for(let y=0;y<9;y++)e[y]=-e[y];r[1]!==1&&ds(e,3,r[1],1),r[0]!==0&&ds(e,3,r[0],0)}function N7(t,e,n){let r,i,s,u,c,l;const g=[...t];if($s(g,3,e,n),e[0]===e[1]&&e[0]===e[2]){O7(n);return}for(ei(n,n),r=0;r<3;r++)if(e[(r+1)%3]===e[(r+2)%3]){for(l=Math.abs(n[r*3]),u=0,i=1;i<3;i++)l<(c=Math.abs(n[r*3+i]))&&(l=c,u=i);u!==r&&(c=e[u],e[u]=e[r],e[r]=c,Ms(n,3,r,u)),n[u*3+u]<0&&(n[u*3]=-n[u*3],n[u*3+1]=-n[u*3+1],n[u*3+2]=-n[u*3+2]),i=(u+1)%3,s=(u+2)%3,n[i*3]=0,n[i*3+1]=0,n[i*3+2]=0,n[i*3+i]=1;const v=jt([n[u*3],n[u*3+1],n[u*3+2]],[n[i*3],n[i*3+1],n[i*3+2]],[]);pn(v);const h=jt(v,[n[u*3],n[u*3+1],n[u*3+2]],[]);for(let y=0;y<3;y++)n[s*3+y]=v[y],n[i*3+y]=h[y];ei(n,n);return}for(l=Math.abs(n[0]),u=0,r=1;r<3;r++)l<(c=Math.abs(n[r*3]))&&(l=c,u=r);if(u!==0){const v=e[u];e[u]=e[0],e[0]=v,Ms(n,3,u,0)}if(Math.abs(n[4])<Math.abs(n[7])){const v=e[2];e[2]=e[1],e[1]=v,Ms(n,3,1,2)}for(r=0;r<2;r++)n[r*3+r]<0&&(n[r*3]=-n[r*3],n[r*3+1]=-n[r*3+1],n[r*3+2]=-n[r*3+2]);yc(n)<0&&(n[6]=-n[6],n[7]=-n[7],n[8]=-n[8]),ei(n,n)}function KE(t,e,n,r){let i;const s=[...t],u=yc(s);if(u<0)for(i=0;i<9;i++)s[i]=-s[i];V7(s,e),ei(s,s),Kl(s,e,r),N7(r,n,r),Kl(e,r,e),ei(r,r),u<0&&(n[0]=-n[0],n[1]=-n[1],n[2]=-n[2])}function O2(t,e,n){let r,i,s,u,c=0,l,g,v;const h=qe(n);for(r=0;r<n;r++){for(u=0,i=0;i<n;i++)(v=Math.abs(t[r*n+i]))>u&&(u=v);if(u===0)return r0("Unable to factor linear system"),0;h[r]=1/u}for(i=0;i<n;i++){for(r=0;r<i;r++){for(l=t[r*n+i],s=0;s<r;s++)l-=t[r*n+s]*t[s*n+i];t[r*n+i]=l}for(u=0,r=i;r<n;r++){for(l=t[r*n+i],s=0;s<i;s++)l-=t[r*n+s]*t[s*n+i];t[r*n+i]=l,(g=h[r]*Math.abs(l))>=u&&(u=g,c=r)}if(i!==c){for(s=0;s<n;s++)g=t[c*n+s],t[c*n+s]=t[i*n+s],t[i*n+s]=g;h[c]=h[i]}if(e[i]=c,Math.abs(t[i*n+i])<=M2)return r0("Unable to factor linear system"),0;if(i!==n-1)for(g=1/t[i*n+i],r=i+1;r<n;r++)t[r*n+i]*=g}return 1}function D2(t,e,n,r){let i,s,u,c,l;for(u=-1,i=0;i<r;i++){if(c=e[i],l=n[c],n[c]=n[i],u>=0)for(s=u;s<=i-1;s++)l-=t[i*r+s]*n[s];else l!==0&&(u=i);n[i]=l}for(i=r-1;i>=0;i--){for(l=n[i],s=i+1;s<r;s++)l-=t[i*r+s]*n[s];n[i]=l/t[i*r+i]}}function _7(t,e,n){if(n===2){const i=qe(2),s=tt(t[0],t[1],t[2],t[3]);return s===0?0:(i[0]=(t[3]*e[0]-t[1]*e[1])/s,i[1]=(-(t[2]*e[0])+t[0]*e[1])/s,e[0]=i[0],e[1]=i[1],1)}if(n===1)return t[0]===0?0:(e[0]/=t[0],1);const r=qe(n);return O2(t,r,n)===0?0:(D2(t,r,e,n),1)}function L2(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;const s=r||qe(n),u=i||qe(n);if(O2(t,s,n)===0)return null;for(let c=0;c<n;c++){for(let l=0;l<n;l++)u[l]=0;u[c]=1,D2(t,s,u,n);for(let l=0;l<n;l++)e[l*n+c]=u[l]}return e}function XE(t,e){let n=+Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let i=0;i<e;i++)for(let s=i;s<e;s++)Math.abs(t[i*e+s])>r&&(r=Math.abs(t[i*e+s]));for(let i=0;i<e;i++)Math.abs(t[i*e+i])<n&&(n=Math.abs(t[i*e+i]));return n===0?Number.MAX_VALUE:r/n}function YE(t,e,n){return $s(t,3,e,n)}function Yl(t,e,n,r){if(t<n)return r0("Insufficient number of samples. Underdetermined."),0;let i,s,u;const c=qe(n*n),l=qe(n),g=qe(n*n);for(u=0;u<t;u++)for(i=0;i<n;i++)for(s=i;s<n;s++)c[i*n+s]+=e[u*n+i]*e[u*n+s];for(i=0;i<n;i++)for(s=0;s<i;s++)c[i*n+s]=c[s*n+i];for($s(c,n,l,g),i=0;i<n;i++)r[i]=g[i*n+n-1];return 1}function qE(t,e,n,r,i,s){let u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!0;if(t<n||t<i)return r0("Insufficient number of samples. Underdetermined."),0;const c=qe(i);let l=1,g,v=0,h,y,T,E=0;if(u){for(y=0;y<i;y++)c[y]=1;for(h=0;h<t;h++)for(y=0;y<i;y++)Math.abs(r[h*i+y])>M2&&(l=0,c[y]=0);if(l&&i===1)return r0("Detected homogeneous system (Y=0), calling SolveHomogeneousLeastSquares()"),Yl(t,e,n,s);if(l)E=1;else for(y=0;y<i;y++)c[y]&&(E=1)}E&&(g=qe(n),v=Yl(t,e,n,g));const S=qe(n*n),x=qe(n*n),m=qe(n*i);for(T=0;T<t;T++)for(h=0;h<n;h++){for(y=h;y<n;y++)S[h*n+y]+=e[T*n+h]*e[T*n+y];for(y=0;y<i;y++)m[h*i+y]+=e[T*n+h]*r[T*i+y]}for(h=0;h<n;h++)for(y=0;y<h;y++)S[h*n+y]=S[y*n+h];const M=L2(S,x,n);if(M)for(h=0;h<n;h++)for(y=0;y<i;y++)for(s[h*i+y]=0,T=0;T<n;T++)s[h*i+y]+=x[h*n+T]*m[T*i+y];if(E){for(y=0;y<i;y++)if(c[y])for(h=0;h<n;h++)s[h*i+y]=g[h*i]}return E?v&&M:M}function QE(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,.5,1];switch(t.length){case 3:return e[0]=parseInt(t[0],16)*17/255,e[1]=parseInt(t[1],16)*17/255,e[2]=parseInt(t[2],16)*17/255,e;case 4:return e[0]=parseInt(t[1],16)*17/255,e[1]=parseInt(t[2],16)*17/255,e[2]=parseInt(t[3],16)*17/255,e;case 6:return e[0]=parseInt(t.substr(0,2),16)/255,e[1]=parseInt(t.substr(2,2),16)/255,e[2]=parseInt(t.substr(4,2),16)/255,e;case 7:return e[0]=parseInt(t.substr(1,2),16)/255,e[1]=parseInt(t.substr(3,2),16)/255,e[2]=parseInt(t.substr(5,2),16)/255,e;case 9:return e[0]=parseInt(t.substr(1,2),16)/255,e[1]=parseInt(t.substr(3,2),16)/255,e[2]=parseInt(t.substr(5,2),16)/255,e[3]=parseInt(t.substr(7,2),16)/255,e;default:return e}}function Cs(t,e){let n,r;const[i,s,u]=t,c=1/3,l=1/6,g=2/3;let v=i,h=i;s>v?v=s:s<h&&(h=s),u>v?v=u:u<h&&(h=u);const y=v;y>0?r=(v-h)/v:r=0,r>0?(i===v?n=l*(s-u)/(v-h):s===v?n=c+l*(u-i)/(v-h):n=g+l*(i-s)/(v-h),n<0&&(n+=1)):n=0,e[0]=n,e[1]=r,e[2]=y}function Qa(t,e){const[n,r,i]=t,s=1/3,u=1/6,c=2/3,l=5/6;let g,v,h;n>u&&n<=s?(v=1,g=(s-n)/u,h=0):n>s&&n<=.5?(v=1,h=(n-s)/u,g=0):n>.5&&n<=c?(h=1,v=(c-n)/u,g=0):n>c&&n<=l?(h=1,g=(n-c)/u,v=0):n>l&&n<=1?(g=1,h=(1-n)/u,v=0):(g=1,v=n/u,h=0),g=r*g+(1-r),v=r*v+(1-r),h=r*h+(1-r),g*=i,v*=i,h*=i,e[0]=g,e[1]=v,e[2]=h}function U7(t,e){const[n,r,i]=t;let s=(n+16)/116,u=r/500+s,c=s-i/200;s**3>.008856?s**=3:s=(s-16/116)/7.787,u**3>.008856?u**=3:u=(u-16/116)/7.787,c**3>.008856?c**=3:c=(c-16/116)/7.787;const l=.9505,g=1,v=1.089;e[0]=l*u,e[1]=g*s,e[2]=v*c}function G7(t,e){const[n,r,i]=t,s=.9505,u=1,c=1.089;let l=n/s,g=r/u,v=i/c;l>.008856?l**=1/3:l=7.787*l+16/116,g>.008856?g**=1/3:g=7.787*g+16/116,v>.008856?v**=1/3:v=7.787*v+16/116,e[0]=116*g-16,e[1]=500*(l-g),e[2]=200*(g-v)}function b7(t,e){const[n,r,i]=t;let s=n*3.2406+r*-1.5372+i*-.4986,u=n*-.9689+r*1.8758+i*.0415,c=n*.0557+r*-.204+i*1.057;s>.0031308?s=1.055*s**(1/2.4)-.055:s*=12.92,u>.0031308?u=1.055*u**(1/2.4)-.055:u*=12.92,c>.0031308?c=1.055*c**(1/2.4)-.055:c*=12.92;let l=s;l<u&&(l=u),l<c&&(l=c),l>1&&(s/=l,u/=l,c/=l),s<0&&(s=0),u<0&&(u=0),c<0&&(c=0),e[0]=s,e[1]=u,e[2]=c}function F7(t,e){let[n,r,i]=t;n>.04045?n=((n+.055)/1.055)**2.4:n/=12.92,r>.04045?r=((r+.055)/1.055)**2.4:r/=12.92,i>.04045?i=((i+.055)/1.055)**2.4:i/=12.92,e[0]=n*.4124+r*.3576+i*.1805,e[1]=n*.2126+r*.7152+i*.0722,e[2]=n*.0193+r*.1192+i*.9505}function Ia(t,e){const n=[0,0,0];F7(t,n),G7(n,e)}function ac(t,e){const n=[0,0,0];U7(t,n),b7(n,e)}function B2(t){return t[0]=1,t[1]=-1,t[2]=1,t[3]=-1,t[4]=1,t[5]=-1,t}function ju(t){return!(t[1]-t[0]<0)}function ZE(t,e,n){return n[0]=Math.min(t[0],e[0]),n[1]=Math.max(t[0],e[0]),n[2]=Math.min(t[1],e[1]),n[3]=Math.max(t[1],e[1]),n[4]=Math.min(t[2],e[2]),n[5]=Math.max(t[2],e[2]),n}function Ku(t,e,n){return t<e?e:t>n?n:t}function ql(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[0,0,0];return r[0]=Ku(t[0],e[0],n[0]),r[1]=Ku(t[1],e[1],n[1]),r[2]=Ku(t[2],e[2],n[2]),r}function JE(t,e){let n=0;return e[0]!==e[1]&&(t<e[0]?n=e[0]:t>e[1]?n=e[1]:n=t,n=(n-e[0])/(e[1]-e[0])),n}const PE=Hs("GetScalarTypeFittingRange"),IE=Hs("GetAdjustedScalarRange");function em(t,e){if(!t||!e)return 0;for(let n=0;n<6;n+=2)if(t[n]<e[n]||t[n]>e[n+1]||t[n+1]<e[n]||t[n+1]>e[n+1])return 0;return 1}function tm(t,e,n){if(!t||!e)return 0;for(let r=0;r<6;r+=2)if(t[r]+n[r/2]<e[r]||t[r]-n[r/2]>e[r+1]||t[r+1]+n[r/2]<e[r]||t[r+1]-n[r/2]>e[r+1])return 0;return 1}function nm(t,e,n){if(!t||!e||!n)return 0;for(let r=0;r<3;r++)if(t[r]+n[r]<e[2*r]||t[r]-n[r]>e[2*r+1])return 0;return 1}function rm(t,e,n,r){const i=qe(3),s=qe(3),u=qe(3),c=qe(3),l=qe(3),g=qe(3);for(let w=0;w<3;++w)i[w]=t[w]-e[w],s[w]=e[w]-n[w],u[w]=n[w]-t[w],c[w]=-i[w],l[w]=-s[w],g[w]=-u[w];const v=hn(c),h=hn(l),y=hn(u),T=qe(3);jt(i,s,T);const E=hn(T),S=v*h*y/(2*E),x=2*E*E,m=h*h*pe(i,g)/x,M=y*y*pe(c,s)/x,R=v*v*pe(u,l)/x;for(let w=0;w<3;++w)r[w]=m*t[w]+M*e[w]+R*n[w];return S}const am=1/0,im=-1/0,z7=t=>!Number.isFinite(t),{isFinite:sm,isNaN:Ql}=Number,ic=Ql;function dc(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}function om(t){let e=-1,n=-1;for(let r=0;r<t.length;r++){const i=Math.abs(t[r]);i>e&&(n=r,e=i)}return n}function um(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;const n=new Array(e),r=new Array(e);for(let s=0;s<e;++s)n[s]=s,r[s]=s;for(let s=e-1;s>0;s--){let u=-1/0,c=0,l=0;for(let g=0;g<=s;++g){const v=n[g];for(let h=0;h<=s;++h){const y=r[h],T=Math.abs(t[v+e*y]);T>u&&(u=T,c=g,l=h)}}[n[s],n[c]]=[n[c],n[s]],[r[s],r[l]]=[r[l],r[s]]}const i=new Array(e*e).fill(0);for(let s=0;s<e;++s){const u=n[s]+e*r[s];i[u]=t[u]<0?-1:1}return i}function k7(t){const e=Math.floor(t*255);return e>15?e.toString(16):`0${e.toString(16)}`}function cm(t){return`${arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#"}${t.map(k7).join("")}`}function hu(t){return Math.round(t*255)}function fm(t){return t.length===3?`rgb(${t.map(hu).join(", ")})`:`rgba(${hu(t[0]||0)}, ${hu(t[1]||0)}, ${hu(t[2]||0)}, ${t[3]||0})`}var Zl={Pi:cE,ldexp:fE,radiansFromDegrees:at,degreesFromRadians:ri,round:Ts,floor:x7,ceil:lE,ceilLog2:dE,min:gE,max:hE,arrayMin:pE,arrayMax:vE,arrayRange:yE,isPowerOfTwo:Ss,nearestPowerOfTwo:Bn,factorial:TE,binomial:SE,beginCombination:CE,nextCombination:xE,randomSeed:EE,getSeed:mE,random:RE,gaussian:wE,add:ai,subtract:Tt,multiplyScalar:E7,multiplyScalar2D:m7,multiplyAccumulate:Wl,multiplyAccumulate2D:ME,dot:pe,outer:OE,cross:jt,norm:hn,normalize:pn,perpendiculars:LE,projectVector:BE,projectVector2D:VE,distance2BetweenPoints:It,angleBetweenVectors:NE,gaussianAmplitude:_E,gaussianWeight:UE,dot2D:jl,outer2D:GE,norm2D:R7,normalize2D:w7,determinant2x2:tt,LUFactor3x3:bE,LUSolve3x3:FE,linearSolve3x3:zE,multiply3x3_vect3:kE,multiply3x3_mat3:Kl,multiplyMatrix:HE,transpose3x3:ei,invert3x3:$E,identity3x3:O7,identity:D7,isIdentity:AE,isIdentity3x3:WE,determinant3x3:yc,quaternionToMatrix3x3:L7,areEquals:M7,areMatricesEqual:Us,roundNumber:Wu,roundVector:Xl,matrix3x3ToQuaternion:B7,multiplyQuaternion:jE,orthogonalize3x3:V7,diagonalize3x3:N7,singularValueDecomposition3x3:KE,solveLinearSystem:_7,invertMatrix:L2,luFactorLinearSystem:O2,luSolveLinearSystem:D2,estimateMatrixCondition:XE,jacobi:YE,jacobiN:$s,solveHomogeneousLeastSquares:Yl,solveLeastSquares:qE,hex2float:QE,rgb2hsv:Cs,hsv2rgb:Qa,lab2xyz:U7,xyz2lab:G7,xyz2rgb:b7,rgb2xyz:F7,rgb2lab:Ia,lab2rgb:ac,uninitializeBounds:B2,areBoundsInitialized:ju,computeBoundsFromPoints:ZE,clampValue:Ku,clampVector:ql,clampAndNormalizeValue:JE,getScalarTypeFittingRange:PE,getAdjustedScalarRange:IE,extentIsWithinOtherExtent:em,boundsIsWithinOtherBounds:tm,pointIsWithinBounds:nm,solve3PointCircle:rm,inf:am,negInf:im,isInf:z7,isNan:Ql,isNaN:Ql,isFinite:sm,createUninitializedBounds:dc,getMajorAxisIndex:om,getSparseOrthogonalMatrix:um,floatToHex2:k7,floatRGB2HexCode:cm,float2CssRGBA:fm};function lm(t,e){e.classHierarchy.push("vtkImplicitFunction"),t.functionValue=n=>{if(!e.transform)return t.evaluateFunction(n);const r=[];return e.transform.transformPoint(n,r),t.evaluateFunction(r)},t.evaluateFunction=n=>{B.vtkErrorMacro("not implemented")}}const gm={};function H7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,gm,n),B.obj(t,e),B.setGet(t,e,["transform"]),lm(t,e)}const hm=B.newInstance(H7,"vtkImplicitFunction");var pm={newInstance:hm,extend:H7};const Jl=1e-6,$7="coincide",A7="disjoint";function vm(t,e,n){return t[0]*(n[0]-e[0])+t[1]*(n[1]-e[1])+t[2]*(n[2]-e[2])}function W7(t,e,n){const r=n[0]*(t[0]-e[0])+n[1]*(t[1]-e[1])+n[2]*(t[2]-e[2]);return Math.abs(r)}function j7(t,e,n,r){const i=[];Tt(t,e,i);const s=pe(n,i);r[0]=t[0]-s*n[0],r[1]=t[1]-s*n[1],r[2]=t[2]-s*n[2]}function K7(t,e,n){const r=pe(t,e);let i=pe(e,e);return i===0&&(i=1),n[0]=t[0]-r*e[0]/i,n[1]=t[1]-r*e[1]/i,n[2]=t[2]-r*e[2]/i,n}function X7(t,e,n,r){const i=[];Tt(t,e,i);const s=pe(n,i),u=pe(n,n);u!==0?(r[0]=t[0]-s*n[0]/u,r[1]=t[1]-s*n[1]/u,r[2]=t[2]-s*n[2]/u):(r[0]=t[0],r[1]=t[1],r[2]=t[2])}function Y7(t,e,n,r){const i={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},s=[],u=[];Tt(e,t,s),Tt(n,t,u);const c=pe(r,u),l=pe(r,s);let g,v;return l<0?g=-l:g=l,c<0?v=-c*Jl:v=c*Jl,g<=v||(i.t=c/l,i.x[0]=t[0]+i.t*s[0],i.x[1]=t[1]+i.t*s[1],i.x[2]=t[2]+i.t*s[2],i.intersection=!0,i.betweenPoints=i.t>=0&&i.t<=1),i}function q7(t,e,n,r){const i={intersection:!1,l0:[],l1:[],error:null},s=[];jt(e,r,s);const u=s.map(h=>Math.abs(h));if(u[0]+u[1]+u[2]<Jl){const h=[];return Tt(t,n,h),pe(e,h)===0?i.error=$7:i.error=A7,i}let c;u[0]>u[1]&&u[0]>u[2]?c="x":u[1]>u[2]?c="y":c="z";const l=[],g=-pe(e,t),v=-pe(r,n);switch(c){case"x":l[0]=0,l[1]=(v*e[2]-g*r[2])/s[0],l[2]=(g*r[1]-v*e[1])/s[0];break;case"y":l[0]=(g*r[2]-v*e[2])/s[1],l[1]=0,l[2]=(v*e[0]-g*r[0])/s[1];break;case"z":l[0]=(v*e[1]-g*r[1])/s[2],l[1]=(g*r[0]-v*e[0])/s[2],l[2]=0;break}return i.l0=l,ai(l,s,i.l1),i.intersection=!0,i}const ym={evaluate:vm,distanceToPlane:W7,projectPoint:j7,projectVector:K7,generalizedProjectPoint:X7,intersectWithLine:Y7,intersectWithPlane:q7,DISJOINT:A7,COINCIDE:$7};function dm(t,e){e.classHierarchy.push("vtkPlane"),t.distanceToPlane=n=>W7(n,e.origin,e.normal),t.projectPoint=(n,r)=>{j7(n,e.origin,e.normal,r)},t.projectVector=(n,r)=>K7(n,e.normal,r),t.push=n=>{if(n!==0)for(let r=0;r<3;r++)e.origin[r]+=n*e.normal[r]},t.generalizedProjectPoint=(n,r)=>{X7(n,e.origin,e.normal,r)},t.evaluateFunction=(n,r,i)=>Array.isArray(n)?e.normal[0]*(n[0]-e.origin[0])+e.normal[1]*(n[1]-e.origin[1])+e.normal[2]*(n[2]-e.origin[2]):e.normal[0]*(n-e.origin[0])+e.normal[1]*(r-e.origin[1])+e.normal[2]*(i-e.origin[2]),t.evaluateGradient=n=>[e.normal[0],e.normal[1],e.normal[2]],t.intersectWithLine=(n,r)=>Y7(n,r,e.origin,e.normal),t.intersectWithPlane=(n,r)=>q7(n,r,e.origin,e.normal)}const Tm={normal:[0,0,1],origin:[0,0,0]};function Q7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Tm,n),pm.extend(t,e,n),B.setGetArray(t,e,["normal","origin"],3),dm(t,e)}const Sm=B.newInstance(Q7,"vtkPlane");var pa={newInstance:Sm,extend:Q7,...ym};const Tc=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function Z7(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function Or(t){return t?.length>=6&&t[0]<=t[1]&&t[2]<=t[3]&&t[4]<=t[5]}function V2(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function N2(t){return V2(t,Tc)}function sc(t,e,n,r){const[i,s,u,c,l,g]=t;return t[0]=i<e?i:e,t[1]=s>e?s:e,t[2]=u<n?u:n,t[3]=c>n?c:n,t[4]=l<r?l:r,t[5]=g>r?g:r,t}function _2(t,e){if(e.length===0)return t;if(Array.isArray(e[0]))for(let n=0;n<e.length;++n)sc(t,...e[n]);else for(let n=0;n<e.length;n+=3)sc(t,...e.slice(n,n+3));return t}function J7(t,e,n,r,i,s,u){const[c,l,g,v,h,y]=t;return u===void 0?(t[0]=Math.min(e[0],c),t[1]=Math.max(e[1],l),t[2]=Math.min(e[2],g),t[3]=Math.max(e[3],v),t[4]=Math.min(e[4],h),t[5]=Math.max(e[5],y)):(t[0]=Math.min(e,c),t[1]=Math.max(n,l),t[2]=Math.min(r,g),t[3]=Math.max(i,v),t[4]=Math.min(s,h),t[5]=Math.max(u,y)),t}function P7(t,e,n,r){const[i,s,u,c,l,g]=t;return t[0]=e,t[1]=e>s?e:s,t[2]=n,t[3]=n>c?n:c,t[4]=r,t[5]=r>g?r:g,i!==e||u!==n||l!==r}function I7(t,e,n,r){const[i,s,u,c,l,g]=t;return t[0]=e<i?e:i,t[1]=e,t[2]=n<u?n:u,t[3]=n,t[4]=r<l?r:l,t[5]=r,s!==e||c!==n||g!==r}function U2(t,e){return e==null?Cm(t):(t[0]-=e,t[1]+=e,t[2]-=e,t[3]+=e,t[4]-=e,t[5]+=e,t)}function Cm(t){const e=[0,0,0];let n=-1,r=0,i=0;for(let s=0;s<3;++s)i=t[s*2+1]-t[s*2],i>r&&(r=i,n=s),e[s]=i>0?1:0;if(n<0)return U2(t,.5);for(let s=0;s<3;++s)if(!e[s]){const u=.005*r;t[s*2]-=u,t[s*2+1]+=u}return t}function G2(t,e,n,r){return Or(t)?(e>=0?(t[0]*=e,t[1]*=e):(t[0]=e*t[1],t[1]=e*t[0]),n>=0?(t[2]*=n,t[3]*=n):(t[2]=n*t[3],t[3]=n*t[2]),r>=0?(t[4]*=r,t[5]*=r):(t[4]=r*t[5],t[5]=r*t[4]),!0):!1}function b2(t){return[.5*(t[0]+t[1]),.5*(t[2]+t[3]),.5*(t[4]+t[5])]}function xm(t,e,n,r){if(!Or(t))return!1;const i=b2(t);return t[0]-=i[0],t[1]-=i[0],t[2]-=i[1],t[3]-=i[1],t[4]-=i[2],t[5]-=i[2],G2(t,e,n,r),t[0]+=i[0],t[1]+=i[0],t[2]+=i[1],t[3]+=i[1],t[4]+=i[2],t[5]+=i[2],!0}function Os(t,e){return t[e*2+1]-t[e*2]}function As(t){return[Os(t,0),Os(t,1),Os(t,2)]}function eh(t){return t.slice(0,2)}function th(t){return t.slice(2,4)}function nh(t){return t.slice(4,6)}function rh(t){const e=As(t);return e[0]>e[1]?e[0]>e[2]?e[0]:e[2]:e[1]>e[2]?e[1]:e[2]}function F2(t){if(Or(t)){const e=As(t);return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}return null}function ah(t){const e=F2(t);return e!==null?Math.sqrt(e):null}function Sc(t){return[t[0],t[2],t[4]]}function Cc(t){return[t[1],t[3],t[5]]}function pu(t,e){return t<=0&&e>=0||t>=0&&e<=0}function z2(t,e){return e[0]=[t[0],t[2],t[4]],e[1]=[t[0],t[2],t[5]],e[2]=[t[0],t[3],t[4]],e[3]=[t[0],t[3],t[5]],e[4]=[t[1],t[2],t[4]],e[5]=[t[1],t[2],t[5]],e[6]=[t[1],t[3],t[4]],e[7]=[t[1],t[3],t[5]],e}function ih(t,e,n){return e[0]=t[0],e[1]=t[2],e[2]=t[4],n[0]=t[1],n[1]=t[3],n[2]=t[5],e}function sh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const r=z2(t,[]);for(let i=0;i<r.length;++i)Ae(r[i],r[i],e);return N2(n),_2(n,r)}function oh(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e[0]=.5*(t[1]-t[0]),e[1]=.5*(t[3]-t[2]),e[2]=.5*(t[5]-t[4]),e}function uh(t,e,n,r){const i=[].concat(Tc),s=t.getData();for(let u=0;u<s.length;u+=3){const c=[s[u],s[u+1],s[u+2]],l=pe(c,e);i[0]=Math.min(l,i[0]),i[1]=Math.max(l,i[1]);const g=pe(c,n);i[2]=Math.min(g,i[2]),i[3]=Math.max(g,i[3]);const v=pe(c,r);i[4]=Math.min(v,i[4]),i[5]=Math.max(v,i[5])}return i}function ch(t,e,n,r,i){let s=!0;const u=[];let c=0;const l=[],g=[0,0,0],v=0,h=1,y=2;for(let T=0;T<3;T++)e[T]<t[2*T]?(u[T]=h,g[T]=t[2*T],s=!1):e[T]>t[2*T+1]?(u[T]=v,g[T]=t[2*T+1],s=!1):u[T]=y;if(s)return r[0]=e[0],r[1]=e[1],r[2]=e[2],i[0]=0,1;for(let T=0;T<3;T++)u[T]!==y&&n[T]!==0?l[T]=(g[T]-e[T])/n[T]:l[T]=-1;for(let T=0;T<3;T++)l[c]<l[T]&&(c=T);if(l[c]>1||l[c]<0)return 0;i[0]=l[c];for(let T=0;T<3;T++)if(c!==T){if(r[T]=e[T]+l[c]*n[T],r[T]<t[2*T]||r[T]>t[2*T+1])return 0}else r[T]=g[T];return 1}function fh(t,e,n){const r=[];let i=0,s=1,u=1;for(let c=4;c<=5;++c){r[2]=t[c];for(let l=2;l<=3;++l){r[1]=t[l];for(let g=0;g<=1;++g)if(r[0]=t[g],i=pa.evaluate(n,e,r),u&&(s=i>=0?1:-1,u=0),i===0||s>0&&i<0||s<0&&i>0)return 1}}return 0}function lh(t,e){if(!(Or(t)&&Or(e)))return!1;const n=[0,0,0,0,0,0];let r;for(let i=0;i<3;i++)if(r=!1,e[i*2]>=t[i*2]&&e[i*2]<=t[i*2+1]?(r=!0,n[i*2]=e[i*2]):t[i*2]>=e[i*2]&&t[i*2]<=e[i*2+1]&&(r=!0,n[i*2]=t[i*2]),e[i*2+1]>=t[i*2]&&e[i*2+1]<=t[i*2+1]?(r=!0,n[i*2+1]=e[2*i+1]):t[i*2+1]>=e[i*2]&&t[i*2+1]<=e[i*2+1]&&(r=!0,n[i*2+1]=t[i*2+1]),!r)return!1;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],!0}function oc(t,e){if(!(Or(t)&&Or(e)))return!1;for(let n=0;n<3;n++)if(!(e[n*2]>=t[n*2]&&e[n*2]<=t[n*2+1])&&!(t[n*2]>=e[n*2]&&t[n*2]<=e[n*2+1])&&!(e[n*2+1]>=t[n*2]&&e[n*2+1]<=t[n*2+1])&&!(t[n*2+1]>=e[n*2]&&t[n*2+1]<=e[n*2+1]))return!1;return!0}function uc(t,e,n,r){return!(e<t[0]||e>t[1]||n<t[2]||n>t[3]||r<t[4]||r>t[5])}function Em(t,e){return!(!oc(t,e)||!uc(t,...Sc(e))||!uc(t,...Cc(e)))}function gh(t,e,n){const r=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],i=[0,0,0,0,0,0,0,0];let s=0;for(let h=0;h<2;h++)for(let y=2;y<4;y++)for(let T=4;T<6;T++){const E=[t[h],t[y],t[T]];i[s++]=pa.evaluate(n,e,E)}let u=2;for(;u--&&!(pu(i[r[u][0]],i[r[u][4]])&&pu(i[r[u][1]],i[r[u][5]])&&pu(i[r[u][2]],i[r[u][6]])&&pu(i[r[u][3]],i[r[u][7]])););if(u<0)return!1;const c=Math.sign(n[u]),l=Math.abs((t[u*2+1]-t[u*2])*n[u]);let g=c>0?1:0;for(let h=0;h<4;h++){if(l===0)continue;const y=Math.abs(i[r[u][h]])/l;c>0&&y<g&&(g=y),c<0&&y>g&&(g=y)}const v=(1-g)*t[u*2]+g*t[u*2+1];return c>0?t[u*2]=v:t[u*2+1]=v,!0}function hh(t,e){for(let r=0;r<3;++r)e[r]=e[r]<1?1:e[r];let n=e[0]*e[1]*e[2];for(;n>t;){for(let r=0;r<3;++r)e[r]=e[r]>1?e[r]-1:1;n=e[0]*e[1]*e[2]}}function ph(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];e=e<=0?1:e;let i=0;const s=[0,0,0];let u=-1,c=0;const l=As(t),g=l[0]+l[1]+l[2],v=g*(.001/3);for(let S=0;S<3;++S)l[S]>c&&(u=S,c=l[S]),l[S]>v?(s[S]=1,i++):s[S]=0;const h=Sc(t),y=Cc(t);if(i<1)return n[0]=1,n[1]=1,n[2]=1,r[0]=h[0]-.5,r[1]=y[0]+.5,r[2]=h[1]-.5,r[3]=y[1]+.5,r[4]=h[2]-.5,r[5]=y[2]+.5,1;let T=e;T/=s[0]?l[0]/g:1,T/=s[1]?l[1]/g:1,T/=s[2]?l[2]/g:1,T**=1/i;for(let S=0;S<3;++S)n[S]=s[S]?Math.floor(T*l[S]/g):1,n[S]=n[S]<1?1:n[S];hh(e,n);const E=.5*l[u]/n[u];for(let S=0;S<3;++S)s[S]?(r[2*S]=h[S],r[2*S+1]=y[S]):(r[2*S]=h[S]-E,r[2*S+1]=y[S]+E);return n[0]*n[1]*n[2]}function vh(t,e){if(t[0]>=e[0]&&t[0]<=e[1]&&t[1]>=e[2]&&t[1]<=e[3]&&t[2]>=e[4]&&t[2]<=e[5])return 0;const n=[0,0,0];return t[0]<e[0]?n[0]=e[0]-t[0]:t[0]>e[1]&&(n[0]=t[0]-e[1]),t[1]<e[2]?n[1]=e[2]-t[1]:t[1]>e[3]&&(n[1]=t[1]-e[3]),t[2]<e[4]?n[2]=e[4]-t[2]:t[2]>e[5]&&(n[2]=t[2]-e[5]),pe(n,n)}class mm{constructor(e){this.bounds=e,this.bounds||(this.bounds=new Float64Array(Tc))}getBounds(){return this.bounds}equals(e){return Z7(this.bounds,e)}isValid(){return Or(this.bounds)}setBounds(e){return V2(this.bounds,e)}reset(){return N2(this.bounds)}addPoint(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return sc(this.bounds,...n)}addPoints(e){return _2(this.bounds,e)}addBounds(e,n,r,i,s,u){return J7(this.bounds,e,n,r,i,s,u)}setMinPoint(e,n,r){return P7(this.bounds,e,n,r)}setMaxPoint(e,n,r){return I7(this.bounds,e,n,r)}inflate(e){return U2(this.bounds,e)}scale(e,n,r){return G2(this.bounds,e,n,r)}getCenter(){return b2(this.bounds)}getLength(e){return Os(this.bounds,e)}getLengths(){return As(this.bounds)}getMaxLength(){return rh(this.bounds)}getDiagonalLength(){return ah(this.bounds)}getDiagonalLength2(){return F2(this.bounds)}getMinPoint(){return Sc(this.bounds)}getMaxPoint(){return Cc(this.bounds)}getXRange(){return eh(this.bounds)}getYRange(){return th(this.bounds)}getZRange(){return nh(this.bounds)}getCorners(e){return z2(this.bounds,e)}computeCornerPoints(e,n){return ih(this.bounds,e,n)}computeLocalBounds(e,n,r){return uh(this.bounds,e,n,r)}transformBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return sh(this.bounds,e,n)}computeScale3(e){return oh(this.bounds,e)}cutWithPlane(e,n){return gh(this.bounds,e,n)}intersectBox(e,n,r,i){return ch(this.bounds,e,n,r,i)}intersectPlane(e,n){return fh(this.bounds,e,n)}intersect(e){return lh(this.bounds,e)}intersects(e){return oc(this.bounds,e)}containsPoint(e,n,r){return uc(this.bounds,e,n,r)}contains(e){return oc(this.bounds,e)}computeDivisions(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return ph(this.bounds,e,n,r)}distance2ToBounds(e){return vh(e,this.bounds)}}function Rm(t){const e=t&&t.bounds;return new mm(e)}const wm={equals:Z7,isValid:Or,setBounds:V2,reset:N2,addPoint:sc,addPoints:_2,addBounds:J7,setMinPoint:P7,setMaxPoint:I7,inflate:U2,scale:G2,scaleAboutCenter:xm,getCenter:b2,getLength:Os,getLengths:As,getMaxLength:rh,getDiagonalLength:ah,getDiagonalLength2:F2,getMinPoint:Sc,getMaxPoint:Cc,getXRange:eh,getYRange:th,getZRange:nh,getCorners:z2,computeCornerPoints:ih,computeLocalBounds:uh,transformBounds:sh,computeScale3:oh,cutWithPlane:gh,intersectBox:ch,intersectPlane:fh,intersect:lh,intersects:oc,containsPoint:uc,contains:Em,computeDivisions:ph,clampDivisions:hh,distance2ToBounds:vh,INIT_BOUNDS:Tc};var Ve={newInstance:Rm,...wm};const Mm={DISPLAY:0,WORLD:1};var yh={CoordinateSystem:Mm};const{CoordinateSystem:Pl}=yh;function a8(t){return()=>B.vtkErrorMacro(`vtkProp::${t} - NOT IMPLEMENTED`)}function Om(t,e){e.classHierarchy.push("vtkProp"),t.getMTime=()=>{let n=e.mtime;for(let r=0;r<e.textures.length;++r){const i=e.textures[r].getMTime();i>n&&(n=i)}return n},t.processSelectorPixelBuffers=(n,r)=>{},t.getNestedProps=()=>null,t.getActors=()=>[],t.getActors2D=()=>[],t.getVolumes=()=>[],t.pick=a8("pick"),t.hasKey=a8("hasKey"),t.getNestedVisibility=()=>e.visibility&&(!e._parentProp||e._parentProp.getNestedVisibility()),t.getNestedPickable=()=>e.pickable&&(!e._parentProp||e._parentProp.getNestedPickable()),t.getNestedDragable=()=>e.dragable&&(!e._parentProp||e._parentProp.getNestedDragable()),t.getRedrawMTime=()=>e.mtime,t.setEstimatedRenderTime=n=>{e.estimatedRenderTime=n,e.savedEstimatedRenderTime=n},t.restoreEstimatedRenderTime=()=>{e.estimatedRenderTime=e.savedEstimatedRenderTime},t.addEstimatedRenderTime=n=>{e.estimatedRenderTime+=n},t.setAllocatedRenderTime=n=>{e.allocatedRenderTime=n,e.savedEstimatedRenderTime=e.estimatedRenderTime,e.estimatedRenderTime=0},t.getSupportsSelection=()=>!1,t.getTextures=()=>e.textures,t.hasTexture=n=>e.textures.indexOf(n)!==-1,t.addTexture=n=>{n&&!t.hasTexture(n)&&(e.textures=e.textures.concat(n),t.modified())},t.removeTexture=n=>{const r=e.textures.filter(i=>i!==n);e.textures.length!==r.length&&(e.textures=r,t.modified())},t.removeAllTextures=()=>{e.textures=[],t.modified()},t.setCoordinateSystemToWorld=()=>t.setCoordinateSystem(Pl.WORLD),t.setCoordinateSystemToDisplay=()=>t.setCoordinateSystem(Pl.DISPLAY)}const Dm={allocatedRenderTime:10,coordinateSystem:Pl.WORLD,dragable:!0,estimatedRenderTime:0,paths:null,pickable:!0,renderTimeMultiplier:1,savedEstimatedRenderTime:0,textures:[],useBounds:!0,visibility:!0};function dh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Dm,n),B.obj(t,e),B.get(t,e,["estimatedRenderTime","allocatedRenderTime"]),B.setGet(t,e,["_parentProp","coordinateSystem","dragable","pickable","renderTimeMultiplier","useBounds","visibility"]),B.moveToProtected(t,e,["parentProp"]),Om(t,e)}const Lm=B.newInstance(dh,"vtkProp");var Ws={newInstance:Lm,extend:dh,...yh};const Bm=1e-6;function Vm(t,e){e.classHierarchy.push("vtkProp3D"),t.addPosition=r=>{e.position=e.position.map((i,s)=>i+r[s]),t.modified()},t.getOrientationWXYZ=()=>{const r=n0();Ul(r,e.rotation);const i=new Float64Array(3),s=kS(i,r);return[ri(s),i[0],i[1],i[2]]},t.getOrientationQuaternion=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ul(r,e.rotation)},t.rotateX=r=>{r!==0&&(p6(e.rotation,e.rotation,at(r)),t.modified())},t.rotateY=r=>{r!==0&&(v6(e.rotation,e.rotation,at(r)),t.modified())},t.rotateZ=r=>{r!==0&&(y6(e.rotation,e.rotation,at(r)),t.modified())},t.rotateWXYZ=(r,i,s,u)=>{if(r===0||i===0&&s===0&&u===0)return;const c=at(r),l=n0();g2(l,[i,s,u],c);const g=new Float64Array(16);ws(g,l),wt(e.rotation,e.rotation,g),t.modified()},t.rotateQuaternion=r=>{if(Math.abs(r[3])>=1-Bm)return;const i=ws(new Float64Array(16),r);wt(e.rotation,e.rotation,i),t.modified()},t.setOrientation=(r,i,s)=>r===e.orientation[0]&&i===e.orientation[1]&&s===e.orientation[2]?!1:(e.orientation=[r,i,s],Oe(e.rotation),t.rotateZ(s),t.rotateX(r),t.rotateY(i),t.modified(),!0),t.setOrientationFromQuaternion=r=>{const i=hc();return ws(i,r),Us(i,e.rotation)?!1:(e.rotation=i,t.modified(),!0)},t.setUserMatrix=r=>Us(e.userMatrix,r)?!1:(Ft(e.userMatrix,r),t.modified(),!0),t.getMatrix=()=>(t.computeMatrix(),e.matrix),t.computeMatrix=()=>{if(t.getMTime()>e.matrixMTime.getMTime()){Oe(e.matrix),e.userMatrix&&wt(e.matrix,e.matrix,e.userMatrix),vt(e.matrix,e.matrix,e.origin),vt(e.matrix,e.matrix,e.position),wt(e.matrix,e.matrix,e.rotation),ti(e.matrix,e.matrix,e.scale),vt(e.matrix,e.matrix,[-e.origin[0],-e.origin[1],-e.origin[2]]),Qe(e.matrix,e.matrix),e.isIdentity=!0;for(let r=0;r<4;++r)for(let i=0;i<4;++i)(r===i?1:0)!==e.matrix[r+i*4]&&(e.isIdentity=!1);e.matrixMTime.modified()}},t.getBoundsByReference=()=>{if(e.mapper===null)return e.bounds;const r=e.mapper.getBounds();if(!r||r.length!==6)return r;if(r[0]>r[1])return e.mapperBounds=r,e.bounds=[...Ve.INIT_BOUNDS],e.boundsMTime.modified(),r;if(!e.mapperBounds||!r.every((i,s)=>r[s]===e.mapperBounds[s])||t.getMTime()>e.boundsMTime.getMTime()){B.vtkDebugMacro("Recomputing bounds..."),e.mapperBounds=r,t.computeMatrix();const i=new Float64Array(16);Qe(i,e.matrix),Ve.transformBounds(r,i,e.bounds),e.boundsMTime.modified()}return e.bounds},t.getBounds=()=>{const r=t.getBoundsByReference();try{return[...r]}catch{return r}},t.getCenter=()=>Ve.getCenter(e.bounds),t.getLength=()=>Ve.getLength(e.bounds),t.getXRange=()=>Ve.getXRange(e.bounds),t.getYRange=()=>Ve.getYRange(e.bounds),t.getZRange=()=>Ve.getZRange(e.bounds),t.getUserMatrix=()=>e.userMatrix;function n(){t.computeMatrix()}t.onModified(n),t.getProperty=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.properties[r]==null&&(e.properties[r]=t.makeProperty?.()),e.properties[r]},t.getProperties=()=>(e.properties.length===0&&(e.properties[0]=t.makeProperty?.()),e.properties),t.setProperty=(r,i)=>{const s=Number.isInteger(r),[u,c]=s?[r,i]:[0,r];return e.properties[u]===c?!1:(e.properties[u]=c,!0)},t.getMTime=()=>{let r=e.mtime;return e.properties.forEach(i=>{if(i!==null){const s=i.getMTime();r=s>r?s:r}}),r}}const Nm={origin:[0,0,0],position:[0,0,0],orientation:[0,0,0],rotation:null,scale:[1,1,1],bounds:[...Ve.INIT_BOUNDS],properties:[],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null};function Th(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Nm,n),Ws.extend(t,e,n),e.matrixMTime={},B.obj(e.matrixMTime),B.get(t,e,["isIdentity"]),B.getArray(t,e,["orientation"]),B.setGetArray(t,e,["origin","position","scale"],3),B.setGet(t,e,["properties"]),e.matrix=Oe(new Float64Array(16)),e.rotation=Oe(new Float64Array(16)),e.userMatrix=Oe(new Float64Array(16)),e.transform=null,Vm(t,e)}const _m=B.newInstance(Th,"vtkProp3D");var Um={newInstance:_m,extend:Th};const Sh={FLAT:0,GOURAUD:1,PHONG:2},Vn={POINTS:0,WIREFRAME:1,SURFACE:2},Gm=Sh;var Ch={Shading:Sh,Representation:Vn,Interpolation:Gm};const{Representation:xs,Interpolation:Es}=Ch;function i8(t){return()=>B.vtkErrorMacro(`vtkProperty::${t} - NOT IMPLEMENTED`)}function bm(t,e){e.classHierarchy.push("vtkProperty"),t.setColor=(n,r,i)=>{Array.isArray(n)?(e.color[0]!==n[0]||e.color[1]!==n[1]||e.color[2]!==n[2])&&(e.color[0]=n[0],e.color[1]=n[1],e.color[2]=n[2],t.modified()):(e.color[0]!==n||e.color[1]!==r||e.color[2]!==i)&&(e.color[0]=n,e.color[1]=r,e.color[2]=i,t.modified()),t.setDiffuseColor(e.color),t.setAmbientColor(e.color),t.setSpecularColor(e.color)},t.computeCompositeColor=i8("ComputeCompositeColor"),t.getColor=()=>{let n=0;e.ambient+e.diffuse+e.specular>0&&(n=1/(e.ambient+e.diffuse+e.specular));for(let r=0;r<3;r++)e.color[r]=n*(e.ambient*e.ambientColor[r]+e.diffuse*e.diffuseColor[r]+e.specular*e.specularColor[r]);return[].concat(e.color)},t.setSpecularPower=n=>{const r=1/Math.max(1,n);(e.roughness!==r||e.specularPower!==n)&&(e.specularPower=n,e.roughness=r,t.modified())},t.addShaderVariable=i8("AddShaderVariable"),t.setInterpolationToFlat=()=>t.setInterpolation(Es.FLAT),t.setInterpolationToGouraud=()=>t.setInterpolation(Es.GOURAUD),t.setInterpolationToPhong=()=>t.setInterpolation(Es.PHONG),t.getInterpolationAsString=()=>B.enumToString(Es,e.interpolation),t.setRepresentationToWireframe=()=>t.setRepresentation(xs.WIREFRAME),t.setRepresentationToSurface=()=>t.setRepresentation(xs.SURFACE),t.setRepresentationToPoints=()=>t.setRepresentation(xs.POINTS),t.getRepresentationAsString=()=>B.enumToString(xs,e.representation)}const Fm={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,metallic:0,roughness:.6,normalStrength:1,emission:1,baseIOR:1.45,specular:0,specularPower:1,opacity:1,interpolation:Es.GOURAUD,representation:xs.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null,ORMTexture:null,RMTexture:null};function zm(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Fm,n),B.obj(t,e),B.setGet(t,e,["lighting","interpolation","ambient","diffuse","metallic","roughness","normalStrength","emission","baseIOR","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation","diffuseTexture","metallicTexture","roughnessTexture","normalTexture","ambientOcclusionTexture","emissionTexture","ORMTexture","RMTexture"]),B.setGetArray(t,e,["ambientColor","specularColor","diffuseColor","edgeColor"],3),bm(t,e)}const km=B.newInstance(zm,"vtkProperty");var gi={newInstance:km,...Ch};function Hm(t,e){e.classHierarchy.push("vtkActor");const n={...t};t.getActors=()=>[t],t.getIsOpaque=()=>{if(e.forceOpaque)return!0;if(e.forceTranslucent)return!1;e.properties[0]||t.getProperty();let r=e.properties[0].getOpacity()>=1;return r=r&&(!e.texture||!e.texture.isTranslucent()),r=r&&(!e.mapper||e.mapper.getIsOpaque()),r},t.hasTranslucentPolygonalGeometry=()=>e.mapper===null?!1:(e.properties[0]||t.getProperty(),!t.getIsOpaque()),t.makeProperty=gi.newInstance,t.getMTime=()=>{let r=n.getMTime();if(e.backfaceProperty!==null){const i=e.backfaceProperty.getMTime();r=i>r?i:r}return r},t.getRedrawMTime=()=>{let r=e.mtime;if(e.mapper!==null){let i=e.mapper.getMTime();r=i>r?i:r,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),i=e.mapper.getInput().getMTime(),r=i>r?i:r)}return r},t.getSupportsSelection=()=>e.mapper?e.mapper.getSupportsSelection():!1,t.processSelectorPixelBuffers=(r,i)=>{e.mapper&&e.mapper.processSelectorPixelBuffers&&e.mapper.processSelectorPixelBuffers(r,i)}}const $m={mapper:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1};function xh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$m,n),Um.extend(t,e,n),e.boundsMTime={},B.obj(e.boundsMTime),B.setGet(t,e,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),Hm(t,e)}const Am=B.newInstance(xh,"vtkActor");var Rr={newInstance:Am,extend:xh};const Wm={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Rt={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",UNSIGNED_CHAR_CLAMPED:"Uint8ClampedArray",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"},jm=Rt.FLOAT;var Eh={DefaultDataType:jm,DataTypeByteSize:Wm,VtkDataTypes:Rt};const{vtkErrorMacro:Km}=Pn,{DefaultDataType:Xm}=Eh,Ym=1e-6;function Il(t,e,n){const r=t.length;let i=Number.MAX_VALUE,s=-Number.MAX_VALUE,u,c;for(c=e;c<r;c+=n)if(!Number.isNaN(t[c])){i=t[c],s=i;break}for(;c<r;c+=n)u=t[c],u<i?i=u:u>s&&(s=u);return{min:i,max:s}}function qm(){let t=Number.MAX_VALUE,e=-Number.MAX_VALUE,n=0,r=0;return{add(i){t>i&&(t=i),e<i&&(e=i),n++,r+=i},get(){return{min:t,max:e,count:n,sum:r,mean:r/n}},getRange(){return{min:t,max:e}}}}function mh(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(e<0&&n>1){const i=t.length/n,s=new Float64Array(i);for(let u=0,c=0;u<i;++u){for(let l=c+n;c<l;++c)s[u]+=t[c]*t[c];s[u]**=.5}return Il(s,0,1)}return Il(t,e<0?0:e,n)}function s8(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const n=t||[];for(;n.length<=e;)n.push(null);return n}function k2(t){return Object.prototype.toString.call(t).slice(8,-1)}function Qm(t){const e=t.getNumberOfComponents();let n=0;const r=new Array(e);for(let i=0;i<t.getNumberOfTuples();++i){t.getTuple(i,r);const s=hn(r,e);s>n&&(n=s)}return n}const Zm={computeRange:mh,createRangeHelper:qm,fastComputeRange:Il,getDataType:k2,getMaxNorm:Qm};function Jm(t,e){e.classHierarchy.push("vtkDataArray");function n(r){if(r<0)return!1;const i=t.getNumberOfComponents(),s=e.values.length/(i>0?i:1);if(r===s)return!0;if(r>s){const u=e.values;return e.values=fi(e.dataType,(r+s)*i),e.values.set(u),!0}return e.size>r*i&&(e.size=r*i,t.dataChange()),!0}t.dataChange=()=>{e.ranges=null,t.modified()},t.allocate=r=>{n(t.getNumberOfTuples()+r)},t.resize=r=>{n(r);const i=r*t.getNumberOfComponents();return e.size!==i?(e.size=i,t.dataChange(),!0):!1},t.initialize=()=>(t.resize(0),t),t.getElementComponentSize=()=>e.values.BYTES_PER_ELEMENT,t.getComponent=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.values[r*e.numberOfComponents+i]},t.setComponent=(r,i,s)=>{s!==e.values[r*e.numberOfComponents+i]&&(e.values[r*e.numberOfComponents+i]=s,t.dataChange())},t.getValue=r=>{const i=r/e.numberOfComponents,s=r%e.numberOfComponents;return t.getComponent(i,s)},t.setValue=(r,i)=>{const s=r/e.numberOfComponents,u=r%e.numberOfComponents;t.setComponent(s,u,i)},t.getData=()=>e.size===e.values.length?e.values:e.values.subarray(0,e.size),t.getRange=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,i=r;i<0&&(i=e.numberOfComponents===1?0:e.numberOfComponents);let s=null;return e.ranges||(e.ranges=s8(e.ranges,e.numberOfComponents)),s=e.ranges[i],s?(e.rangeTuple[0]=s.min,e.rangeTuple[1]=s.max,e.rangeTuple):(s=mh(t.getData(),r,e.numberOfComponents),e.ranges[i]=s,e.rangeTuple[0]=s.min,e.rangeTuple[1]=s.max,e.rangeTuple)},t.setRange=(r,i)=>{e.ranges||(e.ranges=s8(e.ranges,e.numberOfComponents));const s={min:r.min,max:r.max};return e.ranges[i]=s,e.rangeTuple[0]=s.min,e.rangeTuple[1]=s.max,e.rangeTuple},t.getRanges=function(){if(!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0))return structuredClone(e.ranges);const i=[];for(let s=0;s<e.numberOfComponents;s++){const[u,c]=t.getRange(s),l={min:u,max:c};i.push(l)}if(e.numberOfComponents>1){const[s,u]=t.getRange(-1),c={min:s,max:u};i.push(c)}return i},t.setTuple=(r,i)=>{const s=r*e.numberOfComponents;for(let u=0;u<e.numberOfComponents;u++)e.values[s+u]=i[u]},t.setTuples=(r,i)=>{let s=r*e.numberOfComponents;const u=Math.min(i.length,e.size-s);for(let c=0;c<u;)e.values[s++]=i[c++]},t.insertTuple=(r,i)=>(e.size<=r*e.numberOfComponents&&(e.size=(r+1)*e.numberOfComponents,n(r+1)),t.setTuple(r,i),r),t.insertTuples=(r,i)=>{const s=r+i.length/e.numberOfComponents;return e.size<s*e.numberOfComponents&&(e.size=s*e.numberOfComponents,n(s)),t.setTuples(r,i),s},t.insertNextTuple=r=>{const i=e.size/e.numberOfComponents;return t.insertTuple(i,r)},t.insertNextTuples=r=>{const i=e.size/e.numberOfComponents;return t.insertTuples(i,r)},t.findTuple=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ym;for(let s=0;s<e.size;s+=e.numberOfComponents)if(Math.abs(r[0]-e.values[s])<=i){let u=!0;for(let c=1;c<e.numberOfComponents;++c)if(Math.abs(r[c]-e.values[s+c])>i){u=!1;break}if(u)return s/e.numberOfComponents}return-1},t.getTuple=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const s=e.numberOfComponents||1,u=r*s;switch(s){case 4:i[3]=e.values[u+3];case 3:i[2]=e.values[u+2];case 2:i[1]=e.values[u+1];case 1:i[0]=e.values[u];break;default:for(let c=s-1;c>=0;--c)i[c]=e.values[u+c]}return i},t.getTuples=(r,i)=>{const s=(r??0)*e.numberOfComponents,u=(i??t.getNumberOfTuples())*e.numberOfComponents,c=t.getData().subarray(s,u);return c.length>0?c:null},t.getTupleLocation=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:1)*e.numberOfComponents},t.getNumberOfComponents=()=>e.numberOfComponents,t.getNumberOfValues=()=>e.size,t.getNumberOfTuples=()=>e.size/e.numberOfComponents,t.getDataType=()=>e.dataType,t.newClone=()=>wh({empty:!0,name:e.name,dataType:e.dataType,numberOfComponents:e.numberOfComponents}),t.getName=()=>(e.name||(t.modified(),e.name=`vtkDataArray${t.getMTime()}`),e.name),t.setData=(r,i)=>{e.values=r,e.size=r.length,e.dataType=k2(r),i&&(e.numberOfComponents=i),e.size%e.numberOfComponents!==0&&(e.numberOfComponents=1),t.dataChange()},t.getState=()=>{if(e.deleted)return null;const r={...e,vtkClass:t.getClassName()};r.values=Array.from(r.values),delete r.buffer,Object.keys(r).forEach(s=>{r[s]||delete r[s]});const i={};return Object.keys(r).sort().forEach(s=>{i[s]=r[s]}),i.mtime&&delete i.mtime,i},t.deepCopy=r=>{const i=t.getDataType(),s=e.values;t.shallowCopy(r),e.ranges=structuredClone(r.getRanges()),s?.length>=r.getNumberOfValues()&&i===r.getDataType()?(s.set(r.getData()),e.values=s,t.dataChange()):t.setData(r.getData().slice())},t.interpolateTuple=(r,i,s,u,c,l)=>{const g=e.numberOfComponents||1;(g!==i.getNumberOfComponents()||g!==u.getNumberOfComponents())&&Km("numberOfComponents must match");const v=i.getTuple(s),h=u.getTuple(c),y=[];switch(y.length=g,g){case 4:y[3]=v[3]+(h[3]-v[3])*l;case 3:y[2]=v[2]+(h[2]-v[2])*l;case 2:y[1]=v[1]+(h[1]-v[1])*l;case 1:y[0]=v[0]+(h[0]-v[0])*l;break;default:for(let T=0;T<g;T++)y[T]=v[T]+(h[T]-v[T])*l}return t.insertTuple(r,y)}}const Pm={name:"",numberOfComponents:1,dataType:Xm,rangeTuple:[0,0]};function Rh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,Pm,n),Array.isArray(n.values)&&n.dataType===void 0&&console.warn("vtkDataArray.newInstance: no dataType provided, converting to Float32Array"),!e.empty&&!e.values&&!e.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");if(e.values?Array.isArray(e.values)&&(e.values=h2(e.dataType,e.values)):e.values=fi(e.dataType,e.size),e.values&&(e.size=e.size??e.values.length,e.dataType=k2(e.values)),Dt(t,e),Fs(t,e,["name","numberOfComponents"]),e.size%e.numberOfComponents!==0)throw new RangeError("model.size is not a multiple of model.numberOfComponents");Jm(t,e)}const wh=Ye(Rh,"vtkDataArray");var Fe={newInstance:wh,extend:Rh,...Zm,...Eh};function Im(t,e){e.classHierarchy.push("vtkAbstractMapper"),t.update=()=>{t.getInputData()},t.addClippingPlane=n=>n.isA("vtkPlane")?e.clippingPlanes.includes(n)?!1:(e.clippingPlanes.push(n),t.modified(),!0):!1,t.getNumberOfClippingPlanes=()=>e.clippingPlanes.length,t.removeAllClippingPlanes=()=>e.clippingPlanes.length===0?!1:(e.clippingPlanes.length=0,t.modified(),!0),t.removeClippingPlane=n=>{const r=e.clippingPlanes.indexOf(n);return r===-1?!1:(e.clippingPlanes.splice(r,1),t.modified(),!0)},t.getClippingPlanes=()=>e.clippingPlanes,t.setClippingPlanes=n=>{if(n)if(!Array.isArray(n))t.addClippingPlane(n);else{const r=n.length;for(let i=0;i<r&&i<6;i++)t.addClippingPlane(n[i])}},t.getClippingPlaneInDataCoords=(n,r,i)=>{const s=e.clippingPlanes,u=n;if(s){const c=s.length;if(r>=0&&r<c){const l=s[r],g=l.getNormal(),v=l.getOrigin(),h=g[0],y=g[1],T=g[2],E=-(h*v[0]+y*v[1]+T*v[2]);i[0]=h*u[0]+y*u[4]+T*u[8]+E*u[12],i[1]=h*u[1]+y*u[5]+T*u[9]+E*u[13],i[2]=h*u[2]+y*u[6]+T*u[10]+E*u[14],i[3]=h*u[3]+y*u[7]+T*u[11]+E*u[15];return}}B.vtkErrorMacro(`Clipping plane index ${r} is out of range.`)}}const eR={clippingPlanes:[]};function tR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,eR,n),B.obj(t,e),B.algo(t,e,1,0),e.clippingPlanes||(e.clippingPlanes=[]),Im(t,e)}var nR={extend:tR};function rR(t,e){t.getBounds=()=>(B.vtkErrorMacro("vtkAbstractMapper3D.getBounds - NOT IMPLEMENTED"),dc()),t.getCenter=()=>{const n=t.getBounds();return e.center=Ve.isValid(n)?Ve.getCenter(n):null,e.center?.slice()},t.getLength=()=>{const n=t.getBounds();return Ve.getDiagonalLength(n)}}const aR=t=>({bounds:[...Ve.INIT_BOUNDS],center:[0,0,0],viewSpecificProperties:{},...t});function iR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,aR(n)),nR.extend(t,e,n),B.setGet(t,e,["viewSpecificProperties"]),rR(t,e)}var sR={extend:iR};const{vtkErrorMacro:o8,vtkWarningMacro:oR}=B;function uR(t,e){e.classHierarchy.push("vtkFieldData");const n=t.getState;e.arrays&&(e.arrays=e.arrays.map(r=>({data:Hn(r.data)}))),t.initialize=()=>{t.initializeFields(),t.copyAllOn(),t.clearFieldFlags()},t.initializeFields=()=>{e.arrays=[],e.copyFieldFlags={},t.modified()},t.copyStructure=r=>{t.initializeFields(),e.copyFieldFlags=r.getCopyFieldFlags().map(i=>i),e.arrays=r.getArrays().map(i=>({data:i}))},t.getNumberOfArrays=()=>e.arrays.length,t.getNumberOfActiveArrays=()=>e.arrays.length,t.addArray=r=>{const i=r.getName(),{array:s,index:u}=t.getArrayWithIndex(i);return s!=null?(e.arrays[u]={data:r},u):(e.arrays=[].concat(e.arrays,{data:r}),e.arrays.length-1)},t.removeAllArrays=()=>{e.arrays=[]},t.removeArray=r=>{const i=e.arrays.findIndex(s=>s.data.getName()===r);return t.removeArrayByIndex(i)},t.removeArrayByIndex=r=>r!==-1&&r<e.arrays.length?(e.arrays.splice(r,1),!0):!1,t.getArrays=()=>e.arrays.map(r=>r.data),t.getArray=r=>typeof r=="number"?t.getArrayByIndex(r):t.getArrayByName(r),t.getArrayByName=r=>e.arrays.reduce((i,s,u)=>s.data.getName()===r?s.data:i,null),t.getArrayWithIndex=r=>{const i=e.arrays.findIndex(s=>s.data.getName()===r);return{array:i!==-1?e.arrays[i].data:null,index:i}},t.getArrayByIndex=r=>r>=0&&r<e.arrays.length?e.arrays[r].data:null,t.hasArray=r=>t.getArrayWithIndex(r).index>=0,t.getArrayName=r=>{const i=e.arrays[r];return i?i.data.getName():""},t.getCopyFieldFlags=()=>e.copyFieldFlags,t.getFlag=r=>e.copyFieldFlags[r],t.passData=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;r.getArrays().forEach(u=>{const c=t.getFlag(u.getName());if(c!==!1&&!(e.doCopyAllOff&&c!==!0)&&u){let l=t.getArrayByName(u.getName());if(l)if(u.getNumberOfComponents()===l.getNumberOfComponents())if(i>-1&&i<u.getNumberOfTuples()){const g=s>-1?s:i;l.insertTuple(g,u.getTuple(i))}else l.insertTuples(0,u.getTuples());else o8("Unhandled case in passData");else if(i<0||i>u.getNumberOfTuples())t.addArray(u),r.getAttributes(u).forEach(g=>{t.setAttribute(u,g)});else{const g=u.getNumberOfComponents();let v=u.getNumberOfValues();const h=s>-1?s:i;v<=h*g&&(v=(h+1)*g),l=Fe.newInstance({name:u.getName(),dataType:u.getDataType(),numberOfComponents:g,values:B.newTypedArray(u.getDataType(),v),size:0}),l.insertTuple(h,u.getTuple(i)),t.addArray(l),r.getAttributes(u).forEach(y=>{t.setAttribute(l,y)})}}})},t.interpolateData=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5;r.getArrays().forEach(l=>{const g=t.getFlag(l.getName());if(g!==!1&&!(e.doCopyAllOff&&g!==!0)&&l){let v=t.getArrayByName(l.getName());if(v)if(l.getNumberOfComponents()===v.getNumberOfComponents())if(i>-1&&i<l.getNumberOfTuples()){const h=u>-1?u:i;v.interpolateTuple(h,l,i,l,s,c),oR("Unexpected case in interpolateData")}else v.insertTuples(l.getTuples());else o8("Unhandled case in interpolateData");else if(i<0||s<0||i>l.getNumberOfTuples())t.addArray(l),r.getAttributes(l).forEach(h=>{t.setAttribute(l,h)});else{const h=l.getNumberOfComponents();let y=l.getNumberOfValues();const T=u>-1?u:i;y<=T*h&&(y=(T+1)*h),v=Fe.newInstance({name:l.getName(),dataType:l.getDataType(),numberOfComponents:h,values:B.newTypedArray(l.getDataType(),y),size:0}),v.interpolateTuple(T,l,i,l,s,c),t.addArray(v),r.getAttributes(l).forEach(E=>{t.setAttribute(v,E)})}}})},t.copyFieldOn=r=>{e.copyFieldFlags[r]=!0},t.copyFieldOff=r=>{e.copyFieldFlags[r]=!1},t.copyAllOn=()=>{(!e.doCopyAllOn||e.doCopyAllOff)&&(e.doCopyAllOn=!0,e.doCopyAllOff=!1,t.modified())},t.copyAllOff=()=>{(e.doCopyAllOn||!e.doCopyAllOff)&&(e.doCopyAllOn=!1,e.doCopyAllOff=!0,t.modified())},t.clearFieldFlags=()=>{e.copyFieldFlags={}},t.deepCopy=r=>{e.arrays=r.getArrays().map(i=>{const s=i.newClone();return s.deepCopy(i),{data:s}})},t.copyFlags=r=>r.getCopyFieldFlags().map(i=>i),t.reset=()=>e.arrays.forEach(r=>r.data.reset()),t.getMTime=()=>e.arrays.reduce((r,i)=>i.data.getMTime()>r?i.data.getMTime():r,e.mtime),t.getNumberOfComponents=()=>e.arrays.reduce((r,i)=>r+i.data.getNumberOfComponents(),0),t.getNumberOfTuples=()=>e.arrays.length>0?e.arrays[0].getNumberOfTuples():0,t.getState=()=>{const r=n();return r&&(r.arrays=e.arrays.map(i=>({data:i.data.getState()}))),r}}const cR={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function Mh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,cR,n),B.obj(t,e),uR(t,e)}const fR=B.newInstance(Mh,"vtkFieldData");var lR={newInstance:fR,extend:Mh};const gR={SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},hR={MAX:0,EXACT:1,NOLIMIT:2},pR={DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},vR={DUPLICATEPOINT:1,HIDDENPOINT:2},yR={COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},dR="vtkGhostType",TR={DEFAULT:0,SINGLE:1,DOUBLE:2};var Oh={AttributeCopyOperations:yR,AttributeLimitTypes:hR,AttributeTypes:gR,CellGhostTypes:pR,DesiredOutputPrecision:TR,PointGhostTypes:vR,ghostArrayName:dR};const{AttributeTypes:ta,AttributeCopyOperations:za}=Oh,{vtkWarningMacro:vu}=B;function SR(t,e){const n=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function r(u){let c=n.find(l=>ta[l.toUpperCase()]===u||typeof u!="number"&&l.toLowerCase()===u.toLowerCase());return typeof c>"u"&&(c=null),c}e.classHierarchy.push("vtkDataSetAttributes");const i={...t};t.checkNumberOfComponents=u=>!0,t.setAttribute=(u,c)=>{const l=r(c);if(u&&l.toUpperCase()==="PEDIGREEIDS"&&!u.isA("vtkDataArray"))return vu(`Cannot set attribute ${l}. The attribute must be a vtkDataArray.`),-1;if(u&&!t.checkNumberOfComponents(u,l))return vu(`Cannot set attribute ${l}. Incorrect number of components.`),-1;let g=e[`active${l}`];if(g>=0&&g<e.arrays.length){if(e.arrays[g]===u)return g;t.removeArrayByIndex(g)}return u?(g=t.addArray(u),e[`active${l}`]=g):e[`active${l}`]=-1,t.modified(),e[`active${l}`]},t.getAttributes=u=>n.filter(c=>t[`get${c}`]()===u),t.setActiveAttributeByName=(u,c)=>t.setActiveAttributeByIndex(t.getArrayWithIndex(u).index,c),t.setActiveAttributeByIndex=(u,c)=>{const l=r(c);if(u>=0&&u<e.arrays.length){if(l.toUpperCase()!=="PEDIGREEIDS"){const g=t.getArrayByIndex(u);if(!g.isA("vtkDataArray"))return vu(`Cannot set attribute ${l}. Only vtkDataArray subclasses can be set as active attributes.`),-1;if(!t.checkNumberOfComponents(g,l))return vu(`Cannot set attribute ${l}. Incorrect number of components.`),-1}return e[`active${l}`]=u,t.modified(),u}return u===-1&&(e[`active${l}`]=u,t.modified()),-1},t.getActiveAttribute=u=>{const c=r(u);return t[`get${c}`]()},t.removeAllArrays=()=>{n.forEach(u=>{e[`active${u}`]=-1}),i.removeAllArrays()},t.removeArrayByIndex=u=>(u!==-1&&n.forEach(c=>{u===e[`active${c}`]?e[`active${c}`]=-1:u<e[`active${c}`]&&(e[`active${c}`]-=1)}),i.removeArrayByIndex(u)),n.forEach(u=>{const c=`active${u}`;t[`get${u}`]=()=>t.getArrayByIndex(e[c]),t[`set${u}`]=l=>t.setAttribute(l,u),t[`setActive${u}`]=l=>t.setActiveAttributeByIndex(t.getArrayWithIndex(l).index,u),t[`copy${u}Off`]=()=>{const l=u.toUpperCase();e.copyAttributeFlags[za.PASSDATA][ta[l]]=!1},t[`copy${u}On`]=()=>{const l=u.toUpperCase();e.copyAttributeFlags[za.PASSDATA][ta[l]]=!0}}),t.initializeAttributeCopyFlags=()=>{e.copyAttributeFlags=[],Object.keys(za).filter(u=>u!=="ALLCOPY").forEach(u=>{e.copyAttributeFlags[za[u]]=Object.keys(ta).filter(c=>c!=="NUM_ATTRIBUTES").reduce((c,l)=>(c[ta[l]]=!0,c),[])}),e.copyAttributeFlags[za.COPYTUPLE][ta.GLOBALIDS]=!1,e.copyAttributeFlags[za.INTERPOLATE][ta.GLOBALIDS]=!1,e.copyAttributeFlags[za.COPYTUPLE][ta.PEDIGREEIDS]=!1},t.initialize=B.chain(t.initialize,t.initializeAttributeCopyFlags),e.dataArrays&&Object.keys(e.dataArrays).length&&Object.keys(e.dataArrays).forEach(u=>{!e.dataArrays[u].ref&&e.dataArrays[u].type==="vtkDataArray"&&t.addArray(Fe.newInstance(e.dataArrays[u]))});const s=t.shallowCopy;t.shallowCopy=(u,c)=>{s(u,c),e.arrays=u.getArrays().map(l=>{const g=l.newClone();return g.shallowCopy(l,c),{data:g}})},t.initializeAttributeCopyFlags()}const CR={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function Dh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,CR,n),lR.extend(t,e,n),B.setGet(t,e,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),e.arrays||(e.arrays={}),SR(t,e)}const xR=B.newInstance(Dh,"vtkDataSetAttributes");var u8={newInstance:xR,extend:Dh,...Oh};const ER={UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},mR={FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7};var RR={FieldDataTypes:ER,FieldAssociations:mR};const ms=["pointData","cellData","fieldData"];function wR(t,e){e.classHierarchy.push("vtkDataSet"),ms.forEach(i=>{e[i]?e[i]=Hn(e[i]):e[i]=u8.newInstance()}),t.computeBounds=()=>{if(e.modifiedTime&&e.computeTime&&e.modifiedTime>e.computeTime||!e.computeTime){const i=t.getPoints();i?.getNumberOfPoints()?Ve.setBounds(e.bounds,i.getBoundsByReference()):e.bounds=Zl.createUninitializedBounds(),e.computeTime=B.getCurrentGlobalMTime()}},t.getLength2=()=>{const i=t.getBoundsByReference();return!i||i.length!==6?0:Ve.getDiagonalLength2(i)},t.getLength=()=>Math.sqrt(t.getLength2()),t.getCenter=()=>{const i=t.getBoundsByReference();return!i||i.length!==6?[0,0,0]:Ve.getCenter(i)},t.getCellBounds=i=>{const s=t.getCell(i);return s?s.getBounds():Zl.createUninitializedBounds()},t.getBounds=B.chain(()=>t.computeBounds,t.getBounds),t.getBoundsByReference=B.chain(()=>t.computeBounds,t.getBoundsByReference);const n=t.shallowCopy;t.shallowCopy=function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(i,s),ms.forEach(u=>{e[u]=u8.newInstance(),e[u].shallowCopy(i.getReferenceByName(u))})};const r=t.getMTime;t.getMTime=()=>ms.reduce((i,s)=>Math.max(i,e[s]?.getMTime()??i),r()),t.initialize=()=>(ms.forEach(i=>e[i]?.initialize()),t)}const MR={};function Lh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,MR,n),B.obj(t,e),B.setGet(t,e,ms),B.getArray(t,e,["bounds"],6),wR(t,e)}const OR=B.newInstance(Lh,"vtkDataSet");var i0={newInstance:OR,extend:Lh,...RR};const Dn={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9};var Bh={StructuredType:Dn};const{StructuredType:Tr}=Bh;function DR(t){let e=0;for(let n=0;n<3;++n)t[n*2]<t[n*2+1]&&e++;return t[0]>t[1]||t[2]>t[3]||t[4]>t[5]?Tr.EMPTY:e===3?Tr.XYZ_GRID:e===2?t[0]===t[1]?Tr.YZ_PLANE:t[2]===t[3]?Tr.XZ_PLANE:Tr.XY_PLANE:e===1?t[0]<t[1]?Tr.X_LINE:t[2]<t[3]?Tr.Y_LINE:Tr.Z_LINE:Tr.SINGLE_POINT}var LR={getDataDescriptionFromExtent:DR,...Bh};const{vtkErrorMacro:ka}=B;function BR(t,e){e.classHierarchy.push("vtkImageData"),t.setExtent=function(){if(e.deleted)return ka("instance deleted - cannot call any method"),!1;for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];const u=i.length===1?i[0]:i;if(u.length!==6)return!1;const c=e.extent.some((l,g)=>l!==u[g]);return c&&(e.extent=u.slice(),e.dataDescription=LR.getDataDescriptionFromExtent(e.extent),t.modified()),c},t.setDimensions=function(){let r,i,s;if(e.deleted){ka("instance deleted - cannot call any method");return}if(arguments.length===1){const u=arguments.length<=0?void 0:arguments[0];r=u[0],i=u[1],s=u[2]}else if(arguments.length===3)r=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],s=arguments.length<=2?void 0:arguments[2];else{ka("Bad dimension specification");return}t.setExtent(0,r-1,0,i-1,0,s-1)},t.getDimensions=()=>[e.extent[1]-e.extent[0]+1,e.extent[3]-e.extent[2]+1,e.extent[5]-e.extent[4]+1],t.getNumberOfCells=()=>{const r=t.getDimensions();let i=1;for(let s=0;s<3;s++){if(r[s]===0)return 0;r[s]>1&&(i*=r[s]-1)}return i},t.getNumberOfPoints=()=>{const r=t.getDimensions();return r[0]*r[1]*r[2]},t.getPoint=r=>{const i=t.getDimensions();if(i[0]===0||i[1]===0||i[2]===0)return ka("Requesting a point from an empty image."),null;const s=new Float64Array(3);switch(e.dataDescription){case Dn.EMPTY:return null;case Dn.SINGLE_POINT:break;case Dn.X_LINE:s[0]=r;break;case Dn.Y_LINE:s[1]=r;break;case Dn.Z_LINE:s[2]=r;break;case Dn.XY_PLANE:s[0]=r%i[0],s[1]=r/i[0];break;case Dn.YZ_PLANE:s[1]=r%i[1],s[2]=r/i[1];break;case Dn.XZ_PLANE:s[0]=r%i[0],s[2]=r/i[0];break;case Dn.XYZ_GRID:s[0]=r%i[0],s[1]=r/i[0]%i[1],s[2]=r/(i[0]*i[1]);break;default:ka("Invalid dataDescription");break}const u=[0,0,0];return t.indexToWorld(s,u),u},t.getBounds=()=>t.extentToBounds(t.getSpatialExtent()),t.extentToBounds=r=>Ve.transformBounds(r,e.indexToWorld),t.getSpatialExtent=()=>Ve.inflate([...e.extent],.5),t.computeTransforms=()=>{d6(e.indexToWorld,e.origin),e.indexToWorld[0]=e.direction[0],e.indexToWorld[1]=e.direction[1],e.indexToWorld[2]=e.direction[2],e.indexToWorld[4]=e.direction[3],e.indexToWorld[5]=e.direction[4],e.indexToWorld[6]=e.direction[5],e.indexToWorld[8]=e.direction[6],e.indexToWorld[9]=e.direction[7],e.indexToWorld[10]=e.direction[8],ti(e.indexToWorld,e.indexToWorld,e.spacing),tn(e.worldToIndex,e.indexToWorld)},t.indexToWorld=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ae(i,r,e.indexToWorld),i},t.indexToWorldVec3=t.indexToWorld,t.worldToIndex=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ae(i,r,e.worldToIndex),i},t.worldToIndexVec3=t.worldToIndex,t.indexToWorldBounds=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ve.transformBounds(r,e.indexToWorld,i)},t.worldToIndexBounds=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ve.transformBounds(r,e.worldToIndex,i)},e._onOriginChanged=t.computeTransforms,e._onDirectionChanged=t.computeTransforms,e._onSpacingChanged=t.computeTransforms,t.computeTransforms(),t.getCenter=()=>Ve.getCenter(t.getBounds()),t.computeHistogram=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const s=[0,0,0,0,0,0];t.worldToIndexBounds(r,s);const u=[0,0,0],c=[0,0,0];Ve.computeCornerPoints(s,u,c),Xl(u,u),Xl(c,c);const l=t.getDimensions();ql(u,[0,0,0],[l[0]-1,l[1]-1,l[2]-1],u),ql(c,[0,0,0],[l[0]-1,l[1]-1,l[2]-1],c);const g=l[0],v=l[0]*l[1],h=t.getPointData().getScalars().getData();let y=-1/0,T=1/0,E=0,S=0,x=0;for(let w=u[2];w<=c[2];w++)for(let D=u[1];D<=c[1];D++){let O=u[0]+D*g+w*v;for(let _=u[0];_<=c[0];_++){if(!i||i([_,D,w],s)){const N=h[O];N>y&&(y=N),N<T&&(T=N),E+=N*N,S+=N,x+=1}++O}}const m=x>0?S/x:0,M=x?Math.abs(E/x-m*m):0,R=Math.sqrt(M);return{minimum:T,maximum:y,average:m,variance:M,sigma:R,count:x}},t.computeIncrements=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const s=[];let u=i;for(let c=0;c<3;++c)s[c]=u,u*=r[c*2+1]-r[c*2]+1;return s},t.computeOffsetIndex=r=>{let[i,s,u]=r;const c=t.getExtent(),l=t.getPointData().getScalars().getNumberOfComponents(),g=t.computeIncrements(c,l);return Math.floor((Math.round(i)-c[0])*g[0]+(Math.round(s)-c[2])*g[1]+(Math.round(u)-c[4])*g[2])},t.getOffsetIndexFromWorld=r=>{const i=t.getExtent(),s=t.worldToIndex(r);for(let u=0;u<3;++u)if(s[u]<i[u*2]||s[u]>i[u*2+1])return ka(`GetScalarPointer: Pixel ${s} is not in memory. Current extent = ${i}`),NaN;return t.computeOffsetIndex(s)},t.getScalarValueFromWorld=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const s=t.getPointData().getScalars().getNumberOfComponents();if(i<0||i>=s)return ka(`GetScalarPointer: Scalar Component ${i} is not within bounds. Current Scalar numberOfComponents: ${s}`),NaN;const u=t.getOffsetIndexFromWorld(r);return Number.isNaN(u)?u:t.getPointData().getScalars().getComponent(u,i)};const n=t.initialize;t.initialize=()=>(t.set({direction:ya(e.direction),spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:Dn.EMPTY}),n())}const VR={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:Dn.EMPTY};function Vh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,VR,n),i0.extend(t,e,n),e.direction?Array.isArray(e.direction)&&(e.direction=new Float64Array(e.direction.slice(0,9))):e.direction=ya(new Float64Array(9)),e.indexToWorld=new Float64Array(16),e.worldToIndex=new Float64Array(16),B.get(t,e,["indexToWorld","worldToIndex"]),B.setGetArray(t,e,["origin","spacing"],3),B.setGetArray(t,e,["direction"],9),B.getArray(t,e,["extent"],6),BR(t,e)}const NR=B.newInstance(Vh,"vtkImageData");var _R={newInstance:NR,extend:Vh};const UR={MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},e2={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4},GR={LINEAR:0,LOG10:1};var H2={VectorMode:UR,ScalarMappingTarget:e2,Scale:GR};const bR={DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},FR={DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5},zR={BY_ID:0,BY_NAME:1};var $2={ColorMode:bR,GetArray:zR,ScalarMode:FR};const{ScalarMappingTarget:c8,Scale:kR,VectorMode:qn}=H2,{VtkDataTypes:na}=Fe,{ColorMode:yu}=$2,{vtkErrorMacro:f8}=B;function HR(t){return t}function l8(t){return Math.floor(t*255+.5)}function $R(t,e){e.classHierarchy.push("vtkScalarsToColors"),t.setVectorModeToMagnitude=()=>t.setVectorMode(qn.MAGNITUDE),t.setVectorModeToComponent=()=>t.setVectorMode(qn.COMPONENT),t.setVectorModeToRGBColors=()=>t.setVectorMode(qn.RGBCOLORS),t.build=()=>{},t.isOpaque=()=>!0,t.setAnnotations=(n,r)=>{if(!(n&&!r||!n&&r)){if(n&&r&&n.length!==r.length){f8("Values and annotations do not have the same number of tuples so ignoring");return}if(e.annotationArray=[],r&&n){const i=r.length;for(let s=0;s<i;s++)e.annotationArray.push({value:n[s],annotation:String(r[s])})}t.updateAnnotatedValueMap(),t.modified()}},t.setAnnotation=(n,r)=>{let i=t.checkForAnnotatedValue(n),s=!1;return i>=0?e.annotationArray[i].annotation!==r&&(e.annotationArray[i].annotation=r,s=!0):(e.annotationArray.push({value:n,annotation:r}),i=e.annotationArray.length-1,s=!0),s&&(t.updateAnnotatedValueMap(),t.modified()),i},t.getNumberOfAnnotatedValues=()=>e.annotationArray.length,t.getAnnotatedValue=n=>n<0||n>=e.annotationArray.length?null:e.annotationArray[n].value,t.getAnnotation=n=>e.annotationArray[n]===void 0?null:e.annotationArray[n].annotation,t.getAnnotatedValueIndex=n=>e.annotationArray.length?t.checkForAnnotatedValue(n):-1,t.removeAnnotation=n=>{const r=t.checkForAnnotatedValue(n),i=r>=0;return i&&(e.annotationArray.splice(r,1),t.updateAnnotatedValueMap(),t.modified()),i},t.resetAnnotations=()=>{e.annotationArray=[],e.annotatedValueMap=[],t.modified()},t.getAnnotationColor=(n,r)=>{if(e.indexedLookup){const i=t.getAnnotatedValueIndex(n);t.getIndexedColor(i,r)}else t.getColor(parseFloat(n),r),r[3]=1},t.checkForAnnotatedValue=n=>t.getAnnotatedValueIndexInternal(n),t.getAnnotatedValueIndexInternal=n=>{if(e.annotatedValueMap[n]!==void 0){const r=e.annotationArray.length;return e.annotatedValueMap[n]%r}return-1},t.getIndexedColor=(n,r)=>{r[0]=0,r[1]=0,r[2]=0,r[3]=0},t.updateAnnotatedValueMap=()=>{e.annotatedValueMap=[];const n=e.annotationArray.length;for(let r=0;r<n;r++)e.annotatedValueMap[e.annotationArray[r].value]=r},t.mapScalars=(n,r,i)=>{const s=n.getNumberOfComponents();let u=null;if(r===yu.DEFAULT&&(n.getDataType()===na.UNSIGNED_CHAR||n.getDataType()===na.UNSIGNED_CHAR_CLAMPED)||r===yu.DIRECT_SCALARS&&n)u=t.convertToRGBA(n,s,n.getNumberOfTuples());else{const c={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:na.UNSIGNED_CHAR},l=B.newTypedArray(c.dataType,4*n.getNumberOfTuples());c.values=l,c.size=l.length,u=Fe.newInstance(c);let g=i;g<0&&s>1?t.mapVectorsThroughTable(n,u,c8.RGBA,-1,-1):(g<0&&(g=0),g>=s&&(g=s-1),t.mapScalarsThroughTable(n,u,c8.RGBA,g))}return u},t.mapVectorsToMagnitude=(n,r,i)=>{const s=n.getNumberOfTuples(),u=n.getNumberOfComponents(),c=r.getData(),l=n.getData();for(let g=0;g<s;g++){let v=0;for(let h=0;h<i;h++)v+=l[g*u+h]*l[g*u+h];c[g]=Math.sqrt(v)}},t.mapVectorsThroughTable=(n,r,i,s,u)=>{let c=t.getVectorMode(),l=u,g=s;const v=n.getNumberOfComponents();c===qn.COMPONENT?(g===-1&&(g=t.getVectorComponent()),g<0&&(g=0),g>=v&&(g=v-1)):(l===-1&&(l=t.getVectorSize()),l<=0?(g=0,l=v):(g<0&&(g=0),g>=v&&(g=v-1),g+l>v&&(l=v-g)),c===qn.MAGNITUDE&&(v===1||l===1)&&(c=qn.COMPONENT));let h=0;switch(g>0&&(h=g),c){case qn.COMPONENT:{t.mapScalarsThroughTable(n,r,i,h);break}case qn.RGBCOLORS:break;case qn.MAGNITUDE:default:{const y=Fe.newInstance({numberOfComponents:1,values:new Float32Array(n.getNumberOfTuples())});t.mapVectorsToMagnitude(n,y,l),t.mapScalarsThroughTable(y,r,i,0);break}}},t.luminanceToRGBA=(n,r,i,s)=>{const u=s(i),c=r.getData(),l=n.getData(),g=c.length,v=0,h=1;let y=0;for(let T=v;T<g;T+=h){const E=s(c[T]);l[y*4]=E,l[y*4+1]=E,l[y*4+2]=E,l[y*4+3]=u,y++}},t.luminanceAlphaToRGBA=(n,r,i,s)=>{const u=r.getData(),c=n.getData(),l=u.length,g=0,v=2;let h=0;for(let y=g;y<l;y+=v){const T=s(u[y]);c[h]=T,c[h+1]=T,c[h+2]=T,c[h+3]=s(u[y+1])*i,h+=4}},t.rGBToRGBA=(n,r,i,s)=>{const u=l8(i),c=r.getData(),l=n.getData(),g=c.length,v=0,h=3;let y=0;for(let T=v;T<g;T+=h)l[y*4]=s(c[T]),l[y*4+1]=s(c[T+1]),l[y*4+2]=s(c[T+2]),l[y*4+3]=u,y++},t.rGBAToRGBA=(n,r,i,s)=>{const u=r.getData(),c=n.getData(),l=u.length,g=0,v=4;let h=0;for(let y=g;y<l;y+=v)c[h*4]=s(u[y]),c[h*4+1]=s(u[y+1]),c[h*4+2]=s(u[y+2]),c[h*4+3]=s(u[y+3])*i,h++},t.convertToRGBA=(n,r,i)=>{let{alpha:s}=e;if(r===4&&s>=1&&n.getDataType()===na.UNSIGNED_CHAR)return n;const u=Fe.newInstance({numberOfComponents:4,empty:!0,size:4*i,dataType:na.UNSIGNED_CHAR});if(i<=0)return u;s=s>0?s:0,s=s<1?s:1;let c=HR;switch((n.getDataType()===na.FLOAT||n.getDataType()===na.DOUBLE)&&(c=l8),r){case 1:t.luminanceToRGBA(u,n,s,c);break;case 2:t.luminanceAlphaToRGBA(u,n,c);break;case 3:t.rGBToRGBA(u,n,s,c);break;case 4:t.rGBAToRGBA(u,n,s,c);break;default:return f8("Cannot convert colors"),null}return u},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>256*256*256,t.setRange=(n,r)=>t.setMappingRange(n,r),t.getRange=()=>t.getMappingRange(),t.areScalarsOpaque=(n,r,i)=>{if(!n)return t.isOpaque();const s=n.getNumberOfComponents();return r===yu.DEFAULT&&n.getDataType()===na.UNSIGNED_CHAR||r===yu.DIRECT_SCALARS?s===3||s===1?e.alpha>=1:n.getRange(s-1)[0]===255:!0}}const AR={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:qn.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1,scale:kR.LINEAR};function Nh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,AR,n),B.obj(t,e),e.mappingRange=[0,255],e.annotationArray=[],e.annotatedValueMap=[],B.setGet(t,e,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),B.setArray(t,e,["mappingRange"],2),B.getArray(t,e,["mappingRange"]),$R(t,e)}const WR=B.newInstance(Nh,"vtkScalarsToColors");var xc={newInstance:WR,extend:Nh,...H2};const{vtkErrorMacro:g8}=B,h8=0,p8=1,yl=2;function jR(t,e){e.classHierarchy.push("vtkLookupTable"),t.isOpaque=()=>{if(e.opaqueFlagBuildTime.getMTime()<t.getMTime()){let n=!0;e.nanColor[3]<1&&(n=0),e.useBelowRangeColor&&e.belowRangeColor[3]<1&&(n=0),e.useAboveRangeColor&&e.aboveRangeColor[3]<1&&(n=0);for(let r=3;r<e.table.length&&n;r+=4)e.table[r]<255&&(n=!1);e.opaqueFlag=n,e.opaqueFlagBuildTime.modified()}return e.opaqueFlag},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>e.table.length/4-3,t.linearIndexLookup=(n,r)=>{let i=0;const s=Number(n);return s<r.range[0]?i=r.maxIndex+h8+1.5:s>r.range[1]?i=r.maxIndex+p8+1.5:(i=(s+r.shift)*r.scale,i=i<r.maxIndex?i:r.maxIndex),Math.floor(i)},t.linearLookup=(n,r,i)=>{let s=0;ic(n)?s=Math.floor(i.maxIndex+1.5+yl):s=t.linearIndexLookup(n,i);const u=4*s;return r.slice(u,u+4)},t.indexedLookupFunction=(n,r,i)=>{let s=t.getAnnotatedValueIndexInternal(n);s===-1&&(s=e.numberOfColors+yl);const u=4*s;return[r[u],r[u+1],r[u+2],r[u+3]]},t.lookupShiftAndScale=(n,r)=>{r.shift=-n[0],r.scale=Number.MAX_VALUE,n[1]>n[0]&&(r.scale=(r.maxIndex+1)/(n[1]-n[0]))},t.mapScalarsThroughTable=(n,r,i,s)=>{let u=t.linearLookup;e.indexedLookup&&(u=t.indexedLookupFunction);const c=t.getMappingRange(),l={maxIndex:t.getNumberOfColors()-1,range:c,shift:0,scale:0};t.lookupShiftAndScale(c,l);const g=t.getAlpha(),v=n.getNumberOfTuples(),h=n.getNumberOfComponents(),y=r.getData(),T=n.getData();if(g>=1){if(i===e2.RGBA)for(let E=0;E<v;E++){const S=u(T[E*h+s],e.table,l);y[E*4]=S[0],y[E*4+1]=S[1],y[E*4+2]=S[2],y[E*4+3]=S[3]}}else if(i===e2.RGBA)for(let E=0;E<v;E++){const S=u(T[E*h+s],e.table,l);y[E*4]=S[0],y[E*4+1]=S[1],y[E*4+2]=S[2],y[E*4+3]=Math.floor(S[3]*g+.5)}},t.forceBuild=()=>{let n=0,r=0,i=0,s=0;const u=e.numberOfColors-1;u&&(n=(e.hueRange[1]-e.hueRange[0])/u,r=(e.saturationRange[1]-e.saturationRange[0])/u,i=(e.valueRange[1]-e.valueRange[0])/u,s=(e.alphaRange[1]-e.alphaRange[0])/u),e.table.length=4*u+16;const c=[],l=[];for(let g=0;g<=u;g++)c[0]=e.hueRange[0]+g*n,c[1]=e.saturationRange[0]+g*r,c[2]=e.valueRange[0]+g*i,Qa(c,l),l[3]=e.alphaRange[0]+g*s,e.table[g*4]=l[0]*255+.5,e.table[g*4+1]=l[1]*255+.5,e.table[g*4+2]=l[2]*255+.5,e.table[g*4+3]=l[3]*255+.5;t.buildSpecialColors(),e.buildTime.modified()},t.setTable=n=>{if(Array.isArray(n)){const i=n[0].length;e.numberOfColors=n.length;const s=4-i;let u=0;for(let c=0;c<e.numberOfColors;c++)e.table[c*4]=255,e.table[c*4+1]=255,e.table[c*4+2]=255,e.table[c*4+3]=255;for(let c=0;c<n.length;c++){const l=n[c];for(let g=0;g<i;g++)e.table[u++]=l[g];u+=s}return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0}if(n.getNumberOfComponents()!==4)return g8("Expected 4 components for RGBA colors"),!1;if(n.getDataType()!==Rt.UNSIGNED_CHAR)return g8("Expected unsigned char values for RGBA colors"),!1;e.numberOfColors=n.getNumberOfTuples();const r=n.getData();e.table.length=r.length;for(let i=0;i<r.length;i++)e.table[i]=r[i];return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0},t.buildSpecialColors=()=>{const{numberOfColors:n}=e,r=e.table;let i=(n+h8)*4;e.useBelowRangeColor||n===0?(r[i]=e.belowRangeColor[0]*255+.5,r[i+1]=e.belowRangeColor[1]*255+.5,r[i+2]=e.belowRangeColor[2]*255+.5,r[i+3]=e.belowRangeColor[3]*255+.5):(r[i]=r[0],r[i+1]=r[1],r[i+2]=r[2],r[i+3]=r[3]),i=(n+p8)*4,e.useAboveRangeColor||n===0?(r[i]=e.aboveRangeColor[0]*255+.5,r[i+1]=e.aboveRangeColor[1]*255+.5,r[i+2]=e.aboveRangeColor[2]*255+.5,r[i+3]=e.aboveRangeColor[3]*255+.5):(r[i]=r[4*(n-1)+0],r[i+1]=r[4*(n-1)+1],r[i+2]=r[4*(n-1)+2],r[i+3]=r[4*(n-1)+3]),i=(n+yl)*4,r[i]=e.nanColor[0]*255+.5,r[i+1]=e.nanColor[1]*255+.5,r[i+2]=e.nanColor[2]*255+.5,r[i+3]=e.nanColor[3]*255+.5},t.build=()=>{(e.table.length<1||t.getMTime()>e.buildTime.getMTime()&&e.insertTime.getMTime()<=e.buildTime.getMTime())&&t.forceBuild()},e.table.length>0&&(t.buildSpecialColors(),e.insertTime.modified())}const KR={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1};function _h(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,KR,n),xc.extend(t,e,n),e.table||(e.table=[]),e.buildTime={},B.obj(e.buildTime),e.opaqueFlagBuildTime={},B.obj(e.opaqueFlagBuildTime,{mtime:0}),e.insertTime={},B.obj(e.insertTime,{mtime:0}),B.get(t,e,["buildTime"]),B.setGet(t,e,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),B.setArray(t,e,["alphaRange","hueRange","saturationRange","valueRange"],2),B.setArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"],4),B.getArray(t,e,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),jR(t,e)}const XR=B.newInstance(_h,"vtkLookupTable");var YR={newInstance:XR,extend:_h};const da={Off:0,PolygonOffset:1};let t2=da.PolygonOffset,cc=da.Off;const qR=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];function QR(){return t2}function ZR(t){const e=t2===t;return t2=t,e}function JR(){return cc}function Ec(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const e=cc===t;return cc=t,e}function PR(){return Ec(da.Off)}function IR(){return Ec(da.Off)}function ew(){return Ec(da.PolygonOffset)}function tw(){return qR[cc]}var n2={Resolve:da,getResolveCoincidentTopologyAsString:tw,getResolveCoincidentTopologyPolygonOffsetFaces:QR,getResolveCoincidentTopology:JR,setResolveCoincidentTopology:Ec,setResolveCoincidentTopologyPolygonOffsetFaces:ZR,setResolveCoincidentTopologyToDefault:PR,setResolveCoincidentTopologyToOff:IR,setResolveCoincidentTopologyToPolygonOffset:ew};function Uh(t,e,n){n.forEach(r=>{t[`get${r.method}`]=()=>e[r.key],t[`set${r.method}`]=B.objectSetterMap.object(t,e,{name:r.key,params:["factor","offset"]})})}const A2=["Polygon","Line","Point"],nw={Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},rw=()=>{},Za={modified:rw};Uh(Za,nw,A2.map(t=>({key:t,method:`ResolveCoincidentTopology${t}OffsetParameters`})));function aw(t,e){e.resolveCoincidentTopology===void 0&&(e.resolveCoincidentTopology=!1),B.setGet(t,e,["resolveCoincidentTopology"]),e.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},Object.keys(n2).forEach(n=>{t[n]=n2[n]}),Object.keys(Za).filter(n=>n!=="modified").forEach(n=>{t[n]=Za[n]}),Uh(t,e.topologyOffset,A2.map(n=>({key:n,method:`RelativeCoincidentTopology${n}OffsetParameters`}))),t.getCoincidentTopologyPolygonOffsetParameters=()=>{const n=Za.getResolveCoincidentTopologyPolygonOffsetParameters(),r=t.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}},t.getCoincidentTopologyLineOffsetParameters=()=>{const n=Za.getResolveCoincidentTopologyLineOffsetParameters(),r=t.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}},t.getCoincidentTopologyPointOffsetParameter=()=>{const n=Za.getResolveCoincidentTopologyPointOffsetParameters(),r=t.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}}}var Gh={implementCoincidentTopologyMethods:aw,staticOffsetAPI:Za,otherStaticMethods:n2,CATEGORIES:A2,Resolve:da};const Wt={MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,ID_HIGH24:3,MAX_KNOWN_PASS:3};var bh={PassTypes:Wt};const{FieldAssociations:v8}=i0,{staticOffsetAPI:iw,otherStaticMethods:sw}=Gh,{ColorMode:du,ScalarMode:Ha,GetArray:dl}=$2,{VectorMode:ow}=H2,{VtkDataTypes:uw}=Fe;function gs(t){return()=>B.vtkErrorMacro(`vtkMapper::${t} - NOT IMPLEMENTED`)}function cw(t,e){const n=t[1]%2===0?1:-1;if(t[0]+=n,t[0]>=e[0]||t[0]<0){const r=t[2]%2===0?1:-1;t[0]-=n,t[1]+=r,(t[1]>=e[1]||t[1]<0)&&(t[1]-=r,t[2]++)}}function fw(t,e){return t[0]+e[0]*(t[1]+e[1]*t[2])}function y8(t,e,n){const r=Math.floor(e),i=r%(2*n[0]);let s,u;i<n[0]?(t[0]=i,s=1,u=t[0]===n[0]-1):(t[0]=2*n[0]-1-i,s=-1,u=t[0]===0);const c=Math.floor(r/n[0]),l=c%(2*n[1]);let g,v;l<n[1]?(t[1]=l,g=1,v=t[1]===n[1]-1):(t[1]=2*n[1]-1-l,g=-1,v=t[1]===0),t[2]=Math.floor(c/n[1]);const h=e-r;u?v?t[2]+=h:t[1]+=g*h:t[0]+=s*h,t[0]=(t[0]+.5)/n[0],t[1]=(t[1]+.5)/n[1],t[2]=(t[2]+.5)/n[2]}const d8=new WeakMap;function lw(t,e,n,r,i,s,u){const c=new Array(arguments.length);for(let Y=0;Y<arguments.length;++Y){const A=arguments[Y];c[Y]=A.getMTime?.()??A}const l=c.join("/"),g=d8.get(t);if(g&&g.stringHash===l)return g.textureCoordinates;const v=(n[1]-n[0])/(i-1),[h,y]=[n[0]-v,n[1]+v],T=h-.5*v,E=1/(y-h+v),S=h,x=(i+1)/(y-h),m=t.getData(),M=t.getNumberOfTuples(),R=t.getNumberOfComponents(),w=e<0||e>=R,D=s[2]<=1?2:3,O=Fe.newInstance({numberOfComponents:D,values:new Float32Array(M*D)}),_=O.getData(),N=[0,0,0];y8(N,i+2,s);let F=0,z=0;const $=[.5,.5,.5];for(let Y=0;Y<M;++Y){let A;if(w){let K=0;for(let ee=0;ee<R;++ee){const G=Number(m[F+ee]);K+=G*G}A=Math.sqrt(K)}else A=Number(m[F+e]);if(r&&(A=Math.log10(A)),F+=R,ic(A))$[0]=N[0],$[1]=N[1],$[2]=N[2];else if(u){let K=(A-S)*x;K<1?K=0:K>i&&(K=i+1),y8($,K,s)}else{$[1]=.49;const K=(A-T)*E;K>1e3?$[0]=1e3:K<-1e3?$[0]=-1e3:$[0]=K}for(let K=0;K<D;++K)_[z++]=$[K]}return d8.set(t,{stringHash:l,textureCoordinates:O}),O}function gw(t,e){e.classHierarchy.push("vtkMapper"),t.getBounds=()=>{const n=t.getInputData();return n?(e.static||t.update(),e.bounds=n.getBounds()):e.bounds=dc(),e.bounds},t.setForceCompileOnly=n=>{e.forceCompileOnly=n},t.setSelectionWebGLIdsToVTKIds=n=>{e.selectionWebGLIdsToVTKIds=n},t.createDefaultLookupTable=()=>{e.lookupTable=YR.newInstance()},t.getColorModeAsString=()=>B.enumToString(du,e.colorMode),t.setColorModeToDefault=()=>t.setColorMode(0),t.setColorModeToMapScalars=()=>t.setColorMode(1),t.setColorModeToDirectScalars=()=>t.setColorMode(2),t.getScalarModeAsString=()=>B.enumToString(Ha,e.scalarMode),t.setScalarModeToDefault=()=>t.setScalarMode(0),t.setScalarModeToUsePointData=()=>t.setScalarMode(1),t.setScalarModeToUseCellData=()=>t.setScalarMode(2),t.setScalarModeToUsePointFieldData=()=>t.setScalarMode(3),t.setScalarModeToUseCellFieldData=()=>t.setScalarMode(4),t.setScalarModeToUseFieldData=()=>t.setScalarMode(5),t.getAbstractScalars=(n,r,i,s,u)=>{if(!n||!e.scalarVisibility)return{scalars:null,cellFlag:!1};let c=null,l=!1;if(r===Ha.DEFAULT)c=n.getPointData().getScalars(),c||(c=n.getCellData().getScalars(),l=!0);else if(r===Ha.USE_POINT_DATA)c=n.getPointData().getScalars();else if(r===Ha.USE_CELL_DATA)c=n.getCellData().getScalars(),l=!0;else if(r===Ha.USE_POINT_FIELD_DATA){const g=n.getPointData();i===dl.BY_ID?c=g.getArrayByIndex(s):c=g.getArrayByName(u)}else if(r===Ha.USE_CELL_FIELD_DATA){const g=n.getCellData();l=!0,i===dl.BY_ID?c=g.getArrayByIndex(s):c=g.getArrayByName(u)}else if(r===Ha.USE_FIELD_DATA){const g=n.getFieldData();i===dl.BY_ID?c=g.getArrayByIndex(s):c=g.getArrayByName(u)}return{scalars:c,cellFlag:l}},t.mapScalars=(n,r)=>{const{scalars:i,cellFlag:s}=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName);if(e.areScalarsMappedFromCells=s,!i){e.colorCoordinates=null,e.colorTextureMap=null,e.colorMapColors=null;return}const u=`${t.getMTime()}${i.getMTime()}${r}`;if(e.colorBuildString!==u){if(e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]),t.canUseTextureMapForColoring(i,s))e.mapScalarsToTexture(i,s,r);else{e.colorCoordinates=null,e.colorTextureMap=null;const c=t.getLookupTable();c&&(c.build(),e.colorMapColors=c.mapScalars(i,e.colorMode,e.fieldDataTupleId))}e.colorBuildString=`${t.getMTime()}${i.getMTime()}${r}`}},e.mapScalarsToTexture=(n,r,i)=>{const s=e.lookupTable.getRange(),u=e.lookupTable.usingLogScale(),c=e.lookupTable.getAlpha(),l=u?[Math.log10(s[0]),Math.log10(s[1])]:s;if(e.colorMapColors=null,e.colorTextureMap==null||t.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getAlpha()!==i){e.lookupTable.setAlpha(i),e.colorTextureMap=null,e.lookupTable.build();const v=e.lookupTable.getNumberOfAvailableColors(),h=2048,y=h**3-3,E=4096-2,S=2,x=r?y:E;e.numberOfColorsInRange=Math.min(Math.max(v,S),x);const m=e.numberOfColorsInRange+3,M=e.numberOfColorsInRange+2,R=r?[Math.min(Math.ceil(m/h**0),h),Math.min(Math.ceil(m/h**1),h),Math.min(Math.ceil(m/h**2),h)]:[M,2,1],w=R[0]*R[1]*R[2],D=new Float64Array(w);D.fill(NaN);const O=e.numberOfColorsInRange,_=O+2,N=[0,0,0],F=l[0],z=l[1]-l[0];for(let A=0;A<_;++A){const K=fw(N,R),ee=F+z*(A-1)/(O-1),G=u?10**ee:ee;D[K]=G,cw(N,R)}const $=Fe.newInstance({numberOfComponents:1,values:D}),Y=e.lookupTable.mapScalars($,e.colorMode,0);e.colorTextureMap=_R.newInstance(),e.colorTextureMap.setDimensions(R),e.colorTextureMap.getPointData().setScalars(Y),e.lookupTable.setAlpha(c)}const g=e.lookupTable.getVectorMode()===ow.MAGNITUDE&&n.getNumberOfComponents()>1?-1:e.lookupTable.getVectorComponent();e.colorCoordinates=lw(n,g,l,u,e.numberOfColorsInRange,e.colorTextureMap.getDimensions(),r)},t.getIsOpaque=()=>{const n=t.getInputData(),i=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(!e.scalarVisibility||i==null)return!0;const s=t.getLookupTable();return s?(s.build(),s.areScalarsOpaque(i,e.colorMode,-1)):!0},t.canUseTextureMapForColoring=(n,r)=>r&&e.colorMode!==du.DIRECT_SCALARS?!0:!(!e.interpolateScalarsBeforeMapping||e.lookupTable&&e.lookupTable.getIndexedLookup()||!n||e.colorMode===du.DEFAULT&&n.getDataType()===uw.UNSIGNED_CHAR||e.colorMode===du.DIRECT_SCALARS),t.clearColorArrays=()=>{e.colorMapColors=null,e.colorCoordinates=null,e.colorTextureMap=null},t.getLookupTable=()=>(e.lookupTable||t.createDefaultLookupTable(),e.lookupTable),t.getMTime=()=>{let n=e.mtime;if(e.lookupTable!==null){const r=e.lookupTable.getMTime();n=r>n?r:n}return n},t.getPrimitiveCount=()=>{const n=t.getInputData();return{points:n.getPoints().getNumberOfValues()/3,verts:n.getVerts().getNumberOfValues()-n.getVerts().getNumberOfCells(),lines:n.getLines().getNumberOfValues()-2*n.getLines().getNumberOfCells(),triangles:n.getPolys().getNumberOfValues()-3*n.getPolys().getNumberOfCells()}},t.acquireInvertibleLookupTable=gs("AcquireInvertibleLookupTable"),t.valueToColor=gs("ValueToColor"),t.colorToValue=gs("ColorToValue"),t.useInvertibleColorFor=gs("UseInvertibleColorFor"),t.clearInvertibleColor=gs("ClearInvertibleColor"),t.processSelectorPixelBuffers=(n,r)=>{if(!n||!e.selectionWebGLIdsToVTKIds||!e.populateSelectionSettings)return;const i=n.getRawPixelBuffer(Wt.ID_LOW24),s=n.getRawPixelBuffer(Wt.ID_HIGH24),u=n.getCurrentPass(),c=n.getFieldAssociation();let l=null;c===v8.FIELD_ASSOCIATION_POINTS?l=e.selectionWebGLIdsToVTKIds.points:c===v8.FIELD_ASSOCIATION_CELLS&&(l=e.selectionWebGLIdsToVTKIds.cells),l&&r.forEach(g=>{if(u===Wt.ID_LOW24){let v=0;s&&(v+=s[g],v*=256),v+=i[g+2],v*=256,v+=i[g+1],v*=256,v+=i[g];const h=l[v],y=n.getPixelBuffer(Wt.ID_LOW24);y[g]=h&255,y[g+1]=(h&65280)>>8,y[g+2]=(h&16711680)>>16}else if(u===Wt.ID_HIGH24&&s){let v=0;v+=s[g],v*=256,v+=i[g+2],v*=256,v+=i[g+1],v*=256,v+=i[g];const h=l[v],y=n.getPixelBuffer(Wt.ID_HIGH24);y[g]=(h&4278190080)>>24}})}}const hw={colorMapColors:null,areScalarsMappedFromCells:!1,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,populateSelectionSettings:!0,selectionWebGLIdsToVTKIds:null,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,numberOfColorsInRange:0,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,customShaderAttributes:[]};function Fh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,hw,n),sR.extend(t,e,n),B.get(t,e,["areScalarsMappedFromCells","colorCoordinates","colorMapColors","colorTextureMap","numberOfColorsInRange","selectionWebGLIdsToVTKIds"]),B.setGet(t,e,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","populateSelectionSettings","renderTime","scalarMode","scalarVisibility","static","useLookupTableScalarRange","customShaderAttributes"]),B.setGetArray(t,e,["scalarRange"],2),Gh.implementCoincidentTopologyMethods(t,e),gw(t,e)}const pw=B.newInstance(Fh,"vtkMapper");var wr={newInstance:pw,extend:Fh,...iw,...sw,...$2};const{isVtkObject:vw}=B;function zh(t){let e=0;return t.filter((n,r)=>r===e?(e+=n+1,!0):!1)}function kh(t){let e=0;for(let n=0;n<t.length;)n+=t[n]+1,e++;return e}const yw={extractCellSizes:zh,getNumberOfCells:kh};function dw(t,e){e.classHierarchy.push("vtkCellArray");const n={...t};t.getNumberOfCells=r=>(e.numberOfCells!==void 0&&!r||(e.cellSizes?e.numberOfCells=e.cellSizes.length:e.numberOfCells=kh(t.getData())),e.numberOfCells),t.getCellSizes=r=>(e.cellSizes!==void 0&&!r||(e.cellSizes=zh(t.getData())),e.cellSizes),t.resize=r=>{const i=t.getNumberOfTuples();n.resize(r);const s=t.getNumberOfTuples();s<i&&(s===0?(e.numberOfCells=0,e.cellSizes=[]):(e.numberOfCells=void 0,e.cellSizes=void 0))},t.setData=r=>{n.setData(r,1),e.numberOfCells=void 0,e.cellSizes=void 0},t.getCell=r=>{let i=r;const s=e.values[i++];return e.values.subarray(i,i+s)},t.insertNextCell=r=>{let i;vw(r)?i=r.getPointsIds():i=r;const s=t.getNumberOfCells();return t.insertNextTuples([i.length,...i]),++e.numberOfCells,e.cellSizes!=null&&e.cellSizes.push(i.length),s},t.getMaxCellSize=()=>t.getCellSizes().reduce((r,i)=>Math.max(r,i),0)}function Tw(t){return{empty:!0,numberOfComponents:1,dataType:Rt.UNSIGNED_INT,...t}}function Hh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Fe.extend(t,e,Tw(n)),dw(t,e)}const Sw=B.newInstance(Hh,"vtkCellArray");var T8={newInstance:Sw,extend:Hh,...yw};const{vtkErrorMacro:Cw}=B;function xw(t,e){let n=0;e.classHierarchy.push("vtkPoints"),t.getNumberOfPoints=t.getNumberOfTuples,t.setNumberOfPoints=function(s){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;t.getNumberOfPoints()!==s&&(e.size=s*u,e.values=B.newTypedArray(e.dataType,e.size),t.setNumberOfComponents(u),t.modified())},t.setPoint=function(s){for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];t.setTuple(s,c)},t.getPoint=t.getTuple,t.findPoint=t.findTuple,t.insertNextPoint=(s,u,c)=>t.insertNextTuple([s,u,c]),t.insertPoint=(s,u)=>t.insertTuple(s,u);const r=t.getBounds;t.getBounds=()=>(n<e.mtime&&t.computeBounds(),r());const i=t.getBoundsByReference;t.getBoundsByReference=()=>(n<e.mtime&&t.computeBounds(),i()),t.computeBounds=()=>{if(t.getNumberOfComponents()===3){const s=t.getRange(0);e.bounds[0]=s[0],e.bounds[1]=s[1];const u=t.getRange(1);e.bounds[2]=u[0],e.bounds[3]=u[1];const c=t.getRange(2);e.bounds[4]=c[0],e.bounds[5]=c[1]}else if(t.getNumberOfComponents()===2){const s=t.getRange(0);e.bounds[0]=s[0],e.bounds[1]=s[1];const u=t.getRange(1);e.bounds[2]=u[0],e.bounds[3]=u[1],e.bounds[4]=0,e.bounds[5]=0}else Cw(`getBounds called on an array with components of ${t.getNumberOfComponents()}`),B2(e.bounds);n=B.getCurrentGlobalMTime()},t.setNumberOfComponents(e.numberOfComponents<2?3:e.numberOfComponents)}const Ew={empty:!0,numberOfComponents:3,dataType:Rt.FLOAT,bounds:[1,-1,1,-1,1,-1]};function $h(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Ew,n),Fe.extend(t,e,n),B.getArray(t,e,["bounds"],6),xw(t,e)}const mw=B.newInstance($h,"vtkPoints");var va={newInstance:mw,extend:$h};function Rw(t,e){e.classHierarchy.push("vtkCell"),t.initialize=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(r){e.pointsIds=r;let i=e.points.getData();i.length!==3*e.pointsIds.length&&(i=B.newTypedArray(n.getDataType(),3*e.pointsIds.length));const s=n.getData();e.pointsIds.forEach((u,c)=>{let l=3*u,g=3*c;i[g]=s[l],i[++g]=s[++l],i[++g]=s[++l]}),e.points.setData(i)}else{e.points=n,e.pointsIds=new Array(n.getNumberOfPoints());for(let i=n.getNumberOfPoints()-1;i>=0;--i)e.pointsIds[i]=i}},t.getBounds=()=>e.points.getBounds(),t.getLength2=()=>{const n=Ve.getLengths(t.getBounds());return n[0]*n[0]+n[1]*n[1]+n[2]*n[2]},t.getParametricDistance=n=>{let r,i=0;for(let s=0;s<3;s++)n[s]<0?r=-n[s]:n[s]>1?r=n[s]-1:r=0,r>i&&(i=r);return i},t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.deepCopy=n=>{n.initialize(e.points,e.pointsIds)},t.getCellDimension=()=>{},t.intersectWithLine=(n,r,i,s,u,c,l)=>{},t.evaluatePosition=(n,r,i,s,u,c)=>{B.vtkErrorMacro("vtkCell.evaluatePosition is not implemented.")}}const ww={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function Ah(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ww,n),B.obj(t,e),e.points||(e.points=va.newInstance()),B.get(t,e,["points","pointsIds"]),Rw(t,e)}const Mw=B.newInstance(Ah,"vtkCell");var a0={newInstance:Mw,extend:Ah};function Ow(t,e){let n=e;for(e>=t.array.length&&(n+=t.array.length);n>t.array.length;)t.array.push({ncells:0,cells:null});t.array.length=n}function Dw(t,e){e.classHierarchy.push("vtkCellLinks"),t.buildLinks=n=>{const r=n.getPoints().getNumberOfPoints(),i=n.getNumberOfCells(),s=new Uint32Array(r);if(n.isA("vtkPolyData")){for(let u=0;u<i;++u){const{cellPointIds:c}=n.getCellPoints(u);c.forEach(l=>{t.incrementLinkCount(l)})}t.allocateLinks(r),e.maxId=r-1;for(let u=0;u<i;++u){const{cellPointIds:c}=n.getCellPoints(u);c.forEach(l=>{t.insertCellReference(l,s[l]++,u)})}}else{for(let u=0;u<i;u++)a0.newInstance().getPointsIds().forEach(l=>{t.incrementLinkCount(l)});t.allocateLinks(r),e.maxId=r-1;for(let u=0;u<i;++u)a0.newInstance().getPointsIds().forEach(l=>{t.insertCellReference(l,s[l]++,u)})}},t.allocate=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.array=Array(n).fill().map(()=>({ncells:0,cells:null})),e.extend=r,e.maxId=-1},t.initialize=()=>{e.array=null},t.getLink=n=>e.array[n],t.getNcells=n=>e.array[n].ncells,t.getCells=n=>e.array[n].cells,t.insertNextPoint=n=>{e.array.push({ncells:n,cells:Array(n)}),++e.maxId},t.insertNextCellReference=(n,r)=>{e.array[n].cells[e.array[n].ncells++]=r},t.deletePoint=n=>{e.array[n].ncells=0,e.array[n].cells=null},t.removeCellReference=(n,r)=>{e.array[r].cells=e.array[r].cells.filter(i=>i!==n),e.array[r].ncells=e.array[r].cells.length},t.addCellReference=(n,r)=>{e.array[r].cells[e.array[r].ncells++]=n},t.resizeCellList=(n,r)=>{e.array[n].cells.length=r},t.squeeze=()=>{Ow(e,e.maxId+1)},t.reset=()=>{e.maxId=-1},t.deepCopy=n=>{e.array=[...n.array],e.extend=n.extend,e.maxId=n.maxId},t.incrementLinkCount=n=>{++e.array[n].ncells},t.allocateLinks=n=>{for(let r=0;r<n;++r)e.array[r].cells=new Array(e.array[r].ncells)},t.insertCellReference=(n,r,i)=>{e.array[n].cells[r]=i}}const Lw={array:null,maxId:0,extend:0};function Wh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Lw,n),B.obj(t,e),Dw(t,e)}const Bw=B.newInstance(Wh,"vtkCellLinks");var Vw={newInstance:Bw,extend:Wh};const Ue={VTK_EMPTY_CELL:0,VTK_VERTEX:1,VTK_POLY_VERTEX:2,VTK_LINE:3,VTK_POLY_LINE:4,VTK_TRIANGLE:5,VTK_TRIANGLE_STRIP:6,VTK_POLYGON:7,VTK_QUAD:9,VTK_QUADRATIC_EDGE:21,VTK_CONVEX_POINT_SET:41,VTK_POLYHEDRON:42},r2=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"];function Nw(t){return t<r2.length?r2[t]:"UnknownClass"}function _w(t){return r2.findIndex(t)}function Uw(t){return t<Ue.VTK_QUADRATIC_EDGE||t===Ue.VTK_CONVEX_POINT_SET||t===Ue.VTK_POLYHEDRON}function Gw(t){return t===Ue.VTK_TRIANGLE_STRIP||t===Ue.VTK_POLY_LINE||t===Ue.VTK_POLY_VERTEX}const bw={getClassNameFromTypeId:Nw,getTypeIdFromClassName:_w,isLinear:Uw,hasSubCells:Gw};function Fw(t,e){e.classHierarchy.push("vtkCellTypes"),t.allocate=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:512,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.size=n>0?n:1,e.extend=r>0?r:1,e.maxId=-1,e.typeArray=new Uint8Array(n),e.locationArray=new Uint32Array(n)},t.insertCell=(n,r,i)=>{e.typeArray[n]=r,e.locationArray[n]=i,n>e.maxId&&(e.maxId=n)},t.insertNextCell=(n,r)=>(t.insertCell(++e.maxId,n,r),e.maxId),t.setCellTypes=(n,r,i)=>{e.size=n,e.typeArray=r,e.locationArray=i,e.maxId=n-1},t.getCellLocation=n=>e.locationArray[n],t.deleteCell=n=>{e.typeArray[n]=Ue.VTK_EMPTY_CELL},t.getNumberOfTypes=()=>e.maxId+1,t.isType=n=>{const r=t.getNumberOfTypes();for(let i=0;i<r;++i)if(n===t.getCellType(i))return!0;return!1},t.insertNextType=n=>t.insertNextCell(n,-1),t.getCellType=n=>e.typeArray[n],t.reset=()=>{e.maxId=-1},t.deepCopy=n=>{t.allocate(n.getSize(),n.getExtend()),e.typeArray.set(n.getTypeArray()),e.locationArray.set(n.getLocationArray()),e.maxId=n.getMaxId()}}const zw={size:0,maxId:-1,extend:1e3};function jh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,zw,n),B.obj(t,e),B.get(t,e,["size","maxId","extend"]),B.getArray(t,e,["typeArray","locationArray"]),Fw(t,e)}const kw=B.newInstance(jh,"vtkCellTypes");var Hw={newInstance:kw,extend:jh,...bw};const Kh={NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2};var Xh={IntersectionState:Kh};const{IntersectionState:Xu}=Xh;function P0(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;const i={t:Number.MIN_VALUE,distance:0},s=[];let u;s[0]=n[0]-e[0],s[1]=n[1]-e[1],s[2]=n[2]-e[2];const c=s[0]*(t[0]-e[0])+s[1]*(t[1]-e[1])+s[2]*(t[2]-e[2]),l=pe(s,s);let g=1e-5*c;return l!==0&&(i.t=c/l),g<0&&(g=-g),-g<l&&l<g||l<=0||i.t<0?u=e:i.t>1?u=n:(u=s,s[0]=e[0]+i.t*s[0],s[1]=e[1]+i.t*s[1],s[2]=e[2]+i.t*s[2]),r&&(r[0]=u[0],r[1]=u[1],r[2]=u[2]),i.distance=It(u,t),i}function Yh(t,e,n,r,i,s){const u=[],c=[],l=[];i[0]=0,s[0]=0,Tt(e,t,u),Tt(r,n,c),Tt(n,t,l);const g=[pe(u,u),-pe(u,c),-pe(u,c),pe(c,c)],v=[];if(v[0]=pe(u,l),v[1]=-pe(c,l),_7(g,v,2)===0){let h=Number.MAX_VALUE;const y=[t,e,n,r],T=[n,n,t,t],E=[r,r,e,e];s[0],s[0],i[0],i[0],i[0],i[0],s[0],s[0];let S;for(let x=0;x<4;x++)S=P0(y[x],T[x],E[x]),S.distance<h&&(h=S.distance,S.t);return Xu.ON_LINE}return i[0]=v[0],s[0]=v[1],i[0]>=0&&i[0]<=1&&s[0]>=0&&s[0]<=1?Xu.YES_INTERSECTION:Xu.NO_INTERSECTION}const $w={distanceToLine:P0,intersection:Yh};function Aw(t,e){e.classHierarchy.push("vtkLine");function n(r){return r>=0&&r<=1}t.getCellDimension=()=>1,t.intersectWithLine=(r,i,s,u,c)=>{const l={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null};c[1]=0,c[2]=0;const g=[],v=[],h=[];e.points.getPoint(0,v),e.points.getPoint(1,h);const y=[],T=[],E=Yh(r,i,v,h,y,T);if(l.t=y[0],l.betweenPoints=n(l.t),c[0]=T[0],E===Xu.YES_INTERSECTION){for(let S=0;S<3;S++)u[S]=v[S]+c[0]*(h[S]-v[S]),g[S]=r[S]+l.t*(i[S]-r[S]);if(It(u,g)<=s*s)return l.intersect=1,l}else{let S;if(l.t<0)return S=P0(r,v,h,u),S.distance<=s*s&&(l.t=0,l.intersect=1,l.betweenPoints=!0),l;if(l.t>1)return S=P0(i,v,h,u),S.distance<=s*s&&(l.t=1,l.intersect=1,l.betweenPoints=!0),l;if(c[0]<0)return c[0]=0,S=P0(v,r,i,u),l.t=S.t,S.distance<=s*s&&(l.intersect=1),l;if(c[0]>1)return c[0]=1,S=P0(h,r,i,u),l.t=S.t,S.distance<=s*s&&(l.intersect=1),l}return l},t.evaluateLocation=(r,i,s)=>{const u=[],c=[];e.points.getPoint(0,u),e.points.getPoint(1,c);for(let l=0;l<3;l++)i[l]=u[l]+r[0]*(c[l]-u[l]);s[0]=1-r[0],s[1]=r[0]},t.evaluateOrientation=(r,i,s)=>e.orientations?(Uu(i,e.orientations[0],e.orientations[1],r[0]),s[0]=1-r[0],s[1]=r[0],!0):!1}const Ww={orientations:null};function qh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Ww,n),a0.extend(t,e,n),B.setGet(t,e,["orientations"]),Aw(t,e)}const jw=B.newInstance(qh,"vtkLine");var bt={newInstance:jw,extend:qh,...$w,...Xh};function Kw(t,e){e.classHierarchy.push("vtkPointSet"),e.points?e.points=Hn(e.points):e.points=va.newInstance(),t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.getBounds=()=>e.points.getBounds(),t.computeBounds=()=>{t.getBounds()};const n=t.shallowCopy;t.shallowCopy=function(s){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(s,u),e.points=va.newInstance(),e.points.shallowCopy(s.getPoints())};const r=t.getMTime;t.getMTime=()=>{const s=r();return Math.max(s,e.points?.getMTime()??s)};const i=t.initialize;t.initialize=()=>(e.points?.initialize(),i())}const Xw={};function Qh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Xw,n),i0.extend(t,e,n),B.setGet(t,e,["points"]),Kw(t,e)}const Yw=B.newInstance(Qh,"vtkPointSet");var qw={newInstance:Yw,extend:Qh};function Qw(t,e){e.classHierarchy.push("vtkPolyLine");const n=bt.newInstance();n.getPoints().setNumberOfPoints(2),t.getCellDimension=()=>1,t.intersectWithLine=(r,i,s,u,c,l,g)=>{const v={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null},h=t.getNumberOfPoints()-1;let y=Number.MAX_VALUE;for(let T=0;T<h;T++){const E=[0,0,0];n.getPoints().getData().set(e.points.getData().subarray(3*T,3*(T+2)));const S=n.intersectWithLine(s,u,c,l,g);if(S.intersect===1&&S.t<=v.t+c&&S.t>=r&&S.t<=i){v.intersect=1;const x=n.getParametricDistance(E);if(x<y||x===y&&S.t<v.t){v.subId=T,v.t=S.t,y=x;for(let m=0;m<3;m++)l[m],E[m]}}}return v},t.evaluateLocation=(r,i,s,u)=>(n.getPoints().getData().set(e.points.getData().subarray(3*r,3*(r+2))),n.evaluateLocation(i,s,u)),t.evaluateOrientation=(r,i,s,u)=>(e.orientations?n.setOrientations([e.orientations[r],e.orientations[r+1]]):n.setOrientations(null),n.evaluateOrientation(i,s,u)),t.getDistancesToFirstPoint=()=>{const r=e.distancesTime.getMTime();if(r<e.points.getMTime()||r<t.getMTime()){const i=t.getNumberOfPoints();if(e.distances?e.distances.length=i:e.distances=new Array(i),i>0){const s=new Array(3),u=new Array(3);let c=0;e.distances[0]=c,e.points.getPoint(0,s);for(let l=1;l<i;++l)e.points.getPoint(l,u),c+=e.distanceFunction(s,u),e.distances[l]=c,NS(s,u)}e.distancesTime.modified()}return e.distances},t.findPointIdAtDistanceFromFirstPoint=r=>{const i=t.getDistancesToFirstPoint();if(i.length<2)return-1;let s=0,u=i.length-1;if(r<i[s]||r>i[u]||i[u]===0)return-1;for(;u-s>1;){const c=Math.floor((s+u)/2);i[c]<=r?s=c:u=c}return s}}const Zw={orientations:null,distanceFunction:GS};function Zh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Zw,n),a0.extend(t,e,n),B.setGet(t,e,["orientations","distanceFunction"]),e.distancesTime={},B.obj(e.distancesTime,{mtime:0}),Qw(t,e)}const Jw=B.newInstance(Zh,"vtkPolyLine");var Pw={newInstance:Jw,extend:Zh};function Iw(t,e){e.classHierarchy.push("vtkPriorityQueue"),t.push=(n,r)=>{const i=e.elements.findIndex(s=>s.priority>n);e.elements.splice(i,0,{priority:n,element:r})},t.pop=()=>e.elements.length>0?e.elements.shift().element:null,t.deleteById=n=>{e.elements=e.elements.filter(r=>{let{element:i}=r;return i.id!==n})},t.length=()=>e.elements.length}const eM={elements:[]};function Jh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,eM,n),B.obj(t,e),Iw(t,e)}const tM=B.newInstance(Jh,"vtkPriorityQueue");var nM={newInstance:tM,extend:Jh};const Tu=1e-6,S8=11920929e-14,rM=1e-8,Xa={FAILURE:-1,OUTSIDE:0,INSIDE:1,INTERSECTION:2,ON_LINE:3};function C8(t,e,n,r,i){return(r[t]-n[t])*(i[e]-n[e])-(i[t]-n[t])*(r[e]-n[e])}function aM(t,e,n,r){if(t[0]<n[0]||t[0]>n[1]||t[1]<n[2]||t[1]>n[3]||t[2]<n[4]||t[2]>n[5])return Xa.OUTSIDE;if(pn(r)<=S8)return Xa.FAILURE;let i=rM*((n[1]-n[0])*(n[1]-n[0])+(n[3]-n[2])*(n[3]-n[2])+(n[5]-n[4])*(n[5]-n[4]));i*=i,i=i===0?S8:i;const s=[],u=[];for(let v=0;v<e.length;){if(s[0]=e[v++],s[1]=e[v++],s[2]=e[v++],It(t,s)<=i)return Xa.INSIDE;const{distance:h,t:y}=bt.distanceToLine(t,s,u);if(h<=i&&y>0&&y<1)return Xa.INSIDE}let c,l;Math.abs(r[0])>Math.abs(r[1])?Math.abs(r[0])>Math.abs(r[2])?(c=1,l=2):(c=0,l=1):Math.abs(r[1])>Math.abs(r[2])?(c=0,l=2):(c=0,l=1);let g=0;for(let v=0;v<e.length;)s[0]=e[v++],s[1]=e[v++],s[2]=e[v++],v<e.length?(u[0]=e[v],u[1]=e[v+1],u[2]=e[v+2]):(u[0]=e[0],u[1]=e[1],u[2]=e[2]),s[l]<=t[l]?u[l]>t[l]&&C8(c,l,s,u,t)>0&&++g:u[l]<=t[l]&&C8(c,l,s,u,t)<0&&--g;return g===0?Xa.OUTSIDE:Xa.INSIDE}function iM(t,e,n){const r=t.length,i=[];e.getPoint(t[0],i),n[0]=i[0],n[1]=i[0],n[2]=i[1],n[3]=i[1],n[4]=i[2],n[5]=i[2];for(let u=1;u<r;u++)e.getPoint(t[u],i),Ve.addPoint(n,...i);const s=Ve.getLengths(n);return pe(s,s)}function sM(t,e,n){n.length=3,n[0]=0,n[1]=0,n[2]=0;const r=[];let i=[],s=[];const u=[],c=[];e.getPoint(t[0],r),e.getPoint(t[1],i);for(let l=2;l<t.length;l++){e.getPoint(t[l],s),Tt(s,i,u),Tt(r,i,c);const g=[0,0,0];jt(u,c,g),ai(n,g,n),[i,s]=[s,i]}return pn(n)}function oM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,0];n[0]=0,n[1]=0,n[2]=0;const r=t.length,i=[];for(let s=0;s<r;s++)e.getPoint(t[s],i),n[0]+=i[0],n[1]+=i[1],n[2]+=i[2];return n[0]/=r,n[1]/=r,n[2]/=r,n}const uM={PolygonWithPointIntersectionState:Xa,pointInPolygon:aM,getBounds:iM,getNormal:sM,computeCentroid:oM};function cM(t,e){e.classHierarchy.push("vtkPolygon");function n(){const c=[0,0,0],l=[0,0,0];e.normal=[0,0,0];const g=[...e.firstPoint.point];let v=e.firstPoint;for(let h=0;h<e.pointCount;h++){Tt(v.point,g,c),Tt(v.next.point,g,l);const y=[0,0,0];jt(c,l,y),ai(e.normal,y,e.normal),v=v.next}return pn(e.normal)}function r(c){const l=[0,0,0],g=[0,0,0],v=[0,0,0],h=[0,0,0];Tt(c.point,c.previous.point,l),Tt(c.next.point,c.point,g),Tt(c.previous.point,c.next.point,v),jt(l,g,h);const y=pe(h,e.normal);if(y<=0)return-1;const T=hn(l)+hn(g)+hn(v);return T*T/y}function i(c){if(e.pointCount<=3)return!0;const l=c.previous,g=c.next,v=[0,0,0];Tt(g.point,l.point,v);const h=[0,0,0];if(jt(v,e.normal,h),pn(h),hn(h)===0)return!1;let y=pa.evaluate(h,l.point,g.next.point),T=y>Tu?1:y<-Tu?-1:0,E=T<0?1:0;for(let S=g.next.next;S.id!==l.id;S=S.next){const x=S.previous;y=pa.evaluate(h,l.point,S.point);const m=y>Tu?1:y<-Tu?-1:0;if(m!==T){if(E||(E=m<=0?1:0),bt.intersection(l.point,g.point,S.point,x.point,[0],[0])===Kh.YES_INTERSECTION)return!1;T=m}}return E===1}function s(c,l){e.pointCount-=1;const g=c.previous,v=c.next;e.tris=e.tris.concat(c.point),e.tris=e.tris.concat(v.point),e.tris=e.tris.concat(g.point),g.next=v,v.previous=g,l.deleteById(g.id),l.deleteById(v.id);const h=r(g);h>0&&l.push(h,g);const y=r(v);y>0&&l.push(y,v),c.id===e.firstPoint.id&&(e.firstPoint=v)}function u(){n();const c=nM.newInstance();let l=e.firstPoint;for(let g=0;g<e.pointCount;g++){const v=r(l);v>0&&c.push(v,l),l=l.next}for(;e.pointCount>2&&c.length()>0;)if(e.pointCount===c.length()){const g=c.pop();s(g,c)}else{const g=c.pop();i(g)&&s(g,c)}return e.pointCount<=2}t.triangulate=()=>e.firstPoint?u():null,t.setPoints=c=>{e.pointCount=c.length,e.firstPoint={id:0,point:c[0],next:null,previous:null};let l=e.firstPoint;for(let g=1;g<e.pointCount;g++)l.next={id:g,point:c[g],next:null,previous:l},l=l.next;e.firstPoint.previous=l,l.next=e.firstPoint},t.getPointArray=()=>e.tris}const fM={firstPoint:null,pointCount:0,tris:[]};function Ph(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,fM,n),B.obj(t,e),cM(t,e)}const lM=B.newInstance(Ph,"vtkPolygon");var gM={newInstance:lM,extend:Ph,...uM};function W2(t,e,n,r){const i=n[0]-e[0],s=n[1]-e[1],u=n[2]-e[2],c=t[0]-e[0],l=t[1]-e[1],g=t[2]-e[2];r[0]=s*g-u*l,r[1]=u*c-i*g,r[2]=i*l-s*c}function Gs(t,e,n,r){W2(t,e,n,r);const i=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);i!==0&&(r[0]/=i,r[1]/=i,r[2]/=i)}function Ih(t){t[0]=-1,t[1]=1,t[2]=0,t[3]=-1,t[4]=0,t[5]=1}function hM(t,e,n,r,i,s){let u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1e-6,c=!1;const l=[],g=[],v=[],h=[],y=[];Gs(t,e,n,h),Gs(r,i,s,y);const T=-pe(h,t),E=-pe(y,r),S=[pe(y,t)+E,pe(y,e)+E,pe(y,n)+E];if(S[0]*S[1]>u&&S[0]*S[2]>u)return{intersect:!1,coplanar:c,pt1:l,pt2:g,surfaceId:v};const x=[pe(h,r)+T,pe(h,i)+T,pe(h,s)+T];if(x[0]*x[1]>u&&x[0]*x[2]>u)return{intersect:!1,coplanar:c,pt1:l,pt2:g,surfaceId:v};if(Math.abs(h[0]-y[0])<1e-9&&Math.abs(h[1]-y[1])<1e-9&&Math.abs(h[2]-y[2])<1e-9&&Math.abs(T-E)<1e-9)return c=!0,{intersect:!1,coplanar:c,pt1:l,pt2:g,surfaceId:v};const m=[t,e,n],M=[r,i,s],R=pe(h,y),w=(T-E*R)/(R*R-1),D=(E-T*R)/(R*R-1),O=[w*h[0]+D*y[0],w*h[1]+D*y[1],w*h[2]+D*y[2]],_=jt(h,y,[]);pn(_);let N=0,F=0;const z=[],$=[];let Y=50,A=50;for(let G=0;G<3;G++){const W=G,q=(G+1)%3,X=pa.intersectWithLine(m[W],m[q],r,y);X.intersection&&X.t>0-u&&X.t<1+u&&(X.t<1+u&&X.t>1-u&&(Y=N),z[N++]=pe(X.x,_)-pe(O,_));const Q=pa.intersectWithLine(M[W],M[q],t,h);Q.intersection&&Q.t>0-u&&Q.t<1+u&&(Q.t<1+u&&Q.t>1-u&&(A=F),$[F++]=pe(Q.x,_)-pe(O,_))}if(N>2){N--;const G=z[2];z[2]=z[Y],z[Y]=G}if(F>2){F--;const G=$[2];$[2]=$[A],$[A]=G}if(N!==2||F!==2)return{intersect:!1,coplanar:c,pt1:l,pt2:g,surfaceId:v};if(Number.isNaN(z[0])||Number.isNaN(z[1])||Number.isNaN($[0])||Number.isNaN($[1]))return{intersect:!1,coplanar:c,pt1:l,pt2:g,surfaceId:v};if(z[0]>z[1]){const G=z[1];z[1]=z[0],z[0]=G}if($[0]>$[1]){const G=$[1];$[1]=$[0],$[0]=G}let K,ee;return z[1]<$[0]||$[1]<z[0]?{intersect:!1,coplanar:c,pt1:l,pt2:g,surfaceId:v}:(z[0]<$[0]?z[1]<$[1]?(v[0]=2,v[1]=1,K=$[0],ee=z[1]):(v[0]=2,v[1]=2,K=$[0],ee=$[1]):z[1]<$[1]?(v[0]=1,v[1]=1,K=z[0],ee=z[1]):(v[0]=1,v[1]=2,K=z[0],ee=$[1]),Wl(O,_,K,l),Wl(O,_,ee,g),{intersect:!0,coplanar:c,pt1:l,pt2:g,surfaceId:v})}const pM={computeNormalDirection:W2,computeNormal:Gs,interpolationDerivs:Ih,intersectWithTriangle:hM};function vM(t,e){e.classHierarchy.push("vtkTriangle"),t.getCellDimension=()=>2,t.intersectWithLine=(n,r,i,s,u)=>{const c={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1};u[2]=0;const l=[],g=i*i,v=[],h=[],y=[];e.points.getPoint(0,v),e.points.getPoint(1,h),e.points.getPoint(2,y);const T=[],E=[];if(Gs(v,h,y,T),T[0]!==0||T[1]!==0||T[2]!==0){const R=pa.intersectWithLine(n,r,v,T);if(c.betweenPoints=R.betweenPoints,c.t=R.t,s[0]=R.x[0],s[1]=R.x[1],s[2]=R.x[2],!R.intersection)return u[0]=0,u[1]=0,c.intersect=0,c;const w=t.evaluatePosition(s,l,u,E);if(w.evaluation>=0)return w.dist2<=g?(c.intersect=1,c):(c.intersect=w.evaluation,c)}const S=It(v,h),x=It(h,y),m=It(y,v);e.line||(e.line=bt.newInstance()),S>x&&S>m?(e.line.getPoints().setPoint(0,v),e.line.getPoints().setPoint(1,h)):x>m&&x>S?(e.line.getPoints().setPoint(0,h),e.line.getPoints().setPoint(1,y)):(e.line.getPoints().setPoint(0,y),e.line.getPoints().setPoint(1,v));const M=e.line.intersectWithLine(n,r,i,s,u);if(c.betweenPoints=M.betweenPoints,c.t=M.t,M.intersect){const R=[],w=[],D=[];for(let O=0;O<3;O++)R[O]=v[O]-y[O],w[O]=h[O]-y[O],D[O]=s[O]-y[O];return u[0]=pe(D,R)/m,u[1]=pe(D,w)/x,c.intersect=1,c}return u[0]=0,u[1]=0,c.intersect=0,c},t.evaluatePosition=(n,r,i,s)=>{const u={subId:0,dist2:0,evaluation:-1};let c,l;const g=[],v=[],h=[],y=[];let T;const E=[],S=[],x=[];let m=0,M=0;const R=[];let w,D,O,_=[];const N=[],F=[],z=[];u.subId=0,i[2]=0,e.points.getPoint(1,g),e.points.getPoint(2,v),e.points.getPoint(0,h),W2(g,v,h,y),pa.generalizedProjectPoint(n,g,y,z);let $=0;for(c=0;c<3;c++)y[c]<0?T=-y[c]:T=y[c],T>$&&($=T,M=c);for(l=0,c=0;c<3;c++)c!==M&&(R[l++]=c);for(c=0;c<2;c++)E[c]=z[R[c]]-h[R[c]],S[c]=g[R[c]]-h[R[c]],x[c]=v[R[c]]-h[R[c]];if(m=tt(S,x),m===0)return i[0]=0,i[1]=0,u.evaluation=-1,u;if(i[0]=tt(E,x)/m,i[1]=tt(S,E)/m,s[0]=1-(i[0]+i[1]),s[1]=i[0],s[2]=i[1],s[0]>=0&&s[0]<=1&&s[1]>=0&&s[1]<=1&&s[2]>=0&&s[2]<=1)r&&(u.dist2=It(z,n),r[0]=z[0],r[1]=z[1],r[2]=z[2]),u.evaluation=1;else{let Y;if(r){if(s[1]<0&&s[2]<0)for(w=It(n,h),D=bt.distanceToLine(n,g,h,Y,N),O=bt.distanceToLine(n,h,v,Y,F),w<D?(u.dist2=w,_=h):(u.dist2=D,_=N),O<u.dist2&&(u.dist2=O,_=F),c=0;c<3;c++)r[c]=_[c];else if(s[2]<0&&s[0]<0)for(w=It(n,g),D=bt.distanceToLine(n,g,h,Y,N),O=bt.distanceToLine(n,g,v,Y,F),w<D?(u.dist2=w,_=g):(u.dist2=D,_=N),O<u.dist2&&(u.dist2=O,_=F),c=0;c<3;c++)r[c]=_[c];else if(s[1]<0&&s[0]<0)for(w=It(n,v),D=bt.distanceToLine(n,v,h,Y,N),O=bt.distanceToLine(n,g,v,Y,F),w<D?(u.dist2=w,_=v):(u.dist2=D,_=N),O<u.dist2&&(u.dist2=O,_=F),c=0;c<3;c++)r[c]=_[c];else if(s[0]<0){const A=bt.distanceToLine(n,g,v,r);u.dist2=A.distance}else if(s[1]<0){const A=bt.distanceToLine(n,v,h,r);u.dist2=A.distance}else if(s[2]<0){const A=bt.distanceToLine(n,g,h,r);u.dist2=A.distance}}u.evaluation=0}return u},t.evaluateLocation=(n,r,i)=>{const s=[],u=[],c=[];e.points.getPoint(0,s),e.points.getPoint(1,u),e.points.getPoint(2,c);const l=1-n[0]-n[1];for(let g=0;g<3;g++)r[g]=s[g]*l+u[g]*n[0]+c[g]*n[1];i[0]=l,i[1]=n[0],i[2]=n[1]},t.getParametricDistance=n=>{let r,i=0;const s=[];s[0]=n[0],s[1]=n[1],s[2]=1-n[0]-n[1];for(let u=0;u<3;u++)s[u]<0?r=-s[u]:s[u]>1?r=s[u]-1:r=0,r>i&&(i=r);return i},t.derivatives=(n,r,i,s,u)=>{const c=e.points.getPoint(0),l=e.points.getPoint(1),g=e.points.getPoint(2),v=[],h=[],y=[],T=[];Gs(c,l,g,v),Tt(l,c,h),Tt(g,c,T),jt(v,h,y);const E=pn(h);if(E<=0||pn(y)<=0){for(let D=0;D<s;D++)for(let O=0;O<3;O++)u[D*s+O]=0;return}const S=[0,0],x=[E,0],m=[pe(T,h),pe(T,y)],M=new Array(6);Ih(M);const R=[x[0]-S[0],x[1]-S[1],m[0]-S[0],m[1]-S[1]],w=B.newTypedArray(Ut.Float64Array,4);L2(R,w,2);for(let D=0;D<s;D++){let O=0,_=0;for(let z=0;z<3;z++)O+=M[z]*i[s*z+D],_+=M[3+z]*i[s*z+D];const N=O*w[0]+_*w[1],F=O*w[2]+_*w[3];u[3*D]=N*h[0]+F*y[0],u[3*D+1]=N*h[1]+F*y[1],u[3*D+2]=N*h[2]+F*y[2]}},t.cellBoundary=(n,r,i)=>{const s=r[0]-r[1],u=.5*(1-r[0])-r[1],c=2*r[0]+r[1]-1;return s>=0&&u>=0?(i[0]=e.pointsIds[0],i[1]=e.pointsIds[1]):u<0&&c>=0?(i[0]=e.pointsIds[1],i[1]=e.pointsIds[2]):(i[0]=e.pointsIds[2],i[1]=e.pointsIds[0]),!(r[0]<0||r[1]<0||r[0]>1||r[1]>1||1-r[0]-r[1]<0)}}const yM={};function ep(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,yM,n),a0.extend(t,e,n),vM(t,e)}const dM=B.newInstance(ep,"vtkTriangle");var mc={newInstance:dM,extend:ep,...pM};function x8(){return{intersected:!1,subId:-1,x:[0,0,0],pCoords:[0,0,0],t:-1}}function TM(t,e){e.classHierarchy.push("vtkQuad"),t.getCellDimension=()=>2,t.getCellType=()=>Ue.VTK_QUAD,t.getNumberOfEdges=()=>4,t.getNumberOfFaces=()=>0,t.intersectWithLine=(n,r,i,s,u)=>{let c={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1},l;const g=e.points.getPoint(0,[]),v=e.points.getPoint(1,[]),h=e.points.getPoint(2,[]),y=e.points.getPoint(3,[]),T=It(g,h),E=It(v,y);if(T===E){let O,_=0,N=0;for(let F=0;F<4;F++)O=e.pointsIds[F],O>_&&(_=O,N=F);N===0||N===2?l=0:l=1}else T<E?l=0:l=1;let S=null;e.triangle?S=e.triangle.getPoints():(e.triangle=mc.newInstance(),S=va.newInstance(),S.setNumberOfPoints(3),e.triangle.initialize(S));let x;const m=x8();let M;const R=x8();let w,D;switch(l){case 0:S.setPoint(0,...g),S.setPoint(1,...v),S.setPoint(2,...h),x=e.triangle.intersectWithLine(n,r,i,m.x,m.pCoords),S.setPoint(0,...h),S.setPoint(1,...y),S.setPoint(2,...g),M=e.triangle.intersectWithLine(n,r,i,R.x,R.pCoords),w=x.intersect&&M.intersect?x.t<=M.t:x.intersect,D=x.intersect&&M.intersect?M.t<x.t:M.intersect,w?(c=x,s[0]=m.x[0],s[1]=m.x[1],s[2]=m.x[2],u[0]=m.pCoords[0]+m.pCoords[1],u[1]=m.pCoords[1],u[2]=m.pCoords[2]):D&&(c=M,s[0]=R.x[0],s[1]=R.x[1],s[2]=R.x[2],u[0]=1-(R.pCoords[0]+R.pCoords[1]),u[1]=1-R.pCoords[1],u[2]=R.pCoords[2]);break;case 1:S.setPoint(0,...g),S.setPoint(1,...v),S.setPoint(2,...y),x=e.triangle.intersectWithLine(n,r,i,m.x,m.pCoords),S.setPoint(0,...h),S.setPoint(1,...y),S.setPoint(2,...v),M=e.triangle.intersectWithLine(n,r,i,R.x,R.pCoords),w=x.intersect&&M.intersect?x.t<=M.t:x.intersect,D=x.intersect&&M.intersect?M.t<x.t:M.intersect,w?(c=x,s[0]=m.x[0],s[1]=m.x[1],s[2]=m.x[2],u[0]=m.pCoords[0],u[1]=m.pCoords[1],u[2]=m.pCoords[2]):D&&(c=M,s[0]=R.x[0],s[1]=R.x[1],s[2]=R.x[2],u[0]=1-R.pCoords[0],u[1]=1-R.pCoords[1],u[2]=R.pCoords[2]);break}return c},t.interpolationFunctions=(n,r)=>{const i=1-n[0],s=1-n[1];r[0]=i*s,r[1]=n[0]*s,r[2]=n[0]*n[1],r[3]=i*n[1]},t.evaluateLocation=(n,r,i)=>{const s=[];t.interpolationFunctions(n,i),r[0]=0,r[1]=0,r[2]=0;for(let u=0;u<4;u++){e.points.getPoint(u,s);for(let c=0;c<3;c++)r[c]+=s[c]*i[u]}}}const SM={};function tp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,SM,n),a0.extend(t,e,n),TM(t,e)}const CM=B.newInstance(tp,"vtkQuad");var xM={newInstance:CM,extend:tp};const{vtkErrorMacro:np}=B;function E8(t){return()=>np(`vtkTriangleStrip.${t} - NOT IMPLEMENTED`)}function EM(t,e){if(!Array.isArray(t)||t.length<3){np("decomposeStrip - Invalid points array");return}let n=t[0],r=t[1];for(let i=0;i<t.length-2;i++){const s=t[i+2];i%2?e.insertNextCell([r,n,s]):e.insertNextCell([n,r,s]),n=r,r=s}}const mM={decomposeStrip:EM};function RM(t,e){e.classHierarchy.push("vtkTriangleStrip");const n=t.initialize;t.initialize=(r,i)=>{e.triangle.initialize(r,i),n(r,i)},t.getCellType=()=>Ue.VTK_TRIANGLE_STRIP,t.getCellDimension=()=>2,t.getNumberOfEdges=()=>e.pointsIds.length,t.getNumberOfFaces=()=>0,t.evaluatePosition=(r,i,s,u,c)=>{const l=[0,0,0];let g=Number.MAX_VALUE,v=0;const h=[],y=[],T=[];s[2]=0,y[0]=0,y[1]=0,y[2]=0;const E=e.triangle.getPoints();E.setNumberOfPoints(3);const x=e.triangle.getPointsIds().length;for(let m=0;m<x;m++)c[m]=0;for(let m=0;m<x-2;m++){const M=[];E.getPoint(m,M);const R=[];E.getPoint(m+1,R);const w=[];E.getPoint(m+2,w),E.setData(Float32Array.from([...M,...R,...w]),3);const D=e.triangle.evaluatePosition(r,T,l,h),O=D.dist2;D.evaluation>=0&&(O<g||O===g&&v===0)&&(v=D,i&&(i[0]=T[0],i[1]=T[1],i[2]=T[2]),s[0]=l[0],s[1]=l[1],g=O,y[0]=h[0],y[1]=h[1],y[2]=h[2])}return u[0]=g,c[0]=y[0],c[1]=y[1],c[2]=y[2],v},t.evaluateLocation=(r,i,s,u)=>{const c=[[0,1,2],[1,0,2]],l=r%2,g=e.pointsIds.length;for(let E=0;E<g;E++)u[E]=0;const v=1-i[0]-i[1];u[r]=v,u[r+1]=i[0],u[r+2]=i[1];const h=[];e.points.getPoint(r+c[l][0],h);const y=[];e.points.getPoint(r+c[l][1],y);const T=[];e.points.getPoint(r+c[l][2],T);for(let E=0;E<3;E++)s[E]=h[E]*u[r]+y[E]*u[r+1]+T[E]*u[r+2]},t.cellBoundary=(r,i,s)=>{const u=[[0,1,2],[1,0,2]],c=r%2,l=e.triangle.getPointsIds();return l[0]=e.pointsIds[u[c][0]],l[1]=e.pointsIds[u[c][1]],l[2]=e.pointsIds[u[c][2]],e.triangle.cellBoundary(0,i,s)},t.getEdge=r=>{let i,s;const u=e.pointsIds.length;return r===0?(i=0,s=1):r===u-1?(i=r-1,s=r):(i=r-1,s=r+1),e.line.getPointsIds()[0]=e.pointsIds[i],e.line.getPointsIds()[1]=e.pointsIds[s],e.line.getPoints().setPoint(0,e.points.getPoint(i)),e.line.getPoints().setPoint(1,e.points.getPoint(s)),e.line},t.intersectWithLine=(r,i,s,u,c)=>{const l=e.pointsIds.length-2,g=e.triangle.getPoints();g.setNumberOfPoints(3);for(let v=0;v<l;v++){const h=[];e.points.getPoint(e.pointsIds[v],h);const y=[];e.points.getPoint(e.pointsIds[v+1],y);const T=[];e.points.getPoint(e.pointsIds[v+2],T),g.setData(Float32Array.from([...h,...y,...T]),3);const E=e.triangle.intersectWithLine(r,i,s,u,c);if(E.intersect)return E}return!1},t.triangulate=()=>{const r=e.points.getNumberOfPoints()-2;e.tris=new Array(3*r);const i=[[0,1,2],[1,0,2]];for(let s=0;s<r;s++){const u=s%2;for(let c=0;c<3;c++)e.tris[s*3+c]=s+i[u][c]}return!0},t.getPointArray=()=>e.tris,t.derivatives=(r,i,s,u,c)=>{const l=[];e.points.getPoint(r,l);const g=[];e.points.getPoint(r+1,g);const v=[];e.points.getPoint(r+2,v);const h=e.triangle.getPoints();h.setPoint(0,...l),h.setPoint(1,...g),h.setPoint(2,...v),e.triangle.derivatives(0,i,s,u,c)},t.getParametricCenter=r=>(r[0]=.333333,r[1]=.333333,r[2]=0,Math.floor((e.pointsIds.length-2)/2)),t.contour=(r,i,s,u,c,l,g,v,h,y,T)=>E8("contour")(),t.clip=(r,i,s,u,c,l,g,v,h,y)=>E8("clip")()}const wM={line:null,triangle:null,tris:null};function rp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,wM,n),a0.extend(t,e,n),e.line||(e.line=bt.newInstance()),e.triangle||(e.triangle=mc.newInstance()),RM(t,e)}const MM=B.newInstance(rp,"vtkTriangleStrip");var OM={newInstance:MM,extend:rp,...mM};const K0=["verts","lines","polys","strips"],{vtkWarningMacro:m8}=B,DM={[Ue.VTK_LINE]:bt,[Ue.VTK_QUAD]:xM,[Ue.VTK_POLY_LINE]:bt,[Ue.VTK_TRIANGLE]:mc,[Ue.VTK_TRIANGLE_STRIP]:OM,[Ue.VTK_POLY_LINE]:Pw,[Ue.VTK_POLYGON]:gM};function LM(t,e){e.classHierarchy.push("vtkPolyData");function n(u){return u.replace(/(?:^\w|[A-Z]|\b\w)/g,c=>c.toUpperCase()).replace(/\s+/g,"")}K0.forEach(u=>{t[`getNumberOf${n(u)}`]=()=>e[u].getNumberOfCells(),e[u]?e[u]=Hn(e[u]):e[u]=T8.newInstance()}),t.getNumberOfCells=()=>K0.reduce((u,c)=>u+e[c].getNumberOfCells(),0);const r=t.shallowCopy;t.shallowCopy=function(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r(u,c),K0.forEach(l=>{e[l]=T8.newInstance(),e[l].shallowCopy(u.getReferenceByName(l))})};const i=t.getMTime;t.getMTime=()=>K0.reduce((u,c)=>Math.max(u,e[c]?.getMTime()??u),i());const s=t.initialize;t.initialize=()=>(K0.forEach(u=>e[u]?.initialize()),s()),t.buildCells=()=>{const u=t.getNumberOfVerts(),c=t.getNumberOfLines(),l=t.getNumberOfPolys(),g=t.getNumberOfStrips(),v=u+c+l+g,h=new Uint8Array(v);let y=h;const T=new Uint32Array(v);let E=T;if(u){let S=0;e.verts.getCellSizes().forEach((x,m)=>{E[m]=S,y[m]=x>1?Ue.VTK_POLY_VERTEX:Ue.VTK_VERTEX,S+=x+1}),E=E.subarray(u),y=y.subarray(u)}if(c){let S=0;e.lines.getCellSizes().forEach((x,m)=>{E[m]=S,y[m]=x>2?Ue.VTK_POLY_LINE:Ue.VTK_LINE,x===1&&m8("Building VTK_LINE ",m," with only one point, but VTK_LINE needs at least two points. Check the input."),S+=x+1}),E=E.subarray(c),y=y.subarray(c)}if(l){let S=0;e.polys.getCellSizes().forEach((x,m)=>{switch(E[m]=S,x){case 3:y[m]=Ue.VTK_TRIANGLE;break;case 4:y[m]=Ue.VTK_QUAD;break;default:y[m]=Ue.VTK_POLYGON;break}x<3&&m8("Building VTK_TRIANGLE ",m," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),S+=x+1}),E+=E.subarray(l),y+=y.subarray(l)}if(g){let S=0;y.fill(Ue.VTK_TRIANGLE_STRIP,0,g),e.strips.getCellSizes().forEach((x,m)=>{E[m]=S,S+=x+1})}e.cells=Hw.newInstance(),e.cells.setCellTypes(v,h,T)},t.buildLinks=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;e.cells===void 0&&t.buildCells(),e.links=Vw.newInstance(),u>0?e.links.allocate(u):e.links.allocate(t.getPoints().getNumberOfPoints()),e.links.buildLinks(t)},t.getCellType=u=>e.cells.getCellType(u),t.getCellPoints=u=>{const c=t.getCellType(u);let l=null;switch(c){case Ue.VTK_VERTEX:case Ue.VTK_POLY_VERTEX:l=e.verts;break;case Ue.VTK_LINE:case Ue.VTK_POLY_LINE:l=e.lines;break;case Ue.VTK_TRIANGLE:case Ue.VTK_QUAD:case Ue.VTK_POLYGON:l=e.polys;break;case Ue.VTK_TRIANGLE_STRIP:l=e.strips;break;default:return l=null,{type:0,cellPointIds:null}}const g=e.cells.getCellLocation(u),v=l.getCell(g);return{cellType:c,cellPointIds:v}},t.getPointCells=u=>e.links.getCells(u),t.getCellEdgeNeighbors=(u,c,l)=>{const g=e.links.getLink(c),v=e.links.getLink(l);return g.cells.filter(h=>h!==u&&v.cells.indexOf(h)!==-1)},t.getCell=function(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const l=t.getCellPoints(u),g=c||DM[l.cellType].newInstance();return g.initialize(t.getPoints(),l.cellPointIds),g},t.getMaxCellSize=()=>K0.reduce((u,c)=>Math.max(u,e[c]?.getMaxCellSize?.()??0),0)}const BM={};function ap(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,BM,n),qw.extend(t,e,n),B.get(t,e,["cells","links"]),B.setGet(t,e,["verts","lines","polys","strips"]),LM(t,e)}const VM=B.newInstance(ap,"vtkPolyData");var zt={newInstance:VM,extend:ap};function NM(t,e){e.classHierarchy.push("vtkTexture"),t.imageLoaded=()=>{e.image.removeEventListener("load",t.imageLoaded),e.imageLoaded=!0,t.modified()},t.setJsImageData=n=>{e.jsImageData!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.canvas=null,e.imageBitmap=null),e.jsImageData=n,e.imageLoaded=!0,t.modified())},t.setImageBitmap=n=>{e.imageBitmap!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.canvas=null,e.jsImageData=null),e.imageBitmap=n,e.imageLoaded=!0,t.modified())},t.setCanvas=n=>{e.canvas!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.imageBitmap=null,e.jsImageData=null),e.canvas=n,t.modified())},t.setImage=n=>{e.image!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.canvas=null,e.jsImageData=null,e.imageBitmap=null),e.image=n,e.imageLoaded=!1,n.complete?t.imageLoaded():n.addEventListener("load",t.imageLoaded),t.modified())},t.getDimensionality=()=>{let n=0,r=0,i=1;if(t.getInputData()){const u=t.getInputData();n=u.getDimensions()[0],r=u.getDimensions()[1],i=u.getDimensions()[2]}return e.jsImageData&&(n=e.jsImageData.width,r=e.jsImageData.height),e.canvas&&(n=e.canvas.width,r=e.canvas.height),e.image&&(n=e.image.width,r=e.image.height),e.imageBitmap&&(n=e.imageBitmap.width,r=e.imageBitmap.height),(n>1)+(r>1)+(i>1)},t.getInputAsJsImageData=()=>{if(!e.imageLoaded||t.getInputData())return null;if(e.jsImageData)return e.jsImageData;if(e.imageBitmap)return e.imageBitmap;if(e.canvas)return e.canvas.getContext("2d").getImageData(0,0,e.canvas.width,e.canvas.height);if(e.image){const n=e.image.width,r=e.image.height,s=new OffscreenCanvas(n,r).getContext("2d");return s.translate(0,r),s.scale(1,-1),s.drawImage(e.image,0,0,n,r),s.getImageData(0,0,n,r)}return null}}const _M=(t,e,n)=>{const i=t.createShaderModule({code:`
    @group(0) @binding(0) var inputTexture: texture_2d<f32>;
    @group(0) @binding(1) var outputTexture: texture_storage_2d<rgba8unorm, write>;

    @compute @workgroup_size(8, 8)
    fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
      let texelCoord = vec2<i32>(global_id.xy);
      let outputSize = textureDimensions(outputTexture);

      if (texelCoord.x >= i32(outputSize.x) || texelCoord.y >= i32(outputSize.y)) {
        return;
      }

      let inputSize = textureDimensions(inputTexture);
      let scale = vec2<f32>(inputSize) / vec2<f32>(outputSize);

      // Compute the floating-point source coordinate
      let srcCoord = (vec2<f32>(texelCoord) + 0.5) * scale - 0.5;

      // Get integer coordinates for the four surrounding texels
      let x0 = i32(floor(srcCoord.x));
      let x1 = min(x0 + 1, i32(inputSize.x) - 1);
      let y0 = i32(floor(srcCoord.y));
      let y1 = min(y0 + 1, i32(inputSize.y) - 1);

      // Compute the weights
      let wx = srcCoord.x - f32(x0);
      let wy = srcCoord.y - f32(y0);

      // Fetch the four texels
      let c00 = textureLoad(inputTexture, vec2<i32>(x0, y0), 0);
      let c10 = textureLoad(inputTexture, vec2<i32>(x1, y0), 0);
      let c01 = textureLoad(inputTexture, vec2<i32>(x0, y1), 0);
      let c11 = textureLoad(inputTexture, vec2<i32>(x1, y1), 0);

      // Bilinear interpolation
      let color = mix(
        mix(c00, c10, wx),
        mix(c01, c11, wx),
        wy
      );

      textureStore(outputTexture, texelCoord, color);
    }
  `}),s=t.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"float"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rgba8unorm",access:"write-only"}},{binding:2,visibility:GPUShaderStage.COMPUTE,sampler:{type:"filtering"}}]}),u=t.createPipelineLayout({bindGroupLayouts:[s]}),c=t.createComputePipeline({label:"ComputeMipmapPipeline",layout:u,compute:{module:i,entryPoint:"main"}}),l=t.createSampler({magFilter:"linear",minFilter:"linear"});for(let g=1;g<n;g++){const v=e.createView({baseMipLevel:g-1,mipLevelCount:1}),h=e.createView({baseMipLevel:g,mipLevelCount:1}),y=t.createBindGroup({layout:c.getBindGroupLayout(0),entries:[{binding:0,resource:v},{binding:1,resource:h},{binding:2,resource:l}]}),T=t.createCommandEncoder({label:"MipmapGenerateCommandEncoder"}),E=T.beginComputePass();E.setPipeline(c),E.setBindGroup(0,y);const S=Math.max(1,e.width>>g),x=Math.max(1,e.height>>g),m=Math.ceil(S/8),M=Math.ceil(x/8);E.dispatchWorkgroups(m,M),E.end(),t.queue.submit([T.finish()])}},UM={image:null,canvas:null,jsImageData:null,imageBitmap:null,imageLoaded:!1,repeat:!1,interpolate:!1,edgeClamp:!1,mipLevel:0,resizable:!1};function ip(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,UM,n),B.obj(t,e),B.algo(t,e,6,0),B.get(t,e,["canvas","image","jsImageData","imageBitmap","imageLoaded","resizable"]),B.setGet(t,e,["repeat","edgeClamp","interpolate","mipLevel"]),NM(t,e)}const GM=B.newInstance(ip,"vtkTexture"),bM={generateMipmaps:_M};var bs={newInstance:GM,extend:ip,...bM};const FM=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],R8=[[8,7,11,3],[9,1,10,5],[4,9,0,8],[2,11,6,10],[0,3,2,1],[4,5,6,7]],Su=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[3,7],[2,6]],w8=[0,1,0,1,0,1,0,1,2,2,2,2],et=[[1,2],[1,2],[0,2],[0,2],[0,1],[0,1]],ve=new Float64Array(3),Cu=new Float64Array(3),ze=new Float64Array(3),Ja=new Float64Array(3),$a=new Float64Array(3),xu=new Float64Array(3),Tl=new Float64Array(16);function Sl(t,e){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor,t.font=`${e.fontStyle} ${e.fontSize}px ${e.fontFamily}`}function sp(t){const e=[],n=[];for(let r=0;r<3;r++){const i=R2().domain([t[r*2],t[r*2+1]]);e[r]=i.ticks(5);const s=i.tickFormat(5);n[r]=e[r].map(s)}return{ticks:e,tickStrings:n}}function zM(t,e){e.classHierarchy.push("vtkCubeAxesActorHelper"),t.setRenderable=n=>{e.renderable!==n&&(e.renderable=n,e.tmActor.addTexture(e.renderable.getTmTexture()),e.tmActor.setProperty(n.getProperty()),e.tmActor.setParentProp(n),t.modified())},t.createPolyDataForOneLabel=(n,r,i,s,u,c,l)=>{const g=e.renderable.get_tmAtlas().get(n);if(!g)return;const v=e.renderable.getTextPolyData().getPoints().getData(),h=e.lastSize;ve[0]=v[r*3],ve[1]=v[r*3+1],ve[2]=v[r*3+2],Ae(ze,ve,i),ze[0]+=.1,Ae(Cu,ze,s),ga($a,Cu,ve),ze[0]-=.1,ze[1]+=.1,Ae(Cu,ze,s),ga(xu,Cu,ve);for(let E=0;E<3;E++)$a[E]/=.5*.1*h[0],xu[E]/=.5*.1*h[1];let y=l.ptIdx,T=l.cellIdx;ve[0]=v[r*3],ve[1]=v[r*3+1],ve[2]=v[r*3+2],u[0]<-.5?oa(ze,$a,u[0]*c-g.width):u[0]>.5?oa(ze,$a,u[0]*c):oa(ze,$a,u[0]*c-g.width/2),ys(ve,ve,ze),oa(ze,xu,u[1]*c-g.height/2),ys(ve,ve,ze),l.points[y*3]=ve[0],l.points[y*3+1]=ve[1],l.points[y*3+2]=ve[2],l.tcoords[y*2]=g.tcoords[0],l.tcoords[y*2+1]=g.tcoords[1],y++,oa(ze,$a,g.width),ys(ve,ve,ze),l.points[y*3]=ve[0],l.points[y*3+1]=ve[1],l.points[y*3+2]=ve[2],l.tcoords[y*2]=g.tcoords[2],l.tcoords[y*2+1]=g.tcoords[3],y++,oa(ze,xu,g.height),ys(ve,ve,ze),l.points[y*3]=ve[0],l.points[y*3+1]=ve[1],l.points[y*3+2]=ve[2],l.tcoords[y*2]=g.tcoords[4],l.tcoords[y*2+1]=g.tcoords[5],y++,oa(ze,$a,g.width),ga(ve,ve,ze),l.points[y*3]=ve[0],l.points[y*3+1]=ve[1],l.points[y*3+2]=ve[2],l.tcoords[y*2]=g.tcoords[6],l.tcoords[y*2+1]=g.tcoords[7],y++,l.polys[T*4]=3,l.polys[T*4+1]=y-4,l.polys[T*4+2]=y-3,l.polys[T*4+3]=y-2,T++,l.polys[T*4]=3,l.polys[T*4+1]=y-4,l.polys[T*4+2]=y-2,l.polys[T*4+3]=y-1,l.ptIdx+=4,l.cellIdx+=2},t.updateTexturePolyData=()=>{const n=e.camera.getCompositeProjectionMatrix(e.lastAspectRatio,-1,1);Qe(n,n);const r=e.renderable.getTextValues().length,i=r*4,s=r*2,u=new Float64Array(i*3),c=new Uint16Array(s*4),l=new Float32Array(i*2);tn(Tl,n);const g={ptIdx:0,cellIdx:0,polys:c,points:u,tcoords:l};let v=0,h=0,y=0;const T=e.renderable.getTextPolyData().getPoints().getData(),E=e.renderable.getTextValues();for(;v<T.length/3;){ve[0]=T[v*3],ve[1]=T[v*3+1],ve[2]=T[v*3+2],Ae(ze,ve,n),ve[0]=T[v*3+3],ve[1]=T[v*3+4],ve[2]=T[v*3+5],Ae(Ja,ve,n),ga(ze,ze,Ja);const x=[ze[0],ze[1]];w7(x),t.createPolyDataForOneLabel(E[h],v,n,Tl,x,e.renderable.getAxisTitlePixelOffset(),g),v+=2,h++;for(let m=0;m<e.renderable.getTickCounts()[y];m++)t.createPolyDataForOneLabel(E[h],v,n,Tl,x,e.renderable.getTickLabelPixelOffset(),g),v++,h++;y++}const S=Fe.newInstance({numberOfComponents:2,values:l,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(S),e.tmPolyData.getPoints().setData(u,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(c,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updateAPISpecificData=(n,r,i)=>{(e.lastSize[0]!==n[0]||e.lastSize[1]!==n[1])&&(e.lastSize[0]=n[0],e.lastSize[1]=n[1],e.lastAspectRatio=n[0]/n[1],e.forceUpdate=!0),e.camera=r,t.updateTexturePolyData()}}const kM=B.newInstance(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},n),B.obj(t,e),e.tmPolyData=zt.newInstance(),e.tmMapper=wr.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmActor=Rr.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),B.setGet(t,e,["renderable"]),B.get(t,e,["lastSize","lastAspectRatio","axisTextStyle","tickTextStyle","tmActor","ticks"]),e.forceUpdate=!1,e.lastRedrawTime={},B.obj(e.lastRedrawTime,{mtime:0}),e.lastRebuildTime={},B.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.lastTickBounds=[],zM(t,e)},"vtkCubeAxesActorHelper");function HM(t,e){e.classHierarchy.push("vtkCubeAxesActor"),t.setCamera=r=>{e.camera!==r&&(e.cameraModifiedSub&&(e.cameraModifiedSub.unsubscribe(),e.cameraModifiedSub=null),e.camera=r,r&&(e.cameraModifiedSub=r.onModified(t.update)),t.update(),t.modified())},t.computeFacesToDraw=()=>{const r=e.camera.getViewMatrix();Qe(r,r);let i=!1;const s=Ve.getDiagonalLength(e.dataBounds),u=Math.sin(e.faceVisibilityAngle*Math.PI/180);for(let c=0;c<6;c++){let l=!1;const g=Math.floor(c/2),v=(g+1)%3,h=(g+2)%3;e.dataBounds[v*2]!==e.dataBounds[v*2+1]&&e.dataBounds[h*2]!==e.dataBounds[h*2+1]&&(ve[g]=e.dataBounds[c]-.1*s*FM[c][g],ve[v]=.5*(e.dataBounds[v*2]+e.dataBounds[v*2+1]),ve[h]=.5*(e.dataBounds[h*2]+e.dataBounds[h*2+1]),Ae(ze,ve,r),ve[g]=e.dataBounds[c],Ae(Ja,ve,r),ga(ze,Ja,ze),Bs(ze,ze),l=ze[2]>u,e.camera.getParallelProjection()||(Bs(Ja,Ja),l=D6(Ja,ze)>u)),l!==e.lastFacesToDraw[c]&&(e.lastFacesToDraw[c]=l,i=!0)}return i},t.updatePolyData=(r,i,s)=>{let u=0,c=0;u+=8;let l=0;for(let T=0;T<12;T++)i[T]>0&&l++;if(c+=l,e.gridLines)for(let T=0;T<6;T++)r[T]&&(u+=s[et[T][0]].length*2+s[et[T][1]].length*2,c+=s[et[T][0]].length+s[et[T][1]].length);const g=new Float64Array(u*3),v=new Uint32Array(c*3);let h=0,y=0;for(let T=0;T<2;T++)for(let E=0;E<2;E++)for(let S=0;S<2;S++)g[h*3]=e.dataBounds[S],g[h*3+1]=e.dataBounds[2+E],g[h*3+2]=e.dataBounds[4+T],h++;for(let T=0;T<12;T++)i[T]>0&&(v[y*3]=2,v[y*3+1]=Su[T][0],v[y*3+2]=Su[T][1],y++);if(e.gridLines){for(let T=0;T<6;T++)if(r[T]){const E=Math.floor(T/2);let S=s[et[T][0]];for(let x=0;x<S.length;x++)g[h*3+E]=e.dataBounds[T],g[h*3+et[T][0]]=S[x],g[h*3+et[T][1]]=e.dataBounds[et[T][1]*2],h++,g[h*3+E]=e.dataBounds[T],g[h*3+et[T][0]]=S[x],g[h*3+et[T][1]]=e.dataBounds[et[T][1]*2+1],h++,v[y*3]=2,v[y*3+1]=h-2,v[y*3+2]=h-1,y++;S=s[et[T][1]];for(let x=0;x<S.length;x++)g[h*3+E]=e.dataBounds[T],g[h*3+et[T][1]]=S[x],g[h*3+et[T][0]]=e.dataBounds[et[T][0]*2],h++,g[h*3+E]=e.dataBounds[T],g[h*3+et[T][1]]=S[x],g[h*3+et[T][0]]=e.dataBounds[et[T][0]*2+1],h++,v[y*3]=2,v[y*3+1]=h-2,v[y*3+2]=h-1,y++}}e.polyData.getPoints().setData(g,3),e.polyData.getPoints().modified(),e.polyData.getLines().setData(v,1),e.polyData.getLines().modified(),e.polyData.modified()},t.updateTextData=(r,i,s,u)=>{let c=0;for(let T=0;T<12;T++)i[T]===1&&(c+=2,c+=s[w8[T]].length);const l=e.polyData.getPoints().getData(),g=new Float64Array(c*3);let v=0,h=0,y=0;for(let T=0;T<6;T++)if(r[T])for(let E=0;E<4;E++){const S=R8[T][E];if(i[S]===1){const x=w8[S],m=Su[S][0]*3,M=Su[S][1]*3;g[v*3]=.5*(l[m]+l[M]),g[v*3+1]=.5*(l[m+1]+l[M+1]),g[v*3+2]=.5*(l[m+2]+l[M+2]),v++;const R=Math.floor(T/2);g[v*3+R]=e.dataBounds[T],g[v*3+et[T][0]]=.5*(e.dataBounds[et[T][0]*2]+e.dataBounds[et[T][0]*2+1]),g[v*3+et[T][1]]=.5*(e.dataBounds[et[T][1]*2]+e.dataBounds[et[T][1]*2+1]),v++,e.textValues[h]=e.axisLabels[x],h++;const w=(x+1)%3,D=(x+2)%3,O=s[x],_=u[x];e.tickCounts[y]=O.length;for(let N=0;N<O.length;N++)g[v*3+x]=O[N],g[v*3+w]=l[m+w],g[v*3+D]=l[m+D],v++,e.textValues[h]=_[N],h++;y++}}e.textPolyData.getPoints().setData(g,3),e.textPolyData.modified()},t.update=()=>{if(!e.camera)return;const r=t.computeFacesToDraw(),i=e.lastFacesToDraw;let s=!1;for(let u=0;u<6;u++)e.dataBounds[u]!==e.lastTickBounds[u]&&(s=!0,e.lastTickBounds[u]=e.dataBounds[u]);if(r||s||e.forceUpdate){const u=new Array(12).fill(0);for(let l=0;l<6;l++)if(i[l])for(let g=0;g<4;g++)u[R8[l][g]]++;const c=e.generateTicks(e.dataBounds);t.updatePolyData(i,u,c.ticks),t.updateTextData(i,u,c.ticks,c.tickStrings),(s||e.forceUpdate)&&t.updateTextureAtlas(c.tickStrings)}e.forceUpdate=!1},t.updateTextureAtlas=r=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e._tmAtlas.clear();let i=0,s=1;for(let u=0;u<3;u++){if(!e._tmAtlas.has(e.axisLabels[u])){Sl(e.tmContext,e.axisTextStyle);const c=e.tmContext.measureText(e.axisLabels[u]),l={height:c.actualBoundingBoxAscent+2,startingHeight:s,width:c.width+2,textStyle:e.axisTextStyle};e._tmAtlas.set(e.axisLabels[u],l),s+=l.height,i<l.width&&(i=l.width)}Sl(e.tmContext,e.tickTextStyle);for(let c=0;c<r[u].length;c++)if(!e._tmAtlas.has(r[u][c])){const l=e.tmContext.measureText(r[u][c]),g={height:l.actualBoundingBoxAscent+2,startingHeight:s,width:l.width+2,textStyle:e.tickTextStyle};e._tmAtlas.set(r[u][c],g),s+=g.height,i<g.width&&(i=g.width)}}i=Bn(i),s=Bn(s),e._tmAtlas.forEach(u=>{u.tcoords=[0,(s-u.startingHeight-u.height)/s,u.width/i,(s-u.startingHeight-u.height)/s,u.width/i,(s-u.startingHeight)/s,0,(s-u.startingHeight)/s]}),e.tmCanvas.width=i,e.tmCanvas.height=s,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,i,s),e._tmAtlas.forEach((u,c)=>{Sl(e.tmContext,u.textStyle),e.tmContext.fillText(c,1,u.startingHeight+u.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified()},t.onModified(()=>{e.forceUpdate=!0,t.update()}),t.setTickTextStyle=r=>{e.tickTextStyle={...e.tickTextStyle,...r},t.modified()},t.setAxisTextStyle=r=>{e.axisTextStyle={...e.axisTextStyle,...r},t.modified()},t.get_tmAtlas=()=>e._tmAtlas,t.getBounds=()=>(t.update(),Ve.setBounds(e.bounds,e.gridActor.getBounds()),Ve.scaleAboutCenter(e.bounds,e.boundsScaleFactor,e.boundsScaleFactor,e.boundsScaleFactor),e.bounds);const n=B.chain(t.setProperty,e.gridActor.setProperty);t.setProperty=r=>n(r)[0]}function $M(t,e,n){return{boundsScaleFactor:1.3,camera:null,dataBounds:[...Ve.INIT_BOUNDS],faceVisibilityAngle:8,gridLines:!0,axisLabels:null,axisTitlePixelOffset:35,tickLabelPixelOffset:12,generateTicks:sp,...n,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif",...n?.axisTextStyle},tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif",...n?.tickTextStyle}}}function op(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Rr.extend(t,e,$M(t,e,n)),e.lastFacesToDraw=[!1,!1,!1,!1,!1,!1],e.axisLabels=["X-Axis","Y-Axis","Z-Axis"],e.tickCounts=[],e.textValues=[],e.lastTickBounds=[],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.tmTexture=bs.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),e.gridMapper=wr.newInstance(),e.polyData=zt.newInstance(),e.gridMapper.setInputData(e.polyData),e.gridActor=Rr.newInstance(),e.gridActor.setMapper(e.gridMapper),e.gridActor.setProperty(t.getProperty()),e.gridActor.setParentProp(t),e.textPolyData=zt.newInstance(),B.setGet(t,e,["axisTitlePixelOffset","boundsScaleFactor","faceVisibilityAngle","gridLines","tickLabelPixelOffset","generateTicks"]),B.setGetArray(t,e,["dataBounds"],6),B.setGetArray(t,e,["axisLabels"],3),B.get(t,e,["axisTextStyle","tickTextStyle","camera","tmTexture","textValues","textPolyData","tickCounts","gridActor"]),HM(t,e)}const AM=B.newInstance(op,"vtkCubeAxesActor");var up={newInstance:AM,extend:op,newCubeAxesActorHelper:kM,defaultGenerateTicks:sp};function WM(t,e){e.classHierarchy.push("vtkOpenGLCubeAxesActor"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.CubeAxesActorHelper.getTmActor()),t.addMissingNode(e.renderable.getGridActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const i=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,s=e._openGLRenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([s.usize,s.vsize],i,e._openGLRenderWindow.getRenderable())}}}const jM={};function KM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,jM,n),st.extend(t,e,n),e.CubeAxesActorHelper=up.newCubeAxesActorHelper(),WM(t,e)}const XM=Ye(KM,"vtkOpenGLCubeAxesActor");Nn("vtkCubeAxesActor",XM);const Ds={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2};var cp={ObjectType:Ds};const{ObjectType:Yu}=cp,YM={};function qM(t,e){e.classHierarchy.push("vtkOpenGLBufferObject");function n(c){switch(c){case Yu.ELEMENT_ARRAY_BUFFER:return e.context.ELEMENT_ARRAY_BUFFER;case Yu.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in e.context)return e.context.TEXTURE_BUFFER;case Yu.ARRAY_BUFFER:default:return e.context.ARRAY_BUFFER}}let r=null,i=null,s=!0,u="";t.getType=()=>r,t.setType=c=>{r=c},t.getHandle=()=>i,t.isReady=()=>s===!1,t.generateBuffer=c=>{const l=n(c);return i===null&&(i=e.context.createBuffer(),r=c),n(r)===l},t.upload=(c,l)=>t.generateBuffer(l)?(e.context.bindBuffer(n(r),i),e.context.bufferData(n(r),c,e.context.STATIC_DRAW),e.allocatedGPUMemoryInBytes=c.length*c.BYTES_PER_ELEMENT,s=!1,!0):(u="Trying to upload array buffer to incompatible buffer.",!1),t.bind=()=>i?(e.context.bindBuffer(n(r),i),!0):!1,t.release=()=>i?(e.context.bindBuffer(n(r),null),!0):!1,t.releaseGraphicsResources=()=>{i!==null&&(e.context.bindBuffer(n(r),null),e.context.deleteBuffer(i),i=null,e.allocatedGPUMemoryInBytes=0)},t.setOpenGLRenderWindow=c=>{e._openGLRenderWindow!==c&&(t.releaseGraphicsResources(),e._openGLRenderWindow=c,e.context=null,c&&(e.context=e._openGLRenderWindow.getContext()))},t.getError=()=>u}const QM={objectType:Yu.ARRAY_BUFFER,context:null,allocatedGPUMemoryInBytes:0};function fp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,QM,n),B.obj(t,e),B.get(t,e,["_openGLRenderWindow","allocatedGPUMemoryInBytes"]),B.moveToProtected(t,e,["openGLRenderWindow"]),qM(t,e)}const ZM=B.newInstance(fp);var lp={newInstance:ZM,extend:fp,...YM,...cp};function JM(t){let e=0,n=0;for(let i=0;i<3;++i){const s=t.getRange(i),u=s[1]-s[0];e+=u*u;const c=.5*(s[1]+s[0]);n+=c*c}const r=e>0&&(Math.abs(n)/e>1e6||Math.abs(Math.log10(e))>3||e===0&&n>1e6);if(r){const i=new Float64Array(3),s=new Float64Array(3);for(let u=0;u<3;++u){const c=t.getRange(u),l=c[1]-c[0];i[u]=.5*(c[1]+c[0]),s[u]=l>0?1/l:1}return{useShiftAndScale:r,coordShift:i,coordScale:s}}return{useShiftAndScale:r,coordShift:new Float32Array([0,0,0]),coordScale:new Float32Array([1,1,1])}}const{vtkErrorMacro:M8}=B;function PM(t,e){const n=new Float64Array(3);US(n,e);const r=new Float64Array(16);return x6(r,n0(),t,n),r}function IM(t,e){return t===null||e===null?!1:!(c9(t,[0,0,0])&&c9(e,[1,1,1]))}function eO(t,e){e.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),t.setType(Ds.ARRAY_BUFFER),t.createVBO=function(n,r,i,s){let u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!n.getData()||!n.getData().length)return e.elementCount=0,0;e.blockSize=3,e.vertexOffset=0,e.normalOffset=0,e.tCoordOffset=0,e.tCoordComponents=0,e.colorComponents=0,e.colorOffset=0,e.customData=[];const c=s.points.getData();let l=null,g=null,v=null;const h=s.colors?s.colors.getNumberOfComponents():0,y=s.tcoords?s.tcoords.getNumberOfComponents():0;s.normals&&(e.normalOffset=4*e.blockSize,e.blockSize+=3,l=s.normals.getData()),s.customAttributes&&s.customAttributes.forEach(X=>{X&&(e.customData.push({data:X.getData(),offset:4*e.blockSize,components:X.getNumberOfComponents(),name:X.getName()}),e.blockSize+=X.getNumberOfComponents())}),s.tcoords&&(e.tCoordOffset=4*e.blockSize,e.tCoordComponents=y,e.blockSize+=y,g=s.tcoords.getData()),s.colors?(e.colorComponents=s.colors.getNumberOfComponents(),e.colorOffset=0,v=s.colors.getData(),e.colorBO||(e.colorBO=lp.newInstance()),e.colorBO.setOpenGLRenderWindow(e._openGLRenderWindow)):e.colorBO=null,e.stride=4*e.blockSize;let T=0,E=0,S=0,x=0,m=0,M=0,R;const w={anythingToPoints(X,Q,U,H){for(let Z=0;Z<X;++Z)R(Q[U+Z],H)},linesToWireframe(X,Q,U,H){for(let Z=0;Z<X-1;++Z)R(Q[U+Z],H),R(Q[U+Z+1],H)},polysToWireframe(X,Q,U,H){if(X>2)for(let Z=0;Z<X;++Z)R(Q[U+Z],H),R(Q[U+(Z+1)%X],H)},stripsToWireframe(X,Q,U,H){if(X>2){for(let Z=0;Z<X-1;++Z)R(Q[U+Z],H),R(Q[U+Z+1],H);for(let Z=0;Z<X-2;Z++)R(Q[U+Z],H),R(Q[U+Z+2],H)}},polysToSurface(X,Q,U,H){for(let Z=0;Z<X-2;Z++)R(Q[U+0],H),R(Q[U+Z+1],H),R(Q[U+Z+2],H)},stripsToSurface(X,Q,U,H){for(let Z=0;Z<X-2;Z++)R(Q[U+Z],H),R(Q[U+Z+1+Z%2],H),R(Q[U+Z+1+(Z+1)%2],H)}},D={anythingToPoints(X,Q){return X},linesToWireframe(X,Q){return X>1?(X-1)*2:0},polysToWireframe(X,Q){return X>2?X*2:0},stripsToWireframe(X,Q){return X>2?X*4-6:0},polysToSurface(X,Q){return X>2?(X-2)*3:0},stripsToSurface(X,Q,U){return X>2?(X-2)*3:0}};let O=null,_=null;i===Vn.POINTS||r==="verts"?(O=w.anythingToPoints,_=D.anythingToPoints):i===Vn.WIREFRAME||r==="lines"?(O=w[`${r}ToWireframe`],_=D[`${r}ToWireframe`]):(O=w[`${r}ToSurface`],_=D[`${r}ToSurface`]);const N=n.getData(),F=N.length;let z=0;for(let X=0;X<F;)z+=_(N[X],N),X+=N[X]+1;let $=null;const Y=new Float32Array(z*e.blockSize);v&&($=new Uint8Array(z*4));let A=0,K=0;const{useShiftAndScale:ee,coordShift:G,coordScale:W}=JM(s.points);if(ee?t.setCoordShiftAndScale(G,W):e.coordShiftAndScaleEnabled===!0&&t.setCoordShiftAndScale(null,null),u)if(!u.points&&!u.cells)u.points=new Int32Array(z),u.cells=new Int32Array(z);else{const X=new Int32Array(z+u.points.length);X.set(u.points),u.points=X;const Q=new Int32Array(z+u.cells.length);Q.set(u.cells),u.cells=Q}let q=s.vertexOffset;R=function(Q,U){if(u&&(u.points[q]=Q,u.cells[q]=M+s.cellOffset),++q,T=Q*3,e.coordShiftAndScaleEnabled?(Y[A++]=(c[T++]-e.coordShift[0])*e.coordScale[0],Y[A++]=(c[T++]-e.coordShift[1])*e.coordScale[1],Y[A++]=(c[T++]-e.coordShift[2])*e.coordScale[2]):(Y[A++]=c[T++],Y[A++]=c[T++],Y[A++]=c[T++]),l!==null&&(s.haveCellNormals?E=(M+s.cellOffset)*3:E=Q*3,Y[A++]=l[E++],Y[A++]=l[E++],Y[A++]=l[E++]),e.customData.forEach(H=>{m=Q*H.components;for(let Z=0;Z<H.components;++Z)Y[A++]=H.data[m++]}),g!==null){s.useTCoordsPerCell?S=U*y:S=Q*y;for(let H=0;H<y;++H)Y[A++]=g[S++]}v!==null&&(s.haveCellScalars?x=(M+s.cellOffset)*h:x=Q*h,$[K++]=v[x++],$[K++]=v[x++],$[K++]=v[x++],$[K++]=h===4?v[x++]:255)};for(let X=0;X<F;X+=N[X]+1,M++)O(N[X],N,X+1,M+s.cellOffset);return e.elementCount=z,t.upload(Y,Ds.ARRAY_BUFFER),e.colorBO&&(e.colorBOStride=4,e.colorBO.upload($,Ds.ARRAY_BUFFER)),M},t.setCoordShiftAndScale=(n,r)=>{if(n!==null&&(n.constructor!==Float64Array||n.length!==3)){M8("Wrong type for coordShift, expected vec3 or null");return}if(r!==null&&(r.constructor!==Float64Array||r.length!==3)){M8("Wrong type for coordScale, expected vec3 or null");return}(e.coordShift===null||n===null||!f9(n,e.coordShift))&&(e.coordShift=n),(e.coordScale===null||r===null||!f9(r,e.coordScale))&&(e.coordScale=r),e.coordShiftAndScaleEnabled=IM(e.coordShift,e.coordScale),e.coordShiftAndScaleEnabled?e.inverseShiftAndScaleMatrix=PM(e.coordShift,e.coordScale):e.inverseShiftAndScaleMatrix=null}}const tO={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null,customData:[],coordShift:null,coordScale:null,coordShiftAndScaleEnabled:!1,inverseShiftAndScaleMatrix:null};function gp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,tO,n),lp.extend(t,e,n),B.setGet(t,e,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents","customData"]),B.get(t,e,["coordShift","coordScale","coordShiftAndScaleEnabled","inverseShiftAndScaleMatrix"]),eO(t,e)}const nO=B.newInstance(gp);var rO={newInstance:nO,extend:gp};const{vtkErrorMacro:aO}=B;function iO(t,e){e.classHierarchy.push("vtkShader"),t.compile=()=>{let n=e.context.VERTEX_SHADER;if(!e.source||!e.source.length||e.shaderType==="Unknown")return!1;switch(e.handle!==0&&(e.context.deleteShader(e.handle),e.handle=0),e.shaderType){case"Fragment":n=e.context.FRAGMENT_SHADER;break;case"Vertex":default:n=e.context.VERTEX_SHADER;break}if(e.handle=e.context.createShader(n),e.context.shaderSource(e.handle,e.source),e.context.compileShader(e.handle),!e.context.getShaderParameter(e.handle,e.context.COMPILE_STATUS)){const i=e.context.getShaderInfoLog(e.handle);return aO(`Error compiling shader '${e.source}': ${i}`),e.context.deleteShader(e.handle),e.handle=0,!1}return!0},t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(e.context.deleteShader(e.handle),e.handle=0,e.dirty=!0)}}const sO={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null};function hp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,sO,n),B.obj(t,e),B.setGet(t,e,["shaderType","source","error","handle","context"]),iO(t,e)}const oO=B.newInstance(hp,"vtkShader");var Cl={newInstance:oO,extend:hp};const{vtkErrorMacro:Kn}=B;function uO(t,e,n,r){const i=typeof n=="string"?n:n.join(`
`),s=r===!1?e:new RegExp(e,"g"),u=t.replace(s,i);return{replace:u!==i,result:u}}function cO(t,e){e.classHierarchy.push("vtkShaderProgram"),t.compileShader=()=>e.vertexShader.compile()?e.fragmentShader.compile()?!t.attachShader(e.vertexShader)||!t.attachShader(e.fragmentShader)?(Kn(e.error),0):t.link()?(t.setCompiled(!0),1):(Kn(`Links failed: ${e.error}`),0):(Kn(e.fragmentShader.getSource().split(`
`).map((n,r)=>`${r}: ${n}`).join(`
`)),Kn(e.fragmentShader.getError()),0):(Kn(e.vertexShader.getSource().split(`
`).map((n,r)=>`${r}: ${n}`).join(`
`)),Kn(e.vertexShader.getError()),0),t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(t.release(),e.vertexShaderHandle!==0&&(e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=0),e.fragmentShaderHandle!==0&&(e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=0),e.context.deleteProgram(e.handle),e.handle=0,t.setCompiled(!1))},t.bind=()=>!e.linked&&!t.link()?!1:(e.context.useProgram(e.handle),t.setBound(!0),!0),t.isBound=()=>!!e.bound,t.release=()=>{e.context.useProgram(null),t.setBound(!1)},t.setContext=n=>{e.vertexShader.setContext(n),e.fragmentShader.setContext(n),e.geometryShader.setContext(n)},t.link=()=>{if(e.linked)return!0;if(e.handle===0)return e.error="Program has not been initialized, and/or does not have shaders.",!1;if(e.uniformLocs={},e.context.linkProgram(e.handle),!e.context.getProgramParameter(e.handle,e.context.LINK_STATUS)){const r=e.context.getProgramInfoLog(e.handle);return Kn(`Error linking shader ${r}`),e.handle=0,!1}return t.setLinked(!0),e.attributeLocs={},!0},t.setUniformMatrix=(n,r)=>{const i=t.findUniform(n);if(i===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;const s=new Float32Array(r);return e.context.uniformMatrix4fv(i,!1,s),!0},t.setUniformMatrix3x3=(n,r)=>{const i=t.findUniform(n);if(i===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;const s=new Float32Array(r);return e.context.uniformMatrix3fv(i,!1,s),!0},t.setUniformf=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1f(i,r),!0)},t.setUniformfv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1fv(i,r),!0)},t.setUniformi=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1i(i,r),!0)},t.setUniformiv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1iv(i,r),!0)},t.setUniform2f=(n,r,i)=>{const s=t.findUniform(n);if(s===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(i===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2f(s,r,i),!0},t.setUniform2fv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform2fv(i,r),!0)},t.setUniform2i=(n,r,i)=>{const s=t.findUniform(n);if(s===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(i===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2i(s,r,i),!0},t.setUniform2iv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform2iv(i,r),!0)},t.setUniform3f=(n,r,i,s)=>{const u=t.findUniform(n);if(u===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(s===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(u,r,i,s),!0},t.setUniform3fArray=(n,r)=>{const i=t.findUniform(n);if(i===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(!Array.isArray(r)||r.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(i,r[0],r[1],r[2]),!0},t.setUniform3fv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform3fv(i,r),!0)},t.setUniform3i=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var i=arguments.length,s=new Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];let c=s;if(c.length===1&&Array.isArray(c[0])&&(c=c[0]),c.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3i(r,c[0],c[1],c[2]),!0},t.setUniform3iv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform3iv(i,r),!0)},t.setUniform4f=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var i=arguments.length,s=new Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];let c=s;if(c.length===1&&Array.isArray(c[0])&&(c=c[0]),c.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4f(r,c[0],c[1],c[2],c[3]),!0},t.setUniform4fv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform4fv(i,r),!0)},t.setUniform4i=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var i=arguments.length,s=new Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];let c=s;if(c.length===1&&Array.isArray(c[0])&&(c=c[0]),c.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4i(r,c[0],c[1],c[2],c[3]),!0},t.setUniform4iv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform4iv(i,r),!0)},t.findUniform=n=>{if(!n||!e.linked)return-1;let r=e.uniformLocs[n];return r!==void 0?r:(r=e.context.getUniformLocation(e.handle,n),r===null?(e.error=`Uniform ${n} not found in current shader program.`,e.uniformLocs[n]=-1,-1):(e.uniformLocs[n]=r,r))},t.isUniformUsed=n=>{if(!n)return!1;let r=e.uniformLocs[n];return r!==void 0?r!==null:e.linked?(r=e.context.getUniformLocation(e.handle,n),e.uniformLocs[n]=r,r!==null):(Kn("attempt to find uniform when the shader program is not linked"),!1)},t.isAttributeUsed=n=>{if(!n)return!1;if(n in e.attributeLocs)return!0;if(!e.linked)return Kn("attempt to find uniform when the shader program is not linked"),!1;const r=e.context.getAttribLocation(e.handle,n);return r===-1?!1:(e.attributeLocs[n]=r,!0)},t.attachShader=n=>{if(n.getHandle()===0)return e.error="Shader object was not initialized, cannot attach it.",!1;if(n.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;if(e.handle===0){const r=e.context.createProgram();if(r===0)return e.error="Could not create shader program.",!1;e.handle=r,e.linked=!1}return n.getShaderType()==="Vertex"&&(e.vertexShaderHandle!==0&&e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=n.getHandle()),n.getShaderType()==="Fragment"&&(e.fragmentShaderHandle!==0&&e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=n.getHandle()),e.context.attachShader(e.handle,n.getHandle()),t.setLinked(!1),!0},t.detachShader=n=>{if(n.getHandle()===0)return e.error="shader object was not initialized, cannot attach it.",!1;if(n.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;switch(e.handle===0&&(e.error="This shader program has not been initialized yet."),n.getShaderType()){case"Vertex":return e.vertexShaderHandle!==n.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,n.getHandle()),e.vertexShaderHandle=0,e.linked=!1,!0);case"Fragment":return e.fragmentShaderHandle!==n.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,n.getHandle()),e.fragmentShaderHandle=0,e.linked=!1,!0);default:return!1}},t.setContext=n=>{e.context=n,e.vertexShader.setContext(n),e.fragmentShader.setContext(n),e.geometryShader.setContext(n)},t.setLastCameraMTime=n=>{e.lastCameraMTime=n}}const fO={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null};function pp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,fO,n),e.attributesLocs={},e.uniformLocs={},e.vertexShader=Cl.newInstance(),e.vertexShader.setShaderType("Vertex"),e.fragmentShader=Cl.newInstance(),e.fragmentShader.setShaderType("Fragment"),e.geometryShader=Cl.newInstance(),e.geometryShader.setShaderType("Geometry"),B.obj(t,e),B.get(t,e,["lastCameraMTime"]),B.setGet(t,e,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),cO(t,e)}const lO=B.newInstance(pp,"vtkShaderProgram");var ie={newInstance:lO,extend:pp,substitute:uO};function gO(t,e){e.classHierarchy.push("vtkOpenGLVertexArrayObject"),t.exposedMethod=()=>{},t.initialize=()=>{e.instancingExtension=null,e._openGLRenderWindow.getWebgl2()||(e.instancingExtension=e.context.getExtension("ANGLE_instanced_arrays")),!e.forceEmulation&&e._openGLRenderWindow&&e._openGLRenderWindow.getWebgl2()?(e.extension=null,e.supported=!0,e.handleVAO=e.context.createVertexArray()):(e.extension=e.context.getExtension("OES_vertex_array_object"),!e.forceEmulation&&e.extension?(e.supported=!0,e.handleVAO=e.extension.createVertexArrayOES()):e.supported=!1)},t.isReady=()=>e.handleVAO!==0||e.supported===!1,t.bind=()=>{if(t.isReady()||t.initialize(),t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(e.handleVAO):e.context.bindVertexArray(e.handleVAO);else if(t.isReady()){const n=e.context;for(let r=0;r<e.buffers.length;++r){const i=e.buffers[r];e.context.bindBuffer(n.ARRAY_BUFFER,i.buffer);for(let s=0;s<i.attributes.length;++s){const u=i.attributes[s],c=u.isMatrix?u.size:1;for(let l=0;l<c;++l)n.enableVertexAttribArray(u.index+l),n.vertexAttribPointer(u.index+l,u.size,u.type,u.normalize,u.stride,u.offset+u.stride*l/u.size),u.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(u.index+l,1):n.vertexAttribDivisor(u.index+l,1))}}}},t.release=()=>{if(t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(null):e.context.bindVertexArray(null);else if(t.isReady()){const n=e.context;for(let r=0;r<e.buffers.length;++r){const i=e.buffers[r];e.context.bindBuffer(n.ARRAY_BUFFER,i.buffer);for(let s=0;s<i.attributes.length;++s){const u=i.attributes[s],c=u.isMatrix?u.size:1;for(let l=0;l<c;++l)n.enableVertexAttribArray(u.index+l),n.vertexAttribPointer(u.index+l,u.size,u.type,u.normalize,u.stride,u.offset+u.stride*l/u.size),u.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(u.index+l,0):n.vertexAttribDivisor(u.index+l,0)),n.disableVertexAttribArray(u.index+l)}}}},t.shaderProgramChanged=()=>{t.release(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.handleProgram=0},t.releaseGraphicsResources=()=>{t.shaderProgramChanged(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.supported=!0,e.handleProgram=0},t.addAttributeArray=(n,r,i,s,u,c,l,g)=>t.addAttributeArrayWithDivisor(n,r,i,s,u,c,l,g,0,!1),t.addAttributeArrayWithDivisor=(n,r,i,s,u,c,l,g,v,h)=>{if(!n||!n.isBound()||r.getHandle()===0||r.getType()!==Ds.ARRAY_BUFFER||(e.handleProgram===0&&(e.handleProgram=n.getHandle()),t.isReady()||t.initialize(),!t.isReady()||e.handleProgram!==n.getHandle()))return!1;const y=e.context,T={};if(T.name=i,T.index=y.getAttribLocation(e.handleProgram,i),T.offset=s,T.stride=u,T.type=c,T.size=l,T.normalize=g,T.isMatrix=h,T.divisor=v,T.Index===-1)return!1;if(r.bind(),y.enableVertexAttribArray(T.index),y.vertexAttribPointer(T.index,T.size,T.type,T.normalize,T.stride,T.offset),v>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(T.index,1):y.vertexAttribDivisor(T.index,1)),T.buffer=r.getHandle(),!e.supported){let E=!1;for(let S=0;S<e.buffers.length;++S){const x=e.buffers[S];if(x.buffer===T.buffer){E=!0;let m=!1;for(let M=0;M<x.attributes.length;++M)x.attributes[M].name===i&&(m=!0,x.attributes[M]=T);m||x.attributes.push(T)}}E||e.buffers.push({buffer:T.buffer,attributes:[T]})}return!0},t.addAttributeMatrixWithDivisor=(n,r,i,s,u,c,l,g,v)=>{const h=t.addAttributeArrayWithDivisor(n,r,i,s,u,c,l,g,v,!0);if(!h)return h;const y=e.context,T=y.getAttribLocation(e.handleProgram,i);for(let E=1;E<l;E++)y.enableVertexAttribArray(T+E),y.vertexAttribPointer(T+E,l,c,g,u,s+u*E/l),v>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(T+E,1):y.vertexAttribDivisor(T+E,1));return!0},t.removeAttributeArray=n=>{if(!t.isReady()||e.handleProgram===0)return!1;if(!e.supported)for(let r=0;r<e.buffers.length;++r){const i=e.buffers[r];for(let s=0;s<i.attributes.length;++s)if(i.attributes[s].name===n)return i.attributes.splice(s,1),i.attributes.length||e.buffers.splice(r,1),!0}return!0},t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))}}const hO={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null};function vp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,hO,n),e.buffers=[],B.obj(t,e),B.get(t,e,["supported"]),B.setGet(t,e,["forceEmulation"]),gO(t,e)}const pO=B.newInstance(vp,"vtkOpenGLVertexArrayObject");var yp={newInstance:pO,extend:vp};const ua={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6};function vO(t,e){e.classHierarchy.push("vtkOpenGLHelper"),t.setOpenGLRenderWindow=n=>{e.context=n.getContext(),e.program.setContext(e.context),e.VAO.setOpenGLRenderWindow(n),e.CABO.setOpenGLRenderWindow(n)},t.releaseGraphicsResources=n=>{e.VAO.releaseGraphicsResources(),e.CABO.releaseGraphicsResources(),e.CABO.setElementCount(0)},t.drawArrays=(n,r,i,s)=>{if(e.CABO.getElementCount()){const u=t.getOpenGLMode(i),c=t.haveWideLines(n,r),l=e.context,g=l.getParameter(l.DEPTH_WRITEMASK);e.pointPicking&&l.depthMask(!1),u===l.LINES&&c?(t.updateShaders(n,r,s),l.drawArraysInstanced(u,0,e.CABO.getElementCount(),2*Math.ceil(r.getProperty().getLineWidth()))):(l.lineWidth(r.getProperty().getLineWidth()),t.updateShaders(n,r,s),l.drawArrays(u,0,e.CABO.getElementCount()),l.lineWidth(1));const h=(u===l.POINTS?1:0)||(u===l.LINES?2:3);return e.pointPicking&&l.depthMask(g),e.CABO.getElementCount()/h}return 0},t.getOpenGLMode=n=>{if(e.pointPicking)return e.context.POINTS;const r=e.primitiveType;return n===Vn.POINTS||r===ua.Points?e.context.POINTS:n===Vn.WIREFRAME||r===ua.Lines||r===ua.TrisEdges||r===ua.TriStripsEdges?e.context.LINES:e.context.TRIANGLES},t.haveWideLines=(n,r)=>r.getProperty().getLineWidth()>1?!(e.CABO.getOpenGLRenderWindow()&&e.CABO.getOpenGLRenderWindow().getHardwareMaximumLineWidth()>=r.getProperty().getLineWidth()):!1,t.getNeedToRebuildShaders=(n,r,i)=>!!(i.getNeedToRebuildShaders(t,n,r)||t.getProgram()===0||t.getShaderSourceTime().getMTime()<i.getMTime()||t.getShaderSourceTime().getMTime()<r.getMTime()),t.updateShaders=(n,r,i)=>{if(t.getNeedToRebuildShaders(n,r,i)){const s={Vertex:null,Fragment:null,Geometry:null};i.buildShaders(s,n,r);const u=e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgramArray(s.Vertex,s.Fragment,s.Geometry);u!==t.getProgram()&&(t.setProgram(u),t.getVAO().releaseGraphicsResources()),t.getShaderSourceTime().modified()}else e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgram(t.getProgram());t.getVAO().bind(),i.setMapperShaderParameters(t,n,r),i.setPropertyShaderParameters(t,n,r),i.setCameraShaderParameters(t,n,r),i.setLightingShaderParameters(t,n,r),i.invokeShaderCallbacks(t,n,r)},t.setMapperShaderParameters=(n,r,i)=>{if(t.haveWideLines(n,r)){t.getProgram().setUniform2f("viewportSize",i.usize,i.vsize);const s=parseFloat(r.getProperty().getLineWidth()),u=s/2;t.getProgram().setUniformf("lineWidthStepSize",s/Math.ceil(s)),t.getProgram().setUniformf("halfLineWidth",u)}e.primitiveType===ua.Points||r.getProperty().getRepresentation()===Vn.POINTS?t.getProgram().setUniformf("pointSize",r.getProperty().getPointSize()):e.pointPicking&&t.getProgram().setUniformf("pointSize",t.getPointPickingPrimitiveSize())},t.replaceShaderPositionVC=(n,r,i)=>{let s=n.Vertex;s=ie.substitute(s,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform float pointSize;"]).result,s=ie.substitute(s,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = pointSize;"],!1).result,t.getOpenGLMode(i.getProperty().getRepresentation())===e.context.LINES&&t.haveWideLines(r,i)&&(s=ie.substitute(s,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform vec2 viewportSize;","uniform float lineWidthStepSize;","uniform float halfLineWidth;"]).result,s=ie.substitute(s,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl"," if (halfLineWidth > 0.0)","   {","   float offset = float(gl_InstanceID / 2) * lineWidthStepSize - halfLineWidth;","   vec4 tmpPos = gl_Position;","   vec3 tmpPos2 = tmpPos.xyz / tmpPos.w;","   tmpPos2.x = tmpPos2.x + 2.0 * mod(float(gl_InstanceID), 2.0) * offset / viewportSize[0];","   tmpPos2.y = tmpPos2.y + 2.0 * mod(float(gl_InstanceID + 1), 2.0) * offset / viewportSize[1];","   gl_Position = vec4(tmpPos2.xyz * tmpPos.w, tmpPos.w);","   }"]).result),n.Vertex=s},t.getPointPickingPrimitiveSize=()=>e.primitiveType===ua.Points?2:e.primitiveType===ua.Lines?4:6,t.getAllocatedGPUMemoryInBytes=()=>t.getCABO().getAllocatedGPUMemoryInBytes()}const yO={context:null,program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0,pointPicking:!1};function dp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,yO,n),B.obj(t,e),e.shaderSourceTime={},B.obj(e.shaderSourceTime),e.attributeUpdateTime={},B.obj(e.attributeUpdateTime),B.setGet(t,e,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType","pointPicking"]),e.program=ie.newInstance(),e.VAO=yp.newInstance(),e.CABO=rO.newInstance(),vO(t,e)}const dO=B.newInstance(dp);var hi={newInstance:dO,extend:dp,primTypes:ua};const TO={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},a2={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5};var Tp={Wrap:TO,Filter:a2};const Sp=new Float32Array(1),SO=new Int32Array(Sp.buffer);function CO(t){Sp[0]=t;const e=SO[0];let n=e>>16&32768,r=e>>12&2047;const i=e>>23&255;return i<103?n:i>142?(n|=31744,n|=(i===255?0:1)&&e&8388607,n):i<113?(r|=2048,n|=(r>>114-i)+(r>>113-i&1),n):(n|=i-112<<10|r>>1,n+=r&1,n)}function xO(t){const e=(t&32768)>>15,n=(t&31744)>>10,r=t&1023;return n===0?(e?-1:1)*2**-14*(r/2**10):n===31?r?NaN:(e?-1:1)*(1/0):(e?-1:1)*2**(n-15)*(1+r/2**10)}var kn={fromHalf:xO,toHalf:CO};function EO(){try{const r=new Int16Array([0,32767]),i=[1,1],s=document.createElement("canvas");s.width=4,s.height=4;const u=s.getContext("webgl2");if(!u)return!1;const c=u.getExtension("EXT_texture_norm16");if(!c)return!1;const l=`#version 300 es
    void main() {
      gl_PointSize = ${4 .toFixed(1)};
      gl_Position = vec4(0, 0, 0, 1);
    }
  `,g=`#version 300 es
    precision highp float;
    precision highp int;
    precision highp sampler2D;

    uniform sampler2D u_image;

    out vec4 color;

    void main() {
        vec4 intColor = texture(u_image, gl_PointCoord.xy);
        color = vec4(vec3(intColor.rrr), 1);
    }
    `,v=u.createShader(u.VERTEX_SHADER);if(u.shaderSource(v,l),u.compileShader(v),!u.getShaderParameter(v,u.COMPILE_STATUS))return!1;const h=u.createShader(u.FRAGMENT_SHADER);if(u.shaderSource(h,g),u.compileShader(h),!u.getShaderParameter(h,u.COMPILE_STATUS))return!1;const y=u.createProgram();if(u.attachShader(y,v),u.attachShader(y,h),u.linkProgram(y),!u.getProgramParameter(y,u.LINK_STATUS))return!1;const T=u.createTexture();u.bindTexture(u.TEXTURE_2D,T),u.texImage2D(u.TEXTURE_2D,0,c.R16_SNORM_EXT,2,1,0,u.RED,u.SHORT,r),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.useProgram(y),u.drawArrays(u.POINTS,0,1);const E=new Uint8Array(4);u.readPixels(i[0],i[1],1,1,u.RGBA,u.UNSIGNED_BYTE,E);const[S,x,m]=E,M=u.getExtension("WEBGL_lose_context");return M&&M.loseContext(),S===x&&x===m&&S!==0}catch{return!1}}let xl;function mO(){return xl===void 0&&(xl=EO()),xl}const{Wrap:xr,Filter:pt}=Tp,{VtkDataTypes:Ce}=Fe,{vtkDebugMacro:El,vtkErrorMacro:Aa,vtkWarningMacro:O8,requiredParam:Ee}=Pn,{toHalf:RO}=kn;function wO(t,e){e.classHierarchy.push("vtkOpenGLTexture");function n(){return{internalFormat:e.internalFormat,format:e.format,openGLDataType:e.openGLDataType,width:e.width,height:e.height}}t.render=function(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(E?e._openGLRenderWindow=E:(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow")),e.context=e._openGLRenderWindow.getContext(),e.renderable.getInterpolate()?(e.generateMipmap?t.setMinificationFilter(pt.LINEAR_MIPMAP_LINEAR):t.setMinificationFilter(pt.LINEAR),t.setMagnificationFilter(pt.LINEAR)):(t.setMinificationFilter(pt.NEAREST),t.setMagnificationFilter(pt.NEAREST)),e.renderable.getRepeat()&&(t.setWrapR(xr.REPEAT),t.setWrapS(xr.REPEAT),t.setWrapT(xr.REPEAT)),e.renderable.getInputData()&&e.renderable.setImage(null),!e.handle||e.renderable.getMTime()>e.textureBuildTime.getMTime()){if(e.renderable.getImageBitmap()!==null&&(e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(pt.LINEAR_MIPMAP_LINEAR)),e.renderable.getImageBitmap()&&e.renderable.getImageLoaded()&&(t.create2DFromImageBitmap(e.renderable.getImageBitmap()),t.activate(),t.sendParameters(),e.textureBuildTime.modified())),e.renderable.getImage()!==null&&(e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(pt.LINEAR_MIPMAP_LINEAR)),e.renderable.getImage()&&e.renderable.getImageLoaded()&&(t.create2DFromImage(e.renderable.getImage()),t.activate(),t.sendParameters(),e.textureBuildTime.modified())),e.renderable.getCanvas()!==null){e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(pt.LINEAR_MIPMAP_LINEAR));const x=e.renderable.getCanvas();t.create2DFromRaw({width:x.width,height:x.height,numComps:4,dataType:Ce.UNSIGNED_CHAR,data:x,flip:!0}),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}if(e.renderable.getJsImageData()!==null){const x=e.renderable.getJsImageData();e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(pt.LINEAR_MIPMAP_LINEAR)),t.create2DFromRaw({width:x.width,height:x.height,numComps:4,dataType:Ce.UNSIGNED_CHAR,data:x.data,flip:!0}),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}const S=e.renderable.getInputData(0);if(S&&S.getPointData().getScalars()){const x=S.getExtent(),m=S.getPointData().getScalars(),M=[];for(let R=0;R<e.renderable.getNumberOfInputPorts();++R){const w=e.renderable.getInputData(R),D=w?w.getPointData().getScalars().getData():null;D&&M.push(D)}e.renderable.getInterpolate()&&m.getNumberOfComponents()===4&&(e.generateMipmap=!0,t.setMinificationFilter(pt.LINEAR_MIPMAP_LINEAR)),M.length%6===0?t.createCubeFromRaw({width:x[1]-x[0]+1,height:x[3]-x[2]+1,numComps:m.getNumberOfComponents(),dataType:m.getDataType(),data:M}):t.create2DFromRaw({width:x[1]-x[0]+1,height:x[3]-x[2]+1,numComps:m.getNumberOfComponents(),dataType:m.getDataType(),data:m.getData()}),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}}e.handle&&t.activate()};const r=()=>{if(!((e.minificationFilter===pt.LINEAR||e.magnificationFilter===pt.LINEAR)&&!mO()))return e.oglNorm16Ext};t.destroyTexture=()=>{t.deactivate(),e.context&&e.handle&&e.context.deleteTexture(e.handle),e._prevTexParams=null,e.handle=0,e.numberOfDimensions=0,e.target=0,e.components=0,e.width=0,e.height=0,e.depth=0,t.resetFormatAndType()},t.createTexture=()=>{e.handle||(e.handle=e.context.createTexture(),e.target&&(e.context.bindTexture(e.target,e.handle),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.bindTexture(e.target,null)))},t.getTextureUnit=()=>e._openGLRenderWindow?e._openGLRenderWindow.getTextureUnitForTexture(t):-1,t.activate=()=>{e._openGLRenderWindow.activateTexture(t),t.bind()},t.deactivate=()=>{e._openGLRenderWindow&&e._openGLRenderWindow.deactivateTexture(t)},t.releaseGraphicsResources=E=>{E&&e.handle&&(E.activateTexture(t),E.deactivateTexture(t),e.context.deleteTexture(e.handle),e._prevTexParams=null,e.handle=0,e.numberOfDimensions=0,e.target=0,e.internalFormat=0,e.format=0,e.openGLDataType=0,e.components=0,e.width=0,e.height=0,e.depth=0,e.allocatedGPUMemoryInBytes=0),e.shaderProgram&&(e.shaderProgram.releaseGraphicsResources(E),e.shaderProgram=null)},t.bind=()=>{e.context.bindTexture(e.target,e.handle),e.autoParameters&&t.getMTime()>e.sendParametersTime.getMTime()&&t.sendParameters()},t.isBound=()=>{let E=!1;if(e.context&&e.handle){let S=0;switch(e.target){case e.context.TEXTURE_2D:S=e.context.TEXTURE_BINDING_2D;break;default:O8("impossible case");break}E=e.context.getIntegerv(S)===e.handle}return E},t.sendParameters=()=>{e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e._openGLRenderWindow.getWebgl2()&&(e.context.texParameteri(e.target,e.context.TEXTURE_BASE_LEVEL,e.baseLevel),e.context.texParameteri(e.target,e.context.TEXTURE_MAX_LEVEL,e.maxLevel)),e.sendParametersTime.modified()},t.getInternalFormat=(E,S)=>(e._forceInternalFormat||(e.internalFormat=t.getDefaultInternalFormat(E,S)),e.internalFormat||El(`Unable to find suitable internal format for T=${E} NC= ${S}`),[e.context.R32F,e.context.RG32F,e.context.RGB32F,e.context.RGBA32F].includes(e.internalFormat)&&!e.context.getExtension("OES_texture_float_linear")&&O8("Failed to load OES_texture_float_linear. Texture filtering is not available for *32F internal formats."),e.internalFormat),t.getDefaultInternalFormat=(E,S)=>{let x=0;return x=e._openGLRenderWindow.getDefaultTextureInternalFormat(E,S,r(),t.useHalfFloat()),x||(x||(El("Unsupported internal texture type!"),El(`Unable to find suitable internal format for T=${E} NC= ${S}`)),x)},t.useHalfFloat=()=>e.enableUseHalfFloat&&e.canUseHalfFloat,t.setInternalFormat=E=>{e._forceInternalFormat=!0,E!==e.internalFormat&&(e.internalFormat=E,t.modified())},t.getFormat=(E,S)=>(e.format=t.getDefaultFormat(E,S),e.format),t.getDefaultFormat=(E,S)=>{if(e._openGLRenderWindow.getWebgl2())switch(S){case 1:return e.context.RED;case 2:return e.context.RG;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}else switch(S){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}},t.resetFormatAndType=()=>{e._prevTexParams=null,e.format=0,e.internalFormat=0,e._forceInternalFormat=!1,e.openGLDataType=0},t.getDefaultDataType=E=>{const S=t.useHalfFloat();if(e._openGLRenderWindow.getWebgl2())switch(E){case Ce.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case(r()&&!S&&Ce.SHORT):return e.context.SHORT;case(r()&&!S&&Ce.UNSIGNED_SHORT):return e.context.UNSIGNED_SHORT;case(S&&Ce.SHORT):return e.context.HALF_FLOAT;case(S&&Ce.UNSIGNED_SHORT):return e.context.HALF_FLOAT;case Ce.FLOAT:case Ce.VOID:default:return e.context.FLOAT}switch(E){case Ce.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case Ce.FLOAT:case Ce.VOID:default:if(e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear"))return e.context.FLOAT;{const x=e.context.getExtension("OES_texture_half_float");if(x&&e.context.getExtension("OES_texture_half_float_linear"))return x.HALF_FLOAT_OES}return e.context.UNSIGNED_BYTE}},t.getOpenGLDataType=function(E){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!e.openGLDataType||S)&&(e.openGLDataType=t.getDefaultDataType(E)),e.openGLDataType},t.getShiftAndScale=()=>{let E=0,S=1;switch(e.openGLDataType){case e.context.BYTE:S=127.5,E=S-128;break;case e.context.UNSIGNED_BYTE:S=255,E=0;break;case e.context.SHORT:S=32767.5,E=S-32768;break;case e.context.UNSIGNED_SHORT:S=65536,E=0;break;case e.context.INT:S=21474836475e-1,E=S-2147483648;break;case e.context.UNSIGNED_INT:S=4294967295,E=0;break;case e.context.FLOAT:}return{shift:E,scale:S}},t.getOpenGLFilterMode=E=>{switch(E){case pt.NEAREST:return e.context.NEAREST;case pt.LINEAR:return e.context.LINEAR;case pt.NEAREST_MIPMAP_NEAREST:return e.context.NEAREST_MIPMAP_NEAREST;case pt.NEAREST_MIPMAP_LINEAR:return e.context.NEAREST_MIPMAP_LINEAR;case pt.LINEAR_MIPMAP_NEAREST:return e.context.LINEAR_MIPMAP_NEAREST;case pt.LINEAR_MIPMAP_LINEAR:return e.context.LINEAR_MIPMAP_LINEAR;default:return e.context.NEAREST}},t.getOpenGLWrapMode=E=>{switch(E){case xr.CLAMP_TO_EDGE:return e.context.CLAMP_TO_EDGE;case xr.REPEAT:return e.context.REPEAT;case xr.MIRRORED_REPEAT:return e.context.MIRRORED_REPEAT;default:return e.context.CLAMP_TO_EDGE}};function i(E){const[S,x,m,M,R,w]=E;return[x-S+1,M-m+1,w-R+1]}function s(E){const[S,x,m]=i(E);return S*x*m}function u(E,S,x,m,M){const[R,w,D,O,_,N]=x,[F,z]=S,$=F*z;let Y=M;for(let A=_;A<=N;A++){const K=A*$;for(let ee=D;ee<=O;ee++){const G=K+ee*F;for(let W=G+R,q=G+w;W<=q;W++,Y++)m[Y]=E[W]}}}function c(E,S){const m=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:null)||E.constructor,M=S.reduce((O,_)=>O+s(_),0),R=new m(M),w=[e.width,e.height,e.depth];let D=0;return S.forEach(O=>{u(E,w,O,R,D),D+=s(O)}),R}t.updateArrayDataTypeForGL=function(E,S){let x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];const M=[];let R=e.width*e.height*e.components;x&&(R*=e.depth);const w=!!m.length;if(E!==Ce.FLOAT&&e.openGLDataType===e.context.FLOAT)for(let O=0;O<S.length;O++)if(S[O])if(w)M.push(c(S[O],m,Float32Array));else{const _=S[O].length>R?S[O].subarray(0,R):S[O];M.push(new Float32Array(_))}else M.push(null);if(E!==Ce.UNSIGNED_CHAR&&e.openGLDataType===e.context.UNSIGNED_BYTE)for(let O=0;O<S.length;O++)if(S[O])if(w)M.push(c(S[O],m,Uint8Array));else{const _=S[O].length>R?S[O].subarray(0,R):S[O];M.push(new Uint8Array(_))}else M.push(null);let D=!1;if(e._openGLRenderWindow.getWebgl2())D=e.openGLDataType===e.context.HALF_FLOAT;else{const O=e.context.getExtension("OES_texture_half_float");D=O&&e.openGLDataType===O.HALF_FLOAT_OES}if(D)for(let O=0;O<S.length;O++)if(S[O]){const _=w?c(S[O],m):S[O],N=new Uint16Array(w?_.length:R),F=N.length;for(let z=0;z<F;z++)N[z]=RO(_[z]);M.push(N)}else M.push(null);if(M.length===0)for(let O=0;O<S.length;O++)M.push(w&&S[O]?c(S[O],m):S[O]);return M};function l(E){if(e._openGLRenderWindow.getWebgl2())return E;const S=[],x=e.width,m=e.height,M=e.components;if(E&&(!Ss(x)||!Ss(m))){const R=e.context.getExtension("OES_texture_half_float"),w=Bn(x),D=Bn(m),O=w*D*e.components;for(let _=0;_<E.length;_++)if(E[_]!==null){let N=null;const F=m/D,z=x/w;let $=!1;e.openGLDataType===e.context.FLOAT?N=new Float32Array(O):R&&e.openGLDataType===R.HALF_FLOAT_OES?(N=new Uint16Array(O),$=!0):N=new Uint8Array(O);for(let Y=0;Y<D;Y++){const A=Y*w*M,K=Y*F;let ee=Math.floor(K),G=Math.ceil(K);G>=m&&(G=m-1);const W=K-ee,q=1-W;ee=ee*x*M,G=G*x*M;for(let X=0;X<w;X++){const Q=X*M,U=X*z;let H=Math.floor(U),Z=Math.ceil(U);Z>=x&&(Z=x-1);const se=U-H;H*=M,Z*=M;for(let oe=0;oe<M;oe++)$?N[A+Q+oe]=kn.toHalf(kn.fromHalf(E[_][ee+H+oe])*q*(1-se)+kn.fromHalf(E[_][ee+Z+oe])*q*se+kn.fromHalf(E[_][G+H+oe])*W*(1-se)+kn.fromHalf(E[_][G+Z+oe])*W*se):N[A+Q+oe]=E[_][ee+H+oe]*q*(1-se)+E[_][ee+Z+oe]*q*se+E[_][G+H+oe]*W*(1-se)+E[_][G+Z+oe]*W*se}}S.push(N),e.width=w,e.height=D}else S.push(null)}if(S.length===0)for(let R=0;R<E.length;R++)S.push(E[R]);return S}function g(E){return e._openGLRenderWindow?e.resizable||e.renderable?.getResizable()?!1:e._openGLRenderWindow.getWebgl2()?!(e._openGLRenderWindow.getGLInformations().RENDERER.value.match(/WebKit/gi)&&navigator.platform.match(/Mac/gi)&&r()&&(E===Ce.UNSIGNED_SHORT||E===Ce.SHORT)):!1:!1}t.create2DFromRaw=function(){let{width:E=Ee("width"),height:S=Ee("height"),numComps:x=Ee("numComps"),dataType:m=Ee("dataType"),data:M=Ee("data"),flip:R=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.getOpenGLDataType(m,!0),t.getInternalFormat(m,x),t.getFormat(m,x),!e.internalFormat||!e.format||!e.openGLDataType)return Aa("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=x,e.width=E,e.height=S,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const w=[M],D=t.updateArrayDataTypeForGL(m,w),O=l(D);return e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,R),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g(m)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),O[0]!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,O[0])):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,O[0]),e.generateMipmap&&e.context.generateMipmap(e.target),R&&e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,!1),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*x*e._openGLRenderWindow.getDefaultTextureByteSize(m,r(),t.useHalfFloat()),t.deactivate(),!0},t.createCubeFromRaw=function(){let{width:E=Ee("width"),height:S=Ee("height"),numComps:x=Ee("numComps"),dataType:m=Ee("dataType"),data:M=Ee("data")}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.getOpenGLDataType(m),t.getInternalFormat(m,x),t.getFormat(m,x),!e.internalFormat||!e.format||!e.openGLDataType)return Aa("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_CUBE_MAP,e.components=x,e.width=E,e.height=S,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),e.maxLevel=M.length/6-1,t.createTexture(),t.bind();const R=t.updateArrayDataTypeForGL(m,M),w=l(R),D=[];let O=e.width,_=e.height;for(let N=0;N<w.length;N++){N%6===0&&N!==0&&(O/=2,_/=2),D[N]=fi(m,_*O*e.components);for(let F=0;F<_;++F){const z=F*O*e.components,$=(_-F-1)*O*e.components;D[N].set(w[N].slice($,$+O*e.components),z)}}e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g(m)&&e.context.texStorage2D(e.target,6,e.internalFormat,e.width,e.height);for(let N=0;N<6;N++){let F=0,z=e.width,$=e.height;for(;z>=1&&$>=1;){let Y=null;F<=e.maxLevel&&(Y=D[6*F+N]),g(m)?Y!=null&&e.context.texSubImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+N,F,0,0,z,$,e.format,e.openGLDataType,Y):e.context.texImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+N,F,e.internalFormat,z,$,0,e.format,e.openGLDataType,Y),F++,z/=2,$/=2}}return e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*x*e._openGLRenderWindow.getDefaultTextureByteSize(m,r(),t.useHalfFloat()),t.deactivate(),!0},t.createDepthFromRaw=function(){let{width:E=Ee("width"),height:S=Ee("height"),dataType:x=Ee("dataType"),data:m=Ee("data")}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.getOpenGLDataType(x),e.format=e.context.DEPTH_COMPONENT,e._openGLRenderWindow.getWebgl2()?x===Ce.FLOAT?e.internalFormat=e.context.DEPTH_COMPONENT32F:e.internalFormat=e.context.DEPTH_COMPONENT16:e.internalFormat=e.context.DEPTH_COMPONENT,!e.internalFormat||!e.format||!e.openGLDataType?(Aa("Failed to determine texture parameters."),!1):(e.target=e.context.TEXTURE_2D,e.components=1,e.width=E,e.height=S,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g(x)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),m!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,m)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,m),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(x,r(),t.useHalfFloat()),t.deactivate(),!0)},t.create2DFromImage=E=>{if(t.getOpenGLDataType(Ce.UNSIGNED_CHAR),t.getInternalFormat(Ce.UNSIGNED_CHAR,4),t.getFormat(Ce.UNSIGNED_CHAR,4),!e.internalFormat||!e.format||!e.openGLDataType)return Aa("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=4,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const S=!e._openGLRenderWindow.getWebgl2()&&(!Ss(E.width)||!Ss(E.height));let x=E,m=E.width,M=E.height,R=!0;const w=window.chrome;if(S||w){const D=new OffscreenCanvas(Bn(E.width),Bn(E.height));m=D.width,M=D.height;const O=D.getContext("2d");O.translate(0,D.height),O.scale(1,-1),O.drawImage(E,0,0,E.width,E.height,0,0,D.width,D.height),x=D,R=!1}return e.width=m,e.height=M,e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,R),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g(Ce.UNSIGNED_CHAR)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,x)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,x),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(Ce.UNSIGNED_CHAR,r(),t.useHalfFloat()),t.deactivate(),!0},t.create2DFromImageBitmap=E=>(t.getOpenGLDataType(Ce.UNSIGNED_CHAR),t.getInternalFormat(Ce.UNSIGNED_CHAR,4),t.getFormat(Ce.UNSIGNED_CHAR,4),!e.internalFormat||!e.format||!e.openGLDataType?(Aa("Failed to determine texture parameters."),!1):(e.target=e.context.TEXTURE_2D,e.components=4,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),e.width=E.width,e.height=E.height,g(Ce.UNSIGNED_CHAR)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,E)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,E),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(Ce.UNSIGNED_CHAR,r(),t.useHalfFloat()),t.deactivate(),!0));function v(E,S,x){const m=new Array(x),M=new Array(x);for(let R=0;R<x;++R)m[R]=E[R],M[R]=S[R]-E[R]||1;return{scale:M,offset:m}}function h(E,S){for(let x=0;x<E.length;x++){const m=E[x],M=S[x]+m;if(m<-2048||m>2048||M<-2048||M>2048)return!1}return!0}function y(E,S,x,m){t.getOpenGLDataType(E);const M=h(S,x)||m;let R=!1;if(e._openGLRenderWindow.getWebgl2())R=e.openGLDataType===e.context.FLOAT&&e.context.getExtension("OES_texture_float_linear")===null&&M||e.openGLDataType===e.context.HALF_FLOAT;else{const w=e.context.getExtension("OES_texture_half_float");R=w&&e.openGLDataType===w.HALF_FLOAT_OES}e.canUseHalfFloat=R&&M}function T(E,S){const x=E.getNumberOfComponents(),m=E.getDataType(),M=E.getData(),R=new Array(x),w=new Array(x);for(let O=0;O<x;++O){const[_,N]=E.getRange(O);R[O]=_,w[O]=N}const D=v(R,w,x);return y(m,D.offset,D.scale,S),t.useHalfFloat()||t.getOpenGLDataType(m,!0),{numComps:x,dataType:m,data:M,scaleOffsets:D}}t.create2DFilterableFromRaw=function(){let{width:E=Ee("width"),height:S=Ee("height"),numComps:x=Ee("numComps"),dataType:m=Ee("dataType"),data:M=Ee("data"),preferSizeOverAccuracy:R=!1,ranges:w=void 0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.create2DFilterableFromDataArray({width:E,height:S,dataArray:Fe.newInstance({numComps:x,dataType:m,values:M,ranges:w}),preferSizeOverAccuracy:R})},t.create2DFilterableFromDataArray=function(){let{width:E=Ee("width"),height:S=Ee("height"),dataArray:x=Ee("dataArray"),preferSizeOverAccuracy:m=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{numComps:M,dataType:R,data:w}=T(x,m);t.create2DFromRaw({width:E,height:S,numComps:M,dataType:R,data:w})},t.updateVolumeInfoForGL=(E,S)=>{let x=!1;const m=t.useHalfFloat();(!e.volumeInfo?.scale||!e.volumeInfo?.offset)&&(e.volumeInfo={scale:new Array(S),offset:new Array(S)});for(let M=0;M<S;++M)e.volumeInfo.scale[M]=1,e.volumeInfo.offset[M]=0;if(r()&&!m&&E===Ce.SHORT){for(let M=0;M<S;++M)e.volumeInfo.scale[M]=32767;x=!0}if(r()&&!m&&E===Ce.UNSIGNED_SHORT){for(let M=0;M<S;++M)e.volumeInfo.scale[M]=65535;x=!0}if(E===Ce.UNSIGNED_CHAR){for(let M=0;M<S;++M)e.volumeInfo.scale[M]=255;x=!0}return(E===Ce.FLOAT||m&&(E===Ce.SHORT||E===Ce.UNSIGNED_SHORT))&&(x=!0),x},t.create3DFromRaw=function(){let{width:E=Ee("width"),height:S=Ee("height"),depth:x=Ee("depth"),numComps:m=Ee("numComps"),dataType:M=Ee("dataType"),data:R=Ee("data"),updatedExtents:w=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=M,O=R;if(!t.updateVolumeInfoForGL(D,m)&&O){const A=E*S*x,K=structuredClone(e.volumeInfo),ee=new Float32Array(A*m);e.volumeInfo.offset=K.offset,e.volumeInfo.scale=K.scale;let G=0;const W=K.scale.map(q=>1/q);for(let q=0;q<A;q++)for(let X=0;X<m;X++)ee[G]=(O[G]-K.offset[X])*W[X],G++;D=Ce.FLOAT,O=ee}if(t.getOpenGLDataType(D),t.getInternalFormat(D,m),t.getFormat(D,m),!e.internalFormat||!e.format||!e.openGLDataType)return Aa("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_3D,e.components=m,e.width=E,e.height=S,e.depth=x,e.numberOfDimensions=3,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const _=w.length>0,N=!_||!V6(e._prevTexParams,n()),F=[O],$=t.updateArrayDataTypeForGL(D,F,!0,N?[]:w),Y=l($);if(e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),N)g(D)?(e.context.texStorage3D(e.target,1,e.internalFormat,e.width,e.height,e.depth),Y[0]!=null&&e.context.texSubImage3D(e.target,0,0,0,0,e.width,e.height,e.depth,e.format,e.openGLDataType,Y[0])):e.context.texImage3D(e.target,0,e.internalFormat,e.width,e.height,e.depth,0,e.format,e.openGLDataType,Y[0]),e._prevTexParams=n();else if(_){const A=Y[0];let K=0;for(let ee=0;ee<w.length;ee++){const G=w[ee],W=i(G),q=s(G),X=new A.constructor(A.buffer,K,q);K+=X.byteLength,e.context.texSubImage3D(e.target,0,G[0],G[2],G[4],W[0],W[1],W[2],e.format,e.openGLDataType,X)}}return e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(D,r(),t.useHalfFloat()),t.deactivate(),!0},t.create3DFilterableFromRaw=function(){let{width:E=Ee("width"),height:S=Ee("height"),depth:x=Ee("depth"),numComps:m=Ee("numComps"),dataType:M=Ee("dataType"),data:R=Ee("data"),preferSizeOverAccuracy:w=!1,ranges:D=void 0,updatedExtents:O=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.create3DFilterableFromDataArray({width:E,height:S,depth:x,dataArray:Fe.newInstance({numComps:m,dataType:M,values:R,ranges:D}),preferSizeOverAccuracy:w,updatedExtents:O})},t.create3DFilterableFromDataArray=function(){let{width:E=Ee("width"),height:S=Ee("height"),depth:x=Ee("depth"),dataArray:m=Ee("dataArray"),preferSizeOverAccuracy:M=!1,updatedExtents:R=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{numComps:w,dataType:D,data:O,scaleOffsets:_}=T(m,M),N=[],F=[];for(let ue=0;ue<w;++ue)N[ue]=0,F[ue]=1;if(e.volumeInfo={scale:F,offset:N,dataComputedScale:_.scale,dataComputedOffset:_.offset,width:E,height:S,depth:x},e._openGLRenderWindow.getWebgl2())return t.create3DFromRaw({width:E,height:S,depth:x,numComps:w,dataType:D,data:O,updatedExtents:R});const z=E*S*x,$=structuredClone(_);let Y=(ue,ge,Pe,De,Ct)=>{ue[ge]=Pe},A=Ce.UNSIGNED_CHAR;if(D===Ce.UNSIGNED_CHAR)for(let ue=0;ue<w;++ue)$.offset[ue]=0,$.scale[ue]=255;else e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear")?(A=Ce.FLOAT,Y=(ue,ge,Pe,De,Ct)=>{ue[ge]=(Pe-De)/Ct}):(A=Ce.UNSIGNED_CHAR,Y=(ue,ge,Pe,De,Ct)=>{ue[ge]=255*(Pe-De)/Ct});if(t.getOpenGLDataType(A),t.getInternalFormat(A,w),t.getFormat(A,w),!e.internalFormat||!e.format||!e.openGLDataType)return Aa("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=w,e.depth=1,e.numberOfDimensions=2;let K=e.context.getParameter(e.context.MAX_TEXTURE_SIZE);K>4096&&(A===Ce.FLOAT||w>=3)&&(K=4096);let ee=1,G=1;z>K*K&&(ee=Math.ceil(Math.sqrt(z/(K*K))),G=ee);let W=Math.sqrt(z)/ee;W=Bn(W);const q=Math.floor(W*ee/E),X=Math.ceil(x/q),Q=Bn(S*X/G);e.width=W,e.height=Q,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.volumeInfo.xreps=q,e.volumeInfo.yreps=X,e.volumeInfo.xstride=ee,e.volumeInfo.ystride=G,e.volumeInfo.offset=$.offset,e.volumeInfo.scale=$.scale;let U;const H=W*Q*w;A===Ce.FLOAT?U=new Float32Array(H):U=new Uint8Array(H);let Z=0;const se=Math.floor(E/ee),oe=Math.floor(S/G);for(let ue=0;ue<X;ue++){const ge=Math.min(q,x-ue*q),Pe=w*(e.width-ge*Math.floor(E/ee));for(let De=0;De<oe;De++){for(let Ct=0;Ct<ge;Ct++){const vn=w*((ue*q+Ct)*E*S+G*De*E);for(let Ta=0;Ta<se;Ta++)for(let Lr=0;Lr<w;Lr++)Y(U,Z,O[vn+ee*Ta*w+Lr],$.offset[Lr],$.scale[Lr]),Z++}Z+=Pe}}return e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g(A)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),U!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,U)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,U),t.deactivate(),!0},t.setOpenGLRenderWindow=E=>{e._openGLRenderWindow!==E&&(t.releaseGraphicsResources(),e._openGLRenderWindow=E,e.context=null,E&&(e.context=e._openGLRenderWindow.getContext()))},t.getMaximumTextureSize=E=>E&&E.isCurrent()?E.getIntegerv(E.MAX_TEXTURE_SIZE):-1,t.enableUseHalfFloat=E=>{e.enableUseHalfFloat=E}}const MO={_openGLRenderWindow:null,_forceInternalFormat:!1,_prevTexParams:null,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:xr.CLAMP_TO_EDGE,wrapT:xr.CLAMP_TO_EDGE,wrapR:xr.CLAMP_TO_EDGE,minificationFilter:pt.NEAREST,magnificationFilter:pt.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:1e3,generateMipmap:!1,oglNorm16Ext:null,allocatedGPUMemoryInBytes:0,enableUseHalfFloat:!0,canUseHalfFloat:!1};function Cp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,MO,n),st.extend(t,e,n),e.sendParametersTime={},Dt(e.sendParametersTime,{mtime:0}),e.textureBuildTime={},Dt(e.textureBuildTime,{mtime:0}),Fs(t,e,["format","openGLDataType"]),St(t,e,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap","oglNorm16Ext"]),Kt(t,e,["width","height","volumeInfo","components","handle","target","allocatedGPUMemoryInBytes"]),zs(t,e,["openGLRenderWindow"]),wO(t,e)}const xp=Ye(Cp,"vtkOpenGLTexture");var Mr={newInstance:xp,extend:Cp,...Tp};Nn("vtkTexture",xp);var OO=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexMC;

// frag position in VC
//VTK::PositionVC::Dec

// optional normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// Texture coordinates
//VTK::TCoord::Dec

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

// Apple Bug
//VTK::PrimID::Dec

// picking support
//VTK::Picking::Dec

void main()
{
  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  //VTK::PrimID::Impl

  //VTK::PositionVC::Impl

  //VTK::Light::Impl

  //VTK::Picking::Impl
}
`,DO=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the polydata mappers fragment shader

uniform int PrimitiveIDOffset;

// VC position of this fragment
//VTK::PositionVC::Dec

// optional color passed in from the vertex shader, vertexColor
//VTK::Color::Dec

// optional surface normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// define vtkImageLabelOutlineOn
//VTK::ImageLabelOutlineOn

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// Depth Peeling Support
//VTK::DepthPeeling::Dec

// clipping plane vars
//VTK::Clip::Dec

// label outline 
//VTK::LabelOutline::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

// handle coincident offsets
//VTK::Coincident::Dec

//VTK::ZBuffer::Dec

//VTK::LabelOutlineHelperFunction

void main()
{
  // VC position of this fragment. This should not branch/return/discard.
  //VTK::PositionVC::Impl

  // Place any calls that require uniform flow (e.g. dFdx) here.
  //VTK::UniformFlow::Impl

  // Set gl_FragDepth here (gl_FragCoord.z by default)
  //VTK::Depth::Impl

  // Early depth peeling abort:
  //VTK::DepthPeeling::PreColor

  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Clip::Impl

  //VTK::Color::Impl

  // Generate the normal if we are not passed in one
  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Light::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }

  //VTK::DepthPeeling::Impl

  //VTK::Picking::Impl

  // handle coincident offsets
  //VTK::Coincident::Impl

  //VTK::ZBuffer::Impl

  //VTK::RenderPassFragmentShader::Impl
}
`;function LO(t,e){t.replaceShaderCoincidentOffset=(n,r,i)=>{const s=t.getCoincidentParameters(r,i);if(s&&(s.factor!==0||s.offset!==0)){let u=n.Fragment;u=ie.substitute(u,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,e.context.getExtension("EXT_frag_depth")&&(s.factor!==0?(u=ie.substitute(u,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,u=ie.substitute(u,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):u=ie.substitute(u,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),e._openGLRenderWindow.getWebgl2()&&(s.factor!==0?(u=ie.substitute(u,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,u=ie.substitute(u,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):u=ie.substitute(u,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result),n.Fragment=u}}}function BO(t,e){t.applyShaderReplacements=(n,r,i)=>{let s=null;if(r&&(s=r.ShaderReplacements),s)for(let u=0;u<s.length;u++){const c=s[u];if(i&&c.replaceFirst||!i&&!c.replaceFirst){const l=c.shaderType,g=n[l],v=ie.substitute(g,c.originalValue,c.replacementValue,c.replaceAll);n[l]=v.result}}},t.buildShaders=(n,r,i)=>{t.getReplacedShaderTemplate(n,r,i),e.lastRenderPassShaderReplacement=e.currentRenderPass?e.currentRenderPass.getShaderReplacement():null,e.lastRenderPassShaderReplacement&&e.lastRenderPassShaderReplacement(n);const s=e.renderable.getViewSpecificProperties().OpenGL;t.applyShaderReplacements(n,s,!0),t.replaceShaderValues(n,r,i),t.applyShaderReplacements(n,s)},t.getReplacedShaderTemplate=(n,r,i)=>{const s=e.renderable.getViewSpecificProperties().OpenGL;t.getShaderTemplate(n,r,i);let u=n.Vertex;if(s){const g=s.VertexShaderCode;g!==void 0&&g!==""&&(u=g)}n.Vertex=u;let c=n.Fragment;if(s){const g=s.FragmentShaderCode;g!==void 0&&g!==""&&(c=g)}n.Fragment=c;let l=n.Geometry;if(s){const g=s.GeometryShaderCode;g!==void 0&&(l=g)}n.Geometry=l}}var fc={implementReplaceShaderCoincidentOffset:LO,implementBuildShadersWithReplacements:BO};const{FieldAssociations:ml}=i0,{primTypes:dt}=hi,{Representation:X0,Shading:D8}=gi,{ScalarMode:Eu}=wr,{Filter:L8,Wrap:B8}=Mr,{vtkErrorMacro:Wa}=Pn,VO={type:"StartEvent"},NO={type:"EndEvent"},{CoordinateSystem:_O}=Ws;function UO(t){const e=t.getSelector();return e?e.getCurrentPass():Wt.MIN_KNOWN_PASS-1}function GO(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper"),t.buildPass=r=>{r&&(e.currentRenderPass=null,e.openGLActor=t.getFirstAncestorOfType("vtkOpenGLActor"),e._openGLRenderer=e.openGLActor.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()))},t.translucentPass=(r,i)=>{r&&(e.currentRenderPass=i,t.render())},t.zBufferPass=r=>{r&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=r=>t.zBufferPass(r),t.opaquePass=r=>{r&&t.render()},t.render=()=>{const r=e._openGLRenderWindow.getContext();if(e.context!==r){e.context=r;for(let u=dt.Start;u<dt.End;u++)e.primitives[u].setOpenGLRenderWindow(e._openGLRenderWindow)}const i=e.openGLActor.getRenderable(),s=e._openGLRenderer.getRenderable();t.renderPiece(s,i)},t.getShaderTemplate=(r,i,s)=>{r.Vertex=OO,r.Fragment=DO,r.Geometry=""},t.replaceShaderColor=(r,i,s)=>{let u=r.Vertex,c=r.Geometry,l=r.Fragment;const g=e.lastBoundBO.getReferenceByName("lastLightComplexity");let v=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform;","uniform vec3 diffuseColorUniform;"];g&&(v=v.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));let h=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];g&&(h=h.concat(["  vec3 specularColor;","  float specularPower;"])),h=h.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),g&&(h=h.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges&&(v=v.concat(["varying vec4 vertexColorVSOutput;"]),u=ie.substitute(u,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,u=ie.substitute(u,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,c=ie.substitute(c,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,c=ie.substitute(c,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges?l=ie.substitute(l,"//VTK::Color::Impl",h.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result:(e.renderable.getAreScalarsMappedFromCells()||e.renderable.getInterpolateScalarsBeforeMapping())&&e.renderable.getColorCoordinates()&&!e.drawingEdges?l=ie.substitute(l,"//VTK::Color::Impl",h.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:(s.getBackfaceProperty()&&!e.drawingEdges&&(v=v.concat(["uniform float opacityUniformBF; // the fragment opacity","uniform float ambientIntensityBF; // the material ambient","uniform float diffuseIntensityBF; // the material diffuse","uniform vec3 ambientColorUniformBF; // ambient material color","uniform vec3 diffuseColorUniformBF; // diffuse material color"]),g?(v=v.concat(["uniform float specularIntensityBF; // the material specular intensity","uniform vec3 specularColorUniformBF; // intensity weighted color","uniform float specularPowerUniformBF;"]),h=h.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  specularColor = specularIntensityBF * specularColorUniformBF;","  specularPower = specularPowerUniformBF;","  opacity = opacityUniformBF; }"])):h=h.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  opacity = opacityUniformBF; }"])),e.haveCellScalars&&!e.drawingEdges&&(v=v.concat(["uniform samplerBuffer texture1;"])),l=ie.substitute(l,"//VTK::Color::Impl",h).result),l=ie.substitute(l,"//VTK::Color::Dec",v).result,r.Vertex=u,r.Geometry=c,r.Fragment=l},t.replaceShaderLight=(r,i,s)=>{let u=r.Fragment;const c="",l=e.lastBoundBO.getReferenceByName("lastLightComplexity"),g=e.lastBoundBO.getReferenceByName("lastLightCount");let v=[];switch(l){case 0:u=ie.substitute(u,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:u=ie.substitute(u,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuseL = df * diffuseColor;","  vec3 specularL = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:for(let h=0;h<g;++h)v=v.concat([`uniform vec3 lightColor${h};`,`uniform vec3 lightDirectionVC${h}; // normalized`,`uniform vec3 lightHalfAngleVC${h}; // normalized`]);u=ie.substitute(u,"//VTK::Light::Dec",v).result,v=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  float df;"];for(let h=0;h<g;++h)v=v.concat([`  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC${h}));`,`  diffuseL += ((df${c}) * lightColor${h});`,`  if (dot(normalVCVSOutput, lightDirectionVC${h}) < 0.0)`,"    {",`    float sf = sign(df)*pow(max(1e-5,
                                              dot(reflect(lightDirectionVC${h},normalVCVSOutput),
                                                  normalize(-vertexVC.xyz))),
                                         specularPower);`,`    specularL += (sf${c} * lightColor${h});`,"    }"]);v=v.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),u=ie.substitute(u,"//VTK::Light::Impl",v,!1).result;break;case 3:for(let h=0;h<g;++h)v=v.concat([`uniform vec3 lightColor${h};`,`uniform vec3 lightDirectionVC${h}; // normalized`,`uniform vec3 lightHalfAngleVC${h}; // normalized`,`uniform vec3 lightPositionVC${h};`,`uniform vec3 lightAttenuation${h};`,`uniform float lightConeAngle${h};`,`uniform float lightExponent${h};`,`uniform int lightPositional${h};`]);u=ie.substitute(u,"//VTK::Light::Dec",v).result,v=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  float attenuation;","  float df;"];for(let h=0;h<g;++h)v=v.concat(["  attenuation = 1.0;",`  if (lightPositional${h} == 0)`,"    {",`      vertLightDirectionVC = lightDirectionVC${h};`,"    }","  else","    {",`    vertLightDirectionVC = vertexVC.xyz - lightPositionVC${h};`,"    float distanceVC = length(vertLightDirectionVC);","    vertLightDirectionVC = normalize(vertLightDirectionVC);","    attenuation = 1.0 /",`      (lightAttenuation${h}.x`,`       + lightAttenuation${h}.y * distanceVC`,`       + lightAttenuation${h}.z * distanceVC * distanceVC);`,"    // per OpenGL standard cone angle is 90 or less for a spot light",`    if (lightConeAngle${h} <= 90.0)`,"      {",`      float coneDot = dot(vertLightDirectionVC, lightDirectionVC${h});`,"      // if inside the cone",`      if (coneDot >= cos(radians(lightConeAngle${h})))`,"        {",`        attenuation = attenuation * pow(coneDot, lightExponent${h});`,"        }","      else","        {","        attenuation = 0.0;","        }","      }","    }","    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));",`    diffuseL += ((df${c}) * lightColor${h});`,"    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {",`      float sf = sign(df)*attenuation*pow(max(1e-5,
                                                           dot(reflect(lightDirectionVC${h},
                                                                       normalVCVSOutput),
                                                               normalize(-vertexVC.xyz))),
                                                       specularPower);`,`    specularL += ((sf${c}) * lightColor${h});`,"    }"]);v=v.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),u=ie.substitute(u,"//VTK::Light::Impl",v,!1).result;break;default:Wa("bad light complexity")}r.Fragment=u},t.replaceShaderNormal=(r,i,s)=>{if(e.lastBoundBO.getReferenceByName("lastLightComplexity")>0){let c=r.Vertex,l=r.Geometry,g=r.Fragment;e.lastBoundBO.getCABO().getNormalOffset()?(c=ie.substitute(c,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,c=ie.substitute(c,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,l=ie.substitute(l,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,l=ie.substitute(l,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,g=ie.substitute(g,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,g=ie.substitute(g,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.haveCellNormals?(g=ie.substitute(g,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,g=ie.substitute(g,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.lastBoundBO.getOpenGLMode(s.getProperty().getRepresentation())===e.context.LINES?(g=ie.substitute(g,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,g=ie.substitute(g,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  if (abs(fdx.x) > 0.0)","    { fdx = normalize(fdx); normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { fdy = normalize(fdy); normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(g=ie.substitute(g,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,g=ie.substitute(g,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,g=ie.substitute(g,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),r.Vertex=c,r.Geometry=l,r.Fragment=g}},t.replaceShaderPositionVC=(r,i,s)=>{e.lastBoundBO.replaceShaderPositionVC(r,i,s);let u=r.Vertex,c=r.Geometry,l=r.Fragment;e.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(u=ie.substitute(u,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,u=ie.substitute(u,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCPCMatrix * vertexMC;"]).result,u=ie.substitute(u,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result,c=ie.substitute(c,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,c=ie.substitute(c,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,l=ie.substitute(l,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,l=ie.substitute(l,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(u=ie.substitute(u,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,u=ie.substitute(u,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result),r.Vertex=u,r.Geometry=c,r.Fragment=l},t.replaceShaderTCoord=(r,i,s)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let u=r.Vertex,c=r.Geometry,l=r.Fragment;if(e.drawingEdges)return;u=ie.substitute(u,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;const g=e.openGLActor.getActiveTextures();let v=2,h=2;if(g&&g.length>0&&(v=g[0].getComponents(),g[0].getTarget()===e.context.TEXTURE_CUBE_MAP&&(h=3)),e.renderable.getColorTextureMap()&&(v=e.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents(),h=2),h===2){if(u=ie.substitute(u,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,c=ie.substitute(c,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,c=ie.substitute(c,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,l=ie.substitute(l,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,g&&g.length>=1)switch(v){case 1:l=ie.substitute(l,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:l=ie.substitute(l,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:l=ie.substitute(l,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}}else switch(u=ie.substitute(u,"//VTK::TCoord::Dec","attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;").result,c=ie.substitute(c,"//VTK::TCoord::Dec",["in vec3 tcoordVCVSOutput[];","out vec3 tcoordVCGSOutput;"]).result,c=ie.substitute(c,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,l=ie.substitute(l,"//VTK::TCoord::Dec",["varying vec3 tcoordVCVSOutput;","uniform samplerCube texture1;"]).result,v){case 1:l=ie.substitute(l,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:l=ie.substitute(l,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:l=ie.substitute(l,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}r.Vertex=u,r.Geometry=c,r.Fragment=l}},t.replaceShaderClip=(r,i,s)=>{let u=r.Vertex,c=r.Fragment;if(e.renderable.getNumberOfClippingPlanes()){const l=e.renderable.getNumberOfClippingPlanes();u=ie.substitute(u,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`uniform vec4 clipPlanes[${l}];`,`varying float clipDistancesVSOutput[${l}];`]).result,u=ie.substitute(u,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${l}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,c=ie.substitute(c,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`varying float clipDistancesVSOutput[${l}];`]).result,c=ie.substitute(c,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${l}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}r.Vertex=u,r.Fragment=c},t.getCoincidentParameters=(r,i)=>{let s={factor:0,offset:0};const u=i.getProperty();if(e.renderable.getResolveCoincidentTopology()==da.PolygonOffset||u.getEdgeVisibility()&&u.getRepresentation()===X0.SURFACE){const l=e.lastBoundBO.getPrimitiveType();l===dt.Points||u.getRepresentation()===X0.POINTS?s=e.renderable.getCoincidentTopologyPointOffsetParameter():l===dt.Lines||u.getRepresentation()===X0.WIREFRAME?s=e.renderable.getCoincidentTopologyLineOffsetParameters():(l===dt.Tris||l===dt.TriStrips)&&(s=e.renderable.getCoincidentTopologyPolygonOffsetParameters()),(l===dt.TrisEdges||l===dt.TriStripsEdges)&&(s=e.renderable.getCoincidentTopologyPolygonOffsetParameters(),s.factor/=2,s.offset/=2)}const c=e._openGLRenderer.getSelector();return c&&c.getFieldAssociation()===ml.FIELD_ASSOCIATION_POINTS&&(s.offset-=2),s},t.replaceShaderPicking=(r,i,s)=>{let u=r.Fragment,c=r.Vertex;if(u=ie.substitute(u,"//VTK::Picking::Dec",["uniform int picking;","//VTK::Picking::Dec"]).result,!!e._openGLRenderer.getSelector()){switch((e.lastSelectionState===Wt.ID_LOW24||e.lastSelectionState===Wt.ID_HIGH24)&&(c=ie.substitute(c,"//VTK::Picking::Dec",[`flat out int vertexIDVSOutput;
`,`uniform int VertexIDOffset;
`]).result,c=ie.substitute(c,"//VTK::Picking::Impl",`  vertexIDVSOutput = gl_VertexID + VertexIDOffset;
`).result,u=ie.substitute(u,"//VTK::Picking::Dec",`flat in int vertexIDVSOutput;
`).result,u=ie.substitute(u,"//VTK::Picking::Impl",["  int idx = vertexIDVSOutput;","//VTK::Picking::Impl"]).result),e.lastSelectionState){case Wt.ID_LOW24:u=ie.substitute(u,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float(idx%256)/255.0, float((idx/256)%256)/255.0, float((idx/65536)%256)/255.0, 1.0);").result;break;case Wt.ID_HIGH24:u=ie.substitute(u,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float((idx/16777216)%256)/255.0, 0.0, 0.0, 1.0);").result;break;default:u=ie.substitute(u,"//VTK::Picking::Dec","uniform vec3 mapperIndex;").result,u=ie.substitute(u,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result}r.Fragment=u,r.Vertex=c}},t.replaceShaderValues=(r,i,s)=>{if(t.replaceShaderColor(r,i,s),t.replaceShaderNormal(r,i,s),t.replaceShaderLight(r,i,s),t.replaceShaderTCoord(r,i,s),t.replaceShaderPicking(r,i,s),t.replaceShaderClip(r,i,s),t.replaceShaderCoincidentOffset(r,i,s),t.replaceShaderPositionVC(r,i,s),e.haveSeenDepthRequest){let u=r.Fragment;u=ie.substitute(u,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,u=ie.substitute(u,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,r.Fragment=u}},t.getNeedToRebuildShaders=(r,i,s)=>{let u=0,c=0;const l=r.getPrimitiveType(),g=e.currentInput;let v=!1;const h=g.getPointData().getNormals(),y=g.getCellData().getNormals(),T=s.getProperty().getInterpolation()===D8.FLAT,E=s.getProperty().getRepresentation(),S=r.getOpenGLMode(E,l);if((S===e.context.TRIANGLES||y&&!h||!T&&h||!T&&S===e.context.LINES)&&(v=!0),s.getProperty().getLighting()&&v){u=0;const R=i.getLightsByReference();for(let w=0;w<R.length;++w){const D=R[w];D.getSwitch()>0&&(c++,u===0&&(u=1)),u===1&&(c>1||D.getIntensity()!==1||!D.lightTypeIsHeadLight())&&(u=2),u<3&&D.getPositional()&&(u=3)}}let x=!1;const m=e.lastBoundBO.getReferenceByName("lastLightComplexity"),M=e.lastBoundBO.getReferenceByName("lastLightCount");return(m!==u||M!==c)&&(e.lastBoundBO.set({lastLightComplexity:u},!0),e.lastBoundBO.set({lastLightCount:c},!0),x=!0),(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(x=!0),e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime()||r.getShaderSourceTime().getMTime()<e.selectionStateChanged.getMTime()||x?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,!0):!1},t.invokeShaderCallbacks=(r,i,s)=>{const u=e.renderable.getViewSpecificProperties().ShadersCallbacks;u&&u.forEach(c=>{c.callback(c.userData,r,i,s)})},t.setMapperShaderParameters=(r,i,s)=>{if(r.getProgram().isUniformUsed("PrimitiveIDOffset")&&r.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),r.getProgram().isUniformUsed("VertexIDOffset")&&r.getProgram().setUniformi("VertexIDOffset",e.vertexIDOffset),r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){const l=e.lastBoundBO.getReferenceByName("lastLightComplexity");r.getProgram().isAttributeUsed("vertexMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexMC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||Wa("Error setting vertexMC in shader VAO.")),r.getProgram().isAttributeUsed("normalMC")&&r.getCABO().getNormalOffset()&&l>0?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"normalMC",r.getCABO().getNormalOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||Wa("Error setting normalMC in shader VAO."):r.getVAO().removeAttributeArray("normalMC"),e.renderable.getCustomShaderAttributes().forEach((g,v)=>{r.getProgram().isAttributeUsed(`${g}MC`)&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),`${g}MC`,r.getCABO().getCustomData()[v].offset,r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getCustomData()[v].components,!1)||Wa(`Error setting ${g}MC in shader VAO.`))}),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),!1)||Wa("Error setting tcoordMC in shader VAO."):r.getVAO().removeAttributeArray("tcoordMC"),r.getProgram().isAttributeUsed("scalarColor")&&r.getCABO().getColorComponents()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO().getColorBO(),"scalarColor",r.getCABO().getColorOffset(),r.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,4,!0)||Wa("Error setting scalarColor in shader VAO."):r.getVAO().removeAttributeArray("scalarColor"),r.getAttributeUpdateTime().modified()}if(e.renderable.getNumberOfClippingPlanes()){const l=e.renderable.getNumberOfClippingPlanes(),g=[],h=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,y=h?Ft(e.tmpMat4,s.getMatrix()):s.getMatrix();h&&(Qe(y,y),wt(y,y,h),Qe(y,y));for(let T=0;T<l;T++){const E=[];e.renderable.getClippingPlaneInDataCoords(y,T,E);for(let S=0;S<4;S++)g.push(E[S])}r.getProgram().setUniformi("numClipPlanes",l),r.getProgram().setUniform4fv("clipPlanes",g)}e.internalColorTexture&&r.getProgram().isUniformUsed("texture1")&&r.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const u=e.openGLActor.getActiveTextures();if(u)for(let l=0;l<u.length;++l){const v=u[l].getTextureUnit(),h=`texture${v+1}`;r.getProgram().isUniformUsed(h)&&r.getProgram().setUniformi(h,v)}if(e.haveSeenDepthRequest&&r.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),r.getProgram().isUniformUsed("coffset")){const l=t.getCoincidentParameters(i,s);r.getProgram().setUniformf("coffset",l.offset),r.getProgram().isUniformUsed("cfactor")&&r.getProgram().setUniformf("cfactor",l.factor)}r.setMapperShaderParameters(i,s,e._openGLRenderer.getTiledSizeAndOrigin());const c=e._openGLRenderer.getSelector();r.getProgram().setUniform3fArray("mapperIndex",c?c.getPropColorValue():[0,0,0]),r.getProgram().setUniformi("picking",c?c.getCurrentPass()+1:0)},t.setLightingShaderParameters=(r,i,s)=>{const u=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(u<2)return;const c=r.getProgram();let l=0;const g=i.getLightsByReference();for(let y=0;y<g.length;++y){const T=g[y];if(T.getSwitch()>0){const S=T.getColorByReference(),x=T.getIntensity();e.lightColor[0]=S[0]*x,e.lightColor[1]=S[1]*x,e.lightColor[2]=S[2]*x;const m=T.getDirection(),M=i.getActiveCamera().getViewMatrix(),R=[...m];T.lightTypeIsSceneLight()&&(R[0]=M[0]*m[0]+M[1]*m[1]+M[2]*m[2],R[1]=M[4]*m[0]+M[5]*m[1]+M[6]*m[2],R[2]=M[8]*m[0]+M[9]*m[1]+M[10]*m[2],pn(R)),e.lightDirection[0]=R[0],e.lightDirection[1]=R[1],e.lightDirection[2]=R[2],pn(e.lightDirection),c.setUniform3fArray(`lightColor${l}`,e.lightColor),c.setUniform3fArray(`lightDirectionVC${l}`,e.lightDirection),l++}}if(u<3)return;const h=i.getActiveCamera().getViewMatrix();Qe(h,h),l=0;for(let y=0;y<g.length;++y){const T=g[y];if(T.getSwitch()>0){const S=T.getTransformedPosition(),x=new Float64Array(3);Ae(x,S,h),c.setUniform3fArray(`lightAttenuation${l}`,T.getAttenuationValuesByReference()),c.setUniformi(`lightPositional${l}`,T.getPositional()),c.setUniformf(`lightExponent${l}`,T.getExponent()),c.setUniformf(`lightConeAngle${l}`,T.getConeAngle()),c.setUniform3fArray(`lightPositionVC${l}`,[x[0],x[1],x[2]]),l++}}};function n(r,i,s){return i.identity(s),r.reduce((u,c,l)=>l===0?c?i.copy(u,c):i.identity(u):c?i.multiply(u,u,c):u,s)}t.setCameraShaderParameters=(r,i,s)=>{const u=r.getProgram(),c=e.openGLCamera.getKeyMatrices(i),l=i.getActiveCamera(),g=e.openGLCamera.getKeyMatrixTime().getMTime(),v=u.getLastCameraMTime(),y=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,T=s.getIsIdentity(),E=T?{mcwc:null,normalMatrix:null}:e.openGLActor.getKeyMatrices();if(s.getCoordinateSystem()===_O.DISPLAY){const S=e._openGLRenderer.getTiledSizeAndOrigin();Oe(e.tmpMat4),e.tmpMat4[0]=2/S.usize,e.tmpMat4[12]=-1,e.tmpMat4[5]=2/S.vsize,e.tmpMat4[13]=-1,wt(e.tmpMat4,e.tmpMat4,y),u.setUniformMatrix("MCPCMatrix",e.tmpMat4)}else u.setUniformMatrix("MCPCMatrix",n([c.wcpc,E.mcwc,y],bl,e.tmpMat4));u.isUniformUsed("MCVCMatrix")&&u.setUniformMatrix("MCVCMatrix",n([c.wcvc,E.mcwc,y],bl,e.tmpMat4)),u.isUniformUsed("normalMatrix")&&u.setUniformMatrix3x3("normalMatrix",n([c.normalMatrix,E.normalMatrix],aS,e.tmpMat3)),v!==g&&(u.isUniformUsed("cameraParallel")&&u.setUniformi("cameraParallel",l.getParallelProjection()),u.setLastCameraMTime(g)),T||u.setLastCameraMTime(0)},t.setPropertyShaderParameters=(r,i,s)=>{const u=r.getProgram();let c=s.getProperty(),l=c.getOpacity(),g=e.drawingEdges?c.getEdgeColorByReference():c.getAmbientColorByReference(),v=e.drawingEdges?c.getEdgeColorByReference():c.getDiffuseColorByReference(),h=e.drawingEdges?1:c.getAmbient(),y=e.drawingEdges?0:c.getDiffuse(),T=e.drawingEdges?0:c.getSpecular();const E=c.getSpecularPower();u.setUniformf("opacityUniform",l),u.setUniform3fArray("ambientColorUniform",g),u.setUniform3fArray("diffuseColorUniform",v),u.setUniformf("ambient",h),u.setUniformf("diffuse",y);const S=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(S<1)return;let x=c.getSpecularColorByReference();if(u.setUniform3fArray("specularColorUniform",x),u.setUniformf("specularPowerUniform",E),u.setUniformf("specular",T),u.isUniformUsed("ambientIntensityBF")){if(c=s.getBackfaceProperty(),l=c.getOpacity(),g=c.getAmbientColor(),h=c.getAmbient(),v=c.getDiffuseColor(),y=c.getDiffuse(),x=c.getSpecularColor(),T=c.getSpecular(),u.setUniformf("ambientIntensityBF",h),u.setUniformf("diffuseIntensityBF",y),u.setUniformf("opacityUniformBF",l),u.setUniform3fArray("ambientColorUniformBF",g),u.setUniform3fArray("diffuseColorUniformBF",v),S<1)return;u.setUniformf("specularIntensityBF",T),u.setUniform3fArray("specularColorUniformBF",x),u.setUniformf("specularPowerUniformBF",E)}},t.updateMaximumPointCellIds=(r,i)=>{const s=e._openGLRenderer.getSelector();if(!s)return;if(e.selectionWebGLIdsToVTKIds?.points?.length){const c=e.selectionWebGLIdsToVTKIds.points.length;s.setMaximumPointId(c-1)}if(e.selectionWebGLIdsToVTKIds?.cells?.length){const c=e.selectionWebGLIdsToVTKIds.cells.length;s.setMaximumCellId(c-1)}s.getFieldAssociation()===ml.FIELD_ASSOCIATION_POINTS&&(e.pointPicking=!0)},t.renderPieceStart=(r,i)=>{e.primitiveIDOffset=0,e.vertexIDOffset=0;const s=UO(e._openGLRenderer);e.lastSelectionState!==s&&(e.selectionStateChanged.modified(),e.lastSelectionState=s),e._openGLRenderer.getSelector()&&e._openGLRenderer.getSelector().renderProp(i),t.updateBufferObjects(r,i),e.renderable.getColorTextureMap()&&e.internalColorTexture.activate(),e.lastBoundBO=null},t.renderPieceDraw=(r,i)=>{const s=i.getProperty().getRepresentation(),u=i.getProperty().getEdgeVisibility()&&s===X0.SURFACE,c=e._openGLRenderer.getSelector(),l=c&&c.getFieldAssociation()===ml.FIELD_ASSOCIATION_POINTS&&(e.lastSelectionState===Wt.ID_LOW24||e.lastSelectionState===Wt.ID_HIGH24);for(let g=dt.Start;g<dt.End;g++)e.primitives[g].setPointPicking(l),e.primitives[g].getCABO().getElementCount()&&(e.drawingEdges=u&&(g===dt.TrisEdges||g===dt.TriStripsEdges),(!e.drawingEdges||!(e.renderDepth||e.lastSelectionState>=0))&&(e.lastBoundBO=e.primitives[g],e.primitiveIDOffset+=e.primitives[g].drawArrays(r,i,s,t),e.vertexIDOffset+=e.primitives[g].getCABO().getElementCount()))},t.renderPieceFinish=(r,i)=>{e.LastBoundBO&&e.LastBoundBO.getVAO().release(),e.renderable.getColorTextureMap()&&e.internalColorTexture.deactivate()},t.renderPiece=(r,i)=>{if(t.invokeEvent(VO),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(NO),!e.currentInput){Wa("No input!");return}if(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())return;const s=e.context,u=i.getProperty().getBackfaceCulling(),c=i.getProperty().getFrontfaceCulling();!u&&!c?e._openGLRenderWindow.disableCullFace():c?(e._openGLRenderWindow.enableCullFace(),s.cullFace(s.FRONT)):(e._openGLRenderWindow.enableCullFace(),s.cullFace(s.BACK)),t.renderPieceStart(r,i),t.renderPieceDraw(r,i),t.renderPieceFinish(r,i)},t.updateBufferObjects=(r,i)=>{t.getNeedToRebuildBufferObjects(r,i)&&t.buildBufferObjects(r,i),t.updateMaximumPointCellIds()},t.getNeedToRebuildBufferObjects=(r,i)=>{const s=e.VBOBuildTime.getMTime();return s<t.getMTime()||s<e.renderable.getMTime()||s<i.getMTime()||s<e.currentInput.getMTime()},t.buildBufferObjects=(r,i)=>{const s=e.currentInput;if(s===null)return;e.renderable.mapScalars(s,1);const u=e.renderable.getColorMapColors();e.haveCellScalars=!1;const c=e.renderable.getScalarMode();e.renderable.getScalarVisibility()&&(c===Eu.USE_CELL_DATA||c===Eu.USE_CELL_FIELD_DATA||c===Eu.USE_FIELD_DATA||!s.getPointData().getScalars())&&c!==Eu.USE_POINT_FIELD_DATA&&u&&(e.haveCellScalars=!0);let l=i.getProperty().getInterpolation()!==D8.FLAT?s.getPointData().getNormals():null;l===null&&s.getCellData().getNormals()&&(e.haveCellNormals=!0,l=s.getCellData().getNormals());const g=i.getProperty().getRepresentation();let v=s.getPointData().getTCoords();e.openGLActor.getActiveTextures()||(v=null);let h=!1;if(e.renderable.getColorCoordinates()){v=e.renderable.getColorCoordinates(),h=e.renderable.getAreScalarsMappedFromCells(),e.internalColorTexture||(e.internalColorTexture=Mr.newInstance({resizable:!0}));const T=e.internalColorTexture;T.setMinificationFilter(L8.NEAREST),T.setMagnificationFilter(L8.NEAREST),T.setWrapS(B8.CLAMP_TO_EDGE),T.setWrapT(B8.CLAMP_TO_EDGE),T.setOpenGLRenderWindow(e._openGLRenderWindow);const E=e.renderable.getColorTextureMap(),S=E.getExtent(),x=E.getPointData().getScalars();T.create2DFromRaw({width:S[1]-S[0]+1,height:S[3]-S[2]+1,numComps:x.getNumberOfComponents(),dataType:x.getDataType(),data:x.getData()}),T.activate(),T.sendParameters(),T.deactivate()}const y=`${s.getMTime()}A${g}B${s.getMTime()}C${l?l.getMTime():1}D${u?u.getMTime():1}E${i.getProperty().getEdgeVisibility()}F${v?v.getMTime():1}`;if(e.VBOBuildString!==y){const E={points:s.getPoints(),normals:l,tcoords:v,colors:u,cellOffset:0,vertexOffset:0,useTCoordsPerCell:h,haveCellScalars:e.haveCellScalars,haveCellNormals:e.haveCellNormals,customAttributes:e.renderable.getCustomShaderAttributes().map(m=>s.getPointData().getArrayByName(m))};e.renderable.getPopulateSelectionSettings()&&(e.selectionWebGLIdsToVTKIds={points:null,cells:null});const S=[{inRep:"verts",cells:s.getVerts()},{inRep:"lines",cells:s.getLines()},{inRep:"polys",cells:s.getPolys()},{inRep:"strips",cells:s.getStrips()},{inRep:"polys",cells:s.getPolys()},{inRep:"strips",cells:s.getStrips()}],x=i.getProperty().getEdgeVisibility()&&g===X0.SURFACE;for(let m=dt.Start;m<dt.End;m++)m!==dt.TrisEdges&&m!==dt.TriStripsEdges?(E.cellOffset+=e.primitives[m].getCABO().createVBO(S[m].cells,S[m].inRep,g,E,e.selectionWebGLIdsToVTKIds),E.vertexOffset+=e.primitives[m].getCABO().getElementCount()):x?e.primitives[m].getCABO().createVBO(S[m].cells,S[m].inRep,X0.WIREFRAME,{...E,tcoords:null,colors:null,haveCellScalars:!1,haveCellNormals:!1}):e.primitives[m].releaseGraphicsResources();e.renderable.getPopulateSelectionSettings()&&e.renderable.setSelectionWebGLIdsToVTKIds(e.selectionWebGLIdsToVTKIds),e.VBOBuildString=y}e.VBOBuildTime.modified()},t.getAllocatedGPUMemoryInBytes=()=>{let r=0;return e.primitives.forEach(i=>{r+=i.getAllocatedGPUMemoryInBytes()}),r}}const bO={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null,tmpMat4:null,ambientColor:[],diffuseColor:[],specularColor:[],lightColor:[],lightDirection:[],lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastSelectionState:Wt.MIN_KNOWN_PASS-1,selectionStateChanged:null,selectionWebGLIdsToVTKIds:null,pointPicking:!1};function FO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bO,n),st.extend(t,e,n),fc.implementReplaceShaderCoincidentOffset(t,e,n),fc.implementBuildShadersWithReplacements(t,e,n),e.primitives=[],e.primTypes=dt,e.tmpMat3=ya(new Float64Array(9)),e.tmpMat4=Oe(new Float64Array(16));for(let r=dt.Start;r<dt.End;r++)e.primitives[r]=hi.newInstance(),e.primitives[r].setPrimitiveType(r),e.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);St(t,e,["context"]),e.VBOBuildTime={},Dt(e.VBOBuildTime,{mtime:0}),e.selectionStateChanged={},Dt(e.selectionStateChanged,{mtime:0}),GO(t,e)}const zO=Ye(FO,"vtkOpenGLPolyDataMapper");Nn("vtkMapper",zO);var kO=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

uniform int PrimitiveIDOffset;

// Texture coordinates
//VTK::TCoord::Dec

// Scalar coloring
//VTK::Color::Dec

// Depth Peeling
//VTK::DepthPeeling::Dec

// picking support
//VTK::Picking::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Color::Impl
  //VTK::TCoord::Impl

  //VTK::DepthPeeling::Impl
  //VTK::Picking::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }
}
`,HO=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

// all variables that represent positions or directions have a suffix
// indicating the coordinate system they are in. The possible values are
// MC - Model Coordinates
// WC - WC world coordinates
// VC - View Coordinates
// DC - Display Coordinates

in vec4 vertexWC;

// frag position in VC
//VTK::PositionVC::Dec

// material property values
//VTK::Color::Dec

// Texture coordinates
//VTK::TCoord::Dec

// Apple Bug
//VTK::PrimID::Dec

uniform mat4 WCVCMatrix;  // World to view matrix

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  gl_Position = WCVCMatrix*vertexWC;

  //VTK::TCoord::Impl

  //VTK::Color::Impl

  //VTK::PositionVC::Impl
}
`;const Ep={BACKGROUND:0,FOREGROUND:1};var mp={DisplayLocation:Ep};const{primTypes:bn}=hi,{Filter:V8,Wrap:N8}=Mr,{vtkErrorMacro:hs}=Pn,$O={type:"StartEvent"},AO={type:"EndEvent"};function WO(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper2D"),t.buildPass=r=>{r&&(e.openGLActor2D=t.getFirstAncestorOfType("vtkOpenGLActor2D"),e._openGLRenderer=e.openGLActor2D.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()))},t.overlayPass=r=>{r&&t.render()},t.getShaderTemplate=(r,i,s)=>{r.Vertex=HO,r.Fragment=kO,r.Geometry=""},t.render=()=>{const r=e._openGLRenderWindow.getContext();if(e.context!==r){e.context=r;for(let u=bn.Start;u<bn.End;u++)e.primitives[u].setOpenGLRenderWindow(e._openGLRenderWindow)}const i=e.openGLActor2D.getRenderable(),s=e._openGLRenderer.getRenderable();t.renderPiece(s,i)},t.renderPiece=(r,i)=>{if(t.invokeEvent($O),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(AO),!e.currentInput){hs("No input!");return}if(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())return;const s=e.context;e._openGLRenderWindow.enableCullFace(),s.cullFace(s.BACK),t.renderPieceStart(r,i),t.renderPieceDraw(r,i),t.renderPieceFinish(r,i)},t.renderPieceStart=(r,i)=>{if(e.primitiveIDOffset=0,e._openGLRenderer.getSelector())switch(e._openGLRenderer.getSelector().getCurrentPass()){default:e._openGLRenderer.getSelector().renderProp(i)}e.renderable.getColorTextureMap()&&e.internalColorTexture.activate(),t.updateBufferObjects(r,i),e.lastBoundBO=null},t.getNeedToRebuildShaders=(r,i,s)=>r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime(),t.updateBufferObjects=(r,i)=>{t.getNeedToRebuildBufferObjects(r,i)&&t.buildBufferObjects(r,i)},t.getNeedToRebuildBufferObjects=(r,i)=>{const s=e.VBOBuildTime.getMTime();return!!(s<t.getMTime()||s<e._openGLRenderWindow.getMTime()||s<e.renderable.getMTime()||s<i.getMTime()||s<e.currentInput.getMTime()||e.renderable.getTransformCoordinate()&&s<r.getMTime())},t.buildBufferObjects=(r,i)=>{const s=e.currentInput;if(s===null)return;e.renderable.mapScalars(s,i.getProperty().getOpacity());const u=e.renderable.getColorMapColors(),c=i.getProperty().getRepresentation();let l=s.getPointData().getTCoords();e.openGLActor2D.getActiveTextures()||(l=null);let g=!1;if(e.renderable.getColorCoordinates()){l=e.renderable.getColorCoordinates(),g=e.renderable.getAreScalarsMappedFromCells(),e.internalColorTexture||(e.internalColorTexture=Mr.newInstance({resizable:!0}));const E=e.internalColorTexture;E.setMinificationFilter(V8.NEAREST),E.setMagnificationFilter(V8.NEAREST),E.setWrapS(N8.CLAMP_TO_EDGE),E.setWrapT(N8.CLAMP_TO_EDGE),E.setOpenGLRenderWindow(e._openGLRenderWindow);const S=e.renderable.getColorTextureMap(),x=S.getExtent(),m=S.getPointData().getScalars();E.create2DFromRaw({width:x[1]-x[0]+1,height:x[3]-x[2]+1,numComps:m.getNumberOfComponents(),dataType:m.getDataType(),data:m.getData()}),E.activate(),E.sendParameters(),E.deactivate()}const v=e.renderable.getTransformCoordinate(),y=r.getRenderWindow().getViews()[0].getViewportSize(r),T=`${s.getMTime()}A${c}B${s.getMTime()}C${u?u.getMTime():1}D${l?l.getMTime():1}E${v?r.getMTime():1}F${y}`;if(e.VBOBuildString!==T){let E=s.getPoints();if(v){const x=va.newInstance(),m=E.getNumberOfPoints();x.setNumberOfPoints(m);const M=[];for(let R=0;R<m;++R){E.getPoint(R,M),v.setValue(M);const w=v.getComputedDoubleViewportValue(r);x.setPoint(R,w[0],w[1],0)}E=x}const S={points:E,tcoords:l,colors:u,cellOffset:0,useTCoordsPerCell:g,haveCellScalars:e.renderable.getAreScalarsMappedFromCells(),customAttributes:e.renderable.getCustomShaderAttributes().map(x=>s.getPointData().getArrayByName(x))};S.cellOffset+=e.primitives[bn.Points].getCABO().createVBO(s.getVerts(),"verts",c,S),S.cellOffset+=e.primitives[bn.Lines].getCABO().createVBO(s.getLines(),"lines",c,S),S.cellOffset+=e.primitives[bn.Tris].getCABO().createVBO(s.getPolys(),"polys",c,S),S.cellOffset+=e.primitives[bn.TriStrips].getCABO().createVBO(s.getStrips(),"strips",c,S),e.VBOBuildTime.modified(),e.VBOBuildString=T}},t.renderPieceDraw=(r,i)=>{const s=i.getProperty().getRepresentation();e.context.depthMask(!0);for(let c=bn.Start;c<bn.End;c++)e.primitives[c].getCABO().getElementCount()&&(e.lastBoundBO=e.primitives[c],e.primitiveIDOffset+=e.primitives[c].drawArrays(r,i,s,t))},t.renderPieceFinish=(r,i)=>{e.lastBoundBO&&e.lastBoundBO.getVAO().release(),e.renderable.getColorTextureMap()&&e.internalColorTexture.deactivate()},t.replaceShaderValues=(r,i,s)=>{t.replaceShaderColor(r,i,s),t.replaceShaderTCoord(r,i,s),t.replaceShaderPicking(r,i,s),t.replaceShaderPositionVC(r,i,s)},t.replaceShaderColor=(r,i,s)=>{let u=r.Vertex,c=r.Geometry,l=r.Fragment,g=["uniform vec3 diffuseColorUniform;","uniform float opacityUniform;"],v=["vec3 diffuseColor = diffuseColorUniform;","float opacity = opacityUniform;"];e.lastBoundBO.getCABO().getColorComponents()!==0?(g=g.concat(["varying vec4 vertexColorVSOutput;"]),u=ie.substitute(u,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,u=ie.substitute(u,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,c=ie.substitute(c,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,c=ie.substitute(c,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result,l=ie.substitute(l,"//VTK::Color::Impl",v.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result):e.renderable.getAreScalarsMappedFromCells()&&(v=v.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  opacity = opacity*texColor.a;"])),v=v.concat(["gl_FragData[0] = vec4(diffuseColor, opacity);"]),l=ie.substitute(l,"//VTK::Color::Dec",g).result,l=ie.substitute(l,"//VTK::Color::Impl",v).result,r.Vertex=u,r.Geometry=c,r.Fragment=l},t.replaceShaderTCoord=(r,i,s)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let u=r.Vertex,c=r.Geometry,l=r.Fragment;const g=e.lastBoundBO.getCABO().getTCoordComponents();g===1?(u=ie.substitute(u,"//VTK::TCoord::Dec",["in float tcoordMC;","out float tcoordVCVSOutput;"]).result,u=ie.substitute(u,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,c=ie.substitute(c,"//VTK::TCoord::Dec",[`in float tcoordVCVSOutput[];
`,"out float tcoordVCGSOutput;"]).result,c=ie.substitute(c,["//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,l=ie.substitute(l,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,l=ie.substitute(l,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, vec2(tcoordVCVSOutput,0));"]).result):g===2&&(u=ie.substitute(u,"//VTK::TCoord::Dec",["in vec2 tcoordMC;","out vec2 tcoordVCVSOutput;"]).result,u=ie.substitute(u,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,c=ie.substitute(c,"//VTK::TCoord::Dec",[`in vec2 tcoordVCVSOutput[];
`,"out vec2 tcoordVCGSOutput;"]).result,c=ie.substitute(c,"//VTK::TCoord::Impl",["tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,l=ie.substitute(l,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,l=ie.substitute(l,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, tcoordVCVSOutput.st);"]).result),e.renderable.getAreScalarsMappedFromCells()&&(c=ie.substitute(c,"//VTK::PrimID::Impl",["gl_PrimitiveID = gl_PrimitiveIDIn;"]).result),r.Vertex=u,r.Geometry=c,r.Fragment=l}},t.replaceShaderPicking=(r,i,s)=>{let u=r.Fragment;u=ie.substitute(u,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,u=ie.substitute(u,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result,r.Fragment=u},t.replaceShaderPositionVC=(r,i,s)=>{e.lastBoundBO.replaceShaderPositionVC(r,i,s)},t.invokeShaderCallbacks=(r,i,s)=>{const u=e.renderable.getViewSpecificProperties().ShadersCallbacks;u&&u.forEach(c=>{c.callback(c.userData,r,i,s)})},t.setMapperShaderParameters=(r,i,s)=>{if(r.getProgram().isUniformUsed("PrimitiveIDOffset")&&r.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),r.getProgram().isAttributeUsed("vertexWC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexWC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||hs("Error setting vertexWC in shader VAO.")),r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){e.renderable.getCustomShaderAttributes().forEach((l,g)=>{r.getProgram().isAttributeUsed(`${l}MC`)&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),`${l}MC`,r.getCABO().getCustomData()[g].offset,r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getCustomData()[g].components,!1)||hs(`Error setting ${l}MC in shader VAO.`))}),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),!1)||hs("Error setting tcoordMC in shader VAO."):r.getVAO().removeAttributeArray("tcoordMC"),r.getProgram().isAttributeUsed("scalarColor")&&r.getCABO().getColorComponents()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO().getColorBO(),"scalarColor",r.getCABO().getColorOffset(),r.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,4,!0)||hs("Error setting scalarColor in shader VAO."):r.getVAO().removeAttributeArray("scalarColor"),e.internalColorTexture&&r.getProgram().isUniformUsed("texture1")&&e.internalColorTexture.getTextureUnit()>-1&&r.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const u=e.openGLActor2D.getActiveTextures();if(u)for(let l=0;l<u.length;++l){const v=u[l].getTextureUnit(),h=`texture${v+1}`;r.getProgram().isUniformUsed(h)&&r.getProgram().setUniformi(h,v)}r.setMapperShaderParameters(i,s,e._openGLRenderer.getTiledSizeAndOrigin());const c=e._openGLRenderer.getSelector();r.getProgram().setUniform3fArray("mapperIndex",c?c.getPropColorValue():[0,0,0]),r.getProgram().setUniformi("picking",c?c.getCurrentPass()+1:0)}},t.setPropertyShaderParameters=(r,i,s)=>{const u=e.renderable.getColorMapColors();if(!u||u.getNumberOfComponents()===0){const c=r.getProgram(),l=s.getProperty(),g=l.getOpacity();c.setUniformf("opacityUniform",g);const v=l.getColor();c.setUniform3fArray("diffuseColorUniform",v)}},t.setLightingShaderParameters=(r,i,s)=>{};function n(r,i,s){return i.identity(s),r.reduce((u,c,l)=>l===0?c?i.copy(u,c):i.identity(u):c?i.multiply(u,u,c):u,s)}t.setCameraShaderParameters=(r,i,s)=>{const u=r.getProgram(),l=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,v=i.getRenderWindow().getViews()[0].getViewportSize(i),h=i.getViewport(),y=s.getActualPositionCoordinate().getComputedDoubleViewportValue(i),T=[0,0,1,1],E=[0,0,1,1];if(E[0]=h[0]>=T[0]?h[0]:T[0],E[1]=h[1]>=T[1]?h[1]:T[1],E[2]=h[2]<=T[2]?h[2]:T[2],E[3]=h[3]<=T[3]?h[3]:T[3],E[0]>=E[2]||E[1]>=E[3])return;v[0]=Ts(v[0]*(E[2]-E[0])/(h[2]-h[0])),v[1]=Ts(v[1]*(E[3]-E[1])/(h[3]-h[1]));const S=e._openGLRenderer.getParent().getSize(),x=Ts(y[0]-(E[0]-h[0])*S[0]),m=Ts(y[1]-(E[1]-h[1])*S[1]),M=-x;let R=-x+v[0];const w=-m;let D=-m+v[1];M===R&&(R=M+1),w===D&&(D=w+1);const O=Oe(new Float64Array(16));O[0]=2/(R-M),O[5]=2/(D-w),O[3]=-1*(R+M)/(R-M),O[7]=-1*(D+w)/(D-w),O[10]=0,O[11]=s.getProperty().getDisplayLocation()===Ep.FOREGROUND?-1:1,O[15]=1,Qe(O,O),u.setUniformMatrix("WCVCMatrix",n([O,l],bl,e.tmpMat4))},t.getAllocatedGPUMemoryInBytes=()=>{let r=0;return e.primitives.forEach(i=>{r+=i.getAllocatedGPUMemoryInBytes()}),r}}const jO={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null};function KO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,jO,n),st.extend(t,e,n),fc.implementReplaceShaderCoincidentOffset(t,e,n),fc.implementBuildShadersWithReplacements(t,e,n),e.primitives=[],e.primTypes=bn,e.tmpMat4=Oe(new Float64Array(16));for(let r=bn.Start;r<bn.End;r++)e.primitives[r]=hi.newInstance(),e.primitives[r].setPrimitiveType(r),e.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);St(t,e,["context"]),e.VBOBuildTime={},Dt(e.VBOBuildTime,{mtime:0}),WO(t,e)}const XO=Ye(KO,"vtkOpenGLPolyDataMapper2D");Nn("vtkMapper2D",XO);const{VectorMode:YO}=xc;function Rl(t,e){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor,t.font=`${e.fontStyle} ${e.fontSize}px ${e.fontFamily}`}function Rp(t,e){return n=>{const r=n.getLastSize(),i=(r[0]/700)**.8,s=(r[1]/700)**.8,u=Math.min(i,s),c=n.getAxisTextStyle(),l=n.getTickTextStyle();Object.assign(c,e.axisTextStyle),Object.assign(l,e.tickTextStyle),c.fontSize=Math.max(24*u,12),n.getLastAspectRatio()>1?l.fontSize=Math.max(20*u,10):l.fontSize=Math.max(16*u,10);const g=n.updateTextureAtlas();n.setTopTitle(!1);const v=n.getBoxSizeByReference();if(n.getLastAspectRatio()>1)n.setTickLabelPixelOffset(.3*l.fontSize),g.titleWidth<=g.tickWidth+n.getTickLabelPixelOffset()+.8*l.fontSize?(n.setTopTitle(!0),n.setAxisTitlePixelOffset(.2*l.fontSize),v[0]=2*(g.tickWidth+n.getTickLabelPixelOffset()+.8*l.fontSize)/r[0],n.setBoxPosition([.98-v[0],-.92])):(n.setAxisTitlePixelOffset(.2*l.fontSize),v[0]=2*(g.titleHeight+n.getAxisTitlePixelOffset()+g.tickWidth+n.getTickLabelPixelOffset()+.8*l.fontSize)/r[0],n.setBoxPosition([.99-v[0],-.92])),v[1]=Math.max(1.2,Math.min(1.84/s,1.84));else{n.setAxisTitlePixelOffset(1.2*l.fontSize),n.setTickLabelPixelOffset(.1*l.fontSize);const h=2*(.8*l.fontSize+g.titleHeight+n.getAxisTitlePixelOffset())/r[1],y=2*g.tickWidth/r[0];v[0]=Math.min(1.9,Math.max(1.4,1.4*y*(n.getTicks().length+3))),v[1]=h,n.setBoxPosition([-.5*v[0],-.97])}n.recomputeBarSegments(g)}}function wp(t,e){return n=>{const r=n.getLastTickBounds(),i=R2().domain([r[0],r[1]]),s=i.ticks(5),u=i.tickFormat(5);n.setTicks(s),n.setTickStrings(s.map(u))}}function qO(t,e){e.classHierarchy.push("vtkScalarBarActorHelper"),t.setRenderable=i=>{e.renderable!==i&&(e.renderable=i,e.barActor.setProperty(i.getProperty()),e.barActor.setParentProp(i),e.barActor.setCoordinateSystemToDisplay(),e.tmActor.setProperty(i.getProperty()),e.tmActor.setParentProp(i),e.tmActor.setCoordinateSystemToDisplay(),e.generateTicks=i.generateTicks,e.axisTextStyle={...i.getAxisTextStyle()},e.tickTextStyle={...i.getTickTextStyle()},t.modified())},t.updateAPISpecificData=(i,s,u)=>{(e.lastSize[0]!==i[0]||e.lastSize[1]!==i[1])&&(e.lastSize[0]=i[0],e.lastSize[1]=i[1],e.lastAspectRatio=i[0]/i[1],e.forceUpdate=!0);const c=e.renderable.getScalarsToColors();if(!(!c||!e.renderable.getVisibility())&&(e.barMapper.setLookupTable(c),e.camera=s,e.renderWindow=u,e.forceUpdate||Math.max(c.getMTime(),t.getMTime(),e.renderable.getMTime())>e.lastRebuildTime.getMTime())){const l=c.getMappingRange();if(e.lastTickBounds=[...l],e.renderable.getGenerateTicks()(t),e.renderable.getAutomated())e.renderable.getAutoLayout()(t);else{e.axisTextStyle={...e.renderable.getAxisTextStyle()},e.tickTextStyle={...e.renderable.getTickTextStyle()},e.barPosition=[...e.renderable.getBarPosition()],e.barSize=[...e.renderable.getBarSize()],e.boxPosition=[...e.renderable.getBoxPosition()],e.boxSize=[...e.renderable.getBoxSize()],e.axisTitlePixelOffset=e.renderable.getAxisTitlePixelOffset(),e.tickLabelPixelOffset=e.renderable.getTickLabelPixelOffset();const g=t.updateTextureAtlas();t.recomputeBarSegments(g)}t.updatePolyDataForLabels(),t.updatePolyDataForBarSegments(),e.lastRebuildTime.modified(),e.forceUpdate=!1}},t.updateTextureAtlas=()=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left";const i={},s=new Map;let u=0,c=1;Rl(e.tmContext,e.axisTextStyle);let l=e.tmContext.measureText(e.renderable.getAxisLabel()),g={height:l.actualBoundingBoxAscent+2,startingHeight:c,width:l.width+2,textStyle:e.axisTextStyle};s.set(e.renderable.getAxisLabel(),g),c+=g.height,u=g.width,i.titleWidth=g.width,i.titleHeight=g.height,i.tickWidth=0,i.tickHeight=0,Rl(e.tmContext,e.tickTextStyle);const v=[...t.getTickStrings(),"NaN","Below","Above"];for(let h=0;h<v.length;h++)s.has(v[h])||(l=e.tmContext.measureText(v[h]),g={height:l.actualBoundingBoxAscent+2,startingHeight:c,width:l.width+2,textStyle:e.tickTextStyle},s.set(v[h],g),c+=g.height,u<g.width&&(u=g.width),i.tickWidth<g.width&&(i.tickWidth=g.width),i.tickHeight<g.height&&(i.tickHeight=g.height));return u=Bn(u),c=Bn(c),s.forEach(h=>{h.tcoords=[0,(c-h.startingHeight-h.height)/c,h.width/u,(c-h.startingHeight-h.height)/c,h.width/u,(c-h.startingHeight)/c,0,(c-h.startingHeight)/c]}),e.tmCanvas.width=u,e.tmCanvas.height=c,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,u,c),s.forEach((h,y)=>{Rl(e.tmContext,h.textStyle),e.tmContext.fillText(y,1,h.startingHeight+h.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified(),e._tmAtlas=s,i},t.computeBarSize=i=>{e.vertical=e.boxSize[1]>e.boxSize[0];const s=2*i.tickHeight/e.lastSize[1],u=[1,1];if(e.vertical){const c=2*(i.tickWidth+e.tickLabelPixelOffset)/e.lastSize[0];if(e.topTitle){const l=2*(i.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0]-c,e.barSize[1]=e.boxSize[1]-l}else{const l=2*(i.titleHeight+e.axisTitlePixelOffset)/e.lastSize[0];e.barSize[0]=e.boxSize[0]-l-c,e.barSize[1]=e.boxSize[1]}e.barPosition[0]=e.boxPosition[0]+c,e.barPosition[1]=e.boxPosition[1],u[1]=s}else{const c=(2*i.tickWidth-8)/e.lastSize[0],l=2*(i.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0],e.barPosition[0]=e.boxPosition[0],e.barSize[1]=e.boxSize[1]-l,e.barPosition[1]=e.boxPosition[1],u[0]=c}return u},t.recomputeBarSegments=i=>{const s=t.computeBarSize(i);e.barSegments=[];const u=[0,0],c=e.vertical?1:0,l=e.vertical?.01:.02;function g(y,T){e.barSegments.push({corners:[[...u],[u[0]+s[0],u[1]],[u[0]+s[0],u[1]+s[1]],[u[0],u[1]+s[1]]],scalars:T,title:y}),u[c]+=s[c]+l}e.renderable.getDrawNanAnnotation()&&e.renderable.getScalarsToColors().getNanColor()&&g("NaN",[NaN,NaN,NaN,NaN]),e.renderable.getDrawBelowRangeSwatch()&&e.renderable.getScalarsToColors().getUseBelowRangeColor?.()&&g("Below",[-.1,-.1,-.1,-.1]);const v=e.renderable.getScalarsToColors().getUseAboveRangeColor?.();u[c]+=l;const h=s[c];s[c]=v?1-2*l-s[c]-u[c]:1-l-u[c],g("ticks",e.vertical?[0,0,.995,.995]:[0,.995,.995,0]),e.renderable.getDrawAboveRangeSwatch()&&v&&(s[c]=h,u[c]+=l,g("Above",[1.1,1.1,1.1,1.1]))};const n=new Float64Array(3);t.createPolyDataForOneLabel=(i,s,u,c,l,g)=>{const v=e._tmAtlas.get(i);if(!v)return;let h=g.ptIdx,y=g.cellIdx;n[0]=(.5*s[0]+.5)*e.lastSize[0],n[1]=(.5*s[1]+.5)*e.lastSize[1],n[2]=s[2],n[0]+=l[0],n[1]+=l[1];const T=[],E=c==="vertical"?[1,0]:[0,1];c==="vertical"?(T[0]=v.width,T[1]=-v.height,u[0]==="middle"?n[1]-=v.width/2:u[0]==="right"&&(n[1]-=v.width),u[1]==="middle"?n[0]+=v.height/2:u[1]==="top"&&(n[0]+=v.height)):(T[0]=v.width,T[1]=v.height,u[0]==="middle"?n[0]-=v.width/2:u[0]==="right"&&(n[0]-=v.width),u[1]==="middle"?n[1]-=v.height/2:u[1]==="top"&&(n[1]-=v.height)),g.points[h*3]=n[0],g.points[h*3+1]=n[1],g.points[h*3+2]=n[2],g.tcoords[h*2]=v.tcoords[0],g.tcoords[h*2+1]=v.tcoords[1],h++,n[E[0]]+=T[0],g.points[h*3]=n[0],g.points[h*3+1]=n[1],g.points[h*3+2]=n[2],g.tcoords[h*2]=v.tcoords[2],g.tcoords[h*2+1]=v.tcoords[3],h++,n[E[1]]+=T[1],g.points[h*3]=n[0],g.points[h*3+1]=n[1],g.points[h*3+2]=n[2],g.tcoords[h*2]=v.tcoords[4],g.tcoords[h*2+1]=v.tcoords[5],h++,n[E[0]]-=T[0],g.points[h*3]=n[0],g.points[h*3+1]=n[1],g.points[h*3+2]=n[2],g.tcoords[h*2]=v.tcoords[6],g.tcoords[h*2+1]=v.tcoords[7],h++,g.polys[y*4]=3,g.polys[y*4+1]=h-4,g.polys[y*4+2]=h-3,g.polys[y*4+3]=h-2,y++,g.polys[y*4]=3,g.polys[y*4+1]=h-4,g.polys[y*4+2]=h-2,g.polys[y*4+3]=h-1,g.ptIdx+=4,g.cellIdx+=2};const r=new Float64Array(3);t.updatePolyDataForLabels=()=>{const i=t.getTickStrings().length+e.barSegments.length,s=i*4,u=i*2,c=new Float64Array(s*3),l=new Uint16Array(u*4),g=new Float32Array(s*2),v={ptIdx:0,cellIdx:0,polys:l,points:c,tcoords:g},h=e.vertical?0:1,y=e.vertical?1:0;r[2]=-.99;const T=e.vertical?["right","middle"]:["middle","bottom"];let E=[0,1];const S=[0,0];e.vertical?(S[0]=-e.tickLabelPixelOffset,e.topTitle?(r[0]=e.boxPosition[0]+.5*e.boxSize[0],r[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],v)):(r[0]=e.barPosition[0]+e.barSize[0],r[1]=e.barPosition[1]+.5*e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","top"],"vertical",[e.axisTitlePixelOffset,0],v)),E=[-1,0]):(S[1]=e.tickLabelPixelOffset,r[0]=e.barPosition[0]+.5*e.barSize[0],r[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],v)),r[h]=e.barPosition[h]+(.5*E[h]+.5)*e.barSize[h],r[y]=e.barPosition[y]+e.barSize[y]*.5;let x=null;for(let _=0;_<e.barSegments.length;_++){const N=e.barSegments[_];N.title==="ticks"?x=N:(r[y]=e.barPosition[y]+.5*e.barSize[y]*(N.corners[2][y]+N.corners[0][y]),t.createPolyDataForOneLabel(N.title,r,T,"horizontal",S,v))}const m=e.barPosition[y]+e.barSize[y]*x.corners[0][y],M=e.barSize[y]*(x.corners[2][y]-x.corners[0][y]),R=t.getTicks(),w=t.getTickStrings(),D=t.getTickPositions();for(let _=0;_<R.length;_++){const N=D?D[_]:(R[_]-e.lastTickBounds[0])/(e.lastTickBounds[1]-e.lastTickBounds[0]);r[y]=m+M*N,t.createPolyDataForOneLabel(w[_],r,T,"horizontal",S,v)}const O=Fe.newInstance({numberOfComponents:2,values:g,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(O),e.tmPolyData.getPoints().setData(c,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(l,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updatePolyDataForBarSegments=()=>{const i=e.renderable.getScalarsToColors();let s=0;e.renderable.getDrawNanAnnotation()&&i.getNanColor()&&(s+=1),e.renderable.getDrawBelowRangeSwatch()&&i.getUseBelowRangeColor?.()&&(s+=1),e.renderable.getDrawAboveRangeSwatch()&&i.getUseAboveRangeColor?.()&&(s+=1);const u=4*(1+s),c=u;let l=1;i.getVectorMode()===YO.COMPONENT&&(l=i.getVectorComponent()+1);const g=new Float64Array(u*3),v=new Uint16Array(c*5),h=new Float32Array(u*l);let y=0,T=0;for(let S=0;S<e.barSegments.length;S++){const x=e.barSegments[S];for(let m=0;m<4;m++){r[0]=e.barPosition[0]+x.corners[m][0]*e.barSize[0],r[1]=e.barPosition[1]+x.corners[m][1]*e.barSize[1],g[y*3]=(.5*r[0]+.5)*e.lastSize[0],g[y*3+1]=(.5*r[1]+.5)*e.lastSize[1],g[y*3+2]=r[2];for(let M=0;M<l;M++)h[y*l+M]=e.lastTickBounds[0]+x.scalars[m]*(e.lastTickBounds[1]-e.lastTickBounds[0]);y++}v[T*5]=4,v[T*5+1]=y-4,v[T*5+2]=y-3,v[T*5+3]=y-2,v[T*5+4]=y-1,T++}const E=Fe.newInstance({numberOfComponents:l,values:h,name:"Scalars"});e.polyData.getPointData().setScalars(E),e.polyData.getPoints().setData(g,3),e.polyData.getPoints().modified(),e.polyData.getPolys().setData(v,1),e.polyData.getPolys().modified(),e.polyData.modified()}}const QO=B.newInstance(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},n),B.obj(t,e),B.setGet(t,e,["axisTitlePixelOffset","tickLabelPixelOffset","renderable","topTitle","ticks","tickStrings","tickPositions"]),B.get(t,e,["lastSize","lastAspectRatio","lastTickBounds","axisTextStyle","tickTextStyle","barActor","tmActor"]),B.getArray(t,e,["boxPosition","boxSize"]),B.setArray(t,e,["boxPosition","boxSize"],2),e.forceUpdate=!1,e.lastRebuildTime={},B.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.barMapper=wr.newInstance(),e.barMapper.setInterpolateScalarsBeforeMapping(!0),e.barMapper.setUseLookupTableScalarRange(!0),e.polyData=zt.newInstance(),e.barMapper.setInputData(e.polyData),e.barActor=Rr.newInstance(),e.barActor.setMapper(e.barMapper),e.tmPolyData=zt.newInstance(),e.tmMapper=wr.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmTexture=bs.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),e.tmActor=Rr.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),e.tmActor.addTexture(e.tmTexture),e.barPosition=[0,0],e.barSize=[0,0],e.boxPosition=[.88,-.92],e.boxSize=[.1,1.1],e.lastTickBounds=[],qO(t,e)},"vtkScalarBarActorHelper");function ZO(t,e){e.classHierarchy.push("vtkScalarBarActor"),t.setTickTextStyle=n=>{e.tickTextStyle={...e.tickTextStyle,...n},t.modified()},t.setAxisTextStyle=n=>{e.axisTextStyle={...e.axisTextStyle,...n},t.modified()},t.resetAutoLayoutToDefault=()=>{t.setAutoLayout(Rp(t,e))},t.resetGenerateTicksToDefault=()=>{t.setGenerateTicks(wp())}}function JO(t){return{automated:!0,autoLayout:null,axisLabel:"Scalar Value",barPosition:[0,0],barSize:[0,0],boxPosition:[.88,-.92],boxSize:[.1,1.1],scalarToColors:null,axisTitlePixelOffset:36,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:14,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"},generateTicks:null,drawNanAnnotation:!0,drawBelowRangeSwatch:!0,drawAboveRangeSwatch:!0,...t}}function Mp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,JO(n)),e.autoLayout||(e.autoLayout=Rp(t,e)),e.generateTicks||(e.generateTicks=wp()),Rr.extend(t,e,n),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),B.setGet(t,e,["automated","autoLayout","axisTitlePixelOffset","axisLabel","scalarsToColors","tickLabelPixelOffset","generateTicks","drawNanAnnotation","drawBelowRangeSwatch","drawAboveRangeSwatch"]),B.get(t,e,["axisTextStyle","tickTextStyle"]),B.getArray(t,e,["barPosition","barSize","boxPosition","boxSize"]),B.setArray(t,e,["barPosition","barSize","boxPosition","boxSize"],2),ZO(t,e)}const PO=B.newInstance(Mp,"vtkScalarBarActor");var Op={newInstance:PO,extend:Mp,newScalarBarActorHelper:QO};function IO(t,e){e.classHierarchy.push("vtkOpenGLScalarBarActor"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.scalarBarActorHelper.getBarActor()),t.addMissingNode(e.scalarBarActorHelper.getTmActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const i=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,s=e._openGLRenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([s.usize,s.vsize],i,e._openGLRenderWindow.getRenderable())}}}const eD={};function tD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,eD,n),st.extend(t,e,n),e.scalarBarActorHelper=Op.newScalarBarActorHelper(),IO(t,e)}const nD=Ye(tD,"vtkOpenGLScalarBarActor");Nn("vtkScalarBarActor",nD);const{vtkErrorMacro:_8}=Pn;function rD(t,e){e.classHierarchy.push("vtkOpenGLSkybox"),t.buildPass=n=>{if(n){e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const r=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(r.getActiveCamera())}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementOpaqueActorCount()}},t.opaquePass=(n,r)=>{if(n&&!e._openGLRenderer.getSelector()){t.updateBufferObjects(),e.context.depthMask(!0),e._openGLRenderWindow.getShaderCache().readyShaderProgram(e.tris.getProgram()),e.openGLTexture.render(e._openGLRenderWindow);const i=e.openGLTexture.getTextureUnit();e.tris.getProgram().setUniformi("sbtexture",i);const s=e._openGLRenderer.getRenderable(),u=e.openGLCamera.getKeyMatrices(s),c=new Float64Array(16);if(tn(c,u.wcpc),e.tris.getProgram().setUniformMatrix("IMCPCMatrix",c),e.lastFormat==="box"){const l=s.getActiveCamera().getPosition();e.tris.getProgram().setUniform3f("camPos",l[0],l[1],l[2])}e.tris.getVAO().bind(),e.context.drawArrays(e.context.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.openGLTexture.deactivate()}},t.updateBufferObjects=()=>{if(!e.tris.getCABO().getElementCount()){const r=new Float32Array(12);for(let c=0;c<4;c++)r[c*3]=c%2*2-1,r[c*3+1]=c>1?1:-1,r[c*3+2]=1;const i=Fe.newInstance({numberOfComponents:3,values:r});i.setName("points");const s=new Uint16Array(8);s[0]=3,s[1]=0,s[2]=1,s[3]=3,s[4]=3,s[5]=0,s[6]=3,s[7]=2;const u=Fe.newInstance({numberOfComponents:1,values:s});e.tris.getCABO().createVBO(u,"polys",Vn.SURFACE,{points:i,cellOffset:0})}e.renderable.getFormat()!==e.lastFormat&&(e.lastFormat=e.renderable.getFormat(),e.lastFormat==="box"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec3 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = wpos.xyz/wpos.w;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec3 TexCoords;
             uniform samplerCube sbtexture;
             uniform vec3 camPos;
             void main () {
               // skybox looks from inside out
               // which means we have to adjust
               // our tcoords. Otherwise text would
               // be flipped
               vec3 tc = normalize(TexCoords - camPos);
               if (abs(tc.z) < max(abs(tc.x),abs(tc.y)))
               {
                 tc = vec3(1.0, 1.0, -1.0) * tc;
               }
               else
               {
                 tc = vec3(-1.0, 1.0, 1.0) * tc;
               }
               gl_FragData[0] = textureCube(sbtexture, tc);
             }`,"")),e.lastFormat==="background"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec2 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = vec2(vertexMC.x, vertexMC.y)*0.5 + 0.5;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec2 TexCoords;
             uniform sampler2D sbtexture;
             void main () {
               gl_FragData[0] = texture2D(sbtexture, TexCoords);
             }`,"")),e.tris.getShaderSourceTime().modified(),e.tris.getVAO().bind(),e.tris.getVAO().addAttributeArray(e.tris.getProgram(),e.tris.getCABO(),"vertexMC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||_8("Error setting vertexMC in shader VAO."));const n=e.renderable.getTextures();n.length||_8("vtkSkybox requires a texture map"),e.openGLTexture.getRenderable()!==n[0]&&(e.openGLTexture.releaseGraphicsResources(e._openGLRenderWindow),e.openGLTexture.setRenderable(n[0]))}}const aD={context:null};function iD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,aD,n),st.extend(t,e,n),e.openGLTexture=Mr.newInstance(),e.tris=hi.newInstance(),e.keyMatrixTime={},Dt(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:ya(new Float64Array(9)),mcwc:Oe(new Float64Array(16))},St(t,e,["context"]),Kt(t,e,["activeTextures"]),rD(t,e)}const sD=Ye(iD);Nn("vtkSkybox",sD);const{vtkDebugMacro:oD}=Pn;function uD(t,e){e.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),t.opaquePass=(n,r)=>{e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow");const i=e._openGLRenderer.getAspectRatio(),s=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,u=e._openGLRenderer.getTiledSizeAndOrigin();let c=null;if(e.renderable.getUseZValues()){const l=r.getZBufferTexture(),g=Math.floor(l.getWidth()),v=Math.floor(l.getHeight()),h=e._openGLRenderWindow.getContext();l.bind();const y=r.getFramebuffer();y?y.saveCurrentBindingsAndBuffers():oD("No framebuffer to save/restore");const T=h.createFramebuffer();h.bindFramebuffer(h.FRAMEBUFFER,T),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,l.getHandle(),0),h.checkFramebufferStatus(h.FRAMEBUFFER)===h.FRAMEBUFFER_COMPLETE&&(c=new Uint8Array(g*v*4),h.viewport(0,0,g,v),h.readPixels(0,0,g,v,h.RGBA,h.UNSIGNED_BYTE,c)),y&&y.restorePreviousBindingsAndBuffers(),h.deleteFramebuffer(T)}e.renderable.invokeCallback(e.renderable.getInputData(),s,i,u,c)},t.queryPass=(n,r)=>{n&&e.renderable.getUseZValues()&&r.requestDepth()}}const cD={};function fD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,cD,n),st.extend(t,e,n),uD(t,e)}const lD=Ye(fD,"vtkOpenGLPixelSpaceCallbackMapper");Nn("vtkPixelSpaceCallbackMapper",lD);const Dp=Object.create(null);function In(t,e){Dp[t]=e}function gD(t,e){e.classHierarchy.push("vtkWebGPUViewNodeFactory")}const hD={};function Lp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,hD,n),e.overrides=Dp,c7.extend(t,e,n),gD(t,e)}const pD=B.newInstance(Lp,"vtkWebGPUViewNodeFactory");var vD={newInstance:pD,extend:Lp};function yD(t,e){e.classHierarchy.push("vtkWebGPUCamera"),t.getProjectionMatrix=(n,r,i,s)=>{if(Oe(n),e.renderable.getParallelProjection()){const u=e.renderable.getParallelScale(),c=u*r,l=u,g=(s[0]-1)*c,v=(s[0]+1)*c,h=(s[1]-1)*l,y=(s[1]+1)*l,T=1/(v-g),E=1/(y-h);n[0]=2*T,n[5]=2*E,n[10]=1/(i[1]-i[0]),n[12]=(v+g)*T,n[13]=(y+h)*E,n[14]=i[1]/(i[1]-i[0])}else{const u=Math.tan(Math.PI*e.renderable.getViewAngle()/360);let c,l;e.renderable.getUseHorizontalViewAngle()===!0?(c=i[0]*u,l=i[0]*u/r):(c=i[0]*u*r,l=i[0]*u);const g=(s[0]-1)*c,v=(s[0]+1)*c,h=(s[1]-1)*l,y=(s[1]+1)*l;n[0]=2*i[0]/(v-g),n[5]=2*i[0]/(y-h),n[12]=(g+v)/(v-g),n[13]=(h+y)/(y-h),n[10]=0,n[14]=i[0],n[11]=-1,n[15]=0}},t.convertToOpenGLDepth=n=>{if(e.renderable.getParallelProjection())return 1-n;const r=e.renderable.getClippingRangeByReference();let i=-r[0]/n;return i=(r[0]+r[1])/(r[1]-r[0])+2*r[0]*r[1]/(i*(r[1]-r[0])),.5*i+.5},t.getKeyMatrices=n=>{const r=n.getRenderable(),i=n.getParent();if(Math.max(i.getMTime(),t.getMTime(),r.getMTime(),e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatrixTime.getMTime()){const s=e.renderable.getViewMatrix();Ft(e.keyMatrices.normalMatrix,s),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,tn(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),Qe(e.keyMatrices.wcvc,s);const u=n.getStabilizedCenterByReference();vt(e.keyMatrices.scvc,e.keyMatrices.wcvc,u);const c=n.getAspectRatio(),l=e.renderable.getClippingRangeByReference();t.getProjectionMatrix(e.keyMatrices.vcpc,c,l,e.renderable.getWindowCenterByReference()),wt(e.keyMatrices.scpc,e.keyMatrices.vcpc,e.keyMatrices.scvc),tn(e.keyMatrices.pcsc,e.keyMatrices.scpc),e.keyMatrixTime.modified()}return e.keyMatrices}}const dD={keyMatrixTime:null,keyMatrices:null};function TD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dD,n),st.extend(t,e,n),e.keyMatrixTime={},B.obj(e.keyMatrixTime),e.keyMatrices={normalMatrix:new Float64Array(16),vcpc:new Float64Array(16),pcsc:new Float64Array(16),wcvc:new Float64Array(16),scpc:new Float64Array(16),scvc:new Float64Array(16)},B.setGet(t,e,["keyMatrixTime"]),yD(t,e)}const SD=B.newInstance(TD);In("vtkCamera",SD);function CD(t,e){e.classHierarchy.push("vtkWebGPUBindGroup"),t.setBindables=n=>{if(e.bindables.length===n.length){let r=!0;for(let i=0;i<e.bindables.length;i++)e.bindables[i]!==n[i]&&(r=!1);if(r)return}e.bindables=n,t.modified()},t.getBindGroupLayout=n=>{const r=[];for(let i=0;i<e.bindables.length;i++){const s=e.bindables[i].getBindGroupLayoutEntry();s.binding=i,r.push(s)}return n.getBindGroupLayout({entries:r})},t.getBindGroup=n=>{let r=t.getMTime();for(let s=0;s<e.bindables.length;s++){const u=e.bindables[s].getBindGroupTime().getMTime();r=u>r?u:r}if(r<e.bindGroupTime.getMTime())return e.bindGroup;const i=[];for(let s=0;s<e.bindables.length;s++){const u=e.bindables[s].getBindGroupEntry();u.binding=s,i.push(u)}return e.bindGroup=n.getHandle().createBindGroup({layout:t.getBindGroupLayout(n),entries:i,label:e.label}),e.bindGroupTime.modified(),e.bindGroup},t.getShaderCode=n=>{const r=[],i=n.getBindGroupLayoutCount(e.label);for(let s=0;s<e.bindables.length;s++)r.push(e.bindables[s].getShaderCode(s,i));return r.join(`
`)}}const xD={device:null,handle:null,label:null};function Bp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,xD,n),B.obj(t,e),e.bindables=[],e.bindGroupTime={},B.obj(e.bindGroupTime,{mtime:0}),B.get(t,e,["bindGroupTime","handle","sizeInBytes","usage"]),B.setGet(t,e,["label","device","arrayInformation"]),CD(t,e)}const ED=B.newInstance(Bp);var Vp={newInstance:ED,extend:Bp};function mD(t,e){e.classHierarchy.push("vtkWebGPUShaderModule"),t.initialize=(n,r)=>{e.device=n,e.handle=e.device.getHandle().createShaderModule({code:r.getCode()})}}const RD={device:null,handle:null};function Np(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,RD,n),B.obj(t,e),B.get(t,e,["lastCameraMTime"]),B.setGet(t,e,["device","handle"]),mD(t,e)}const wD=B.newInstance(Np,"vtkWebGPUShaderModule");var MD={newInstance:wD,extend:Np};function OD(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const i=Array.isArray(n)?n.join(`
`):n;let s=!1;t.search(e)!==-1&&(s=!0);let u="";r&&(u="g");const c=new RegExp(e,u),l=t.replace(c,i);return{replace:s,result:l}}function DD(t,e){e.classHierarchy.push("vtkWebGPUShaderCache"),t.getShaderModule=n=>{const r=n.getType(),i=n.getHash(),s=e._shaderModules.keys();for(let c=0;c<s.length;c++){const l=s[c];if(l.getHash()===i&&l.getType()===r)return e._shaderModules.get(l)}const u=MD.newInstance();return u.initialize(e.device,n),e._shaderModules.set(n,u),u}}const LD={shaderModules:null,device:null,window:null};function _p(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,LD,n),e._shaderModules=new Map,B.obj(t,e),B.setGet(t,e,["device","window"]),DD(t,e)}const BD=B.newInstance(_p,"vtkWebGPUShaderCache");var Te={newInstance:BD,extend:_p,substitute:OD};function VD(t,e){e.classHierarchy.push("vtkWebGPUPipeline"),t.getShaderDescriptions=()=>e.shaderDescriptions,t.initialize=(n,r)=>{e.pipelineDescription=e.renderEncoder.getPipelineSettings(),e.pipelineDescription.primitive.topology=e.topology,e.pipelineDescription.vertex=e.vertexState,e.pipelineDescription.label=r;const i=[];for(let s=0;s<e.layouts.length;s++)i.push(e.layouts[s].layout);e.pipelineLayout=n.getHandle().createPipelineLayout({bindGroupLayouts:i}),e.pipelineDescription.layout=e.pipelineLayout;for(let s=0;s<e.shaderDescriptions.length;s++){const u=e.shaderDescriptions[s],c=n.getShaderModule(u);u.getType()==="vertex"&&(e.pipelineDescription.vertex.module=c.getHandle(),e.pipelineDescription.vertex.entryPoint="main"),u.getType()==="fragment"&&(e.pipelineDescription.fragment.module=c.getHandle(),e.pipelineDescription.fragment.entryPoint="main")}e.handle=n.getHandle().createRenderPipeline(e.pipelineDescription)},t.getShaderDescription=n=>{for(let r=0;r<e.shaderDescriptions.length;r++)if(e.shaderDescriptions[r].getType()===n)return e.shaderDescriptions[r];return null},t.addBindGroupLayout=n=>{n&&e.layouts.push({layout:n.getBindGroupLayout(e.device),label:n.getLabel()})},t.getBindGroupLayout=n=>e.layouts[n].layout,t.getBindGroupLayoutCount=n=>{for(let r=0;r<e.layouts.length;r++)if(e.layouts[r].label===n)return r;return 0},t.bindVertexInput=(n,r)=>{r.bindBuffers(n)}}const ND={handle:null,layouts:null,renderEncoder:null,shaderDescriptions:null,vertexState:null,topology:null,pipelineDescription:null};function Up(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ND,n),Dt(t,e),e.layouts=[],e.shaderDescriptions=[],Kt(t,e,["handle","pipelineDescription"]),St(t,e,["device","renderEncoder","topology","vertexState"]),VD(t,e)}const _D=Ye(Up,"vtkWebGPUPipeline");var UD={newInstance:_D,extend:Up};function GD(t,e){e.classHierarchy.push("vtkWebGPUShaderDescription"),t.hasOutput=n=>e.outputNames.includes(n),t.addOutput=function(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;e.outputTypes.push(n),e.outputNames.push(r),e.outputInterpolations.push(i)},t.addBuiltinOutput=(n,r)=>{e.builtinOutputTypes.push(n),e.builtinOutputNames.push(r)},t.addBuiltinInput=(n,r)=>{e.builtinInputTypes.push(n),e.builtinInputNames.push(r)},t.replaceShaderCode=(n,r)=>{const i=[];let s=[];if(r&&i.push(r.getShaderCode()),n||e.builtinInputNames.length){const u=[];if(u.push(`struct ${e.type}Input
{`),n){const c=n.getOutputNamesByReference(),l=n.getOutputTypesByReference(),g=n.getOutputInterpolationsByReference();for(let v=0;v<c.length;v++)g[v]!==void 0?u.push(`  @location(${v}) @interpolate(${g[v]}) ${c[v]} : ${l[v]},`):u.push(`  @location(${v}) ${c[v]} : ${l[v]},`)}for(let c=0;c<e.builtinInputNames.length;c++)u.push(`  ${e.builtinInputNames[c]} : ${e.builtinInputTypes[c]},`);u.length>1&&(u.push("};"),s=u,i[i.length-1]+=",",i.push(`input: ${e.type}Input`))}if(i.length&&(e.code=Te.substitute(e.code,"//VTK::IOStructs::Input",i).result),e.outputNames.length+e.builtinOutputNames.length){const u=[`struct ${e.type}Output
{`];for(let c=0;c<e.outputNames.length;c++)e.outputInterpolations[c]!==void 0?u.push(`  @location(${c}) @interpolate(${e.outputInterpolations[c]}) ${e.outputNames[c]} : ${e.outputTypes[c]},`):u.push(`  @location(${c}) ${e.outputNames[c]} : ${e.outputTypes[c]},`);for(let c=0;c<e.builtinOutputNames.length;c++)u.push(`  ${e.builtinOutputNames[c]} : ${e.builtinOutputTypes[c]},`);u.push("};"),s=s.concat(u),e.code=Te.substitute(e.code,"//VTK::IOStructs::Output",[`-> ${e.type}Output`]).result}e.code=Te.substitute(e.code,"//VTK::IOStructs::Dec",s).result}}const bD={type:null,hash:null,code:null,outputNames:null,outputTypes:null};function Gp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bD,n),e.outputNames=[],e.outputTypes=[],e.outputInterpolations=[],e.builtinOutputNames=[],e.builtinOutputTypes=[],e.builtinInputNames=[],e.builtinInputTypes=[],B.obj(t,e),B.setGet(t,e,["type","hash","code"]),B.getArray(t,e,["outputTypes","outputNames","outputInterpolations"]),GD(t,e)}const FD=B.newInstance(Gp,"vtkWebGPUShaderDescription");var U8={newInstance:FD,extend:Gp};const G8={r8unorm:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"float"},r8snorm:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"float"},r8uint:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},r8sint:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"sint"},r16uint:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"uint"},r16sint:{numComponents:1,nativeType:Int16Array,stride:2,elementSize:2,sampleType:"sint"},r16float:{numComponents:1,nativeType:Float32Array,stride:2,elementSize:2,sampleType:"float"},rg8unorm:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"float"},rg8snorm:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"float"},rg8uint:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"uint"},rg8sint:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"sint"},r32uint:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:4,sampleType:"uint"},r32sint:{numComponents:1,nativeType:Int32Array,stride:4,elementSize:4,sampleType:"sint"},r32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"unfilterable-float"},rg16uint:{numComponents:2,nativeType:Uint16Array,stride:4,elementSize:2,sampleType:"uint"},rg16sint:{numComponents:2,nativeType:Int16Array,stride:4,elementSize:2,sampleType:"sint"},rg16float:{numComponents:2,nativeType:Float32Array,stride:4,elementSize:2,sampleType:"float"},rgba8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"rgba8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgba8snorm:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"float"},rgba8uint:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"uint"},rgba8sint:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"sint"},bgra8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"bgra8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgb9e5ufloat:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rgb10a2unorm:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rg11b10ufloat:{numComponents:4,nativeType:Float32Array,stride:4,sampleType:"float"},rg32uint:{numComponents:2,nativeType:Uint32Array,stride:8,elementSize:4,sampleType:"uint"},rg32sint:{numComponents:2,nativeType:Int32Array,stride:8,elementSize:4,sampleType:"sint"},rg32float:{numComponents:2,nativeType:Float32Array,stride:8,elementSize:4,sampleType:"unfilterable-float"},rgba16uint:{numComponents:4,nativeType:Uint16Array,stride:8,elementSize:2,sampleType:"uint"},rgba16sint:{numComponents:4,nativeType:Int16Array,stride:8,elementSize:2,sampleType:"sint"},rgba16float:{numComponents:4,nativeType:Float32Array,stride:8,elementSize:2,sampleType:"float"},rgba32uint:{numComponents:4,nativeType:Uint32Array,stride:16,elementSize:4,sampleType:"uint"},rgba32sint:{numComponents:4,nativeType:Int32Array,stride:16,elementSize:4,sampleType:"sint"},rgba32float:{numComponents:4,nativeType:Float32Array,stride:16,elementSize:4,sampleType:"unfilterable-float"},stencil8:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},depth16unorm:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"depth"},depth24plus:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:3,sampleType:"depth"},"depth24plus-stencil8":{numComponents:2,nativeType:Uint32Array,stride:4,sampleType:"mixed"},depth32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"depth"}};function zD(t){return!t||t.length<6?0:t in G8?G8[t]:(xe(`unknown format ${t}`),null)}function kD(t){if(!t||t.length<5)return 0;let e=1;t[t.length-2]==="x"&&(e=Number(t[t.length-1]));const n=e===1?t.length-1:t.length-3,r=Number(t[n]);if(Number.isNaN(r))return xe(`unknown format ${t}`),0;const i=5-r/2;return e*i}function HD(t){if(!t||t.length<5)return 0;let e=1;return t[t.length-2]==="x"&&(e=Number(t[t.length-1])),e}function $D(t){if(!t||t.length<5)return 0;let e;if(t[0]==="f")e="Float";else if(t[0]==="s")e="Int";else if(t[0]==="u")e="Uint";else{xe(`unknown format ${t}`);return}const n=t.split("x")[0],r=Number(n[n.length-1]);if(Number.isNaN(r)){xe(`unknown format ${t}`);return}return e+=8*(5-r/2),e+="Array",e}function AD(t){let e;if(t[0]==="f"||t[1]==="n")e="f32";else if(t[0]==="s"&&t[1]==="i")e="i32";else if(t[0]==="u"&&t[1]==="i")e="u32";else{xe(`unknown format ${t}`);return}let n=1;return t[t.length-2]==="x"&&(n=Number(t[t.length-1])),n===4?`vec4<${e}>`:n===3?`vec3<${e}>`:n===2?`vec2<${e}>`:e}function WD(t){if(!t)return 0;let e=1;return t.substring(0,3)==="vec"?e=Number(t[3]):t.substring(0,3)==="mat"&&(e=t[3]*t[5]),e*4}function jD(t){if(t){if(t.includes("f32"))return"Float32Array";if(t.includes("i32"))return"Int32Array";if(t.includes("u32"))return"Uint32Array";xe(`unknown format ${t}`)}}var Mt={getDetailsFromTextureFormat:zD,getByteStrideFromBufferFormat:kD,getNumberOfComponentsFromBufferFormat:HD,getNativeTypeFromBufferFormat:$D,getShaderTypeFromBufferFormat:AD,getByteStrideFromShaderFormat:WD,getNativeTypeFromShaderFormat:jD};function KD(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!e.includes(t[n]))return!1;return!0}function XD(t,e){e.classHierarchy.push("vtkWebGPUVertexInput"),t.addBuffer=function(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"vertex",s=r;Array.isArray(s)||(s=[s]);for(let u=0;u<e.inputs.length;u++)if(KD(e.inputs[u].names,s)){if(e.inputs[u].buffer===n)return;e.inputs[u].buffer=n;return}e.inputs.push({buffer:n,stepMode:i,names:s}),e.inputs=e.inputs.sort((u,c)=>u.names[0]<c.names[0]?-1:u.names[0]>c.names[0]?1:0)},t.removeBufferIfPresent=n=>{for(let r=0;r<e.inputs.length;r++)e.inputs[r].names.includes(n)&&e.inputs.splice(r,1)},t.getBuffer=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return e.inputs[r].buffer;return null},t.hasAttribute=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return!0;return!1},t.getAttributeTime=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return e.inputs[r].buffer.getSourceTime();return 0},t.getShaderCode=()=>{let n="",r=0;for(let i=0;i<e.inputs.length;i++)for(let s=0;s<e.inputs[i].names.length;s++){const u=e.inputs[i].buffer.getArrayInformation()[s],c=Mt.getShaderTypeFromBufferFormat(u.format);r>0&&(n+=`,
`),n=`${n}  @location(${r}) ${e.inputs[i].names[s]} : ${c}`,r++}return n},t.getVertexInputInformation=()=>{const n={};if(e.inputs.length){const r=[];let i=0;for(let s=0;s<e.inputs.length;s++){const u=e.inputs[s].buffer,c={arrayStride:u.getStrideInBytes(),stepMode:e.inputs[s].stepMode,attributes:[]},l=u.getArrayInformation();for(let g=0;g<e.inputs[s].names.length;g++)c.attributes.push({shaderLocation:i,offset:l[g].offset,format:l[g].format}),i++;r.push(c)}n.buffers=r}return n},t.bindBuffers=n=>{for(let r=0;r<e.inputs.length;r++)n.setVertexBuffer(r,e.inputs[r].buffer.getHandle());e.indexBuffer&&n.setIndexBuffer(e.indexBuffer.getHandle(),e.indexBuffer.getArrayInformation()[0].format)},t.getReady=()=>{},t.releaseGraphicsResources=()=>{e.created&&(e.inputs=[],e.bindingDescriptions=[],e.attributeDescriptions=[])}}const YD={inputs:null,bindingDescriptions:!1,attributeDescriptions:null,indexBuffer:null};function bp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,YD,n),Dt(t,e),e.bindingDescriptions=[],e.attributeDescriptions=[],e.inputs=[],St(t,e,["created","device","handle","indexBuffer"]),XD(t,e)}const qD=Ye(bp,"vtkWebGPUVertexInput");var QD={newInstance:qD,extend:bp};const ZD=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@vertex
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : vertexOutput;

  // var vertex: vec4<f32> = vertexBC;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  //VTK::Position::Impl

  return output;
}
`,JD=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::Light::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  // var computedColor:vec4<f32> = vec4<f32>(1.0,0.5,0.5,1.0);

  //VTK::RenderEncoder::Impl
  return output;
}
`;function PD(t,e){e.classHierarchy.push("vtkWebGPUSimpleMapper"),t.generateShaderDescriptions=(n,r,i)=>{const s=U8.newInstance({type:"vertex",hash:n,code:e.vertexShaderTemplate}),u=U8.newInstance({type:"fragment",hash:n,code:e.fragmentShaderTemplate}),c=r.getShaderDescriptions();c.push(s),c.push(u);const l=e.vertexShaderTemplate+e.fragmentShaderTemplate,g=new RegExp("//VTK::[^:]*::","g"),h=l.match(g).filter((y,T,E)=>E.indexOf(y)===T).map(y=>`replaceShader${y.substring(7,y.length-2)}`);for(let y=0;y<h.length;y++){const T=h[y];T!=="replaceShaderIOStructs"&&e.shaderReplacements.has(T)&&e.shaderReplacements.get(T)(n,r,i)}t.replaceShaderIOStructs(n,r,i)},t.replaceShaderIOStructs=(n,r,i)=>{const s=r.getShaderDescription("vertex");s.replaceShaderCode(null,i),r.getShaderDescription("fragment").replaceShaderCode(s)},t.replaceShaderRenderEncoder=(n,r,i)=>{e.renderEncoder.replaceShaderCode(r)},e.shaderReplacements.set("replaceShaderRenderEncoder",t.replaceShaderRenderEncoder),t.replaceShaderRenderer=(n,r,i)=>{if(!e.WebGPURenderer)return;const s=e.WebGPURenderer.getBindGroup().getShaderCode(r),u=r.getShaderDescription("vertex");let c=u.getCode();c=Te.substitute(c,"//VTK::Renderer::Dec",[s]).result,u.setCode(c);const l=r.getShaderDescription("fragment");c=l.getCode(),c=Te.substitute(c,"//VTK::Renderer::Dec",[s]).result,l.setCode(c)},e.shaderReplacements.set("replaceShaderRenderer",t.replaceShaderRenderer),t.replaceShaderMapper=(n,r,i)=>{const s=e.bindGroup.getShaderCode(r),u=r.getShaderDescription("vertex");let c=u.getCode();c=Te.substitute(c,"//VTK::Mapper::Dec",[s]).result,u.setCode(c);const l=r.getShaderDescription("fragment");l.addBuiltinInput("bool","@builtin(front_facing) frontFacing"),c=l.getCode(),c=Te.substitute(c,"//VTK::Mapper::Dec",[s]).result,l.setCode(c)},e.shaderReplacements.set("replaceShaderMapper",t.replaceShaderMapper),t.replaceShaderPosition=(n,r,i)=>{const s=r.getShaderDescription("vertex");s.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let u=s.getCode();u=Te.substitute(u,"//VTK::Position::Impl",["    output.Position = rendererUBO.SCPCMatrix*vertexBC;"]).result,s.setCode(u)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderTCoord=(n,r,i)=>{r.getShaderDescription("vertex").addOutput("vec2<f32>","tcoordVS")},e.shaderReplacements.set("replaceShaderTCoord",t.replaceShaderTCoord),t.addTextureView=n=>{e.textureViews.includes(n)||e.textureViews.push(n)},t.prepareToDraw=n=>{e.renderEncoder=n,t.updateInput(),t.updateBuffers(),t.updateBindings(),t.updatePipeline()},t.updateInput=()=>{},t.updateBuffers=()=>{},t.updateBindings=()=>{e.bindGroup.setBindables(t.getBindables())},t.computePipelineHash=()=>{},t.registerDrawCallback=n=>{n.registerDrawCallback(e.pipeline,t.draw)},t.prepareAndDraw=n=>{t.prepareToDraw(n),n.setPipeline(e.pipeline),t.draw(n)},t.draw=n=>{const r=n.getBoundPipeline();n.activateBindGroup(e.bindGroup),e.WebGPURenderer&&e.WebGPURenderer.bindUBO(n),r.bindVertexInput(n,e.vertexInput);const i=e.vertexInput.getIndexBuffer();i?n.drawIndexed(i.getIndexCount(),e.numberOfInstances,0,0,0):n.draw(e.numberOfVertices,e.numberOfInstances,0,0)},t.getBindables=()=>{const n=[...e.additionalBindables];e.UBO&&n.push(e.UBO),e.SSBO&&n.push(e.SSBO);for(let r=0;r<e.textureViews.length;r++){n.push(e.textureViews[r]);const i=e.textureViews[r].getSampler();i&&n.push(i)}return n},t.updatePipeline=()=>{t.computePipelineHash(),e.pipeline=e.device.getPipeline(e.pipelineHash),e.pipeline||(e.pipeline=UD.newInstance(),e.pipeline.setDevice(e.device),e.WebGPURenderer&&e.pipeline.addBindGroupLayout(e.WebGPURenderer.getBindGroup()),e.pipeline.addBindGroupLayout(e.bindGroup),t.generateShaderDescriptions(e.pipelineHash,e.pipeline,e.vertexInput),e.pipeline.setTopology(e.topology),e.pipeline.setRenderEncoder(e.renderEncoder),e.pipeline.setVertexState(e.vertexInput.getVertexInputInformation()),e.device.createPipeline(e.pipelineHash,e.pipeline))}}const ID={additionalBindables:void 0,bindGroup:null,device:null,fragmentShaderTemplate:null,numberOfInstances:1,numberOfVertices:0,pipelineHash:null,shaderReplacements:null,SSBO:null,textureViews:null,topology:"triangle-list",UBO:null,vertexShaderTemplate:null,WebGPURenderer:null};function Fp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ID,n),st.extend(t,e,n),e.textureViews=[],e.vertexInput=QD.newInstance(),e.bindGroup=Vp.newInstance({label:"mapperBG"}),e.additionalBindables=[],e.fragmentShaderTemplate=e.fragmentShaderTemplate||JD,e.vertexShaderTemplate=e.vertexShaderTemplate||ZD,e.shaderReplacements=new Map,B.get(t,e,["pipeline","vertexInput"]),B.setGet(t,e,["additionalBindables","device","fragmentShaderTemplate","interpolate","numberOfInstances","numberOfVertices","pipelineHash","shaderReplacements","SSBO","textureViews","topology","UBO","vertexShaderTemplate","WebGPURenderer"]),PD(t,e)}const eL=B.newInstance(Fp,"vtkWebGPUSimpleMapper");var j2={newInstance:eL,extend:Fp};function tL(t,e){e.classHierarchy.push("vtkWebGPUFullScreenQuad"),t.replaceShaderPosition=(n,r,i)=>{const s=r.getShaderDescription("vertex");s.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),s.addOutput("vec4<f32>","vertexVC");let u=s.getCode();u=Te.substitute(u,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);","output.vertexVC = vec4<f32>(vertexBC, 1);"]).result,s.setCode(u)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.updateBuffers=()=>{const n=e.device.getBufferManager().getFullScreenQuadBuffer();e.vertexInput.addBuffer(n,["vertexBC"]),e.numberOfVertices=6}}const nL={};function zp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,nL,n),j2.extend(t,e,n),tL(t,e)}const rL=B.newInstance(zp,"vtkWebGPUFullScreenQuad");var ii={newInstance:rL,extend:zp};const aL={Verts:0,Lines:1,Triangles:2,Strips:3,LinesFromStrips:4,LinesFromTriangles:5,Points:6,UniformArray:7,PointArray:8,NormalsFromPoints:9,Texture:10,RawVertex:11,Storage:12,Index:13},iL={Start:0,Points:0,Lines:1,Triangles:2,TriangleStrips:3,TriangleEdges:4,TriangleStripEdges:5,End:6};var js={BufferUsage:aL,PrimitiveTypes:iL};const wl=["getMappedRange","mapAsync","unmap"];function sL(t,e,n,r){const i=r.byteLength,s=t.createBuffer({size:i,usage:GPUBufferUsage.COPY_SRC,mappedAtCreation:!0}),u=s.getMappedRange(0,i);new Uint8Array(u).set(new Uint8Array(r)),s.unmap();const c=t.createCommandEncoder();c.copyBufferToBuffer(s,0,e,n,i);const l=c.finish();t.queue.submit([l]),s.destroy()}function oL(t,e){e.classHierarchy.push("vtkWebGPUBuffer"),t.create=(n,r)=>{e.handle=e.device.getHandle().createBuffer({size:n,usage:r,label:e.label}),e.sizeInBytes=n,e.usage=r},t.write=n=>{sL(e.device.getHandle(),e.handle,0,n.buffer)},t.createAndWrite=(n,r)=>{const i=Math.ceil(n.byteLength/4)*4;e.handle=e.device.getHandle().createBuffer({size:i,usage:r,mappedAtCreation:!0,label:e.label}),e.sizeInBytes=i,e.usage=r,new Uint8Array(e.handle.getMappedRange()).set(new Uint8Array(n.buffer)),e.handle.unmap()};for(let n=0;n<wl.length;n++)t[wl[n]]=function(){return e.handle[wl[n]](...arguments)}}const uL={device:null,handle:null,sizeInBytes:0,strideInBytes:0,arrayInformation:null,usage:null,label:null,sourceTime:null};function kp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,uL,n),B.obj(t,e),B.get(t,e,["handle","sizeInBytes","usage"]),B.setGet(t,e,["strideInBytes","device","arrayInformation","label","sourceTime"]),oL(t,e)}const cL=B.newInstance(kp);var si={newInstance:cL,extend:kp,...js};const{Representation:b8}=gi,{PrimitiveTypes:fa}=js;class fL{constructor(){this.keys=new Uint32Array(10),this.values=new Uint32Array(10),this.count=0}clear(){this.count=0}has(e){for(let n=0;n<this.count;n++)if(this.keys[n]===e)return!0}get(e){for(let n=0;n<this.count;n++)if(this.keys[n]===e)return this.values[n]}set(e,n){this.count<9&&(this.keys[this.count]=e,this.values[this.count++]=n)}}function lL(t){switch(t){case fa.Points:return"points";case fa.Lines:return"lines";case fa.Triangles:case fa.TriangleEdges:return"polys";case fa.TriangleStripEdges:case fa.TriangleStrips:return"strips";default:return""}}function mu(t,e,n){let r=t.pointIdToFlatId[e];return r<0&&(r=t.flatId,t.pointIdToFlatId[e]=r,t.flatIdToPointId[t.flatId]=e,t.flatIdToCellId[t.flatId]=n,t.flatId++),r}function gL(t,e,n){const r=t.length;for(let u=0;u<r;u++){let c=t[u];if(n.cellProvokedMap.has(c)){n.ibo[n.iboId++]=n.cellProvokedMap.get(c);for(let l=u+1;l<u+r;l++){c=t[l%r];const g=mu(n,c,e);n.ibo[n.iboId++]=g}return}}for(let u=0;u<r;u++){let c=t[u];if(!n.provokedPointIds[c]){let l=mu(n,c,e);n.provokedPointIds[c]=1,n.cellProvokedMap.set(c,l),n.flatIdToCellId[l]=e,n.ibo[n.iboId++]=l;for(let g=u+1;g<u+r;g++)c=t[g%r],l=mu(n,c,e),n.ibo[n.iboId++]=l;return}}let i=t[0],s=n.flatId;n.cellProvokedMap.set(i,s),n.flatIdToPointId[n.flatId]=i,n.flatIdToCellId[n.flatId]=e,n.flatId++,n.ibo[n.iboId++]=s;for(let u=1;u<r;u++)i=t[u],s=mu(n,i,e),n.ibo[n.iboId++]=s}function hL(t,e,n){const r=t.length;n.iboSize+=r;for(let i=0;i<r;i++){const s=t[i];if(n.cellProvokedMap.has(s))return}for(let i=0;i<r;i++){const s=t[i];if(!n.provokedPointIds[s]){n.provokedPointIds[s]=1,n.cellProvokedMap.set(s,1);return}}n.cellProvokedMap.set(t[0],1),n.extraPoints++}let Cr;const F8=new Uint32Array(1),Mn=new Uint32Array(2),ra=new Uint32Array(3),Ml={anythingToPoints(t,e,n,r,i){for(let s=0;s<t;++s)F8[0]=e[n+s],Cr(F8,r,i)},linesToWireframe(t,e,n,r,i){for(let s=0;s<t-1;++s)Mn[0]=e[n+s],Mn[1]=e[n+s+1],Cr(Mn,r,i)},polysToWireframe(t,e,n,r,i){if(t>2)for(let s=0;s<t;++s)Mn[0]=e[n+s],Mn[1]=e[n+(s+1)%t],Cr(Mn,r,i)},stripsToWireframe(t,e,n,r,i){if(t>2){for(let s=0;s<t-1;++s)Mn[0]=e[n+s],Mn[1]=e[n+s+1],Cr(Mn,r,i);for(let s=0;s<t-2;s++)Mn[0]=e[n+s],Mn[1]=e[n+s+2],Cr(Mn,r,i)}},polysToSurface(t,e,n,r,i){for(let s=0;s<t-2;s++)ra[0]=e[n],ra[1]=e[n+s+1],ra[2]=e[n+s+2],Cr(ra,r,i)},stripsToSurface(t,e,n,r,i){for(let s=0;s<t-2;s++)ra[0]=e[n+s],ra[1]=e[n+s+1+s%2],ra[2]=e[n+s+1+(s+1)%2],Cr(ra,r,i)}};function pL(t,e){e.classHierarchy.push("vtkWebGPUIndexBuffer"),t.buildIndexBuffer=n=>{const r=n.cells,i=n.primitiveType,s=n.representation,u=n.cellOffset,c=r.getData(),l=c.length,g=lL(i),v=n.numberOfPoints,h={provokedPointIds:new Uint8Array(v),extraPoints:0,iboSize:0,flatId:0,iboId:0,cellProvokedMap:new fL};let y=null;s===b8.POINTS||i===fa.Points?y=Ml.anythingToPoints:s===b8.WIREFRAME||i===fa.Lines?y=Ml[`${g}ToWireframe`]:y=Ml[`${g}ToSurface`],Cr=hL;let T=u||0;for(let E=0;E<l;)h.cellProvokedMap.clear(),y(c[E],c,E+1,T,h),E+=c[E]+1,T++;v<=65535?h.flatIdToPointId=new Uint16Array(v+h.extraPoints):h.flatIdToPointId=new Uint32Array(v+h.extraPoints),v+h.extraPoints<36863?h.pointIdToFlatId=new Int16Array(v):h.pointIdToFlatId=new Int32Array(v),v+h.extraPoints<=65535?(h.ibo=new Uint16Array(h.iboSize),n.format="uint16"):(h.ibo=new Uint32Array(h.iboSize),n.format="uint32"),T<=65535?h.flatIdToCellId=new Uint16Array(v+h.extraPoints):h.flatIdToCellId=new Uint32Array(v+h.extraPoints),h.pointIdToFlatId.fill(-1),h.provokedPointIds.fill(0),Cr=gL,T=u||0;for(let E=0;E<l;)h.cellProvokedMap.clear(),y(c[E],c,E+1,T,h),E+=c[E]+1,T++;delete h.provokedPointIds,delete h.pointIdToFlatId,n.nativeArray=h.ibo,e.flatIdToPointId=h.flatIdToPointId,e.flatIdToCellId=h.flatIdToCellId,e.flatSize=h.flatId,e.indexCount=h.iboId}}const vL={flatIdToPointId:null,flatIdToCellId:null,flatSize:0,indexCount:0};function Hp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,vL,n),si.extend(t,e,n),B.setGet(t,e,["flatIdToPointId","flatIdToCellId","flatSize","indexCount"]),pL(t,e)}const yL=B.newInstance(Hp);var dL={newInstance:yL,extend:Hp,...js};const{BufferUsage:aa}=js,{vtkErrorMacro:TL}=Pn,{VtkDataTypes:ja}=Fe,SL={};function CL(t){let e;switch(t.getDataType()){case ja.UNSIGNED_CHAR:e="uint8";break;case ja.FLOAT:e="float32";break;case ja.UNSIGNED_INT:e="uint32";break;case ja.INT:e="sint32";break;case ja.DOUBLE:e="float32";break;case ja.UNSIGNED_SHORT:e="uint16";break;case ja.SHORT:e="sin16";break;default:e="float32";break}switch(t.getNumberOfComponents()){case 2:e+="x2";break;case 3:e.includes("32")||TL(`unsupported x3 type for ${e}`),e+="x3";break;case 4:e+="x4";break}return e}function z8(t,e,n,r,i){const s={},u=t.getFlatSize();if(!u)return s;let c=[0,0,0,0];i.shift&&(i.shift.length?c=i.shift:c.fill(i.shift));let l=[1,1,1,1];i.scale&&(i.scale.length?l=i.scale:l.fill(i.scale));const g=Object.prototype.hasOwnProperty.call(i,"packExtra")?i.packExtra:!1;let v,h=0;const y=n+(g?1:0),T=fi(r,u*y);let E=t.getFlatIdToPointId();i.cellData&&(E=t.getFlatIdToCellId()),n===1?v=function(x){T[h++]=l[0]*e[x]+c[0]}:n===2?v=function(x){T[h++]=l[0]*e[x]+c[0],T[h++]=l[1]*e[x+1]+c[1]}:n===3&&!g?v=function(x){T[h++]=l[0]*e[x]+c[0],T[h++]=l[1]*e[x+1]+c[1],T[h++]=l[2]*e[x+2]+c[2]}:n===3&&g?v=function(x){T[h++]=l[0]*e[x]+c[0],T[h++]=l[1]*e[x+1]+c[1],T[h++]=l[2]*e[x+2]+c[2],T[h++]=l[3]*1+c[3]}:n===4&&(v=function(x){T[h++]=l[0]*e[x]+c[0],T[h++]=l[1]*e[x+1]+c[1],T[h++]=l[2]*e[x+2]+c[2],T[h++]=l[3]*e[x+3]+c[3]});for(let S=0;S<u;S++){const x=n*E[S];v(x)}return s.nativeArray=T,s}function xL(t,e,n,r){const i=[t[r*3]-t[n*3],t[r*3+1]-t[n*3+1],t[r*3+2]-t[n*3+2]],s=[t[e*3]-t[n*3],t[e*3+1]-t[n*3+1],t[e*3+2]-t[n*3+2]],u=[];return jt(i,s,u),pn(u),u}function EL(t,e){const n=e.getData(),r=t.getData();if(!r||!n)return null;const i=new Int8Array(t.getNumberOfCells()*4),s=r.length;let u=0;for(let c=0;c<s;){const l=xL(n,r[c+1],r[c+2],r[c+3]);i[u++]=127*l[0],i[u++]=127*l[1],i[u++]=127*l[2],i[u++]=127,c+=r[c]+1}return i}function mL(t,e){e.classHierarchy.push("vtkWebGPUBufferManager");function n(r){r.dataArray&&!r.nativeArray&&(r.nativeArray=r.dataArray.getData());let i,s;if(r.usage===aa.Index&&(i=dL.newInstance({label:r.label}),i.setDevice(e.device),s=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST,i.buildIndexBuffer(r),i.createAndWrite(r.nativeArray,s),i.setArrayInformation([{format:r.format}])),i||(i=si.newInstance({label:r.label}),i.setDevice(e.device)),r.usage===aa.UniformArray&&(s=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,i.createAndWrite(r.nativeArray,s)),r.usage===aa.Storage&&(s=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,i.createAndWrite(r.nativeArray,s)),r.usage===aa.Texture&&(s=GPUBufferUsage.COPY_SRC,i.createAndWrite(r.nativeArray,s)),r.usage===aa.PointArray){s=GPUBufferUsage.VERTEX;const u=Mt.getNativeTypeFromBufferFormat(r.format),c=z8(r.indexBuffer,r.dataArray.getData(),r.dataArray.getNumberOfComponents(),u,{packExtra:r.packExtra,shift:r.shift,scale:r.scale,cellData:r.cellData,cellOffset:r.cellOffset});i.createAndWrite(c.nativeArray,s),i.setStrideInBytes(Mt.getByteStrideFromBufferFormat(r.format)),i.setArrayInformation([{offset:0,format:r.format,interpolation:r.cellData?"flat":"perspective"}])}if(r.usage===aa.NormalsFromPoints){s=GPUBufferUsage.VERTEX;const u=Mt.getNativeTypeFromBufferFormat(r.format),c=EL(r.cells,r.dataArray),l=z8(r.indexBuffer,c,4,u,{cellData:!0});i.createAndWrite(l.nativeArray,s),i.setStrideInBytes(Mt.getByteStrideFromBufferFormat(r.format)),i.setArrayInformation([{offset:0,format:r.format,interpolation:"flat"}])}return r.usage===aa.RawVertex&&(s=GPUBufferUsage.VERTEX,i.createAndWrite(r.nativeArray,s),i.setStrideInBytes(Mt.getByteStrideFromBufferFormat(r.format)),i.setArrayInformation([{offset:0,format:r.format}])),i.setSourceTime(r.time),i}t.hasBuffer=r=>e.device.hasCachedObject(r),t.getBuffer=r=>r.hash?e.device.getCachedObject(r.hash,n,r):n(r),t.getBufferForPointArray=(r,i)=>{const s=CL(r),u={hash:`${r.getMTime()}I${i.getMTime()}${s}`,usage:aa.PointArray,format:s,dataArray:r,indexBuffer:i};return t.getBuffer(u)},t.getFullScreenQuadBuffer=()=>{if(e.fullScreenQuadBuffer)return e.fullScreenQuadBuffer;e.fullScreenQuadBuffer=si.newInstance(),e.fullScreenQuadBuffer.setDevice(e.device);const r=new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,-1,0,1,1,0,-1,1,0]);return e.fullScreenQuadBuffer.createAndWrite(r,GPUBufferUsage.VERTEX),e.fullScreenQuadBuffer.setStrideInBytes(12),e.fullScreenQuadBuffer.setArrayInformation([{offset:0,format:"float32x3"}]),e.fullScreenQuadBuffer}}const RL={device:null,fullScreenQuadBuffer:null};function $p(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,RL,n),Dt(t,e),St(t,e,["device"]),mL(t,e)}const wL=Ye($p);var s0={newInstance:wL,extend:$p,...SL,...js};const{BufferUsage:ML}=s0,{vtkErrorMacro:Y0}=B;function OL(t,e){e.classHierarchy.push("vtkWebGPUStorageBuffer"),t.addEntry=(n,r)=>{if(e._bufferEntryNames.has(n)){Y0(`entry named ${n} already exists`);return}e._bufferEntryNames.set(n,e.bufferEntries.length);const i=Mt.getByteStrideFromShaderFormat(r);e.bufferEntries.push({name:n,type:r,sizeInBytes:i,offset:e.sizeInBytes,nativeType:Mt.getNativeTypeFromShaderFormat(r)}),e.sizeInBytes+=i},t.send=n=>{if(!e._buffer){const r={nativeArray:e.Float32Array,usage:ML.Storage,label:e.label};e._buffer=n.getBufferManager().getBuffer(r),e.bindGroupTime.modified(),e._sendTime.modified();return}n.getHandle().queue.writeBuffer(e._buffer.getHandle(),0,e.arrayBuffer,0,e.sizeInBytes*e.numberOfInstances),e._sendTime.modified()},t.createView=n=>{n in e||(e.arrayBuffer||(e.arrayBuffer=new ArrayBuffer(e.sizeInBytes*e.numberOfInstances)),e[n]=B.newTypedArray(n,e.arrayBuffer))},t.setValue=(n,r,i)=>{const s=e._bufferEntryNames.get(n);if(s===void 0){Y0(`entry named ${n} not found in UBO`);return}const u=e.bufferEntries[s];t.createView(u.nativeType);const c=e[u.nativeType];c[(u.offset+r*e.sizeInBytes)/c.BYTES_PER_ELEMENT]=i},t.setArray=(n,r,i)=>{const s=e._bufferEntryNames.get(n);if(s===void 0){Y0(`entry named ${n} not found in UBO`);return}const u=e.bufferEntries[s];t.createView(u.nativeType);const c=e[u.nativeType],l=(u.offset+r*e.sizeInBytes)/c.BYTES_PER_ELEMENT;for(let g=0;g<i.length;g++)c[l+g]=i[g]},t.setAllInstancesFromArray=(n,r)=>{const i=e._bufferEntryNames.get(n);if(i===void 0){Y0(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[i];t.createView(s.nativeType);const u=e[s.nativeType],c=r.length/e.numberOfInstances;for(let l=0;l<e.numberOfInstances;l++){const g=(s.offset+l*e.sizeInBytes)/u.BYTES_PER_ELEMENT;for(let v=0;v<c;v++)u[g+v]=r[l*c+v]}},t.setAllInstancesFromArrayColorToFloat=(n,r)=>{const i=e._bufferEntryNames.get(n);if(i===void 0){Y0(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[i];t.createView(s.nativeType);const u=e[s.nativeType],c=r.length/e.numberOfInstances;for(let l=0;l<e.numberOfInstances;l++){const g=(s.offset+l*e.sizeInBytes)/u.BYTES_PER_ELEMENT;for(let v=0;v<c;v++)u[g+v]=r[l*c+v]/255}},t.setAllInstancesFromArray3x3To4x4=(n,r)=>{const i=e._bufferEntryNames.get(n);if(i===void 0){Y0(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[i];t.createView(s.nativeType);const u=e[s.nativeType],c=9;for(let l=0;l<e.numberOfInstances;l++){const g=(s.offset+l*e.sizeInBytes)/u.BYTES_PER_ELEMENT;for(let v=0;v<3;v++)for(let h=0;h<3;h++)u[g+v*4+h]=r[l*c+v*3+h]}},t.getSendTime=()=>e._sendTime.getMTime(),t.getShaderCode=(n,r)=>{const i=[`struct ${e.label}StructEntry
{`];for(let s=0;s<e.bufferEntries.length;s++){const u=e.bufferEntries[s];i.push(`  ${u.name}: ${u.type},`)}return i.push(`
};
struct ${e.label}Struct
{
  values: array<${e.label}StructEntry>,
};
@binding(${n}) @group(${r}) var<storage, read> ${e.label}: ${e.label}Struct;
`),i.join(`
`)},t.getBindGroupEntry=()=>({resource:{buffer:e._buffer.getHandle()}}),t.clearData=()=>{e.numberOfInstances=0,e.sizeInBytes=0,e.bufferEntries=[],e._bufferEntryNames=new Map,e._buffer=null,delete e.arrayBuffer,delete e.Float32Array}}const DL={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,numberOfInstances:1};function Ap(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,DL,n),B.obj(t,e),e._bufferEntryNames=new Map,e.bufferEntries=[],e._sendTime={},B.obj(e._sendTime,{mtime:0}),e.bindGroupTime={},B.obj(e.bindGroupTime,{mtime:0}),e.bindGroupLayoutEntry=e.bindGroupLayoutEntry||{buffer:{type:"read-only-storage"}},B.get(t,e,["bindGroupTime"]),B.setGet(t,e,["device","bindGroupLayoutEntry","label","numberOfInstances","sizeInBytes"]),OL(t,e)}const LL=B.newInstance(Ap,"vtkWebGPUStorageBuffer");var i2={newInstance:LL,extend:Ap};const{BufferUsage:BL}=s0,{vtkErrorMacro:Ol}=B;function VL(t,e){e.classHierarchy.push("vtkWebGPUUniformBuffer"),t.addEntry=(n,r)=>{if(e._bufferEntryNames.has(n)){Ol(`entry named ${n} already exists`);return}e.sortDirty=!0,e._bufferEntryNames.set(n,e.bufferEntries.length),e.bufferEntries.push({name:n,type:r,sizeInBytes:Mt.getByteStrideFromShaderFormat(r),offset:-1,nativeType:Mt.getNativeTypeFromShaderFormat(r),packed:!1})},t.sortBufferEntries=()=>{if(!e.sortDirty)return;let n=0;const r=[];let i=4;for(let s=0;s<e.bufferEntries.length;s++){const u=e.bufferEntries[s];u.sizeInBytes%16===0&&(i=Math.max(16,i)),u.sizeInBytes%8===0&&(i=Math.max(8,i))}for(let s=0;s<e.bufferEntries.length;s++){const u=e.bufferEntries[s];u.packed===!1&&u.sizeInBytes%16===0&&(u.packed=!0,u.offset=n,r.push(u),n+=u.sizeInBytes)}for(let s=0;s<e.bufferEntries.length;s++){const u=e.bufferEntries[s];if(u.packed===!1&&u.sizeInBytes===12)for(let c=0;c<e.bufferEntries.length;c++){const l=e.bufferEntries[c];if(l.packed===!1&&l.sizeInBytes===4){u.packed=!0,u.offset=n,r.push(u),n+=u.sizeInBytes,l.packed=!0,l.offset=n,r.push(l),n+=l.sizeInBytes;break}}}for(let s=0;s<e.bufferEntries.length;s++){const u=e.bufferEntries[s];if(!u.packed&&u.sizeInBytes%8===0)for(let c=s+1;c<e.bufferEntries.length;c++){const l=e.bufferEntries[c];if(!l.packed&&l.sizeInBytes%8===0){u.packed=!0,u.offset=n,r.push(u),n+=u.sizeInBytes,l.packed=!0,l.offset=n,r.push(l),n+=l.sizeInBytes;break}}}for(let s=0;s<e.bufferEntries.length;s++){const u=e.bufferEntries[s];if(!u.packed&&u.sizeInBytes%8===0){let c=!1;for(let l=0;!c&&l<e.bufferEntries.length;l++){const g=e.bufferEntries[l];if(!g.packed&&g.sizeInBytes===4)for(let v=l+1;v<e.bufferEntries.length;v++){const h=e.bufferEntries[v];if(!h.packed&&h.sizeInBytes===4){u.packed=!0,u.offset=n,r.push(u),n+=u.sizeInBytes,g.packed=!0,g.offset=n,r.push(g),n+=g.sizeInBytes,h.packed=!0,h.offset=n,r.push(h),n+=h.sizeInBytes,c=!0;break}}}}}for(let s=0;s<e.bufferEntries.length;s++){const u=e.bufferEntries[s];!u.packed&&u.sizeInBytes>4&&(u.packed=!0,u.offset=n,r.push(u),n+=u.sizeInBytes)}for(let s=0;s<e.bufferEntries.length;s++){const u=e.bufferEntries[s];u.packed||(u.packed=!0,u.offset=n,r.push(u),n+=u.sizeInBytes)}e.bufferEntries=r,e._bufferEntryNames.clear();for(let s=0;s<e.bufferEntries.length;s++)e._bufferEntryNames.set(e.bufferEntries[s].name,s);e.sizeInBytes=n,e.sizeInBytes=i*Math.ceil(e.sizeInBytes/i),e.sortDirty=!1},t.sendIfNeeded=n=>{if(!e.UBO){const r={nativeArray:e.Float32Array,usage:BL.UniformArray,label:e.label};e.UBO=n.getBufferManager().getBuffer(r),e.bindGroupTime.modified(),e.sendDirty=!1}e.sendDirty&&(n.getHandle().queue.writeBuffer(e.UBO.getHandle(),0,e.arrayBuffer,0,e.sizeInBytes),e.sendDirty=!1),e.sendTime.modified()},t.createView=n=>{n in e||(e.arrayBuffer||(e.arrayBuffer=new ArrayBuffer(e.sizeInBytes)),e[n]=B.newTypedArray(n,e.arrayBuffer))},t.setValue=(n,r)=>{t.sortBufferEntries();const i=e._bufferEntryNames.get(n);if(i===void 0){Ol(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[i];t.createView(s.nativeType);const u=e[s.nativeType];s.lastValue!==r&&(u[s.offset/u.BYTES_PER_ELEMENT]=r,e.sendDirty=!0),s.lastValue=r},t.setArray=(n,r)=>{t.sortBufferEntries();const i=e._bufferEntryNames.get(n);if(i===void 0){Ol(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[i];t.createView(s.nativeType);const u=e[s.nativeType];let c=!1;for(let l=0;l<r.length;l++)(!s.lastValue||s.lastValue[l]!==r[l])&&(u[s.offset/u.BYTES_PER_ELEMENT+l]=r[l],c=!0);c&&(e.sendDirty=!0,s.lastValue=[...r])},t.getBindGroupEntry=()=>({resource:{buffer:e.UBO.getHandle()}}),t.getSendTime=()=>e.sendTime.getMTime(),t.getShaderCode=(n,r)=>{t.sortBufferEntries();const i=[`struct ${e.label}Struct
{`];for(let s=0;s<e.bufferEntries.length;s++){const u=e.bufferEntries[s];i.push(`  ${u.name}: ${u.type},`)}return i.push(`};
@binding(${n}) @group(${r}) var<uniform> ${e.label}: ${e.label}Struct;`),i.join(`
`)}}const NL={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,bindGroupLayoutEntry:null,bindGroupEntry:null};function Wp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,NL,n),B.obj(t,e),e._bufferEntryNames=new Map,e.bufferEntries=[],e.bindGroupLayoutEntry=e.bindGroupLayoutEntry||{buffer:{type:"uniform"}},e.sendTime={},B.obj(e.sendTime,{mtime:0}),e.bindGroupTime={},B.obj(e.bindGroupTime,{mtime:0}),e.sendDirty=!0,e.sortDirty=!0,B.get(t,e,["binding","bindGroupTime"]),B.setGet(t,e,["bindGroupLayoutEntry","device","label","sizeInBytes"]),VL(t,e)}const _L=B.newInstance(Wp,"vtkWebGPUUniformBuffer");var t0={newInstance:_L,extend:Wp};const{vtkDebugMacro:UL}=Pn,k8=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var computedColor: vec4<f32> = mapperUBO.BackgroundColor;

  //VTK::RenderEncoder::Impl
  return output;
}
`,GL=`
fn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {
  var tau: f32 = 6.28318530718;
  var pi: f32 = 3.14159265359;
  var out: vec2<f32> = vec2<f32>(0.0);

  out.x = atan2(dir.z, dir.x) / tau;
  out.x += 0.5;

  var phix: f32 = length(vec2(dir.x, dir.z));
  out.y = atan2(dir.y, phix) / pi + 0.5;

  return out;
}

//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var tcoord: vec4<f32> = vec4<f32>(input.vertexVC.xy, -1, 1);
  var V: vec4<f32> = normalize(mapperUBO.FSQMatrix * tcoord); // vec2<f32>((input.tcoordVS.x - 0.5) * 2, -(input.tcoordVS.y - 0.5) * 2);
  // textureSampleLevel gets rid of some ugly artifacts
  var background = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, vecToRectCoord(V.xyz), 0.0);
  var computedColor: vec4<f32> = vec4<f32>(background.rgb, 1);

  //VTK::RenderEncoder::Impl
  return output;
}
`,Ru=new Float64Array(16),H8=new Float64Array(16);function bL(t){return t.getPositional()?t.getConeAngle()>=90?0:2:1}function FL(t,e){e.classHierarchy.push("vtkWebGPURenderer"),t.buildPass=n=>{if(n){if(!e.renderable)return;e.camera=e.renderable.getActiveCamera(),t.updateLights(),t.prepareNodes(),t.addMissingNode(e.camera),t.addMissingNodes(e.renderable.getViewPropsWithNestedProps()),t.removeUnusedNodes(),e.webgpuCamera=t.getViewNodeFor(e.camera),t.updateStabilizedMatrix()}},t.updateStabilizedMatrix=()=>{const n=e.camera.getClippingRange(),r=e.camera.getPositionByReference(),i=e.camera.getDirectionOfProjectionByReference(),s=[],u=[];oa(u,i,.5*(n[0]+n[1])),ys(s,r,u),Fl(u,s,e.stabilizedCenter),L6(u)/(n[1]-n[0])>e.recenterThreshold&&(e.stabilizedCenter=s,e.stabilizedTime.modified())},t.updateLights=()=>{let n=0;const r=e.renderable.getLightsByReference();for(let i=0;i<r.length;++i)r[i].getSwitch()>0&&n++;return n||(UL("No lights are on, creating one."),e.renderable.createLight()),n},t.updateUBO=()=>{const n=e.UBO.getSendTime();if(e._parent.getMTime()>n||t.getMTime()>n||e.camera.getMTime()>n||e.renderable.getMTime()>n){const r=e.webgpuCamera.getKeyMatrices(t);e.UBO.setArray("WCVCMatrix",r.wcvc),e.UBO.setArray("SCPCMatrix",r.scpc),e.UBO.setArray("PCSCMatrix",r.pcsc),e.UBO.setArray("SCVCMatrix",r.scvc),e.UBO.setArray("VCPCMatrix",r.vcpc),e.UBO.setArray("WCVCNormals",r.normalMatrix),e.UBO.setValue("LightCount",e.renderable.getLights().length),e.UBO.setValue("MaxEnvironmentMipLevel",e.renderable.getEnvironmentTexture()?.getMipLevel()),e.UBO.setValue("BackgroundDiffuseStrength",e.renderable.getEnvironmentTextureDiffuseStrength()),e.UBO.setValue("BackgroundSpecularStrength",e.renderable.getEnvironmentTextureSpecularStrength());const i=t.getYInvertedTiledSizeAndOrigin();e.UBO.setArray("viewportSize",[i.usize,i.vsize]),e.UBO.setValue("cameraParallel",e.camera.getParallelProjection());const s=e._parent.getDevice();e.UBO.sendIfNeeded(s)}},t.updateSSBO=()=>{const n=e.renderable.getLights(),r=e.webgpuCamera.getKeyMatrices(t);let i=`${e.renderable.getMTime()}`;for(let s=0;s<n.length;s++)i+=n[s].getMTime();if(i!==e.lightTimeString){const s=new Float32Array(n.length*4),u=new Float32Array(n.length*4),c=new Float32Array(n.length*4),l=new Float32Array(n.length*4);for(let v=0;v<n.length;v++){const h=v*4,y=n[v].getPosition();Ae(y,y,r.wcvc),s[h]=y[0],s[h+1]=y[1],s[h+2]=y[2],s[h+3]=0,u[h]=-n[v].getDirection()[0],u[h+1]=-n[v].getDirection()[1],u[h+2]=-n[v].getDirection()[2],u[h+3]=0,c[h]=n[v].getColor()[0],c[h+1]=n[v].getColor()[1],c[h+2]=n[v].getColor()[2],c[h+3]=n[v].getIntensity()*5,l[h]=bL(n[v]),l[h+1]=Math.cos(at(n[v].getConeAngle())),l[h+2]=Math.cos(at(n[v].getConeAngle()+n[v].getConeFalloff())),l[h+3]=0}e.SSBO.clearData(),e.SSBO.setNumberOfInstances(n.length),e.SSBO.addEntry("LightPos","vec4<f32>"),e.SSBO.addEntry("LightDir","vec4<f32>"),e.SSBO.addEntry("LightColor","vec4<f32>"),e.SSBO.addEntry("LightData","vec4<f32>"),e.SSBO.setAllInstancesFromArray("LightPos",s),e.SSBO.setAllInstancesFromArray("LightDir",u),e.SSBO.setAllInstancesFromArray("LightColor",c),e.SSBO.setAllInstancesFromArray("LightData",l);const g=e._parent.getDevice();e.SSBO.send(g)}e.lightTimeString=i},t.scissorAndViewport=n=>{const r=t.getYInvertedTiledSizeAndOrigin();n.getHandle().setViewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize,0,1),n.getHandle().setScissorRect(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)},t.bindUBO=n=>{n.activateBindGroup(e.bindGroup)},t.opaquePass=n=>{n?(e.renderEncoder.begin(e._parent.getCommandEncoder()),t.updateUBO(),t.updateSSBO()):(t.scissorAndViewport(e.renderEncoder),t.clear(),e.renderEncoder.end())},t.clear=()=>{if(e.renderable.getTransparent()||e.suppressClear)return;const n=e._parent.getDevice();if(!e.clearFSQ){e.clearFSQ=ii.newInstance(),e.clearFSQ.setDevice(n),e.clearFSQ.setPipelineHash("clearfsq"),e.clearFSQ.setFragmentShaderTemplate(k8);const s=t0.newInstance({label:"mapperUBO"});s.addEntry("FSQMatrix","mat4x4<f32>"),s.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(s),e.backgroundTex=e.renderable.getEnvironmentTexture()}if(e.clearFSQ.getPipelineHash()!=="clearfsqwithtexture"&&e.renderable.getUseEnvironmentTextureAsBackground()&&e.backgroundTex?.getImageLoaded()){e.clearFSQ.setFragmentShaderTemplate(GL);const s=t0.newInstance({label:"mapperUBO"});s.addEntry("FSQMatrix","mat4x4<f32>"),s.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(s);const u=n.getTextureManager().getTextureForVTKTexture(e.backgroundTex,"EnvironmentTexture");if(u.getReady()){const c=u.createView("EnvironmentTexture");e.clearFSQ.setTextureViews([c]),e.backgroundTexLoaded=!0;const l=e.backgroundTex.getInterpolate()?"linear":"nearest";c.addSampler(n,{addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:l,magFilter:l,mipmapFilter:"linear"})}e.clearFSQ.setPipelineHash("clearfsqwithtexture")}else if(e.clearFSQ.getPipelineHash()==="clearfsqwithtexture"&&!e.renderable.getUseEnvironmentTextureAsBackground()){e.clearFSQ=ii.newInstance(),e.clearFSQ.setDevice(n),e.clearFSQ.setPipelineHash("clearfsq"),e.clearFSQ.setFragmentShaderTemplate(k8);const s=t0.newInstance({label:"mapperUBO"});s.addEntry("FSQMatrix","mat4x4<f32>"),s.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(s)}const r=e.webgpuCamera.getKeyMatrices(t),i=e.renderable.getBackgroundByReference();e.clearFSQ.getUBO().setArray("BackgroundColor",i),Qe(H8,r.normalMatrix),Gl(Ru,r.scvc,r.pcsc),Gl(Ru,H8,Ru),e.clearFSQ.getUBO().setArray("FSQMatrix",Ru),e.clearFSQ.getUBO().sendIfNeeded(n),e.clearFSQ.prepareAndDraw(e.renderEncoder)},t.translucentPass=n=>{n?e.renderEncoder.begin(e._parent.getCommandEncoder()):(t.scissorAndViewport(e.renderEncoder),e.renderEncoder.end())},t.volumeDepthRangePass=n=>{n?e.renderEncoder.begin(e._parent.getCommandEncoder()):(t.scissorAndViewport(e.renderEncoder),e.renderEncoder.end())},t.getAspectRatio=()=>{const n=e._parent.getSizeByReference(),r=e.renderable.getViewportByReference();return n[0]*(r[2]-r[0])/((r[3]-r[1])*n[1])},t.convertToOpenGLDepth=n=>e.webgpuCamera.convertToOpenGLDepth(n),t.getYInvertedTiledSizeAndOrigin=()=>{const n=t.getTiledSizeAndOrigin(),r=e._parent.getSizeByReference();return n.lowerLeftV=r[1]-n.vsize-n.lowerLeftV,n},t.getTiledSizeAndOrigin=()=>{const n=e.renderable.getViewportByReference(),r=[0,0,1,1],i=n[0]-r[0],s=n[1]-r[1],u=e._parent.normalizedDisplayToDisplay(i,s),c=Math.round(u[0]),l=Math.round(u[1]),g=n[2]-r[0],v=n[3]-r[1],h=e._parent.normalizedDisplayToDisplay(g,v);let y=Math.round(h[0])-c,T=Math.round(h[1])-l;return y<0&&(y=0),T<0&&(T=0),{usize:y,vsize:T,lowerLeftU:c,lowerLeftV:l}},t.getPropFromID=n=>{for(let r=0;r<e.children.length;r++)if((e.children[r].getPropID?e.children[r].getPropID():-1)===n)return e.children[r];return null},t.getStabilizedTime=()=>e.stabilizedTime.getMTime(),t.releaseGraphicsResources=()=>{e.selector!==null&&e.selector.releaseGraphicsResources()}}const zL={bindGroup:null,selector:null,renderEncoder:null,recenterThreshold:20,suppressClear:!1,stabilizedCenter:[0,0,0]};function kL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,zL,n),st.extend(t,e,n),e.UBO=t0.newInstance({label:"rendererUBO"}),e.UBO.addEntry("WCVCMatrix","mat4x4<f32>"),e.UBO.addEntry("SCPCMatrix","mat4x4<f32>"),e.UBO.addEntry("PCSCMatrix","mat4x4<f32>"),e.UBO.addEntry("SCVCMatrix","mat4x4<f32>"),e.UBO.addEntry("VCPCMatrix","mat4x4<f32>"),e.UBO.addEntry("WCVCNormals","mat4x4<f32>"),e.UBO.addEntry("viewportSize","vec2<f32>"),e.UBO.addEntry("LightCount","i32"),e.UBO.addEntry("MaxEnvironmentMipLevel","f32"),e.UBO.addEntry("BackgroundDiffuseStrength","f32"),e.UBO.addEntry("BackgroundSpecularStrength","f32"),e.UBO.addEntry("cameraParallel","u32"),e.SSBO=i2.newInstance({label:"rendererLightSSBO"}),e.lightTimeString="",e.bindGroup=Vp.newInstance({label:"rendererBG"}),e.bindGroup.setBindables([e.UBO,e.SSBO]),e.tmpMat4=Oe(new Float64Array(16)),e.stabilizedTime={},Dt(e.stabilizedTime,{mtime:0}),Kt(t,e,["bindGroup","stabilizedTime"]),li(t,e,["stabilizedCenter"]),St(t,e,["renderEncoder","selector","suppressClear","UBO"]),FL(t,e)}const HL=Ye(kL,"vtkWebGPURenderer");In("vtkRenderer",HL);const{CoordinateSystem:$8}=Ws;function $L(t,e){e.classHierarchy.push("vtkWebGPUActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.getBufferShift=n=>(t.getKeyMatrices(n),e.bufferShift),t.getKeyMatrices=n=>{if(Math.max(e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.renderable.computeMatrix();const r=e.renderable.getMatrix();e.bufferShift[0]=r[3],e.bufferShift[1]=r[7],e.bufferShift[2]=r[11];const i=n.getStabilizedCenterByReference();e.renderable.getCoordinateSystem()===$8.WORLD&&(e.bufferShift[0]-=i[0],e.bufferShift[1]-=i[1],e.bufferShift[2]-=i[2]),Qe(e.keyMatrices.bcwc,r),e.renderable.getIsIdentity()?Oe(e.keyMatrices.normalMatrix):(Ft(e.keyMatrices.normalMatrix,e.keyMatrices.bcwc),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,tn(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),Qe(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),vt(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),e.renderable.getCoordinateSystem()===$8.WORLD?vt(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-i[0],-i[1],-i[2]]):Ft(e.keyMatrices.bcsc,e.keyMatrices.bcwc),e.keyMatricesTime.modified()}return e.keyMatrices}}const AL={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function WL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,AL,n),st.extend(t,e,n),e.keyMatricesTime={},B.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},B.get(t,e,["propID","keyMatricesTime"]),e.bufferShift=[0,0,0,0],$L(t,e)}const jL=B.newInstance(WL);In("vtkActor",jL);const{CoordinateSystem:A8}=Ws;function KL(t,e){e.classHierarchy.push("vtkWebGPUActor2D"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.getBufferShift=n=>(t.getKeyMatrices(n),e.bufferShift),t.getKeyMatrices=n=>{if(Math.max(e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.bufferShift[0]=0,e.bufferShift[1]=0,e.bufferShift[2]=0;const r=n.getStabilizedCenterByReference();e.renderable.getCoordinateSystem()===A8.WORLD&&(e.bufferShift[0]-=r[0],e.bufferShift[1]-=r[1],e.bufferShift[2]-=r[2]),Oe(e.keyMatrices.bcwc),Oe(e.keyMatrices.normalMatrix),vt(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),e.renderable.getCoordinateSystem()===A8.WORLD?vt(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-r[0],-r[1],-r[2]]):Ft(e.keyMatrices.bcsc,e.keyMatrices.bcwc),e.keyMatricesTime.modified()}return e.keyMatrices}}const XL={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function YL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,XL,n),st.extend(t,e,n),e.keyMatricesTime={},B.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},B.get(t,e,["propID","keyMatricesTime"]),e.bufferShift=[0,0,0,0],KL(t,e)}const qL=B.newInstance(YL);In("vtkActor2D",qL);function QL(t,e){e.classHierarchy.push("vtkWebGPUCubeAxesActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.CubeAxesActorHelper.getTmActor()),t.addMissingNode(e.renderable.getGridActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const i=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,s=e.WebGPURenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([s.usize,s.vsize],i,e.WebGPURenderWindow.getRenderable())}}}const ZL={};function JL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ZL,n),st.extend(t,e,n),e.CubeAxesActorHelper=up.newCubeAxesActorHelper(),QL(t,e)}const PL=Ye(JL,"vtkWebGPUCubeAxesActor");In("vtkCubeAxesActor",PL);const{DisplayLocation:s2}=mp;function IL(t,e){e.classHierarchy.push("vtkProperty2D"),t.setDisplayLocationToBackground=()=>t.setDisplayLocation(s2.BACKGROUND),t.setDisplayLocationToForeground=()=>t.setDisplayLocation(s2.FOREGROUND),t.setRepresentationToWireframe=()=>t.setRepresentation(Vn.WIREFRAME),t.setRepresentationToSurface=()=>t.setRepresentation(Vn.SURFACE),t.setRepresentationToPoints=()=>t.setRepresentation(Vn.POINTS),t.getRepresentationAsString=()=>B.enumToString(Vn,e.representation)}const eB={color:[1,1,1],opacity:1,pointSize:1,lineWidth:1,representation:Vn.SURFACE,displayLocation:s2.FOREGROUND};function tB(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,eB,n),B.obj(t,e),B.setGet(t,e,["opacity","lineWidth","pointSize","displayLocation","representation"]),B.setGetArray(t,e,["color"],3),IL(t,e)}B.newInstance(tB,"vtkProperty2D");var nB={...mp};const{BufferUsage:mt,PrimitiveTypes:Ht}=s0,{Representation:wu}=gi,{ScalarMode:Mu}=wr,{CoordinateSystem:rB}=Ws,{DisplayLocation:W8}=nB,aB=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@vertex
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : vertexOutput;

  var vertex: vec4<f32> = vertexBC;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  //VTK::Position::Impl

  return output;
}
`,iB=`
struct PBRData {
  diffuse: vec3<f32>,
  specular: vec3<f32>,
}

struct Material {
  ior: f32,
  roughness: f32,
  metallic: f32,
  base: vec3<f32>,
};

struct DirectionalLight {
  direction: vec3<f32>,
  color: vec3<f32>,
};

struct PointLight {
  position: vec3<f32>,
  color: vec3<f32>,
};

struct SpotLight {
  position: vec3<f32>,
  direction: vec3<f32>,
  cones: vec2<f32>,
  color: vec3<f32>,
};

const pi: f32 = 3.14159265359;

// Dot product with the max already in it
fn mdot(a: vec3<f32>, b: vec3<f32>) -> f32 {
  return max(0.0, dot(a, b));
}
// Dot product with a max in it that does not allow for negative values
// Physically based rendering is accurate as long as normals are accurate,
// however this is pretty often not the case. In order to prevent negative
// values from ruining light calculations and creating zones of zero light,
// this remapping is used, which smoothly clamps the dot product between
// zero and one while still maintaining a good amount of accuracy.
fn cdot(a: vec3<f32>, b: vec3<f32>) -> f32 {
  var d: f32 = max(0.0, dot(a, b));
  d = pow((d + 1.0) / 2.0, 2.6);
  return d;
}

// Lambertian diffuse model
fn lambertDiffuse(base: vec3<f32>, N: vec3<f32>, L: vec3<f32>) -> vec3<f32> {
  var NdotL: f32 = mdot(N, L);
  NdotL = pow(NdotL, 1.5);
  return (base/pi)*NdotL;
}

// Yasuhiro Fujii improvement on the Oren-Nayar model
// https://mimosa-pudica.net/improved-oren-nayar.html
// p is surface color, o is roughness
fn fujiiOrenNayar(p: vec3<f32>, o: f32, N: vec3<f32>, L: vec3<f32>, V: vec3<f32>) -> vec3<f32> {
  var invpi: f32 = 0.31830988618; // 1/pi

  var o2 = o*o;
  var NdotL: f32 = mdot(N, L);
  NdotL = pow(NdotL, 1.5); // Less physically accurate, but hides the "seams" between lights better

  var NdotV: f32 = mdot(N, V);
  var LdotV: f32 = mdot(L, V);

  var s: f32 = LdotV - NdotL*NdotV;
  var t: f32 = mix(1.0, max(NdotL, NdotV), step(0.0, s)); // Mix with step is the equivalent of an if statement
  var A: vec3<f32> = 0.5*(o2 / (o2 + 0.33)) + 0.17*p*(o2 / (o2 + 0.13));
  A = invpi*(1 - A);
  var B: f32 = 0.45*(o2 / (o2 + 0.09));
  B = invpi*B;

  return p*NdotL*(A + B*(s/t));
}

// Fresnel portion of BRDF (IOR only, simplified)
fn schlickFresnelIOR(V: vec3<f32>, N: vec3<f32>, ior: f32, k: f32) -> f32 {
  var NdotV: f32 = mdot(V, N);
  var F0: f32 = (pow((ior - 1.0), 2.0) + k*k) / (pow((ior + 1.0), 2.0) + k*k); // This takes into account the roughness, which the other one does not
  return F0 + (1.0 - F0) * pow((1.0-NdotV), 5.0);
}

// Fresnel portion of BRDF (Color ior, better)
fn schlickFresnelRGB(V: vec3<f32>, N: vec3<f32>, F0: vec3<f32>) -> vec3<f32> {
  var NdotV: f32 = mdot(V, N);
  return F0 + (1.0 - F0) * pow((1-NdotV), 5.0);
}

// Normal portion of BRDF
// https://learnopengl.com/PBR/Theory
// Trowbridge-Reitz GGX functions: normal, halfway, roughness^2
fn trGGX(N: vec3<f32>, H: vec3<f32>, a: f32) -> f32 {
  var a2: f32 = a*a;
  var NdotH = mdot(N, H);
  var NdotH2 = NdotH*NdotH;

  var denom: f32 = NdotH2 * (a2 - 1.0) + 1.0;

  return a2 / max((pi*denom*denom), 0.000001);
}

// A VERY bad approximation of anisotropy. Real anisotropic calculations require tangent and bitangent
fn anisotrophicTrGGX(N: vec3<f32>, H: vec3<f32>, O: vec3<f32>, s: f32, a: f32) -> f32 {
  var Op: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(O) * s, 0.)).xyz;

  var ggx1: f32 = trGGX(N + Op*s, H, a);
  var ggx2: f32 = trGGX(N - Op*s, H, a);
  return (0.5 * ggx1 + 0.5 * ggx2);
}

// Geometry portion of BRDF
fn schlickGGX(N: vec3<f32>, X: vec3<f32>, k: f32) -> f32 {
  var NdotX = cdot(N, X);
  return NdotX / max(0.000001, (NdotX*(1.0-k) + k));
}

fn smithSurfaceRoughness(N: vec3<f32>, V: vec3<f32>, L: vec3<f32>, k: f32) -> f32 {
  var ggx1: f32 = min(1.0, schlickGGX(N, V, k));
  var ggx2: f32 = min(1.0, schlickGGX(N, L, k));
  return ggx1*ggx2;
}

// BRDF Combination
fn cookTorrance(D: f32, F: f32, G: f32, N: vec3<f32>, V: vec3<f32>, L: vec3<f32>) -> f32 {
  var num: f32 = D*F*G;
  var denom: f32 = 4*cdot(V, N)*cdot(L, N);

  return num / max(denom, 0.000001);
}

// Different lighting calculations for different light sources
fn calcDirectionalLight(N: vec3<f32>, V: vec3<f32>, mat: Material, light: DirectionalLight) -> PBRData {
  var L: vec3<f32> = normalize(light.direction); // Light Vector
  var H: vec3<f32> = normalize(L + V); // Halfway Vector

  var alpha = mat.roughness * mat.roughness;
  var k: f32 = alpha * alpha / 2.0;

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L); // Fresnel term is replaced with 1 because it is added later
  var incoming: vec3<f32> = light.color;
  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5);

  var specular: vec3<f32> = brdf * incoming * angle;
  // Oren-Nayar gives a clay-like effect when fully rough which some people may not want, so it might be better to give a separate
  // control property for the diffuse vs specular roughness
  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);
  // Stores the specular and diffuse separately to allow for finer post processing
  var out = PBRData(diffuse, specular);

  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

fn calcPointLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, mat: Material, light: PointLight) -> PBRData {
  var L: vec3<f32> = normalize(light.position - fragPos);
  var H: vec3<f32> = normalize(L + V);
  var dist = distance(light.position, fragPos);

  var alpha = mat.roughness * mat.roughness;
  var k: f32 = alpha * alpha / 2.0;

  var D: f32 = trGGX(N, H, alpha); // Distribution
  var F: f32 = schlickFresnelIOR(V, N, mat.ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);
  var incoming: vec3<f32> = light.color * (1.0 / (dist * dist));
  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" between light sources

  var specular: vec3<f32> = brdf * incoming * angle;
  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);
  // Stores the specular and diffuse separately to allow for finer post processing
  // Could also be done (propably more properly) with a struct
  var out = PBRData(diffuse, specular);

  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// For a reason unknown to me, spheres dont seem to behave propperly with head-on spot lights
fn calcSpotLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, mat: Material, light: SpotLight) -> PBRData {
  var L: vec3<f32> = normalize(light.position - fragPos);
  var H: vec3<f32> = normalize(L + V); // Halfway Vector
  var dist = distance(light.position, fragPos);

  var alpha = mat.roughness * mat.roughness;
  var k: f32 = alpha * alpha / 2.0; // could also be pow(alpha + 1.0, 2) / 8

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);

  var theta: f32 = mdot(normalize(light.direction), L);
  var epsilon: f32 = light.cones.x - light.cones.y;
  var intensity: f32 = (theta - light.cones.y) / epsilon;
  intensity = clamp(intensity, 0.0, 1.0);
  intensity /= dist * dist;

  var incoming: vec3<f32> = light.color * intensity;

  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" between light sources

  var specular: vec3<f32> = brdf * incoming * angle;
  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);

  // Stores the specular and diffuse separately to allow for finer post processing
  // Could also be done (propably more properly) with a struct
  var out = PBRData(diffuse, specular);

  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// Environment mapping stuff
// Takes in a vector and converts it to an equivalent coordinate in a rectilinear texture. Should be replaced with cubemaps at some point
fn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {
  var tau: f32 = 6.28318530718;
  var out: vec2<f32> = vec2<f32>(0.0);

  out.x = atan2(dir.z, dir.x) / tau;
  out.x += 0.5;

  var phix: f32 = length(vec2(dir.x, dir.z));
  out.y = atan2(dir.y, phix) / pi + 0.5;

  return out;
}

//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::TCoord::Dec

// optional surface normal declaration
//VTK::Normal::Dec

//VTK::Select::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  // Temporary ambient, diffuse, and opacity
  var ambientColor: vec4<f32> = mapperUBO.AmbientColor;
  var diffuseColor: vec4<f32> = mapperUBO.DiffuseColor;
  var opacity: f32 = mapperUBO.Opacity;
  var ior: f32 = mapperUBO.BaseIOR;

  // This should be declared somewhere else
  var _diffuseMap: vec4<f32> = vec4<f32>(1.0);
  var _roughnessMap: vec4<f32> = vec4<f32>(1.0);
  var _metallicMap: vec4<f32> = vec4<f32>(1.0);
  var _normalMap: vec4<f32> = vec4<f32>(0.0, 0.0, 1.0, 0.0); // normal map was setting off the normal vector detection in fragment
  var _ambientOcclusionMap: vec4<f32> = vec4<f32>(1.);
  var _emissionMap: vec4<f32> = vec4<f32>(0.);

  //VTK::Color::Impl

  //VTK::TCoord::Impl

  //VTK::Normal::Impl

  var computedColor: vec4<f32> = vec4<f32>(diffuseColor.rgb, 1.0);

  //VTK::Light::Impl

  //VTK::Select::Impl

  // Use texture alpha for transparency
  computedColor.a = mapperUBO.Opacity * _diffuseMap.a;
  if (computedColor.a == 0.0) { discard; };

  //VTK::Position::Impl

  //VTK::RenderEncoder::Impl

  return output;
}
`;function j8(t){return t.indexOf("edge")>=0}function sB(t,e){e.classHierarchy.push("vtkWebGPUCellArrayMapper"),t.buildPass=n=>{n&&(e.is2D?(e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor2D"),e.forceZValue=!0):(e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor"),e.forceZValue=!1),e.coordinateSystem=e.WebGPUActor.getRenderable().getCoordinateSystem(),e.useRendererMatrix=e.coordinateSystem!==rB.DISPLAY,e.WebGPURenderer=e.WebGPUActor.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.device=e.WebGPURenderWindow.getDevice())},t.translucentPass=n=>{n&&(t.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,t.draw))},t.opaquePass=n=>{n&&(t.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,t.draw))},t.updateUBO=()=>{const r=e.WebGPUActor.getRenderable().getProperty(),i=e.UBO.getSendTime();if(t.getMTime()<=i&&r.getMTime()<=i&&e.renderable.getMTime()<=i)return;const s=e.WebGPUActor.getKeyMatrices(e.WebGPURenderer);if(e.UBO.setArray("BCWCMatrix",s.bcwc),e.UBO.setArray("BCSCMatrix",s.bcsc),e.UBO.setArray("MCWCNormals",s.normalMatrix),e.is2D){const c=r.getDisplayLocation?.()??W8.BACKGROUND;e.UBO.setValue("ZValue",c===W8.FOREGROUND?1:0);const l=r.getColorByReference();e.UBO.setValue("AmbientIntensity",1),e.UBO.setArray("DiffuseColor",[...l,1]),e.UBO.setValue("DiffuseIntensity",0),e.UBO.setValue("SpecularIntensity",0)}else e.UBO.setValue("AmbientIntensity",r.getAmbient()),e.UBO.setArray("AmbientColor",[...r.getAmbientColorByReference(),1]),e.UBO.setValue("DiffuseIntensity",r.getDiffuse()),e.UBO.setArray("DiffuseColor",[...r.getDiffuseColorByReference(),1]),e.UBO.setValue("Roughness",r.getRoughness()),e.UBO.setValue("BaseIOR",r.getBaseIOR()),e.UBO.setValue("Metallic",r.getMetallic()),e.UBO.setValue("NormalStrength",r.getNormalStrength()),e.UBO.setValue("Emission",r.getEmission()),e.UBO.setValue("SpecularIntensity",r.getSpecular()),r.getSpecularColorByReference()&&e.UBO.setArray("SpecularColor",[...r.getSpecularColorByReference(),1]);const u=r.getEdgeColorByReference?.();u&&e.UBO.setArray("EdgeColor",[...u,1]),e.UBO.setValue("LineWidth",r.getLineWidth()),e.UBO.setValue("Opacity",r.getOpacity()),e.UBO.setValue("PropID",e.WebGPUActor.getPropID()),e.UBO.sendIfNeeded(e.WebGPURenderWindow.getDevice())},t.haveWideLines=()=>{const n=e.WebGPUActor.getRenderable(),r=n.getProperty().getRepresentation();return n.getProperty().getLineWidth()<=1||e.primitiveType===Ht.Verts?!1:e.primitiveType===Ht.Triangles||e.primitiveType===Ht.TriangleStrips?r===wu.WIREFRAME:!0},t.replaceShaderPosition=(n,r,i)=>{const s=r.getShaderDescription("vertex");s.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),s.hasOutput("vertexVC")||s.addOutput("vec4<f32>","vertexVC");let u=s.getCode();e.useRendererMatrix?(u=Te.substitute(u,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = rendererUBO.SCPCMatrix*mapperUBO.BCSCMatrix*vertexBC;","    output.vertexVC = rendererUBO.SCVCMatrix * mapperUBO.BCSCMatrix * vec4<f32>(vertexBC.xyz, 1.0);","//VTK::Position::Impl"]).result,e.forceZValue&&(u=Te.substitute(u,"//VTK::Position::Impl",["pCoord = vec4<f32>(pCoord.xyz/pCoord.w, 1.0);","pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)):(u=Te.substitute(u,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = mapperUBO.BCSCMatrix*vertexBC;","    pCoord.x = 2.0* pCoord.x / rendererUBO.viewportSize.x - 1.0;","    pCoord.y = 2.0* pCoord.y / rendererUBO.viewportSize.y - 1.0;","    pCoord.z = 0.5 - 0.5 * pCoord.z;","//VTK::Position::Impl"]).result,e.forceZValue&&(u=Te.substitute(u,"//VTK::Position::Impl",["    pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)),t.haveWideLines()&&(s.addBuiltinInput("u32","@builtin(instance_index) instanceIndex"),u=Te.substitute(u,"//VTK::Position::Impl",["    var tmpPos: vec4<f32> = pCoord;","    var numSteps: f32 = ceil(mapperUBO.LineWidth - 1.0);","    var offset: f32 = (mapperUBO.LineWidth - 1.0) * (f32(input.instanceIndex / 2u) - numSteps/2.0) / numSteps;","    var tmpPos2: vec3<f32> = tmpPos.xyz / tmpPos.w;","    tmpPos2.x = tmpPos2.x + 2.0 * (f32(input.instanceIndex) % 2.0) * offset / rendererUBO.viewportSize.x;","    tmpPos2.y = tmpPos2.y + 2.0 * (f32(input.instanceIndex + 1u) % 2.0) * offset / rendererUBO.viewportSize.y;","    tmpPos2.z = min(1.0, tmpPos2.z + 0.00001);","    pCoord = vec4<f32>(tmpPos2.xyz * tmpPos.w, tmpPos.w);","//VTK::Position::Impl"]).result),u=Te.substitute(u,"//VTK::Position::Impl",["    output.Position = pCoord;"]).result,s.setCode(u)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderNormal=(n,r,i)=>{const s=i.getBuffer("normalMC"),u=e.WebGPUActor.getRenderable();if(s){const c=r.getShaderDescription("vertex");c.hasOutput("normalVC")||c.addOutput("vec3<f32>","normalVC",s.getArrayInformation()[0].interpolation),c.hasOutput("tangentVC")||c.addOutput("vec3<f32>","tangentVC",s.getArrayInformation()[0].interpolation),c.hasOutput("bitangentVC")||c.addOutput("vec3<f32>","bitangentVC",s.getArrayInformation()[0].interpolation);let l=c.getCode();l=Te.substitute(l,"//VTK::Normal::Impl",["  output.normalVC = normalize((rendererUBO.WCVCNormals * mapperUBO.MCWCNormals * normalMC).xyz);","  var c1: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 0, 1));","  var c2: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 1, 0));","  var tangent: vec3<f32> = mix(c1, c2, distance(c1, c2));","  output.tangentVC = normalize(tangent);","  output.bitangentVC = normalize(cross(output.normalVC, tangent));"]).result,c.setCode(l);const g=r.getShaderDescription("fragment");l=g.getCode(),u.getProperty().getNormalTexture()?l=Te.substitute(l,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  var tangent: vec3<f32> = input.tangentVC;","  var bitangent: vec3<f32> = input.bitangentVC;","  var TCVCMatrix: mat3x3<f32> = mat3x3<f32>(","    tangent.x, bitangent.x, normal.x,","    tangent.y, bitangent.y, normal.y,","    tangent.z, bitangent.z, normal.z,","  );","  var mappedNormal: vec3<f32> = TCVCMatrix * (_normalMap.xyz * 2 - 1);","  normal = mix(normal, mappedNormal, mapperUBO.NormalStrength);","  normal = normalize(normal);"]).result:l=Te.substitute(l,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  normal = normalize(normal);"]).result,g.setCode(l)}},e.shaderReplacements.set("replaceShaderNormal",t.replaceShaderNormal),t.replaceShaderLight=(n,r,i)=>{if(n.includes("sel"))return;const s=r.getShaderDescription("vertex");s.hasOutput("vertexVC")||s.addOutput("vec4<f32>","vertexVC");const u=e.WebGPURenderer.getRenderable(),c=r.getShaderDescription("fragment");let l=c.getCode();if(l.includes("var normal:")&&e.useRendererMatrix&&!j8(n)&&!e.is2D&&!n.includes("sel")){const g=["  let fragPos = vec3<f32>(input.vertexVC.xyz);","  let V = mix(normalize(-fragPos), vec3<f32>(0, 0, 1), f32(rendererUBO.cameraParallel)); // View Vector","  let baseColor = _diffuseMap.rgb * diffuseColor.rgb;","  let roughness = max(0.000001, mapperUBO.Roughness * _roughnessMap.r);","  let metallic = mapperUBO.Metallic * _metallicMap.r;","  let alpha = roughness * roughness;","  let k = alpha * alpha / 2.0;","  var diffuse = vec3<f32>(0.);","  var specular = vec3<f32>(0.);","  let emission = _emissionMap.rgb * mapperUBO.Emission;","","  // Material struct","  let mat = Material(ior, roughness, metallic, baseColor);","","  {","    var i = 0;","    loop {","      if (!(i < rendererUBO.LightCount)) { break; }","      switch (i32(rendererLightSSBO.values[i].LightData.x)) {","         // Point Light","         case 0 {","           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           let pos = (rendererLightSSBO.values[i].LightPos).xyz;","           let pointLight = PointLight(pos, color);","           let result = calcPointLight(normal, V, fragPos, mat, pointLight);","           diffuse += max(vec3<f32>(0), result.diffuse);","           specular += max(vec3<f32>(0), result.specular);","          }","         // Directional light","         case 1 {","           let dir = normalize((rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz);","           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           let dirLight = DirectionalLight(dir, color);","           let result = calcDirectionalLight(normal, V, mat, dirLight); // diffuseColor.rgb needs to be fixed with a more dynamic diffuse color","           diffuse += max(vec3<f32>(0), result.diffuse);","           specular += max(vec3<f32>(0), result.specular);","         }","         // Spot Light","         case 2 {","           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           let pos = (rendererLightSSBO.values[i].LightPos).xyz;","           let dir = normalize((rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz);","           let cones = vec2<f32>(rendererLightSSBO.values[i].LightData.y, rendererLightSSBO.values[i].LightData.z);","           let spotLight = SpotLight(pos, dir, cones, color);","           let result = calcSpotLight(normal, V, fragPos, mat, spotLight);","           diffuse += max(vec3<f32>(0), result.diffuse);","           specular += max(vec3<f32>(0), result.specular);","         }","         default { continue; }","       }","      continuing { i++; }","    }","  }","  let fresnel = min(1.0, schlickFresnelIOR(V, normal, ior, k)); // Fresnel","  // This could be controlled with its own variable (that isnt base color) for better artistic control","  let fresnelMetallic = schlickFresnelRGB(V, normal, baseColor); // Fresnel for metal, takes color into account","  let kS = min(vec3<f32>(1.0), mix(vec3<f32>(fresnel), fresnelMetallic, metallic));","  let kD = (1.0 - kS) * (1.0 - metallic);","  let PBR = mapperUBO.DiffuseIntensity * kD * diffuse + kS * specular;","  computedColor = vec4<f32>(PBR + emission, mapperUBO.Opacity);"];u.getEnvironmentTexture()?.getImageLoaded()&&g.push("  // To get diffuse IBL, the texture is sampled with normals in worldspace","  let diffuseIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(normal, 1.)).xyz;","  let diffuseCoords = vecToRectCoord(diffuseIBLCoords);","  // To get specular IBL, the texture is sampled as the worldspace reflection between the normal and view vectors","  // Reflections are first calculated in viewspace, then converted to worldspace to sample the environment","  let VreflN = normalize(reflect(-V, normal));","  let reflectionIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(VreflN, 1.)).xyz;","  let specularCoords = vecToRectCoord(reflectionIBLCoords);","  let diffuseIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, diffuseCoords, rendererUBO.MaxEnvironmentMipLevel);","  let level = roughness * rendererUBO.MaxEnvironmentMipLevel;","  let specularIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, specularCoords, level);","  let specularIBLContribution = specularIBL.rgb * rendererUBO.BackgroundSpecularStrength;","  computedColor += vec4<f32>(specularIBLContribution * kS, 0);","  let diffuseIBLContribution = diffuseIBL.rgb * rendererUBO.BackgroundDiffuseStrength;","  computedColor += vec4<f32>(diffuseIBLContribution * baseColor * _ambientOcclusionMap.rgb * kD, 0);"),l=Te.substitute(l,"//VTK::Light::Impl",g).result,c.setCode(l)}else l=Te.substitute(l,"//VTK::Light::Impl",["  let diffuse = diffuseColor.rgb;","  let specular = mapperUBO.SpecularColor.rgb * mapperUBO.SpecularColor.a;","  computedColor = vec4<f32>(diffuse * _diffuseMap.rgb, mapperUBO.Opacity);"]).result,c.setCode(l)},e.shaderReplacements.set("replaceShaderLight",t.replaceShaderLight),t.replaceShaderColor=(n,r,i)=>{if(j8(n)){const g=r.getShaderDescription("fragment");let v=g.getCode();v=Te.substitute(v,"//VTK::Color::Impl",["ambientColor = mapperUBO.EdgeColor;","diffuseColor = mapperUBO.EdgeColor;"]).result,g.setCode(v);return}const s=i.getBuffer("colorVI");if(!s)return;const u=r.getShaderDescription("vertex");u.addOutput("vec4<f32>","color",s.getArrayInformation()[0].interpolation);let c=u.getCode();c=Te.substitute(c,"//VTK::Color::Impl",["  output.color = colorVI;"]).result,u.setCode(c);const l=r.getShaderDescription("fragment");c=l.getCode(),c=Te.substitute(c,"//VTK::Color::Impl",["ambientColor = input.color;","diffuseColor = input.color;","opacity = mapperUBO.Opacity * input.color.a;"]).result,l.setCode(c)},e.shaderReplacements.set("replaceShaderColor",t.replaceShaderColor),t.replaceShaderTCoord=(n,r,i)=>{if(!i.hasAttribute("tcoord"))return;const s=r.getShaderDescription("vertex"),u=i.getBuffer("tcoord"),c=Mt.getNumberOfComponentsFromBufferFormat(u.getArrayInformation()[0].format);let l=s.getCode();s.addOutput(`vec${c}<f32>`,"tcoordVS"),l=Te.substitute(l,"//VTK::TCoord::Impl",["  output.tcoordVS = tcoord;"]).result,s.setCode(l);const g=r.getShaderDescription("fragment");l=g.getCode();const v=e.WebGPUActor.getRenderable(),h=v.getProperty(),y=O=>O?O.getDimensionality()===c:!1,T=[],E=h.getDiffuseTexture?.();(E?.getImageLoaded()||v.getTextures()[0]||e.colorTexture)&&(y(E)||y(v.getTextures()[0])||y(e.colorTexture))&&T.push("_diffuseMap = textureSample(DiffuseTexture, DiffuseTextureSampler, input.tcoordVS);");const S=h.getORMTexture?.(),x=h.getRMTexture?.(),m=h.getRoughnessTexture?.(),M=h.getMetallicTexture?.(),R=h.getAmbientOcclusionTexture?.(),w=h.getEmissionTexture?.(),D=h.getNormalTexture?.();S?.getImageLoaded()?y(S)&&T.push("_ambientOcclusionMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).rrra;","_roughnessMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).ggga;","_metallicMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).bbba;"):x?.getImageLoaded()?y(x)&&T.push("_roughnessMap = textureSample(RMTexture, RMTextureSampler, input.tcoordVS).ggga;","_metallicMap = textureSample(RMTexture, RMTextureSampler, input.tcoordVS).bbba;"):(m?.getImageLoaded()&&y(m)&&T.push("_roughnessMap = textureSample(RoughnessTexture, RoughnessTextureSampler, input.tcoordVS).ggga;"),M?.getImageLoaded()&&y(M)&&T.push("_metallicMap = textureSample(MetallicTexture, MetallicTextureSampler, input.tcoordVS).bbba;"),R?.getImageLoaded()&&y(R)&&T.push("_ambientOcclusionMap = textureSample(AmbientOcclusionTexture, AmbientOcclusionTextureSampler, input.tcoordVS).rrra;")),w?.getImageLoaded()&&y(w)&&T.push("_emissionMap = textureSample(EmissionTexture, EmissionTextureSampler, input.tcoordVS);"),D?.getImageLoaded()&&y(D)&&T.push("_normalMap = textureSample(NormalTexture, NormalTextureSampler, input.tcoordVS);"),l=Te.substitute(l,"//VTK::TCoord::Impl",T).result,g.setCode(l)},e.shaderReplacements.set("replaceShaderTCoord",t.replaceShaderTCoord),t.replaceShaderSelect=(n,r,i)=>{if(n.includes("sel")){const s=r.getShaderDescription("fragment");let u=s.getCode();u=Te.substitute(u,"//VTK::Select::Impl",["  var compositeID: u32 = 0u;"]).result,s.setCode(u)}},e.shaderReplacements.set("replaceShaderSelect",t.replaceShaderSelect),t.getUsage=(n,r)=>n===wu.POINTS||r===Ht.Points?mt.Verts:r===Ht.Lines?mt.Lines:n===wu.WIREFRAME?r===Ht.Triangles?mt.LinesFromTriangles:mt.LinesFromStrips:r===Ht.Triangles?mt.Triangles:r===Ht.TriangleStrips?mt.Strips:r===Ht.TriangleEdges?mt.LinesFromTriangles:mt.LinesFromStrips,t.getHashFromUsage=n=>`pt${n}`,t.getTopologyFromUsage=n=>{switch(n){case mt.Triangles:return"triangle-list";case mt.Verts:return"point-list";case mt.Lines:default:return"line-list"}},t.buildVertexInput=()=>{const n=e.currentInput,r=e.cellArray,i=e.primitiveType;let u=e.WebGPUActor.getRenderable().getProperty().getRepresentation();const c=e.WebGPURenderWindow.getDevice();let l=!1;i===Ht.TriangleEdges&&(l=!0,u=wu.WIREFRAME);const g=e.vertexInput,v=n.getPoints();let h=null;if(r?(h=c.getBufferManager().getBuffer({hash:`R${u}P${i}${r.getMTime()}`,usage:mt.Index,cells:r,numberOfPoints:v.getNumberOfPoints(),primitiveType:i,representation:u}),g.setIndexBuffer(h)):g.setIndexBuffer(null),v){const S=e.WebGPUActor.getBufferShift(e.WebGPURenderer);g.addBuffer(c.getBufferManager().getBuffer({hash:`${v.getMTime()}I${h?.getMTime?.()??0}${S.join()}float32x4`,usage:mt.PointArray,format:"float32x4",dataArray:v,indexBuffer:h,shift:S,packExtra:!0}),["vertexBC"])}else g.removeBufferIfPresent("vertexBC");const y=t.getUsage(u,i);if(e._usesCellNormals=!1,!e.is2D&&(y===mt.Triangles||y===mt.Strips)){const S=n.getPointData().getNormals(),x={format:"snorm8x4",indexBuffer:h,packExtra:!0,shift:0,scale:127};S?(x.hash=`${S.getMTime()}I${h.getMTime()}snorm8x4`,x.dataArray=S,x.usage=mt.PointArray,g.addBuffer(c.getBufferManager().getBuffer(x),["normalMC"])):i===Ht.Triangles?(e._usesCellNormals=!0,x.hash=`PFN${v.getMTime()}I${h.getMTime()}snorm8x4`,x.dataArray=v,x.cells=r,x.usage=mt.NormalsFromPoints,g.addBuffer(c.getBufferManager().getBuffer(x),["normalMC"])):g.removeBufferIfPresent("normalMC")}else g.removeBufferIfPresent("normalMC");let T=!1;if(e.renderable.getScalarVisibility()){const S=e.renderable.getColorMapColors();if(S&&!l){const x=e.renderable.getScalarMode(),m=(x===Mu.USE_CELL_DATA||x===Mu.USE_CELL_FIELD_DATA||x===Mu.USE_FIELD_DATA||!n.getPointData().getScalars())&&x!==Mu.USE_POINT_FIELD_DATA&&S;g.addBuffer(c.getBufferManager().getBuffer({usage:mt.PointArray,format:"unorm8x4",hash:`${m}${S.getMTime()}I${h.getMTime()}unorm8x4`,dataArray:S,indexBuffer:h,cellData:m,cellOffset:0}),["colorVI"]),T=!0}}T||g.removeBufferIfPresent("colorVI");let E=null;e.renderable.getInterpolateScalarsBeforeMapping?.()&&e.renderable.getColorCoordinates()?E=e.renderable.getColorCoordinates():E=n.getPointData().getTCoords(),E&&!l?g.addBuffer(c.getBufferManager().getBufferForPointArray(E,g.getIndexBuffer()),["tcoord"]):g.removeBufferIfPresent("tcoord")},t.updateTextures=()=>{const n=[],r=[],i=e.renderable.getColorTextureMap?.();i&&!e.colorTexture&&(e.colorTexture=bs.newInstance({label:"polyDataColor"})),i&&(e.colorTexture.setInputData(i),r.push(["DiffuseTexture",e.colorTexture]));const s=e.WebGPUActor.getRenderable(),u=e.WebGPURenderer.getRenderable();[["DiffuseTexture",s.getProperty().getDiffuseTexture?.()],["DiffuseTexture",s.getTextures()[0]],["DiffuseTexture",e.colorTexture],["ORMTexture",s.getProperty().getORMTexture?.()],["RMTexture",s.getProperty().getRMTexture?.()],["RoughnessTexture",s.getProperty().getRoughnessTexture?.()],["MetallicTexture",s.getProperty().getMetallicTexture?.()],["NormalTexture",s.getProperty().getNormalTexture?.()],["AmbientOcclusionTexture",s.getProperty().getAmbientOcclusionTexture?.()],["EmissionTexture",s.getProperty().getEmissionTexture?.()],["EnvironmentTexture",u.getEnvironmentTexture?.()]].forEach(l=>{let[g,v]=l;v&&((v.getInputData()||v.getJsImageData()||v.getCanvas()||v.getImageBitmap())&&r.push([g,v]),v.getImage()&&v.getImageLoaded()&&r.push([g,v]))}),r.forEach(l=>{let[g,v]=l;const h=e.device.getTextureManager().getTextureForVTKTexture(v,g);if(!h.getReady())return;let y=!1;for(let T=0;T<e.textures.length;++T)if(e.textures[T]===h){y=!0,n[T]=!0;break}if(!y){n[e.textures.length]=!0;const T=h.createView(g);e.textures.push(h),e.textureViews.push(T);const E=v.getInterpolate()?"linear":"nearest";let S=null;v.getEdgeClamp()&&v.getRepeat()?S="mirror-repeat":v.getEdgeClamp()?S="clamp-to-edge":v.getRepeat()&&(S="repeat");let x={addressModeU:S,addressModeV:S,addressModeW:S,minFilter:E,magFilter:E};g==="EnvironmentTexture"&&(x={addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:E,magFilter:E,mipmapFilter:"linear"}),T.addSampler(e.device,x)}});for(let l=e.textures.length-1;l>=0;l--)n[l]||(e.textures.splice(l,1),e.textureViews.splice(l,1))},t.computePipelineHash=()=>{let n=`pd${e.useRendererMatrix?"r":""}${e.forceZValue?"z":""}`;if(e.primitiveType===Ht.TriangleEdges||e.primitiveType===Ht.TriangleStripEdges)n+="edge";else{if(e.vertexInput.hasAttribute("normalMC")&&(n+="n"),e.vertexInput.hasAttribute("colorVI")&&(n+="c"),e.vertexInput.hasAttribute("tcoord")){const i=e.vertexInput.getBuffer("tcoord"),s=Mt.getNumberOfComponentsFromBufferFormat(i.getArrayInformation()[0].format);n+=`t${s}`}e.textures.length&&(n+=`tx${e.textures.length}`)}e._usesCellNormals&&(n+="cn"),e.SSBO&&(n+="ssbo");const r=t.getHashFromUsage(e.usage);n+=r,n+=e.renderEncoder.getPipelineHash(),e.pipelineHash=n},t.updateBuffers=()=>{e.primitiveType!==Ht.TriangleEdges&&e.primitiveType!==Ht.TriangleStripEdges&&t.updateTextures();const n=e.WebGPUActor.getRenderable(),r=n.getProperty().getRepresentation();e.usage=t.getUsage(r,e.primitiveType),t.buildVertexInput();const i=e.vertexInput.getBuffer("vertexBC");if(t.setNumberOfVertices(i.getSizeInBytes()/i.getStrideInBytes()),t.setTopology(t.getTopologyFromUsage(e.usage)),t.updateUBO(),t.haveWideLines()){const s=n.getProperty();t.setNumberOfInstances(Math.ceil(s.getLineWidth()*2))}else t.setNumberOfInstances(1)}}const oB={is2D:!1,cellArray:null,currentInput:null,cellOffset:0,primitiveType:0,colorTexture:null,renderEncoder:null,textures:null};function jp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,oB,n),j2.extend(t,e,n),e.fragmentShaderTemplate=iB,e.vertexShaderTemplate=aB,e._tmpMat3=ya(new Float64Array(9)),e._tmpMat4=Oe(new Float64Array(16)),e.UBO=t0.newInstance({label:"mapperUBO"}),e.UBO.addEntry("BCWCMatrix","mat4x4<f32>"),e.UBO.addEntry("BCSCMatrix","mat4x4<f32>"),e.UBO.addEntry("MCWCNormals","mat4x4<f32>"),e.UBO.addEntry("AmbientColor","vec4<f32>"),e.UBO.addEntry("DiffuseColor","vec4<f32>"),e.UBO.addEntry("EdgeColor","vec4<f32>"),e.UBO.addEntry("SpecularColor","vec4<f32>"),e.UBO.addEntry("AmbientIntensity","f32"),e.UBO.addEntry("DiffuseIntensity","f32"),e.UBO.addEntry("Roughness","f32"),e.UBO.addEntry("Metallic","f32"),e.UBO.addEntry("Ambient","f32"),e.UBO.addEntry("Normal","f32"),e.UBO.addEntry("Emission","f32"),e.UBO.addEntry("NormalStrength","f32"),e.UBO.addEntry("BaseIOR","f32"),e.UBO.addEntry("SpecularIntensity","f32"),e.UBO.addEntry("LineWidth","f32"),e.UBO.addEntry("Opacity","f32"),e.UBO.addEntry("ZValue","f32"),e.UBO.addEntry("PropID","u32"),e.UBO.addEntry("ClipNear","f32"),e.UBO.addEntry("ClipFar","f32"),e.UBO.addEntry("Time","u32"),St(t,e,["cellArray","currentInput","cellOffset","is2D","primitiveType","renderEncoder"]),e.textures=[],sB(t,e)}const uB=Ye(jp,"vtkWebGPUCellArrayMapper");var Kp={newInstance:uB,extend:jp};const{PrimitiveTypes:On}=s0;function cB(t,e){e.classHierarchy.push("vtkWebGPUPolyDataMapper"),t.createCellArrayMapper=()=>Kp.newInstance(),t.buildPass=n=>{if(n){e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor"),e.renderable.getStatic()||e.renderable.update();const r=e.renderable.getInputData();e.renderable.mapScalars(r,1),t.updateCellArrayMappers(r)}},t.updateCellArrayMappers=n=>{if(!n){xe("No input!");return}const r=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],i=[];let s=0;for(let u=On.Points;u<=On.TriangleStrips;u++)if(r[u].getNumberOfValues()>0){e.primitives[u]||(e.primitives[u]=t.createCellArrayMapper());const c=e.primitives[u];c.setCellArray(r[u]),c.setCurrentInput(n),c.setCellOffset(s),c.setPrimitiveType(u),c.setRenderable(e.renderable),s+=r[u].getNumberOfCells(),i.push(c)}else e.primitives[u]=null;if(e.WebGPUActor.getRenderable().getProperty().getEdgeVisibility()){if(r[On.Triangles].getNumberOfValues()>0){const u=On.TriangleEdges;e.primitives[u]||(e.primitives[u]=t.createCellArrayMapper());const c=e.primitives[u];c.setCellArray(r[On.Triangles]),c.setCurrentInput(n),c.setCellOffset(e.primitives[On.Triangles].getCellOffset()),c.setPrimitiveType(u),c.setRenderable(e.renderable),i.push(c)}else e.primitives[On.TriangleEdges]=null;if(r[On.TriangleStrips].getNumberOfValues()>0){const u=On.TriangleStripEdges;e.primitives[u]||(e.primitives[u]=t.createCellArrayMapper());const c=e.primitives[u];c.setCellArray(r[On.TriangleStrips]),c.setCurrentInput(n),c.setCellOffset(e.primitives[On.TriangleStrips].getCellOffset()),c.setPrimitiveType(u),c.setRenderable(e.renderable),i.push(c)}else e.primitives[On.TriangleStripEdges]=null}t.prepareNodes(),t.addMissingChildren(i),t.removeUnusedNodes()}}const fB={primitives:null};function lB(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,fB,n),st.extend(t,e,n),e.primitives=[],cB(t,e)}const gB=Ye(lB,"vtkWebGPUPolyDataMapper");In("vtkMapper",gB);const{PrimitiveTypes:K8}=s0;function hB(t,e){e.classHierarchy.push("vtkWebGPUPolyDataMapper2D"),t.createCellArrayMapper=()=>Kp.newInstance(),t.buildPass=n=>{if(n){e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor2D"),e.renderable.getStatic()||e.renderable.update();const r=e.renderable.getInputData();e.renderable.mapScalars(r,1),t.updateCellArrayMappers(r)}},t.updateCellArrayMappers=n=>{const r=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],i=[];let s=0;for(let u=K8.Points;u<=K8.Triangles;u++)if(r[u].getNumberOfValues()>0){e.primitives[u]||(e.primitives[u]=t.createCellArrayMapper());const c=e.primitives[u];c.setCellArray(r[u]),c.setCurrentInput(n),c.setCellOffset(s),c.setPrimitiveType(u),c.setRenderable(e.renderable),c.setIs2D(!0),s+=r[u].getNumberOfCells(),i.push(c)}else e.primitives[u]=null;t.prepareNodes(),t.addMissingChildren(i),t.removeUnusedNodes()}}function pB(t){return{primitives:[],...t}}function vB(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,pB(n)),st.extend(t,e,n),e.primitives=[],hB(t,e)}const yB=Ye(vB,"vtkWebGPUPolyDataMapper2D");In("vtkMapper2D",yB);function dB(t,e){e.classHierarchy.push("vtkWebGPUScalarBarActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.scalarBarActorHelper.getBarActor()),t.addMissingNode(e.scalarBarActorHelper.getTmActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const i=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,s=e.WebGPURenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([s.usize,s.vsize],i,e.WebGPURenderWindow.getRenderable())}}}const TB={};function SB(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,TB,n),st.extend(t,e,n),e.scalarBarActorHelper=Op.newScalarBarActorHelper(),dB(t,e)}const CB=Ye(SB,"vtkWebGPUScalarBarActor");In("vtkScalarBarActor",CB);function xB(t,e){e.classHierarchy.push("vtkWebGPUSampler"),t.create=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.device=n,e.options.addressModeU=r.addressModeU?r.addressModeU:"clamp-to-edge",e.options.addressModeV=r.addressModeV?r.addressModeV:"clamp-to-edge",e.options.addressModeW=r.addressModeW?r.addressModeW:"clamp-to-edge",e.options.magFilter=r.magFilter?r.magFilter:"nearest",e.options.minFilter=r.minFilter?r.minFilter:"nearest",e.options.mipmapFilter=r.mipmapFilter?r.mipmapFilter:"nearest",e.options.label=e.label,e.handle=e.device.getHandle().createSampler(e.options),e.bindGroupTime.modified()},t.getShaderCode=(n,r)=>`@binding(${n}) @group(${r}) var ${e.label}: sampler;`,t.getBindGroupEntry=()=>({resource:e.handle})}const EB={device:null,handle:null,label:null,options:null};function Xp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,EB,n),B.obj(t,e),e.options={},e.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,sampler:{}},e.bindGroupTime={},B.obj(e.bindGroupTime,{mtime:0}),B.get(t,e,["bindGroupTime","handle","options"]),B.setGet(t,e,["bindGroupLayoutEntry","device","label"]),xB(t,e)}const mB=B.newInstance(Xp);var K2={newInstance:mB,extend:Xp};function RB(t,e){e.classHierarchy.push("vtkWebGPUTextureView"),t.create=(n,r)=>{e.texture=n,e.options=r,e.options.dimension=e.options.dimension||"2d",e.options.label=e.label,e.textureHandle=n.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupLayoutEntry.texture.viewDimension=e.options.dimension;const i=Mt.getDetailsFromTextureFormat(e.texture.getFormat());e.bindGroupLayoutEntry.texture.sampleType=i.sampleType},t.createFromTextureHandle=(n,r)=>{e.texture=null,e.options=r,e.options.dimension=e.options.dimension||"2d",e.options.label=e.label,e.textureHandle=n,e.handle=e.textureHandle.createView(e.options),e.bindGroupLayoutEntry.texture.viewDimension=e.options.dimension;const i=Mt.getDetailsFromTextureFormat(r.format);e.bindGroupLayoutEntry.texture.sampleType=i.sampleType,e.bindGroupTime.modified()},t.getBindGroupEntry=()=>({resource:t.getHandle()}),t.getShaderCode=(n,r)=>{let i="f32";e.bindGroupLayoutEntry.texture.sampleType==="sint"?i="i32":e.bindGroupLayoutEntry.texture.sampleType==="uint"&&(i="u32");let s=`@binding(${n}) @group(${r}) var ${e.label}: texture_${e.options.dimension}<${i}>;`;return e.bindGroupLayoutEntry.texture.sampleType==="depth"&&(s=`@binding(${n}) @group(${r}) var ${e.label}: texture_depth_${e.options.dimension};`),s},t.addSampler=(n,r)=>{const i=K2.newInstance({label:`${e.label}Sampler`});i.create(n,r),t.setSampler(i)},t.getBindGroupTime=()=>(e.texture&&e.texture.getHandle()!==e.textureHandle&&(e.textureHandle=e.texture.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupTime.modified()),e.bindGroupTime),t.getHandle=()=>(e.texture&&e.texture.getHandle()!==e.textureHandle&&(e.textureHandle=e.texture.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupTime.modified()),e.handle)}const wB={texture:null,handle:null,sampler:null,label:null};function Yp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,wB,n),B.obj(t,e),e.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}},e.bindGroupTime={},B.obj(e.bindGroupTime,{mtime:0}),B.get(t,e,["bindGroupTime","texture"]),B.setGet(t,e,["bindGroupLayoutEntry","label","sampler"]),RB(t,e)}const MB=B.newInstance(Yp);var qp={newInstance:MB,extend:Yp};function OB(t,e){e.classHierarchy.push("vtkWebGPUTexture"),t.create=(n,r)=>{e.device=n,e.width=r.width,e.height=r.height,e.depth=r.depth?r.depth:1;const i=e.depth===1?"2d":"3d";e.format=r.format?r.format:"rgba8unorm",e.mipLevel=r.mipLevel?r.mipLevel:0,e.usage=r.usage?r.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label,dimension:i,mipLevelCount:e.mipLevel+1})},t.assignFromHandle=(n,r,i)=>{e.device=n,e.handle=r,e.width=i.width,e.height=i.height,e.depth=i.depth?i.depth:1,e.format=i.format?i.format:"rgba8unorm",e.usage=i.usage?i.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST},t.writeImageData=n=>{let r=[];const i=h=>{e.device.getHandle().queue.copyExternalImageToTexture({source:h,flipY:n.flip},{texture:e.handle,premultipliedAlpha:!0,mipLevel:0,origin:{x:0,y:0,z:0}},[h.width,h.height,e.depth]),t.getDimensionality()!==3&&e.mipLevel>0&&bs.generateMipmaps(e.device.getHandle(),e.handle,e.mipLevel+1),e.ready=!0};if(n.canvas){i(n.canvas);return}if(n.imageBitmap){n.width=n.imageBitmap.width,n.height=n.imageBitmap.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,i(n.imageBitmap);return}if(n.jsImageData){n.width=n.jsImageData.width,n.height=n.jsImageData.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,i(n.jsImageData);return}if(n.image){n.width=n.image.width,n.height=n.image.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,i(n.image);return}const s=Mt.getDetailsFromTextureFormat(e.format);let u=e.width*s.stride;const c=(h,y,T)=>{const E=s.elementSize===2&&s.sampleType==="float",S=h.BYTES_PER_ELEMENT,x=h.length/(y*T)*S;if(!E&&x%256===0)return[h,x];const m=x/S,M=s.elementSize,R=256*Math.floor((m*M+255)/256),w=R/M,D=B.newTypedArray(E?"Uint16Array":h.constructor.name,w*y*T),O=y*T;if(E)for(let _=0;_<O;_++){const N=_*m,F=_*w;for(let z=0;z<m;z++)D[F+z]=kn.toHalf(h[N+z])}else if(w===m)D.set(h);else for(let _=0;_<O;_++)D.set(h.subarray(_*m,(_+1)*m),_*w);return[D,R]};n.nativeArray&&(r=n.nativeArray);const l=t.getDimensionality()===3,g=c(r,e.height,l?e.depth:1);u=g[1];const v=g[0];e.device.getHandle().queue.writeTexture({texture:e.handle,mipLevel:0,origin:{x:0,y:0,z:0}},v,{offset:0,bytesPerRow:u,rowsPerImage:e.height},{width:e.width,height:e.height,depthOrArrayLayers:l?e.depth:1}),!l&&e.mipLevel>0&&bs.generateMipmaps(e.device.getHandle(),e.handle,e.mipLevel+1),e.ready=!0},t.getScale=()=>{const n=Mt.getDetailsFromTextureFormat(e.format);return n.elementSize===2&&n.sampleType==="float"?1:255},t.getNumberOfComponents=()=>Mt.getDetailsFromTextureFormat(e.format).numComponents,t.getDimensionality=()=>{let n=0;return e.width>1&&n++,e.height>1&&n++,e.depth>1&&n++,n},t.resizeToMatch=n=>{(n.getWidth()!==e.width||n.getHeight()!==e.height||n.getDepth()!==e.depth)&&(e.width=n.getWidth(),e.height=n.getHeight(),e.depth=n.getDepth(),e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label}))},t.resize=function(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;(n!==e.width||r!==e.height||i!==e.depth)&&(e.width=n,e.height=r,e.depth=i,e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label}))},t.createView=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r.dimension||(r.dimension=e.depth===1?"2d":"3d");const i=qp.newInstance({label:n});return i.create(t,r),i}}const DB={device:null,handle:null,buffer:null,ready:!1,label:null};function Qp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,DB,n),B.obj(t,e),B.get(t,e,["handle","ready","width","height","depth","format","usage"]),B.setGet(t,e,["device","label"]),OB(t,e)}const LB=B.newInstance(Qp);var Jn={newInstance:LB,extend:Qp};function BB(t,e){e.classHierarchy.push("vtkWebGPUPixelSpaceCallbackMapper"),t.opaquePass=(n,r)=>{e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent();const i=e.WebGPURenderer.getAspectRatio(),s=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,u=e.WebGPURenderer.getTiledSizeAndOrigin(),c=null;e.renderable.getUseZValues(),e.renderable.invokeCallback(e.renderable.getInputData(),s,i,u,c)}}const VB={};function NB(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,VB,n),st.extend(t,e,n),BB(t,e)}const _B=B.newInstance(NB,"vtkWebGPUPixelSpaceCallbackMapper");In("vtkPixelSpaceCallbackMapper",_B);const{vtkDebugMacro:Ou}=B;function UB(t,e){e.classHierarchy.push("vtkCamera");const n=new Float64Array(3),r=new Float64Array([0,0,-1]),i=new Float64Array([0,1,0]),s=Oe(new Float64Array(16)),u=Oe(new Float64Array(16)),c=new Float64Array(3),l=new Float64Array(3),g=new Float64Array(3),v=Oe(new Float64Array(16)),h=Oe(new Float64Array(16)),y=new Float64Array(3),T=new Float64Array(3);function E(){e.viewPlaneNormal[0]=-e.directionOfProjection[0],e.viewPlaneNormal[1]=-e.directionOfProjection[1],e.viewPlaneNormal[2]=-e.directionOfProjection[2]}t.orthogonalizeViewUp=()=>{const S=t.getViewMatrix();e.viewUp[0]=S[4],e.viewUp[1]=S[5],e.viewUp[2]=S[6],t.modified()},t.setPosition=(S,x,m)=>{S===e.position[0]&&x===e.position[1]&&m===e.position[2]||(e.position[0]=S,e.position[1]=x,e.position[2]=m,t.computeDistance(),t.modified())},t.setFocalPoint=(S,x,m)=>{S===e.focalPoint[0]&&x===e.focalPoint[1]&&m===e.focalPoint[2]||(e.focalPoint[0]=S,e.focalPoint[1]=x,e.focalPoint[2]=m,t.computeDistance(),t.modified())},t.setDistance=S=>{if(e.distance===S)return;e.distance=S,e.distance<1e-20&&(e.distance=1e-20,Ou("Distance is set to minimum."));const x=e.directionOfProjection;e.focalPoint[0]=e.position[0]+x[0]*e.distance,e.focalPoint[1]=e.position[1]+x[1]*e.distance,e.focalPoint[2]=e.position[2]+x[2]*e.distance,t.modified()},t.computeDistance=()=>{const S=e.focalPoint[0]-e.position[0],x=e.focalPoint[1]-e.position[1],m=e.focalPoint[2]-e.position[2];if(e.distance=Math.sqrt(S*S+x*x+m*m),e.distance<1e-20){e.distance=1e-20,Ou("Distance is set to minimum.");const M=e.directionOfProjection;e.focalPoint[0]=e.position[0]+M[0]*e.distance,e.focalPoint[1]=e.position[1]+M[1]*e.distance,e.focalPoint[2]=e.position[2]+M[2]*e.distance}e.directionOfProjection[0]=S/e.distance,e.directionOfProjection[1]=x/e.distance,e.directionOfProjection[2]=m/e.distance,E()},t.dolly=S=>{if(S<=0)return;const x=e.distance/S;t.setPosition(e.focalPoint[0]-x*e.directionOfProjection[0],e.focalPoint[1]-x*e.directionOfProjection[1],e.focalPoint[2]-x*e.directionOfProjection[2])},t.roll=S=>{const x=e.position,m=e.focalPoint,M=e.viewUp,R=new Float64Array([M[0],M[1],M[2],0]);Oe(v);const w=new Float64Array([m[0]-x[0],m[1]-x[1],m[2]-x[2]]);Yn(v,v,at(S),w),fs(R,R,v),e.viewUp[0]=R[0],e.viewUp[1]=R[1],e.viewUp[2]=R[2],t.modified()},t.azimuth=S=>{const x=e.focalPoint;Oe(h),vt(h,h,x),Yn(h,h,at(S),e.viewUp),vt(h,h,[-x[0],-x[1],-x[2]]),Ae(y,e.position,h),t.setPosition(y[0],y[1],y[2])},t.yaw=S=>{const x=e.position;Oe(h),vt(h,h,x),Yn(h,h,at(S),e.viewUp),vt(h,h,[-x[0],-x[1],-x[2]]),Ae(T,e.focalPoint,h),t.setFocalPoint(T[0],T[1],T[2])},t.elevation=S=>{const x=e.focalPoint,m=t.getViewMatrix(),M=[-m[0],-m[1],-m[2]];Oe(h),vt(h,h,x),Yn(h,h,at(S),M),vt(h,h,[-x[0],-x[1],-x[2]]),Ae(y,e.position,h),t.setPosition(y[0],y[1],y[2])},t.pitch=S=>{const x=e.position,m=t.getViewMatrix(),M=[m[0],m[1],m[2]];Oe(h),vt(h,h,x),Yn(h,h,at(S),M),vt(h,h,[-x[0],-x[1],-x[2]]),Ae(T,e.focalPoint,h),t.setFocalPoint(...T)},t.zoom=S=>{S<=0||(e.parallelProjection?e.parallelScale/=S:e.viewAngle/=S,t.modified())},t.translate=(S,x,m)=>{const M=[S,x,m];ai(e.position,M,e.position),ai(e.focalPoint,M,e.focalPoint),t.computeDistance(),t.modified()},t.applyTransform=S=>{const x=[...e.viewUp,1],m=[],M=[],R=[];x[0]+=e.position[0],x[1]+=e.position[1],x[2]+=e.position[2],fs(m,[...e.position,1],S),fs(M,[...e.focalPoint,1],S),fs(R,x,S),R[0]-=m[0],R[1]-=m[1],R[2]-=m[2],t.setPosition(...m.slice(0,3)),t.setFocalPoint(...M.slice(0,3)),t.setViewUp(...R.slice(0,3))},t.getThickness=()=>e.clippingRange[1]-e.clippingRange[0],t.setThickness=S=>{let x=S;x<1e-20&&(x=1e-20,Ou("Thickness is set to minimum.")),t.setClippingRange(e.clippingRange[0],e.clippingRange[0]+x)},t.setThicknessFromFocalPoint=S=>{let x=S;x<1e-20&&(x=1e-20,Ou("Thickness is set to minimum.")),t.setClippingRange(e.distance-x/2,e.distance+x/2)},t.setRoll=S=>{},t.getRoll=()=>{},t.setObliqueAngles=(S,x)=>{},t.getOrientation=()=>{},t.getOrientationWXYZ=()=>{},t.getFrustumPlanes=function(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Float64Array(24);const m=[[1,0,0,1],[-1,0,0,1],[0,1,0,1],[0,-1,0,1],[0,0,1,1],[0,0,-1,1]],M=t.getCompositeProjectionMatrix(S,-1,1);for(let R=0;R<6;R++)fs(m[R],m[R],M),DE(m[R]),x[4*R+0]=m[R][0],x[4*R+1]=m[R][1],x[4*R+2]=m[R][2],x[4*R+3]=m[R][3];return x},t.getCameraLightTransformMatrix=S=>(Ft(S,e.cameraLightTransform),S),t.computeCameraLightTransform=()=>{Ft(s,t.getViewMatrix()),tn(s,s),T6(u,[e.distance,e.distance,e.distance]),wt(s,s,u),Oe(e.cameraLightTransform),vt(e.cameraLightTransform,s,[0,0,-1])},t.deepCopy=S=>{},t.physicalOrientationToWorldDirection=S=>{const x=g9(S[0],S[1],S[2],S[3]),m=n0(),M=g9(0,0,1,0);return HS(m,x),l9(M,x,M),l9(M,M,m),[M[0],M[1],M[2]]},t.getPhysicalToWorldMatrix=S=>{t.getWorldToPhysicalMatrix(S),tn(S,S)},t.getWorldToPhysicalMatrix=S=>{Oe(S);const x=[3];jt(e.physicalViewNorth,e.physicalViewUp,x),S[0]=x[0],S[1]=x[1],S[2]=x[2],S[4]=e.physicalViewUp[0],S[5]=e.physicalViewUp[1],S[6]=e.physicalViewUp[2],S[8]=-e.physicalViewNorth[0],S[9]=-e.physicalViewNorth[1],S[10]=-e.physicalViewNorth[2],Qe(S,S),Qu(c,1/e.physicalScale,1/e.physicalScale,1/e.physicalScale),ti(S,S,c),vt(S,S,e.physicalTranslation)},t.computeViewParametersFromViewMatrix=S=>{tn(s,S),Ae(c,n,s),t.computeDistance();const x=e.distance;t.setPosition(c[0],c[1],c[2]),Ae(l,r,s),ga(l,l,c),Bs(l,l),t.setDirectionOfProjection(l[0],l[1],l[2]),Ae(g,i,s),ga(g,g,c),Bs(g,g),t.setViewUp(g[0],g[1],g[2]),t.setDistance(x)},t.computeViewParametersFromPhysicalMatrix=S=>{t.getWorldToPhysicalMatrix(s),wt(s,S,s),t.computeViewParametersFromViewMatrix(s)},t.setModelTransformMatrix=S=>{e.modelTransformMatrix=S},t.getModelTransformMatrix=()=>e.modelTransformMatrix,t.setViewMatrix=S=>{e.viewMatrix=S,e.viewMatrix&&(Ft(s,e.viewMatrix),t.computeViewParametersFromViewMatrix(s),Qe(e.viewMatrix,e.viewMatrix))},t.getViewMatrix=()=>{if(e.viewMatrix)return e.modelTransformMatrix?(wt(s,e.viewMatrix,e.modelTransformMatrix),s):e.viewMatrix;w6(s,e.position,e.focalPoint,e.viewUp),Qe(s,s);const S=new Float64Array(16);return e.modelTransformMatrix?wt(S,s,e.modelTransformMatrix):Ft(S,s),S},t.setProjectionMatrix=S=>{e.projectionMatrix=S},t.getProjectionMatrix=(S,x,m)=>{const M=new Float64Array(16);if(Oe(M),e.projectionMatrix){const D=1/e.physicalScale;return Qu(c,D,D,D),Ft(M,e.projectionMatrix),ti(M,M,c),Qe(M,M),M}Oe(s);const R=e.clippingRange[1]-e.clippingRange[0],w=[e.clippingRange[0]+(x+1)*R/2,e.clippingRange[0]+(m+1)*R/2];if(e.parallelProjection){const D=e.parallelScale*S,O=e.parallelScale,_=(e.windowCenter[0]-1)*D,N=(e.windowCenter[0]+1)*D,F=(e.windowCenter[1]-1)*O,z=(e.windowCenter[1]+1)*O;R6(s,_,N,F,z,w[0],w[1]),Qe(s,s)}else{if(e.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");{const D=Math.tan(at(e.viewAngle)/2);let O,_;e.useHorizontalViewAngle===!0?(O=e.clippingRange[0]*D,_=e.clippingRange[0]*D/S):(O=e.clippingRange[0]*D*S,_=e.clippingRange[0]*D);const N=(e.windowCenter[0]-1)*O,F=(e.windowCenter[0]+1)*O,z=(e.windowCenter[1]-1)*_,$=(e.windowCenter[1]+1)*_,Y=w[0],A=w[1];s[0]=2*Y/(F-N),s[5]=2*Y/($-z),s[2]=(N+F)/(F-N),s[6]=(z+$)/($-z),s[10]=-(Y+A)/(A-Y),s[14]=-1,s[11]=-2*Y*A/(A-Y),s[15]=0}}return Ft(M,s),M},t.getCompositeProjectionMatrix=(S,x,m)=>{const M=t.getViewMatrix(),R=t.getProjectionMatrix(S,x,m);return wt(R,M,R),R},t.setDirectionOfProjection=(S,x,m)=>{if(e.directionOfProjection[0]===S&&e.directionOfProjection[1]===x&&e.directionOfProjection[2]===m)return;e.directionOfProjection[0]=S,e.directionOfProjection[1]=x,e.directionOfProjection[2]=m;const M=e.directionOfProjection;e.focalPoint[0]=e.position[0]+M[0]*e.distance,e.focalPoint[1]=e.position[1]+M[1]*e.distance,e.focalPoint[2]=e.position[2]+M[2]*e.distance,E()},t.setDeviceAngles=(S,x,m,M)=>{const R=[3];jt(e.physicalViewNorth,e.physicalViewUp,R);const w=Oe(new Float64Array(16));Yn(w,w,at(S),e.physicalViewUp),Yn(w,w,at(x),R),Yn(w,w,at(m),e.physicalViewNorth),Yn(w,w,at(-M),e.physicalViewUp);const D=new Float64Array([-e.physicalViewUp[0],-e.physicalViewUp[1],-e.physicalViewUp[2]]),O=new Float64Array(e.physicalViewNorth);Ae(D,D,w),Ae(O,O,w),t.setDirectionOfProjection(D[0],D[1],D[2]),t.setViewUp(O[0],O[1],O[2]),t.modified()},t.setOrientationWXYZ=(S,x,m,M)=>{const R=Oe(new Float64Array(16));if(S!==0&&(x!==0||m!==0||M!==0)){const O=at(S),_=n0();g2(_,[x,m,M],O),ws(R,_)}const w=new Float64Array(3);Ae(w,[0,0,-1],R);const D=new Float64Array(3);Ae(D,[0,1,0],R),t.setDirectionOfProjection(...w),t.setViewUp(...D),t.modified()},t.computeClippingRange=S=>{let x=null,m=null;x=e.viewPlaneNormal,m=e.position;const M=-x[0],R=-x[1],w=-x[2],D=-(M*m[0]+R*m[1]+w*m[2]),O=[M*S[0]+R*S[2]+w*S[4]+D,1e-18];for(let _=0;_<2;_++)for(let N=0;N<2;N++)for(let F=0;F<2;F++){const z=M*S[F]+R*S[2+N]+w*S[4+_]+D;O[0]=z<O[0]?z:O[0],O[1]=z>O[1]?z:O[1]}return O}}const GB={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,projectionMatrix:null,viewMatrix:null,modelTransformMatrix:null,cameraLightTransform:hc(),physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]};function Zp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,GB,n),B.obj(t,e),B.get(t,e,["distance"]),B.setGet(t,e,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","physicalScale"]),B.getArray(t,e,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),B.setGetArray(t,e,["clippingRange","windowCenter"],2),B.setGetArray(t,e,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),UB(t,e)}const bB=B.newInstance(Zp,"vtkCamera");var FB={newInstance:bB,extend:Zp};function zB(t,e){e.classHierarchy.push("vtkLight");const n=new Float64Array(3);t.getTransformedPosition=()=>(e.transformMatrix?Ae(n,e.position,e.transformMatrix):Qu(n,e.position[0],e.position[1],e.position[2]),n),t.getTransformedFocalPoint=()=>(e.transformMatrix?Ae(n,e.focalPoint,e.transformMatrix):Qu(n,e.focalPoint[0],e.focalPoint[1],e.focalPoint[2]),n),t.getDirection=()=>(e.directionMTime<e.mtime&&(Fl(e.direction,e.focalPoint,e.position),pn(e.direction),e.directionMTime=e.mtime),e.direction),t.setDirection=r=>{const i=new Float64Array(3);Fl(i,e.position,r),e.focalPoint=i},t.setDirectionAngle=(r,i)=>{const s=at(r),u=at(i);t.setPosition(Math.cos(s)*Math.sin(u),Math.sin(s),Math.cos(s)*Math.cos(u)),t.setFocalPoint(0,0,0),t.setPositional(0)},t.setLightTypeToHeadLight=()=>{t.setLightType("HeadLight")},t.setLightTypeToCameraLight=()=>{t.setLightType("CameraLight")},t.setLightTypeToSceneLight=()=>{t.setTransformMatrix(null),t.setLightType("SceneLight")},t.lightTypeIsHeadLight=()=>e.lightType==="HeadLight",t.lightTypeIsSceneLight=()=>e.lightType==="SceneLight",t.lightTypeIsCameraLight=()=>e.lightType==="CameraLight"}const kB={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,coneFalloff:5,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0};function HB(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,kB,n),B.obj(t,e),B.setGet(t,e,["intensity","switch","positional","exponent","coneAngle","coneFalloff","transformMatrix","lightType","shadowAttenuation","attenuationValues"]),B.setGetArray(t,e,["color","position","focalPoint","attenuationValues"],3),zB(t,e)}const $B=B.newInstance(HB,"vtkLight");var AB={newInstance:$B};const{vtkErrorMacro:qu}=B;function WB(t){return()=>qu(`vtkViewport::${t} - NOT IMPLEMENTED`)}function jB(t,e){e.classHierarchy.push("vtkViewport"),t.getViewProps=()=>e.props,t.hasViewProp=r=>e.props.includes(r),t.addViewProp=r=>{r&&!t.hasViewProp(r)&&e.props.push(r)},t.removeViewProp=r=>{const i=e.props.filter(s=>s!==r);e.props.length!==i.length&&(e.props=i)},t.removeAllViewProps=()=>{e.props=[]};function n(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];i.push(r);const s=r.getNestedProps();if(s&&s.length)for(let u=0;u<s.length;u++)n(s[u],i);return i}t.getViewPropsWithNestedProps=()=>{let r=[];const i=t.getActors2D();i.sort((u,c)=>u.getLayerNumber()-c.getLayerNumber());const s=e.props.filter(u=>!i.includes(u));for(let u=0;u<s.length;u++)n(s[u],r);return r=r.concat(i),r},t.addActor2D=t.addViewProp,t.removeActor2D=r=>{t.removeViewProp(r)},t.getActors2D=()=>(e.actors2D=[],e.props.forEach(r=>{e.actors2D=e.actors2D.concat(r.getActors2D())}),e.actors2D),t.displayToView=()=>qu("call displayToView on your view instead"),t.viewToDisplay=()=>qu("callviewtodisplay on your view instead"),t.getSize=()=>qu("call getSize on your View instead"),t.normalizedDisplayToProjection=(r,i,s)=>{const u=t.normalizedDisplayToNormalizedViewport(r,i,s);return t.normalizedViewportToProjection(u[0],u[1],u[2])},t.normalizedDisplayToNormalizedViewport=(r,i,s)=>{const u=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[(r-e.viewport[0])/u[0],(i-e.viewport[1])/u[1],s]},t.normalizedViewportToProjection=(r,i,s)=>[r*2-1,i*2-1,s*2-1],t.projectionToNormalizedDisplay=(r,i,s)=>{const u=t.projectionToNormalizedViewport(r,i,s);return t.normalizedViewportToNormalizedDisplay(u[0],u[1],u[2])},t.normalizedViewportToNormalizedDisplay=(r,i,s)=>{const u=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[r*u[0]+e.viewport[0],i*u[1]+e.viewport[1],s]},t.projectionToNormalizedViewport=(r,i,s)=>[(r+1)*.5,(i+1)*.5,(s+1)*.5],t.PickPropFrom=WB("PickPropFrom")}const KB={background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]};function Jp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,KB,n),B.obj(t,e),B.event(t,e,"event"),B.setGetArray(t,e,["viewport"],4),B.setGetArray(t,e,["background","background2"],3),jB(t,e)}const XB=B.newInstance(Jp,"vtkViewport");var YB={newInstance:XB,extend:Jp};const{vtkDebugMacro:ps,vtkErrorMacro:ca,vtkWarningMacro:qB}=Pn;function X8(t){return()=>ca(`vtkRenderer::${t} - NOT IMPLEMENTED`)}function QB(t,e){e.classHierarchy.push("vtkRenderer");const n={type:"ComputeVisiblePropBoundsEvent",renderer:t},r={type:"ResetCameraClippingRangeEvent",renderer:t},i={type:"ResetCameraEvent",renderer:t};t.updateCamera=()=>(e.activeCamera||(ps("No cameras are on, creating one."),t.getActiveCameraAndResetIfCreated()),e.activeCamera.render(t),!0),t.updateLightsGeometryToFollowCamera=()=>{const s=t.getActiveCameraAndResetIfCreated();e.lights.forEach(u=>{u.lightTypeIsSceneLight()||(u.lightTypeIsHeadLight()?(u.setPositionFrom(s.getPositionByReference()),u.setFocalPointFrom(s.getFocalPointByReference()),u.modified(s.getMTime())):u.lightTypeIsCameraLight()?u.setTransformMatrix(s.getCameraLightTransformMatrix(hc())):ca("light has unknown light type",u.get()))})},t.updateLightGeometry=()=>e.lightFollowCamera?t.updateLightsGeometryToFollowCamera():!0,t.allocateTime=X8("allocateTime"),t.updateGeometry=X8("updateGeometry"),t.getVTKWindow=()=>e._renderWindow,t.setLayer=s=>{ps(t.getClassName(),t,"setting Layer to ",s),e.layer!==s&&(e.layer=s,t.modified()),t.setPreserveColorBuffer(!!s)},t.setActiveCamera=s=>e.activeCamera===s?!1:(e.activeCamera=s,t.modified(),t.invokeEvent({type:"ActiveCameraEvent",camera:s}),!0),t.makeCamera=()=>{const s=FB.newInstance();return t.invokeEvent({type:"CreateCameraEvent",camera:s}),s},t.getActiveCamera=()=>(e.activeCamera||(e.activeCamera=t.makeCamera()),e.activeCamera),t.getActiveCameraAndResetIfCreated=()=>(e.activeCamera||(t.getActiveCamera(),t.resetCamera()),e.activeCamera),t.getActors=()=>(e.actors=[],e.props.forEach(s=>{e.actors=e.actors.concat(s.getActors())}),e.actors),t.addActor=t.addViewProp,t.removeActor=s=>{e.actors=e.actors.filter(u=>u!==s),t.removeViewProp(s),t.modified()},t.removeAllActors=()=>{t.getActors().forEach(u=>{t.removeViewProp(u)}),e.actors=[],t.modified()},t.getVolumes=()=>(e.volumes=[],e.props.forEach(s=>{e.volumes=e.volumes.concat(s.getVolumes())}),e.volumes),t.addVolume=t.addViewProp,t.removeVolume=s=>{e.volumes=e.volumes.filter(u=>u!==s),t.removeViewProp(s),t.modified()},t.removeAllVolumes=()=>{t.getVolumes().forEach(u=>{t.removeViewProp(u)}),e.volumes=[],t.modified()},t.hasLight=s=>e.lights.includes(s),t.addLight=s=>{s&&!t.hasLight(s)&&(e.lights.push(s),t.modified())},t.removeLight=s=>{e.lights=e.lights.filter(u=>u!==s),t.modified()},t.removeAllLights=()=>{e.lights=[],t.modified()},t.setLightCollection=s=>{e.lights=s,t.modified()},t.makeLight=AB.newInstance,t.createLight=()=>{e.automaticLightCreation&&(e._createdLight&&(t.removeLight(e._createdLight),e._createdLight.delete(),e._createdLight=null),e._createdLight=t.makeLight(),t.addLight(e._createdLight),e._createdLight.setLightTypeToHeadLight(),e._createdLight.setPosition(t.getActiveCamera().getPosition()),e._createdLight.setFocalPoint(t.getActiveCamera().getFocalPoint()))},t.normalizedDisplayToWorld=(s,u,c,l)=>{let g=t.normalizedDisplayToProjection(s,u,c);return g=t.projectionToView(g[0],g[1],g[2],l),t.viewToWorld(g[0],g[1],g[2])},t.worldToNormalizedDisplay=(s,u,c,l)=>{let g=t.worldToView(s,u,c);return g=t.viewToProjection(g[0],g[1],g[2],l),t.projectionToNormalizedDisplay(g[0],g[1],g[2])},t.viewToWorld=(s,u,c)=>{if(e.activeCamera===null)return ca("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const l=e.activeCamera.getViewMatrix();tn(l,l),Qe(l,l);const g=new Float64Array([s,u,c]);return Ae(g,g,l),g},t.projectionToView=(s,u,c,l)=>{if(e.activeCamera===null)return ca("ProjectionToView: no active camera, cannot compute projection to view, returning 0,0,0"),[0,0,0];const g=e.activeCamera.getProjectionMatrix(l,-1,1);tn(g,g),Qe(g,g);const v=new Float64Array([s,u,c]);return Ae(v,v,g),v},t.worldToView=(s,u,c)=>{if(e.activeCamera===null)return ca("WorldToView: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const l=e.activeCamera.getViewMatrix();Qe(l,l);const g=new Float64Array([s,u,c]);return Ae(g,g,l),g},t.viewToProjection=(s,u,c,l)=>{if(e.activeCamera===null)return ca("ViewToProjection: no active camera, cannot compute view to projection, returning 0,0,0"),[0,0,0];const g=e.activeCamera.getProjectionMatrix(l,-1,1);Qe(g,g);const v=new Float64Array([s,u,c]);return Ae(v,v,g),v},t.computeVisiblePropBounds=()=>{e.allBounds[0]=Ve.INIT_BOUNDS[0],e.allBounds[1]=Ve.INIT_BOUNDS[1],e.allBounds[2]=Ve.INIT_BOUNDS[2],e.allBounds[3]=Ve.INIT_BOUNDS[3],e.allBounds[4]=Ve.INIT_BOUNDS[4],e.allBounds[5]=Ve.INIT_BOUNDS[5];let s=!0;t.invokeEvent(n);for(let u=0;u<e.props.length;++u){const c=e.props[u];if(c.getVisibility()&&c.getUseBounds()){const l=c.getBounds();l&&ju(l)&&(s=!1,l[0]<e.allBounds[0]&&(e.allBounds[0]=l[0]),l[1]>e.allBounds[1]&&(e.allBounds[1]=l[1]),l[2]<e.allBounds[2]&&(e.allBounds[2]=l[2]),l[3]>e.allBounds[3]&&(e.allBounds[3]=l[3]),l[4]<e.allBounds[4]&&(e.allBounds[4]=l[4]),l[5]>e.allBounds[5]&&(e.allBounds[5]=l[5]))}}return s&&(B2(e.allBounds),ps("Can't compute bounds, no 3D props are visible")),e.allBounds},t.resetCamera=function(){const u=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds(),c=[0,0,0];if(!ju(u))return ps("Cannot reset camera!"),!1;let l=null;if(t.getActiveCamera())l=e.activeCamera.getViewPlaneNormal();else return ca("Trying to reset non-existent camera"),!1;e.activeCamera.setViewAngle(30),c[0]=(u[0]+u[1])/2,c[1]=(u[2]+u[3])/2,c[2]=(u[4]+u[5])/2;let g=u[1]-u[0],v=u[3]-u[2],h=u[5]-u[4];g*=g,v*=v,h*=h;let y=g+v+h;y=y===0?1:y,y=Math.sqrt(y)*.5;const T=at(e.activeCamera.getViewAngle()),E=y,S=y/Math.sin(T*.5),x=e.activeCamera.getViewUp();return Math.abs(pe(x,l))>.999&&(qB("Resetting view-up since view plane normal is parallel"),e.activeCamera.setViewUp(-x[2],x[0],x[1])),e.activeCamera.setFocalPoint(c[0],c[1],c[2]),e.activeCamera.setPosition(c[0]+S*l[0],c[1]+S*l[1],c[2]+S*l[2]),t.resetCameraClippingRange(u),e.activeCamera.setParallelScale(E),e.activeCamera.setPhysicalScale(y),e.activeCamera.setPhysicalTranslation(-c[0],-c[1],-c[2]),t.invokeEvent(i),!0},t.resetCameraClippingRange=function(){const u=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds();if(!ju(u))return ps("Cannot reset camera clipping range!"),!1;if(t.getActiveCameraAndResetIfCreated(),!e.activeCamera)return ca("Trying to reset clipping range of non-existent camera"),!1;const c=e.activeCamera.computeClippingRange(u);let l=0;if(e.activeCamera.getParallelProjection())l=.2*e.activeCamera.getParallelScale();else{const g=at(e.activeCamera.getViewAngle());l=.2*Math.tan(g/2)*c[1]}return c[1]-c[0]<l&&(l=l-c[1]+c[0],c[1]+=l/2,c[0]-=l/2),c[0]<0&&(c[0]=0),c[0]=.99*c[0]-(c[1]-c[0])*e.clippingRangeExpansion,c[1]=1.01*c[1]+(c[1]-c[0])*e.clippingRangeExpansion,c[0]=c[0]>=c[1]?.01*c[1]:c[0],e.nearClippingPlaneTolerance||(e.nearClippingPlaneTolerance=.01),c[0]<e.nearClippingPlaneTolerance*c[1]&&(c[0]=e.nearClippingPlaneTolerance*c[1]),e.activeCamera.setClippingRange(c[0],c[1]),t.invokeEvent(r),!1},t.setRenderWindow=s=>{s!==e._renderWindow&&(e._vtkWindow=s,e._renderWindow=s)},t.visibleActorCount=()=>e.props.filter(s=>s.getVisibility()).length,t.visibleVolumeCount=t.visibleActorCount,t.getMTime=()=>{let s=e.mtime;const u=e.activeCamera?e.activeCamera.getMTime():0;u>s&&(s=u);const c=e._createdLight?e._createdLight.getMTime():0;return c>s&&(s=c),s},t.getTransparent=()=>!!e.preserveColorBuffer,t.isActiveCameraCreated=()=>!!e.activeCamera}const ZB={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:0,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:dc(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,environmentTexture:null,environmentTextureDiffuseStrength:1,environmentTextureSpecularStrength:1,useEnvironmentTextureAsBackground:!1,pass:0};function Pp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(Object.assign(e,ZB,n),YB.extend(t,e,n),e.background||(e.background=[0,0,0,1]);e.background.length<3;)e.background.push(0);e.background.length===3&&e.background.push(1),Kt(t,e,["_renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),St(t,e,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","environmentTexture","environmentTextureDiffuseStrength","environmentTextureSpecularStrength","useEnvironmentTextureAsBackground","useShadows","pass"]),li(t,e,["actors","volumes","lights"]),y2(t,e,["background"],4,1),zs(t,e,["renderWindow"]),QB(t,e)}const JB=Ye(Pp,"vtkRenderer");var PB={newInstance:JB,extend:Pp};const IB="WebGL",lc=Object.create(null);function X2(t,e){lc[t]=e}function eV(){return Object.keys(lc)}function Ip(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return lc[t]&&lc[t](e)}function tV(t,e){e.classHierarchy.push("vtkRenderWindow"),t.addRenderer=n=>{t.hasRenderer(n)||(n.setRenderWindow(t),e.renderers.push(n),t.modified())},t.removeRenderer=n=>{e.renderers=e.renderers.filter(r=>r!==n),t.modified()},t.hasRenderer=n=>e.renderers.indexOf(n)!==-1,t.newAPISpecificView=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ip(n||e.defaultViewAPI,r)},t.addView=n=>{t.hasView(n)||(n.setRenderable(t),e._views.push(n),t.modified())},t.removeView=n=>{e._views=e._views.filter(r=>r!==n),t.modified()},t.hasView=n=>e._views.indexOf(n)!==-1,t.preRender=()=>{e.renderers.forEach(n=>{n.isActiveCameraCreated()||n.resetCamera()})},t.render=()=>{t.preRender(),e.interactor?e.interactor.render():e._views.forEach(n=>n.traverseAllPasses())},t.getStatistics=()=>{const n={propCount:0,invisiblePropCount:0,gpuMemoryMB:0};return e._views.forEach(r=>{r.getGraphicsMemoryInfo&&(n.gpuMemoryMB+=r.getGraphicsMemoryInfo()/1e6)}),e.renderers.forEach(r=>{const i=r.getViewProps(),s=e._views[0].getViewNodeFor(r);i.forEach(u=>{if(u.getVisibility()){n.propCount+=1;const c=u.getMapper&&u.getMapper();if(c&&c.getPrimitiveCount){const l=s.getViewNodeFor(c);if(l){l.getAllocatedGPUMemoryInBytes&&(n.gpuMemoryMB+=l.getAllocatedGPUMemoryInBytes()/1e6);const g=c.getPrimitiveCount();Object.keys(g).forEach(v=>{n[v]||(n[v]=0),n[v]+=g[v]})}}}else n.invisiblePropCount+=1})}),n.str=Object.keys(n).map(r=>`${r}: ${n[r]}`).join(`
`),n},t.captureImages=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return B.setImmediate(t.render),e._views.map(i=>i.captureNextImage?i.captureNextImage(n,r):void 0).filter(i=>!!i)},t.addRenderWindow=n=>e.childRenderWindows.includes(n)?!1:(e.childRenderWindows.push(n),t.modified(),!0),t.removeRenderWindow=n=>{const r=e.childRenderWindows.findIndex(i=>i===n);return r<0?!1:(e.childRenderWindows.splice(r,1),t.modified(),!0)}}const nV={defaultViewAPI:IB,renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1,childRenderWindows:[]};function ev(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,nV,n),B.obj(t,e),B.setGet(t,e,["interactor","numberOfLayers","_views","defaultViewAPI"]),B.get(t,e,["neverRendered"]),B.getArray(t,e,["renderers","childRenderWindows"]),B.moveToProtected(t,e,["views"]),B.event(t,e,"completion"),tV(t,e)}const rV=B.newInstance(ev,"vtkRenderWindow");var aV={newInstance:rV,extend:ev,registerViewConstructor:X2,listViewAPIs:eV,newAPISpecificView:Ip};const o2={Unknown:0,LeftController:1,RightController:2},Rs={Unknown:0,Trigger:1,TrackPad:2,Grip:3,Thumbstick:4,A:5,B:6,ApplicationMenu:7},iV={Unknown:0,TouchpadX:1,TouchpadY:2,ThumbstickX:3,ThumbstickY:4},sV={LeftButton:1,MiddleButton:2,RightButton:3};var tv={Device:o2,Input:Rs,Axis:iV,MouseButton:sV};const{Device:Du,Input:Ya}=tv,{vtkWarningMacro:Lu,vtkErrorMacro:Bu,normalizeWheel:oV,vtkOnceErrorMacro:uV}=B,q0={ctrlKey:!1,altKey:!1,shiftKey:!1},Dl={"xr-standard":[Ya.Trigger,Ya.Grip,Ya.TrackPad,Ya.Thumbstick,Ya.A,Ya.B]},Y2=["StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"];function vs(t){t.cancelable&&t.preventDefault()}function Vu(t){const e=Object.create(null);return t.forEach(n=>{let{pointerId:r,position:i}=n;e[r]=i}),e}function cV(t,e){e.classHierarchy.push("vtkRenderWindowInteractor");const n={...t},r=new Set,i=new Map;let s=1;t.start=()=>{!e.initialized&&(t.initialize(),!e.initialized)||t.startEventLoop()},t.setRenderWindow=S=>{Bu("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},t.setInteractorStyle=S=>{e.interactorStyle!==S&&(e.interactorStyle!=null&&e.interactorStyle.setInteractor(null),e.interactorStyle=S,e.interactorStyle!=null&&e.interactorStyle.getInteractor()!==t&&e.interactorStyle.setInteractor(t))},t.initialize=()=>{e.initialized=!0,t.enable(),t.render()},t.enable=()=>t.setEnabled(!0),t.disable=()=>t.setEnabled(!1),t.startEventLoop=()=>Lu("empty event loop");function u(S,x){e._forcedRenderer||(e.currentRenderer=t.findPokedRenderer(S,x))}t.getCurrentRenderer=()=>(e.currentRenderer||u(0,0),e.currentRenderer);function c(S){const x=e._view.getCanvas(),m=x.getBoundingClientRect(),M=x.width/m.width,R=x.height/m.height,w={x:M*(S.clientX-m.left),y:R*(m.height-S.clientY+m.top),z:0,movementX:M*S.movementX,movementY:R*S.movementY};return(i.size<=1||!e.currentRenderer)&&u(w.x,w.y),w}const l=e._getScreenEventPositionFor||c;function g(S){return{controlKey:S.ctrlKey,altKey:S.altKey,shiftKey:S.shiftKey}}function v(S){const x=g(S);return{key:S.key,keyCode:S.charCode,...x}}function h(S){return S.pointerType||""}const y=()=>{if(e.container===null)return;const{container:S}=e;S.addEventListener("contextmenu",vs),S.addEventListener("wheel",t.handleWheel),S.addEventListener("DOMMouseScroll",t.handleWheel),S.addEventListener("pointerenter",t.handlePointerEnter),S.addEventListener("pointerleave",t.handlePointerLeave),S.addEventListener("pointermove",t.handlePointerMove,{passive:!1}),S.addEventListener("pointerdown",t.handlePointerDown,{passive:!1}),S.addEventListener("pointerup",t.handlePointerUp),S.addEventListener("pointercancel",t.handlePointerCancel),S.addEventListener("keypress",t.handleKeyPress),S.addEventListener("keydown",t.handleKeyDown),document.addEventListener("keyup",t.handleKeyUp),document.addEventListener("pointerlockchange",t.handlePointerLockChange),S.tabIndex=0,S.style.touchAction="none",S.style.userSelect="none",S.style.webkitTapHighlightColor="rgba(0,0,0,0)"};t.bindEvents=S=>{if(S===null)return;n.setContainer(S)&&y()};const T=()=>{clearTimeout(e.moveTimeoutID),clearTimeout(e.wheelTimeoutID),e.moveTimeoutID=0,e.wheelTimeoutID=0,s=1;const{container:S}=e;S&&(S.removeEventListener("contextmenu",vs),S.removeEventListener("wheel",t.handleWheel),S.removeEventListener("DOMMouseScroll",t.handleWheel),S.removeEventListener("pointerenter",t.handlePointerEnter),S.removeEventListener("pointerleave",t.handlePointerLeave),S.removeEventListener("pointermove",t.handlePointerMove,{passive:!1}),S.removeEventListener("pointerdown",t.handlePointerDown,{passive:!1}),S.removeEventListener("pointerup",t.handlePointerUp),S.removeEventListener("pointercancel",t.handlePointerCancel),S.removeEventListener("keypress",t.handleKeyPress),S.removeEventListener("keydown",t.handleKeyDown)),document.removeEventListener("keyup",t.handleKeyUp),document.removeEventListener("pointerlockchange",t.handlePointerLockChange),i.clear()};t.unbindEvents=()=>{T(),n.setContainer(null)},t.handleKeyPress=S=>{const x=v(S);t.keyPressEvent(x)},t.handleKeyDown=S=>{const x=v(S);t.keyDownEvent(x)},t.handleKeyUp=S=>{const x=v(S);t.keyUpEvent(x)},t.handlePointerEnter=S=>{const x={...g(S),position:l(S),deviceType:h(S)};t.pointerEnterEvent(x),x.deviceType==="mouse"&&t.mouseEnterEvent(x)},t.handlePointerLeave=S=>{const x={...g(S),position:l(S),deviceType:h(S)};t.pointerLeaveEvent(x),x.deviceType==="mouse"&&t.mouseLeaveEvent(x)},t.handlePointerDown=S=>{if(!(S.button>2||t.isPointerLocked()))switch(e.preventDefaultOnPointerDown&&vs(S),S.target.hasPointerCapture(S.pointerId)&&S.target.releasePointerCapture(S.pointerId),e.container.setPointerCapture(S.pointerId),i.has(S.pointerId)&&Lu("[RenderWindowInteractor] duplicate pointerId detected"),i.set(S.pointerId,{pointerId:S.pointerId,position:l(S)}),S.pointerType){case"pen":case"touch":t.handleTouchStart(S);break;case"mouse":default:t.handleMouseDown(S);break}},t.handlePointerUp=S=>{if(i.has(S.pointerId))switch(e.preventDefaultOnPointerUp&&vs(S),i.delete(S.pointerId),e.container.releasePointerCapture(S.pointerId),S.pointerType){case"pen":case"touch":t.handleTouchEnd(S);break;case"mouse":default:t.handleMouseUp(S);break}},t.handlePointerCancel=S=>{if(i.has(S.pointerId))switch(i.delete(S.pointerId),S.pointerType){case"pen":case"touch":t.handleTouchEnd(S);break;case"mouse":default:t.handleMouseUp(S);break}},t.handlePointerMove=S=>{if(i.has(S.pointerId)){const x=i.get(S.pointerId);x.position=l(S)}switch(S.pointerType){case"pen":case"touch":t.handleTouchMove(S);break;case"mouse":default:t.handleMouseMove(S);break}},t.handleMouseDown=S=>{const x={...g(S),position:l(S),deviceType:h(S)};switch(S.button){case 0:t.leftButtonPressEvent(x);break;case 1:t.middleButtonPressEvent(x);break;case 2:t.rightButtonPressEvent(x);break;default:Bu(`Unknown mouse button pressed: ${S.button}`);break}},t.requestPointerLock=()=>{e.container&&e.container.requestPointerLock()},t.exitPointerLock=()=>document.exitPointerLock?.(),t.isPointerLocked=()=>!!e.container&&document.pointerLockElement===e.container,t.handlePointerLockChange=()=>{t.isPointerLocked()?t.startPointerLockEvent():t.endPointerLockEvent()};function E(){e._view&&e.enabled&&e.enableRender&&(e.inRender=!0,e._view.traverseAllPasses(),e.inRender=!1),t.invokeRenderEvent()}t.requestAnimation=S=>{if(S===void 0){Bu("undefined requester, can not start animating");return}if(r.has(S)){Lu("requester is already registered for animating");return}r.add(S),!e.animationRequest&&r.size===1&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.extendAnimation=S=>{const x=Date.now()+S;e._animationExtendedEnd=Math.max(e._animationExtendedEnd,x),!e.animationRequest&&r.size===0&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.isAnimating=()=>e.xrAnimation||e.animationRequest!==null,t.cancelAnimation=function(S){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r.has(S)){if(!x){const m=S&&S.getClassName?S.getClassName():S;Lu(`${m} did not request an animation`)}return}r.delete(S),e.animationRequest&&r.size===0&&Date.now()>e._animationExtendedEnd&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.switchToXRAnimation=()=>{e.animationRequest&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null),e.xrAnimation=!0},t.returnFromXRAnimation=()=>{e.xrAnimation=!1,r.size!==0&&(e.recentAnimationFrameRate=10,e.animationRequest=requestAnimationFrame(t.handleAnimation))},t.updateXRGamepads=(S,x,m)=>{S.inputSources.forEach(M=>{const R=M.gripSpace==null?null:x.getPose(M.gripSpace,m),w=M.gripSpace==null?null:x.getPose(M.targetRaySpace,m),D=M.gamepad,O=M.handedness;if(D){D.index in e.lastGamepadValues||(e.lastGamepadValues[D.index]={left:{buttons:{}},right:{buttons:{}},none:{buttons:{}}});for(let _=0;_<D.buttons.length;++_)_ in e.lastGamepadValues[D.index][O].buttons||(e.lastGamepadValues[D.index][O].buttons[_]=!1),e.lastGamepadValues[D.index][O].buttons[_]!==D.buttons[_].pressed&&R!=null&&(t.button3DEvent({gamepad:D,position:R.transform.position,orientation:R.transform.orientation,targetPosition:w.transform.position,targetOrientation:w.transform.orientation,pressed:D.buttons[_].pressed,device:M.handedness==="left"?Du.LeftController:Du.RightController,input:Dl[D.mapping]&&Dl[D.mapping][_]?Dl[D.mapping][_]:Ya.Trigger}),e.lastGamepadValues[D.index][O].buttons[_]=D.buttons[_].pressed),e.lastGamepadValues[D.index][O].buttons[_]&&R!=null&&t.move3DEvent({gamepad:D,position:R.transform.position,orientation:R.transform.orientation,targetPosition:w.transform.position,targetOrientation:w.transform.orientation,device:M.handedness==="left"?Du.LeftController:Du.RightController})}})},t.handleMouseMove=S=>{const x={...g(S),position:l(S),deviceType:h(S)};e.moveTimeoutID===0?t.startMouseMoveEvent(x):(t.mouseMoveEvent(x),clearTimeout(e.moveTimeoutID)),e.moveTimeoutID=setTimeout(()=>{t.endMouseMoveEvent(),e.moveTimeoutID=0},200)},t.handleAnimation=()=>{const S=Date.now();e._animationFrameCount++,S-e._animationStartTime>1e3&&e._animationFrameCount>1&&(e.recentAnimationFrameRate=1e3*(e._animationFrameCount-1)/(S-e._animationStartTime),e.lastFrameTime=1/e.recentAnimationFrameRate,t.animationFrameRateUpdateEvent(),e._animationStartTime=S,e._animationFrameCount=1),t.animationEvent(),E(),r.size>0||Date.now()<e._animationExtendedEnd?e.animationRequest=requestAnimationFrame(t.handleAnimation):(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.handleWheel=S=>{vs(S);const x={...oV(S),...g(S),position:l(S),deviceType:h(S)};e.wheelTimeoutID===0&&(Math.abs(x.spinY)>=.3?s=Math.abs(x.spinY):s=1),x.spinY/=s,e.wheelTimeoutID===0?(t.startMouseWheelEvent(x),t.mouseWheelEvent(x)):(t.mouseWheelEvent(x),clearTimeout(e.wheelTimeoutID)),e.mouseScrollDebounceByPass?(t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0):e.wheelTimeoutID=setTimeout(()=>{t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0},200)},t.handleMouseUp=S=>{const x={...g(S),position:l(S),deviceType:h(S)};switch(S.button){case 0:t.leftButtonReleaseEvent(x);break;case 1:t.middleButtonReleaseEvent(x);break;case 2:t.rightButtonReleaseEvent(x);break;default:Bu(`Unknown mouse button released: ${S.button}`);break}},t.handleTouchStart=S=>{const x=[...i.values()];if(e.recognizeGestures&&x.length>1){const m=Vu(i);if(x.length===2){const M={...g(q0),position:x[0].position,deviceType:h(S)};t.leftButtonReleaseEvent(M)}t.recognizeGesture("TouchStart",m)}else if(x.length===1){const m={...g(q0),position:l(S),deviceType:h(S)};t.leftButtonPressEvent(m)}},t.handleTouchMove=S=>{const x=[...i.values()];if(e.recognizeGestures&&x.length>1){const m=Vu(i);t.recognizeGesture("TouchMove",m)}else if(x.length===1){const m={...g(q0),position:x[0].position,deviceType:h(S)};t.mouseMoveEvent(m)}},t.handleTouchEnd=S=>{const x=[...i.values()];if(e.recognizeGestures)if(x.length===0){const m={...g(q0),position:l(S),deviceType:h(S)};t.leftButtonReleaseEvent(m)}else if(x.length===1){const m=Vu(i);t.recognizeGesture("TouchEnd",m);const M={...g(q0),position:x[0].position,deviceType:h(S)};t.leftButtonPressEvent(M)}else{const m=Vu(i);t.recognizeGesture("TouchMove",m)}else if(x.length===1){const m={...g(q0),position:x[0].position,deviceType:h(S)};t.leftButtonReleaseEvent(m)}},t.setView=S=>{e._view!==S&&(e._view=S,e._view.getRenderable().setInteractor(t),t.modified())},t.getFirstRenderer=()=>e._view?.getRenderable()?.getRenderersByReference()?.[0],t.findPokedRenderer=function(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e._view)return null;const m=e._view?.getRenderable()?.getRenderers();if(!m||m.length===0)return null;m.sort((O,_)=>O.getLayer()-_.getLayer());let M=null,R=null,w=null,D=m.length;for(;D--;){const O=m[D];if(e._view.isInViewport(S,x,O)&&O.getInteractive()){w=O;break}M===null&&O.getInteractive()&&(M=O),R===null&&e._view.isInViewport(S,x,O)&&(R=O)}return w===null&&(w=M),w===null&&(w=R),w==null&&(w=m[0]),w},t.render=()=>{!t.isAnimating()&&!e.inRender&&E()},Y2.forEach(S=>{const x=S.charAt(0).toLowerCase()+S.slice(1);t[`${x}Event`]=m=>{if(!e.enabled)return;if(!t.getCurrentRenderer()){uV(`
          Can not forward events without a current renderer on the interactor.
        `);return}const R={type:S,pokedRenderer:e.currentRenderer,firstRenderer:t.getFirstRenderer(),...m};t[`invoke${S}`](R)}}),t.recognizeGesture=(S,x)=>{if(Object.keys(x).length>2)return;if(e.startingEventPositions||(e.startingEventPositions={}),S==="TouchStart"){Object.keys(x).forEach(z=>{e.startingEventPositions[z]=x[z]}),e.currentGesture="Start";return}if(S==="TouchEnd"){e.currentGesture==="Pinch"&&(t.render(),t.endPinchEvent()),e.currentGesture==="Rotate"&&(t.render(),t.endRotateEvent()),e.currentGesture==="Pan"&&(t.render(),t.endPanEvent()),e.currentGesture="Start",e.startingEventPositions={};return}let m=0;const M=[],R=[];Object.keys(x).forEach(z=>{M[m]=x[z],R[m]=e.startingEventPositions[z],m++});const w=Math.sqrt((R[0].x-R[1].x)*(R[0].x-R[1].x)+(R[0].y-R[1].y)*(R[0].y-R[1].y)),D=Math.sqrt((M[0].x-M[1].x)*(M[0].x-M[1].x)+(M[0].y-M[1].y)*(M[0].y-M[1].y));let O=ri(Math.atan2(R[1].y-R[0].y,R[1].x-R[0].x)),_=ri(Math.atan2(M[1].y-M[0].y,M[1].x-M[0].x)),N=_-O;_=_+180>=360?_-180:_+180,O=O+180>=360?O-180:O+180,Math.abs(_-O)<Math.abs(N)&&(N=_-O);const F=[];if(F[0]=(M[0].x-R[0].x+M[1].x-R[1].x)/2,F[1]=(M[0].y-R[0].y+M[1].y-R[1].y)/2,S==="TouchMove")if(e.currentGesture==="Start"){let z=.01*Math.sqrt(e.container.clientWidth*e.container.clientWidth+e.container.clientHeight*e.container.clientHeight);z<15&&(z=15);const $=Math.abs(D-w),Y=D*3.1415926*Math.abs(N)/360,A=Math.sqrt(F[0]*F[0]+F[1]*F[1]);if($>z&&$>Y&&$>A){e.currentGesture="Pinch";const K={scale:1,touches:x};t.startPinchEvent(K)}else if(Y>z&&Y>A){e.currentGesture="Rotate";const K={rotation:0,touches:x};t.startRotateEvent(K)}else if(A>z){e.currentGesture="Pan";const K={translation:[0,0],touches:x};t.startPanEvent(K)}}else{if(e.currentGesture==="Rotate"){const z={rotation:N,touches:x};t.rotateEvent(z)}if(e.currentGesture==="Pinch"){const z={scale:D/w,touches:x};t.pinchEvent(z)}if(e.currentGesture==="Pan"){const z={translation:F,touches:x};t.panEvent(z)}}},t.handleVisibilityChange=()=>{e._animationStartTime=Date.now(),e._animationFrameCount=0},t.setCurrentRenderer=S=>{e._forcedRenderer=!!S,e.currentRenderer=S},t.setContainer=S=>{T();const x=n.setContainer(S??null);return x&&y(),x},t.delete=()=>{for(;r.size;)t.cancelAnimation(r.values().next().value);typeof document.hidden<"u"&&document.removeEventListener("visibilitychange",t.handleVisibilityChange),e.container&&t.setContainer(null),n.delete()},typeof document.hidden<"u"&&document.addEventListener("visibilitychange",t.handleVisibilityChange,!1)}const fV={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,container:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,recentAnimationFrameRate:10,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{},preventDefaultOnPointerDown:!1,preventDefaultOnPointerUp:!1,mouseScrollDebounceByPass:!1};function nv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,fV,n),B.obj(t,e),e._animationExtendedEnd=0,B.event(t,e,"RenderEvent"),Y2.forEach(r=>B.event(t,e,r)),B.get(t,e,["initialized","interactorStyle","lastFrameTime","recentAnimationFrameRate","_view"]),B.setGet(t,e,["container","lightFollowCamera","enabled","enableRender","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker","preventDefaultOnPointerDown","preventDefaultOnPointerUp","mouseScrollDebounceByPass"]),B.moveToProtected(t,e,["view"]),cV(t,e)}const lV=B.newInstance(nv,"vtkRenderWindowInteractor");var rv={newInstance:lV,extend:nv,handledEvents:Y2,...tv};const{vtkErrorMacro:gV,VOID:hV}=B;function pV(t,e,n,r){return t.getRenderWindow().getViews()[0].worldToDisplay(e,n,r,t)}function vV(t,e,n,r){return t.getRenderWindow().getViews()[0].displayToWorld(e,n,r,t)}const yV={computeWorldToDisplay:pV,computeDisplayToWorld:vV};function dV(t,e){e.classHierarchy.push("vtkInteractorObserver");const n={...t};function r(){for(;e.subscribedEvents.length;)e.subscribedEvents.pop().unsubscribe()}function i(){rv.handledEvents.forEach(s=>{t[`handle${s}`]&&e.subscribedEvents.push(e._interactor[`on${s}`](u=>e.processEvents?t[`handle${s}`](u):hV,e.priority))})}t.setInteractor=s=>{s!==e._interactor&&(r(),e._interactor=s,s&&e.enabled&&i(),t.modified())},t.setEnabled=s=>{s!==e.enabled&&(r(),s&&(e._interactor?i():gV(`
          The interactor must be set before subscribing to events
        `)),e.enabled=s,t.modified())},t.computeDisplayToWorld=(s,u,c,l)=>s?e._interactor.getView().displayToWorld(u,c,l,s):null,t.computeWorldToDisplay=(s,u,c,l)=>s?e._interactor.getView().worldToDisplay(u,c,l,s):null,t.setPriority=s=>{n.setPriority(s)&&e._interactor&&(r(),i())}}const TV={enabled:!0,priority:0,processEvents:!0,subscribedEvents:[]};function av(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,TV,n),B.obj(t,e),B.event(t,e,"InteractionEvent"),B.event(t,e,"StartInteractionEvent"),B.event(t,e,"EndInteractionEvent"),B.get(t,e,["_interactor","enabled"]),B.setGet(t,e,["priority","processEvents"]),B.moveToProtected(t,e,["interactor"]),dV(t,e)}const SV=B.newInstance(av,"vtkInteractorObserver");var CV={newInstance:SV,extend:av,...yV};const xV={IS_START:0,IS_NONE:0,IS_ROTATE:1,IS_PAN:2,IS_SPIN:3,IS_DOLLY:4,IS_CAMERA_POSE:11,IS_WINDOW_LEVEL:1024,IS_SLICE:1025};var q2={States:xV};const{States:Qn}=q2,Ll={Rotate:Qn.IS_ROTATE,Pan:Qn.IS_PAN,Spin:Qn.IS_SPIN,Dolly:Qn.IS_DOLLY,CameraPose:Qn.IS_CAMERA_POSE,WindowLevel:Qn.IS_WINDOW_LEVEL,Slice:Qn.IS_SLICE};function EV(t,e){e.classHierarchy.push("vtkInteractorStyle"),Object.keys(Ll).forEach(n=>{B.event(t,e,`Start${n}Event`),t[`start${n}`]=()=>{e.state===Qn.IS_NONE&&(e.state=Ll[n],e._interactor.requestAnimation(t),t.invokeStartInteractionEvent({type:"StartInteractionEvent"}),t[`invokeStart${n}Event`]({type:`Start${n}Event`}))},B.event(t,e,`End${n}Event`),t[`end${n}`]=()=>{e.state===Ll[n]&&(e.state=Qn.IS_NONE,e._interactor.cancelAnimation(t),t.invokeEndInteractionEvent({type:"EndInteractionEvent"}),t[`invokeEnd${n}Event`]({type:`End${n}Event`}),e._interactor.render())}}),e.getRenderer=n=>e.focusedRenderer||n.pokedRenderer,t.handleKeyPress=n=>{const r=e._interactor;let i=null;switch(n.key){case"r":case"R":e.getRenderer(n).resetCamera(),r.render();break;case"w":case"W":i=e.getRenderer(n).getActors(),i.forEach(s=>{const u=s.getProperty();u.setRepresentationToWireframe&&u.setRepresentationToWireframe()}),r.render();break;case"s":case"S":i=e.getRenderer(n).getActors(),i.forEach(s=>{const u=s.getProperty();u.setRepresentationToSurface&&u.setRepresentationToSurface()}),r.render();break;case"v":case"V":i=e.getRenderer(n).getActors(),i.forEach(s=>{const u=s.getProperty();u.setRepresentationToPoints&&u.setRepresentationToPoints()}),r.render();break}}}const mV={state:Qn.IS_NONE,handleObservers:1,autoAdjustCameraClippingRange:1};function iv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,mV,n),CV.extend(t,e,n),B.setGet(t,e,["focusedRenderer"]),EV(t,e)}const RV=B.newInstance(iv,"vtkInteractorStyle");var wV={newInstance:RV,extend:iv,...q2};const{States:Xn}=q2;function MV(t,e){e.classHierarchy.push("vtkInteractorStyleTrackballCamera"),t.handleMouseMove=n=>{const r=n.position,i=e.getRenderer(n);switch(e.state){case Xn.IS_ROTATE:t.handleMouseRotate(i,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case Xn.IS_PAN:t.handleMousePan(i,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case Xn.IS_DOLLY:t.handleMouseDolly(i,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case Xn.IS_SPIN:t.handleMouseSpin(i,r),t.invokeInteractionEvent({type:"InteractionEvent"});break}e.previousPosition=r},t.handleButton3D=n=>{if(n&&n.pressed&&n.device===o2.RightController&&(n.input===Rs.Trigger||n.input===Rs.TrackPad)){t.startCameraPose();return}n&&!n.pressed&&n.device===o2.RightController&&(n.input===Rs.Trigger||n.input===Rs.TrackPad)&&e.state===Xn.IS_CAMERA_POSE&&t.endCameraPose()},t.handleMove3D=n=>{switch(e.state){case Xn.IS_CAMERA_POSE:t.updateCameraPose(n);break}},t.updateCameraPose=n=>{const r=e.getRenderer(n).getActiveCamera(),i=r.getPhysicalTranslation(),u=.5*.05*r.getPhysicalScale(),c=r.physicalOrientationToWorldDirection([n.orientation.x,n.orientation.y,n.orientation.z,n.orientation.w]);r.setPhysicalTranslation(i[0]+c[0]*u,i[1]+c[1]*u,i[2]+c[2]*u)},t.handleLeftButtonPress=n=>{const r=n.position;e.previousPosition=r,n.shiftKey?n.controlKey||n.altKey?t.startDolly():t.startPan():n.controlKey||n.altKey?t.startSpin():t.startRotate()},t.handleLeftButtonRelease=()=>{switch(e.state){case Xn.IS_DOLLY:t.endDolly();break;case Xn.IS_PAN:t.endPan();break;case Xn.IS_SPIN:t.endSpin();break;case Xn.IS_ROTATE:t.endRotate();break}},t.handleStartMouseWheel=()=>{t.startDolly()},t.handleEndMouseWheel=()=>{t.endDolly()},t.handleStartPinch=n=>{e.previousScale=n.scale,t.startDolly()},t.handleEndPinch=()=>{t.endDolly()},t.handleStartRotate=n=>{e.previousRotation=n.rotation,t.startRotate()},t.handleEndRotate=()=>{t.endRotate()},t.handleStartPan=n=>{e.previousTranslation=n.translation,t.startPan()},t.handleEndPan=()=>{t.endPan()},t.handlePinch=n=>{t.dollyByFactor(e.getRenderer(n),n.scale/e.previousScale),e.previousScale=n.scale},t.handlePan=n=>{const r=e.getRenderer(n).getActiveCamera();let i=r.getFocalPoint();i=t.computeWorldToDisplay(e.getRenderer(n),i[0],i[1],i[2]);const s=i[2],u=n.translation,c=e.previousTranslation,l=t.computeDisplayToWorld(e.getRenderer(n),i[0]+u[0]-c[0],i[1]+u[1]-c[1],s),g=t.computeDisplayToWorld(e.getRenderer(n),i[0],i[1],s),v=[];v[0]=g[0]-l[0],v[1]=g[1]-l[1],v[2]=g[2]-l[2],i=r.getFocalPoint();const h=r.getPosition();r.setFocalPoint(v[0]+i[0],v[1]+i[1],v[2]+i[2]),r.setPosition(v[0]+h[0],v[1]+h[1],v[2]+h[2]),e._interactor.getLightFollowCamera()&&e.getRenderer(n).updateLightsGeometryToFollowCamera(),r.orthogonalizeViewUp(),e.previousTranslation=n.translation},t.handleRotate=n=>{const r=e.getRenderer(n).getActiveCamera();r.roll(n.rotation-e.previousRotation),r.orthogonalizeViewUp(),e.previousRotation=n.rotation},t.handleMouseRotate=(n,r)=>{if(!e.previousPosition)return;const i=e._interactor,s=r.x-e.previousPosition.x,u=r.y-e.previousPosition.y,c=i.getView().getViewportSize(n);let l=-.1,g=-.1;c[0]&&c[1]&&(l=-20/c[1],g=-20/c[0]);const v=s*g*e.motionFactor,h=u*l*e.motionFactor,y=n.getActiveCamera();!Number.isNaN(v)&&!Number.isNaN(h)&&(y.azimuth(v),y.elevation(h),y.orthogonalizeViewUp()),e.autoAdjustCameraClippingRange&&n.resetCameraClippingRange(),i.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()},t.handleMouseSpin=(n,r)=>{if(!e.previousPosition)return;const i=e._interactor,s=n.getActiveCamera(),u=i.getView().getViewportCenter(n),c=ri(Math.atan2(e.previousPosition.y-u[1],e.previousPosition.x-u[0])),l=ri(Math.atan2(r.y-u[1],r.x-u[0]))-c;Number.isNaN(l)||(s.roll(l),s.orthogonalizeViewUp())},t.handleMousePan=(n,r)=>{if(!e.previousPosition)return;const i=n.getActiveCamera();let s=i.getFocalPoint();s=t.computeWorldToDisplay(n,s[0],s[1],s[2]);const u=s[2],c=t.computeDisplayToWorld(n,r.x,r.y,u),l=t.computeDisplayToWorld(n,e.previousPosition.x,e.previousPosition.y,u),g=[];g[0]=l[0]-c[0],g[1]=l[1]-c[1],g[2]=l[2]-c[2],s=i.getFocalPoint();const v=i.getPosition();i.setFocalPoint(g[0]+s[0],g[1]+s[1],g[2]+s[2]),i.setPosition(g[0]+v[0],g[1]+v[1],g[2]+v[2]),e._interactor.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()},t.handleMouseDolly=(n,r)=>{if(!e.previousPosition)return;const i=r.y-e.previousPosition.y,u=e._interactor.getView().getViewportCenter(n),c=e.motionFactor*i/u[1];t.dollyByFactor(n,1.1**c)},t.handleMouseWheel=n=>{const r=1-n.spinY/e.zoomFactor;t.dollyByFactor(e.getRenderer(n),r)},t.dollyByFactor=(n,r)=>{if(Number.isNaN(r))return;const i=n.getActiveCamera();i.getParallelProjection()?i.setParallelScale(i.getParallelScale()/r):(i.dolly(r),e.autoAdjustCameraClippingRange&&n.resetCameraClippingRange()),e._interactor.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()}}const OV={motionFactor:10,zoomFactor:10};function sv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,OV,n),wV.extend(t,e,n),B.setGet(t,e,["motionFactor","zoomFactor"]),MV(t,e)}const DV=B.newInstance(sv,"vtkInteractorStyleTrackballCamera");var LV={newInstance:DV,extend:sv};function BV(t){return t}function Q2(t){if(t===null||t==="null")return null;if(t==="true")return!0;if(t==="false")return!1;if(!(t===void 0||t==="undefined"))return t[0]==="["&&t[t.length-1]==="]"?t.substring(1,t.length-1).split(",").map(e=>Q2(e.trim())):t===""||Number.isNaN(Number(t))?t:Number(t)}function VV(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window.location.search;const n={},r=t?Q2:BV;return new URLSearchParams(e).forEach((s,u)=>{u&&(n[u]=s?r(s):!0)}),n}var NV={toNativeType:Q2,extractURLParameters:VV};function _V(t,e){e.classHierarchy.push("vtkFramebuffer"),t.getBothMode=()=>e.context.FRAMEBUFFER,t.saveCurrentBindingsAndBuffers=n=>{const r=typeof n<"u"?n:t.getBothMode();t.saveCurrentBindings(r),t.saveCurrentBuffers(r)},t.saveCurrentBindings=n=>{if(!e.context){xe("you must set the OpenGLRenderWindow before calling saveCurrentBindings");return}const r=e.context;e.previousDrawBinding=r.getParameter(e.context.FRAMEBUFFER_BINDING),e.previousActiveFramebuffer=e._openGLRenderWindow.getActiveFramebuffer()},t.saveCurrentBuffers=n=>{},t.restorePreviousBindingsAndBuffers=n=>{const r=typeof n<"u"?n:t.getBothMode();t.restorePreviousBindings(r),t.restorePreviousBuffers(r)},t.restorePreviousBindings=n=>{if(!e.context){xe("you must set the OpenGLRenderWindow before calling restorePreviousBindings");return}const r=e.context;r.bindFramebuffer(r.FRAMEBUFFER,e.previousDrawBinding),e._openGLRenderWindow.setActiveFramebuffer(e.previousActiveFramebuffer)},t.restorePreviousBuffers=n=>{},t.bind=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;r===null&&(r=e.context.FRAMEBUFFER),e.context.bindFramebuffer(r,e.glFramebuffer);for(let i=0;i<e.colorBuffers.length;i++)e.colorBuffers[i].bind();e._openGLRenderWindow.setActiveFramebuffer(t)},t.create=(n,r)=>{if(!e.context){xe("you must set the OpenGLRenderWindow before calling create");return}e.glFramebuffer=e.context.createFramebuffer(),e.glFramebuffer.width=n,e.glFramebuffer.height=r},t.setColorBuffer=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=e.context;if(!i){xe("you must set the OpenGLRenderWindow before calling setColorBuffer");return}let s=i.COLOR_ATTACHMENT0;if(r>0)if(e._openGLRenderWindow.getWebgl2())s+=r;else{xe("Using multiple framebuffer attachments requires WebGL 2");return}e.colorBuffers[r]=n,i.framebufferTexture2D(i.FRAMEBUFFER,s,i.TEXTURE_2D,n.getHandle(),0)},t.removeColorBuffer=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const r=e.context;if(!r){xe("you must set the OpenGLRenderWindow before calling removeColorBuffer");return}let i=r.COLOR_ATTACHMENT0;if(n>0)if(e._openGLRenderWindow.getWebgl2())i+=n;else{xe("Using multiple framebuffer attachments requires WebGL 2");return}r.framebufferTexture2D(r.FRAMEBUFFER,i,r.TEXTURE_2D,null,0),e.colorBuffers=e.colorBuffers.splice(n,1)},t.setDepthBuffer=n=>{if(!e.context){xe("you must set the OpenGLRenderWindow before calling setDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const r=e.context;r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,n.getHandle(),0)}else xe("Attaching depth buffer textures to fbo requires WebGL 2")},t.removeDepthBuffer=()=>{if(!e.context){xe("you must set the OpenGLRenderWindow before calling removeDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const n=e.context;n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,null,0)}else xe("Attaching depth buffer textures to framebuffers requires WebGL 2")},t.getGLFramebuffer=()=>e.glFramebuffer,t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))},t.releaseGraphicsResources=()=>{e.glFramebuffer&&e.context.deleteFramebuffer(e.glFramebuffer)},t.getSize=()=>e.glFramebuffer==null?null:[e.glFramebuffer.width,e.glFramebuffer.height],t.populateFramebuffer=()=>{if(!e.context){xe("you must set the OpenGLRenderWindow before calling populateFrameBuffer");return}t.bind();const n=e.context,r=Mr.newInstance();r.setOpenGLRenderWindow(e._openGLRenderWindow),r.setMinificationFilter(a2.LINEAR),r.setMagnificationFilter(a2.LINEAR),r.create2DFromRaw({width:e.glFramebuffer.width,height:e.glFramebuffer.height,numComps:4,dataType:Rt.UNSIGNED_CHAR,data:null}),t.setColorBuffer(r),e.depthTexture=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,e.depthTexture),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e.glFramebuffer.width,e.glFramebuffer.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,e.depthTexture)},t.getColorTexture=()=>e.colorBuffers[0]}const UV={glFramebuffer:null,colorBuffers:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0,previousActiveFramebuffer:null};function ov(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,UV,n),Dt(t,e),e.colorBuffers&&xe("you cannot initialize colorBuffers through the constructor. You should call setColorBuffer() instead."),e.colorBuffers=[],li(t,e,["colorBuffers"]),_V(t,e)}const GV=Ye(ov,"vtkFramebuffer");var Z2={newInstance:GV,extend:ov};function bV(t,e){e.classHierarchy.push("vtkRenderPass"),t.getOperation=()=>e.currentOperation,t.setCurrentOperation=n=>{e.currentOperation=n,e.currentTraverseOperation=`traverse${B.capitalize(e.currentOperation)}`},t.getTraverseOperation=()=>e.currentTraverseOperation,t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;e.deleted||(e._currentParent=r,e.preDelegateOperations.forEach(i=>{t.setCurrentOperation(i),n.traverse(t)}),e.delegates.forEach(i=>{i.traverse(n,t)}),e.postDelegateOperations.forEach(i=>{t.setCurrentOperation(i),n.traverse(t)}))}}const FV={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null};function uv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,FV,n),B.obj(t,e),B.get(t,e,["currentOperation"]),B.setGet(t,e,["delegates","_currentParent","preDelegateOperations","postDelegateOperations"]),B.moveToProtected(t,e,["currentParent"]),bV(t,e)}const zV=B.newInstance(uv,"vtkRenderPass");var Dr={newInstance:zV,extend:uv};const{Representation:kV}=gi,{vtkErrorMacro:Y8}=B;function HV(t){const e=ie.substitute(t.Fragment,"//VTK::RenderPassFragmentShader::Impl",`
      float weight = gl_FragData[0].a * pow(max(1.1 - gl_FragCoord.z, 0.0), 2.0);
      gl_FragData[0] = vec4(gl_FragData[0].rgb*weight, gl_FragData[0].a);
      gl_FragData[1].r = weight;
    `,!1);t.Fragment=e.result}const $V=`//VTK::System::Dec

in vec2 tcoord;

uniform sampler2D translucentRTexture;
uniform sampler2D translucentRGBATexture;

// the output of this shader
//VTK::Output::Dec

void main()
{
  vec4 t1Color = texture(translucentRGBATexture, tcoord);
  float t2Color = texture(translucentRTexture, tcoord).r;
  gl_FragData[0] = vec4(t1Color.rgb/max(t2Color,0.01), 1.0 - t1Color.a);
}
`;function AV(t,e){e.classHierarchy.push("vtkOpenGLOrderIndependentTranslucentPass"),t.createVertexBuffer=()=>{const n=new Float32Array([-1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1]),r=new Float32Array([0,0,1,0,0,1,1,1]),i=new Uint16Array([4,0,1,3,2]),s=Fe.newInstance({numberOfComponents:3,values:n});s.setName("points");const u=Fe.newInstance({numberOfComponents:2,values:r});u.setName("tcoords");const c=Fe.newInstance({numberOfComponents:1,values:i});e.tris.getCABO().createVBO(c,"polys",kV.SURFACE,{points:s,tcoords:u,cellOffset:0}),e.VBOBuildTime.modified()},t.createFramebuffer=n=>{const r=n.getSize(),i=n.getContext();e.framebuffer=Z2.newInstance(),e.framebuffer.setOpenGLRenderWindow(n),e.framebuffer.create(...r),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind(),e.translucentRGBATexture=Mr.newInstance(),e.translucentRGBATexture.setInternalFormat(i.RGBA16F),e.translucentRGBATexture.setFormat(i.RGBA),e.translucentRGBATexture.setOpenGLDataType(i.HALF_FLOAT),e.translucentRGBATexture.setOpenGLRenderWindow(n),e.translucentRGBATexture.create2DFromRaw({width:r[0],height:r[1],numComps:4,dataType:"Float32Array",data:null}),e.translucentRTexture=Mr.newInstance(),e.translucentRTexture.setInternalFormat(i.R16F),e.translucentRTexture.setFormat(i.RED),e.translucentRTexture.setOpenGLDataType(i.HALF_FLOAT),e.translucentRTexture.setOpenGLRenderWindow(n),e.translucentRTexture.create2DFromRaw({width:r[0],height:r[1],numComps:1,dataType:"Float32Array",data:null}),e.translucentZTexture=Mr.newInstance(),e.translucentZTexture.setOpenGLRenderWindow(n),e.translucentZTexture.createDepthFromRaw({width:r[0],height:r[1],dataType:"Float32Array",data:null}),e.framebuffer.setColorBuffer(e.translucentRGBATexture,0),e.framebuffer.setColorBuffer(e.translucentRTexture,1),e.framebuffer.setDepthBuffer(e.translucentZTexture)},t.createCopyShader=n=>{e.copyShader=n.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","attribute vec2 tcoordTC;","varying vec2 tcoord;","void main() { tcoord = tcoordTC; gl_Position = vertexDC; }"].join(`
`),$V,"")},t.createVBO=n=>{const r=n.getContext();e.tris.setOpenGLRenderWindow(n),t.createVertexBuffer();const i=e.copyShader;e.tris.getCABO().bind(),e.copyVAO.addAttributeArray(i,e.tris.getCABO(),"vertexDC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),r.FLOAT,3,r.FALSE)||Y8("Error setting vertexDC in copy shader VAO."),e.copyVAO.addAttributeArray(i,e.tris.getCABO(),"tcoordTC",e.tris.getCABO().getTCoordOffset(),e.tris.getCABO().getStride(),r.FLOAT,2,r.FALSE)||Y8("Error setting vertexDC in copy shader VAO.")},t.traverse=(n,r,i)=>{if(e.deleted)return;const s=n.getSize(),u=n.getContext();if(e._supported=!1,r.getSelector()||!u||!n.getWebgl2()||!u.getExtension("EXT_color_buffer_half_float")&&!u.getExtension("EXT_color_buffer_float")){t.setCurrentOperation("translucentPass"),r.traverse(t);return}if(e._supported=!0,e.framebuffer===null)t.createFramebuffer(n);else{const l=e.framebuffer.getSize();l===null||l[0]!==s[0]||l[1]!==s[1]?(e.framebuffer.releaseGraphicsResources(),e.translucentRGBATexture.releaseGraphicsResources(n),e.translucentRTexture.releaseGraphicsResources(n),e.translucentZTexture.releaseGraphicsResources(n),t.createFramebuffer(n)):(e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind())}u.drawBuffers([u.COLOR_ATTACHMENT0]),u.clearBufferfv(u.COLOR,0,[0,0,0,0]),u.clearBufferfv(u.DEPTH,0,[1]),u.colorMask(!1,!1,!1,!1),i.getOpaqueActorCount()>0&&(i.setCurrentOperation("opaqueZBufferPass"),r.traverse(i)),u.colorMask(!0,!0,!0,!0),u.drawBuffers([u.COLOR_ATTACHMENT0,u.COLOR_ATTACHMENT1]),u.viewport(0,0,s[0],s[1]),u.scissor(0,0,s[0],s[1]),u.clearBufferfv(u.COLOR,0,[0,0,0,1]),u.clearBufferfv(u.COLOR,1,[0,0,0,0]),u.enable(u.DEPTH_TEST),u.enable(u.BLEND),u.blendFuncSeparate(u.ONE,u.ONE,u.ZERO,u.ONE_MINUS_SRC_ALPHA),t.setCurrentOperation("translucentPass"),r.traverse(t),u.drawBuffers([u.NONE]),e.framebuffer.restorePreviousBindingsAndBuffers(),e.copyShader===null?t.createCopyShader(n):n.getShaderCache().readyShaderProgram(e.copyShader),e.copyVAO||(e.copyVAO=yp.newInstance(),e.copyVAO.setOpenGLRenderWindow(n)),e.copyVAO.bind(),e.VBOBuildTime.getMTime()<t.getMTime()&&t.createVBO(n),u.blendFuncSeparate(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA),u.depthMask(!1),u.depthFunc(u.ALWAYS),u.viewport(0,0,s[0],s[1]),u.scissor(0,0,s[0],s[1]),e.translucentRGBATexture.activate(),e.copyShader.setUniformi("translucentRGBATexture",e.translucentRGBATexture.getTextureUnit()),e.translucentRTexture.activate(),e.copyShader.setUniformi("translucentRTexture",e.translucentRTexture.getTextureUnit()),u.drawArrays(u.TRIANGLES,0,e.tris.getCABO().getElementCount()),u.depthMask(!0),u.depthFunc(u.LEQUAL),e.translucentRGBATexture.deactivate(),e.translucentRTexture.deactivate();const c=r.getTiledSizeAndOrigin();u.scissor(c.lowerLeftU,c.lowerLeftV,c.usize,c.vsize),u.viewport(c.lowerLeftU,c.lowerLeftV,c.usize,c.vsize)},t.getShaderReplacement=()=>e._supported?HV:null,t.releaseGraphicsResources=n=>{e.framebuffer&&(e.framebuffer.releaseGraphicsResources(n),e.framebuffer=null),e.translucentRGBATexture&&(e.translucentRGBATexture.releaseGraphicsResources(n),e.translucentRGBATexture=null),e.translucentRTexture&&(e.translucentRTexture.releaseGraphicsResources(n),e.translucentRTexture=null),e.translucentZTexture&&(e.translucentZTexture.releaseGraphicsResources(n),e.translucentZTexture=null),e.copyVAO&&(e.copyVAO.releaseGraphicsResources(n),e.copyVAO=null),e.copyShader&&(e.copyShader.releaseGraphicsResources(n),e.copyShader=null),e.tris&&(e.tris.releaseGraphicsResources(n),e.tris=null),t.modified()}}const WV={framebuffer:null,copyShader:null,tris:null};function cv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,WV,n),Dr.extend(t,e,n),e.VBOBuildTime={},B.obj(e.VBOBuildTime,{mtime:0}),e.tris=hi.newInstance(),B.get(t,e,["framebuffer"]),AV(t,e)}const jV=B.newInstance(cv,"vtkOpenGLOrderIndependentTranslucentPass");var KV={newInstance:jV,extend:cv};function XV(t,e){e.classHierarchy.push("vtkForwardPass"),t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(e.deleted)return;e._currentParent=r,t.setCurrentOperation("buildPass"),n.traverse(t);const i=n.getRenderable().getNumberOfLayers(),s=n.getRenderable().getRenderersByReference();for(let u=0;u<i;u++)for(let c=0;c<s.length;c++){const l=s[c],g=n.getViewNodeFor(l);if(l.getDraw()&&l.getLayer()===u){if(e.opaqueActorCount=0,e.translucentActorCount=0,e.volumeCount=0,e.overlayActorCount=0,t.setCurrentOperation("queryPass"),g.traverse(t),(e.opaqueActorCount>0||e.translucentActorCount>0)&&e.volumeCount>0||e.depthRequested){const v=n.getFramebufferSize();e.framebuffer===null&&(e.framebuffer=Z2.newInstance()),e.framebuffer.setOpenGLRenderWindow(n),e.framebuffer.saveCurrentBindingsAndBuffers();const h=e.framebuffer.getSize();(h===null||h[0]!==v[0]||h[1]!==v[1])&&(e.framebuffer.create(v[0],v[1]),e.framebuffer.populateFramebuffer()),e.framebuffer.bind(),t.setCurrentOperation("zBufferPass"),g.traverse(t),e.framebuffer.restorePreviousBindingsAndBuffers(),e.depthRequested=!1}t.setCurrentOperation("cameraPass"),g.traverse(t),e.opaqueActorCount>0&&(t.setCurrentOperation("opaquePass"),g.traverse(t)),e.translucentActorCount>0&&(e.translucentPass||(e.translucentPass=KV.newInstance()),e.translucentPass.traverse(n,g,t)),e.volumeCount>0&&(t.setCurrentOperation("volumePass"),g.traverse(t)),e.overlayActorCount>0&&(t.setCurrentOperation("overlayPass"),g.traverse(t))}}},t.getZBufferTexture=()=>e.framebuffer?e.framebuffer.getColorTexture():null,t.requestDepth=()=>{e.depthRequested=!0},t.incrementOpaqueActorCount=()=>e.opaqueActorCount++,t.incrementTranslucentActorCount=()=>e.translucentActorCount++,t.incrementVolumeCount=()=>e.volumeCount++,t.incrementOverlayActorCount=()=>e.overlayActorCount++}const YV={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,overlayActorCount:0,framebuffer:null,depthRequested:!1};function fv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,YV,n),Dr.extend(t,e,n),B.get(t,e,["framebuffer","opaqueActorCount","translucentActorCount","volumeCount"]),XV(t,e)}const qV=B.newInstance(fv,"vtkForwardPass");var QV={newInstance:qV,extend:fv};const{FieldAssociations:ZV}=i0;function JV(t,e){e.classHierarchy.push("vtkHardwareSelector"),t.getSourceDataAsync=async(n,r,i,s,u)=>{},t.selectAsync=async(n,r,i,s,u)=>{const c=await t.getSourceDataAsync(n,r,i,s,u);return c?c.generateSelection(r,i,s,u):[]}}const PV={fieldAssociation:ZV.FIELD_ASSOCIATION_CELLS,captureZValues:!1};function lv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,PV,n),B.obj(t,e),B.setGet(t,e,["fieldAssociation","captureZValues"]),JV(t,e)}const IV=B.newInstance(lv,"vtkHardwareSelector");var gv={newInstance:IV,extend:lv};const eN={GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},tN={CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5};var nN={SelectionContent:eN,SelectionField:tN};function rN(t,e){e.classHierarchy.push("vtkSelectionNode"),t.getBounds=()=>e.points.getBounds()}const aN={contentType:-1,fieldType:-1,properties:null,selectionList:[]};function hv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,aN,n),B.obj(t,e),e.properties={},B.setGet(t,e,["contentType","fieldType","properties","selectionList"]),rN(t,e)}const iN=B.newInstance(hv,"vtkSelectionNode");var Rc={newInstance:iN,extend:hv,...nN};const{PassTypes:ct}=bh,{SelectionContent:sN,SelectionField:q8}=Rc,{FieldAssociations:Ls}=i0,{vtkErrorMacro:pv}=B,la=1;function vv(t){return`${t.propID} ${t.compositeID}`}function yv(t,e,n,r){if(!n)return 0;const i=(e*(r[2]-r[0]+1)+t)*4;return n[i+3]}function Er(t,e,n,r){if(!n)return 0;const i=(e*(r[2]-r[0]+1)+t)*4,s=n[i],u=n[i+1];return(n[i+2]*256+u)*256+s}function dv(t,e){let n=e;return n<<=24,n|=t,n}function oN(t,e,n,r){{if(r[0]=e[0],r[1]=e[1],e[0]<t.area[0]||e[0]>t.area[2]||e[1]<t.area[1]||e[1]>t.area[3])return null;const i=[e[0]-t.area[0],e[1]-t.area[1]],s=Er(i[0],i[1],t.pixBuffer[ct.ACTOR_PASS],t.area);if(s<=0||s-la>=t.props.length)return null;const u={};u.valid=!0,u.propID=s-la,u.prop=t.props[u.propID];let c=Er(i[0],i[1],t.pixBuffer[ct.COMPOSITE_INDEX_PASS],t.area);if((c<0||c>16777215)&&(c=0),u.compositeID=c-la,t.captureZValues){const v=(i[1]*(t.area[2]-t.area[0]+1)+i[0])*4;u.zValue=(256*t.zBuffer[v]+t.zBuffer[v+1])/65535,u.displayPosition=e}if(t.pixBuffer[ct.ID_LOW24]&&yv(i[0],i[1],t.pixBuffer[ct.ID_LOW24],t.area)===0)return u;const l=Er(i[0],i[1],t.pixBuffer[ct.ID_LOW24],t.area),g=Er(i[0],i[1],t.pixBuffer[ct.ID_HIGH24],t.area);return u.attributeID=dv(l,g),u}}function Tv(t,e,n,r,i){const s=[];let u=0;return e.forEach((c,l)=>{const g=Rc.newInstance();switch(g.setContentType(sN.INDICES),t){case Ls.FIELD_ASSOCIATION_CELLS:g.setFieldType(q8.CELL);break;case Ls.FIELD_ASSOCIATION_POINTS:g.setFieldType(q8.POINT);break;default:pv("Unknown field association")}g.getProperties().propID=c.info.propID,g.getProperties().prop=c.info.prop,g.getProperties().compositeID=c.info.compositeID,g.getProperties().attributeID=c.info.attributeID,g.getProperties().pixelCount=c.pixelCount,n&&(g.getProperties().displayPosition=[c.info.displayPosition[0],c.info.displayPosition[1],c.info.zValue],g.getProperties().worldPosition=i.displayToWorld(c.info.displayPosition[0],c.info.displayPosition[1],c.info.zValue,r)),g.setSelectionList(c.attributeIDs),s[u]=g,u++}),s}function uN(t,e,n,r,i){const s=Math.floor(e),u=Math.floor(n),c=Math.floor(r),l=Math.floor(i),g=new Map,v=[0,0];for(let h=u;h<=l;h++)for(let y=s;y<=c;y++){const E=oN(t,[y,h],0,v);if(E&&E.valid){const S=vv(E);if(!g.has(S))g.set(S,{info:E,pixelCount:1,attributeIDs:[E.attributeID]});else{const x=g.get(S);x.pixelCount++,t.captureZValues&&E.zValue<x.info.zValue&&(x.info=E),x.attributeIDs.indexOf(E.attributeID)===-1&&x.attributeIDs.push(E.attributeID)}}}return Tv(t.fieldAssociation,g,t.captureZValues,t.renderer,t.openGLRenderWindow)}function cN(t,e){e.classHierarchy.push("vtkOpenGLHardwareSelector"),t.releasePixBuffers=()=>{e.rawPixBuffer=[],e.pixBuffer=[],e.zBuffer=null},t.beginSelection=()=>{e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer),e.maxAttributeId=0;const r=e._openGLRenderWindow.getSize();if(!e.framebuffer)e.framebuffer=Z2.newInstance(),e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.create(r[0],r[1]),e.framebuffer.populateFramebuffer();else{e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers();const i=e.framebuffer.getSize();!i||i[0]!==r[0]||i[1]!==r[1]?(e.framebuffer.create(r[0],r[1]),e.framebuffer.populateFramebuffer()):e.framebuffer.bind()}if(e._openGLRenderer.clear(),e._openGLRenderer.setSelector(t),e.hitProps={},e.propPixels={},e.props=[],t.releasePixBuffers(),e.fieldAssociation===Ls.FIELD_ASSOCIATION_POINTS){const i=e._openGLRenderWindow.getContext(),s=i.isEnabled(i.BLEND);i.disable(i.BLEND),e._openGLRenderWindow.traverseAllPasses(),s&&i.enable(i.BLEND)}},t.endSelection=()=>{e.hitProps={},e._openGLRenderer.setSelector(null),e.framebuffer.restorePreviousBindingsAndBuffers()},t.preCapturePass=()=>{const r=e._openGLRenderWindow.getContext();e.originalBlending=r.isEnabled(r.BLEND),r.disable(r.BLEND)},t.postCapturePass=()=>{const r=e._openGLRenderWindow.getContext();e.originalBlending&&r.enable(r.BLEND)},t.select=()=>{let r=null;return t.captureBuffers()&&(r=t.generateSelection(e.area[0],e.area[1],e.area[2],e.area[3]),t.releasePixBuffers()),r},t.getSourceDataAsync=async(r,i,s,u,c)=>{if(e._renderer=r,i===void 0){const g=e._openGLRenderWindow.getSize();t.setArea(0,0,g[0]-1,g[1]-1)}else t.setArea(i,s,u,c);if(!t.captureBuffers())return!1;const l={area:[...e.area],pixBuffer:[...e.pixBuffer],captureZValues:e.captureZValues,zBuffer:e.zBuffer,props:[...e.props],fieldAssociation:e.fieldAssociation,renderer:r,openGLRenderWindow:e._openGLRenderWindow};return l.generateSelection=function(){for(var g=arguments.length,v=new Array(g),h=0;h<g;h++)v[h]=arguments[h];return uN(l,...v)},l},t.captureBuffers=()=>{if(!e._renderer||!e._openGLRenderWindow)return pv("Renderer and view must be set before calling Select."),!1;e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer),e._openGLRenderWindow.getRenderable().preRender(),t.invokeEvent({type:"StartEvent"}),e.originalBackground=e._renderer.getBackgroundByReference(),e._renderer.setBackground(0,0,0,0);const r=e._openGLRenderWindow.getRenderPasses();t.beginSelection();const i=[];for(e.currentPass=ct.MIN_KNOWN_PASS;e.currentPass<=ct.MAX_KNOWN_PASS;e.currentPass++)t.passRequired(e.currentPass)&&(t.preCapturePass(e.currentPass),e.captureZValues&&e.currentPass===ct.ACTOR_PASS&&typeof r[0].requestDepth=="function"&&typeof r[0].getFramebuffer=="function"&&r[0].requestDepth(),e._openGLRenderWindow.traverseAllPasses(),t.postCapturePass(e.currentPass),t.savePixelBuffer(e.currentPass),i.push(e.currentPass));return i.forEach(s=>{e.currentPass=s,t.processPixelBuffers()}),e.currentPass=ct.MAX_KNOWN_PASS,t.endSelection(),e._renderer.setBackground(e.originalBackground),t.invokeEvent({type:"EndEvent"}),!0},t.processPixelBuffers=()=>{e.props.forEach((r,i)=>{t.isPropHit(i)&&r.processSelectorPixelBuffers(t,e.propPixels[i])})},t.passRequired=r=>{if(r===ct.ID_HIGH24){if(e.fieldAssociation===Ls.FIELD_ASSOCIATION_POINTS)return e.maximumPointId>16777215;if(e.fieldAssociation===Ls.FIELD_ASSOCIATION_CELLS)return e.maximumCellId>16777215}return!0},t.savePixelBuffer=r=>{if(e.pixBuffer[r]=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),!e.rawPixBuffer[r]){const i=(e.area[2]-e.area[0]+1)*(e.area[3]-e.area[1]+1)*4;e.rawPixBuffer[r]=new Uint8Array(i),e.rawPixBuffer[r].set(e.pixBuffer[r])}if(r===ct.ACTOR_PASS){if(e.captureZValues){const i=e._openGLRenderWindow.getRenderPasses();if(typeof i[0].requestDepth=="function"&&typeof i[0].getFramebuffer=="function"){const s=i[0].getFramebuffer();s.saveCurrentBindingsAndBuffers(),s.bind(),e.zBuffer=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),s.restorePreviousBindingsAndBuffers()}}t.buildPropHitList(e.rawPixBuffer[r])}},t.buildPropHitList=r=>{let i=0;for(let s=0;s<=e.area[3]-e.area[1];s++)for(let u=0;u<=e.area[2]-e.area[0];u++){let c=Er(u,s,r,e.area);c>0&&(c--,c in e.hitProps||(e.hitProps[c]=!0,e.propPixels[c]=[]),e.propPixels[c].push(i*4)),++i}},t.renderProp=r=>{e.currentPass===ct.ACTOR_PASS&&(t.setPropColorValueFromInt(e.props.length+la),e.props.push(r))},t.renderCompositeIndex=r=>{e.currentPass===ct.COMPOSITE_INDEX_PASS&&t.setPropColorValueFromInt(r+la)},t.renderAttributeId=r=>{r<0||(e.maxAttributeId=r>e.maxAttributeId?r:e.maxAttributeId)},t.passTypeToString=r=>B.enumToString(ct,r),t.isPropHit=r=>!!e.hitProps[r],t.setPropColorValueFromInt=r=>{e.propColorValue[0]=r%256/255,e.propColorValue[1]=Math.floor(r/256)%256/255,e.propColorValue[2]=Math.floor(r/65536)%256/255},t.getPixelInformation=(r,i,s)=>{const u=i<0?0:i;if(u===0){if(s[0]=r[0],s[1]=r[1],r[0]<e.area[0]||r[0]>e.area[2]||r[1]<e.area[1]||r[1]>e.area[3])return null;const v=[r[0]-e.area[0],r[1]-e.area[1]],h=Er(v[0],v[1],e.pixBuffer[ct.ACTOR_PASS],e.area);if(h<=0||h-la>=e.props.length)return null;const y={};y.valid=!0,y.propID=h-la,y.prop=e.props[y.propID];let T=Er(v[0],v[1],e.pixBuffer[ct.COMPOSITE_INDEX_PASS],e.area);if((T<0||T>16777215)&&(T=0),y.compositeID=T-la,e.captureZValues){const x=(v[1]*(e.area[2]-e.area[0]+1)+v[0])*4;y.zValue=(256*e.zBuffer[x]+e.zBuffer[x+1])/65535,y.displayPosition=r}if(e.pixBuffer[ct.ID_LOW24]&&yv(v[0],v[1],e.pixBuffer[ct.ID_LOW24],e.area)===0)return y;const E=Er(v[0],v[1],e.pixBuffer[ct.ID_LOW24],e.area),S=Er(v[0],v[1],e.pixBuffer[ct.ID_HIGH24],e.area);return y.attributeID=dv(E,S),y}const c=[r[0],r[1]],l=[0,0];let g=t.getPixelInformation(r,0,s);if(g&&g.valid)return g;for(let v=1;v<u;++v){for(let h=c[1]>v?c[1]-v:0;h<=c[1]+v;++h)if(l[1]=h,c[0]>=v&&(l[0]=c[0]-v,g=t.getPixelInformation(l,0,s),g&&g.valid)||(l[0]=c[0]+v,g=t.getPixelInformation(l,0,s),g&&g.valid))return g;for(let h=c[0]>=v?c[0]-(v-1):0;h<=c[0]+(v-1);++h)if(l[0]=h,c[1]>=v&&(l[1]=c[1]-v,g=t.getPixelInformation(l,0,s),g&&g.valid)||(l[1]=c[1]+v,g=t.getPixelInformation(l,0,s),g&&g.valid))return g}return s[0]=r[0],s[1]=r[1],null},t.generateSelection=(r,i,s,u)=>{const c=Math.floor(r),l=Math.floor(i),g=Math.floor(s),v=Math.floor(u),h=new Map,y=[0,0];for(let T=l;T<=v;T++)for(let E=c;E<=g;E++){const S=[E,T],x=t.getPixelInformation(S,0,y);if(x&&x.valid){const m=vv(x);if(!h.has(m))h.set(m,{info:x,pixelCount:1,attributeIDs:[x.attributeID]});else{const M=h.get(m);M.pixelCount++,e.captureZValues&&x.zValue<M.info.zValue&&(M.info=x),M.attributeIDs.indexOf(x.attributeID)===-1&&M.attributeIDs.push(x.attributeID)}}}return Tv(e.fieldAssociation,h,e.captureZValues,e._renderer,e._openGLRenderWindow)},t.getRawPixelBuffer=r=>e.rawPixBuffer[r],t.getPixelBuffer=r=>e.pixBuffer[r],t.attach=(r,i)=>{e._openGLRenderWindow=r,e._renderer=i};const n=t.setArea;t.setArea=function(){return n(...arguments)?(e.area[0]=Math.floor(e.area[0]),e.area[1]=Math.floor(e.area[1]),e.area[2]=Math.floor(e.area[2]),e.area[3]=Math.floor(e.area[3]),!0):!1}}const fN={area:void 0,currentPass:-1,propColorValue:null,props:null,maximumPointId:0,maximumCellId:0,idOffset:1};function Sv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,fN,n),gv.extend(t,e,n),e.propColorValue=[0,0,0],e.props=[],e.area||(e.area=[0,0,0,0]),B.setGetArray(t,e,["area"],4),B.setGet(t,e,["_renderer","currentPass","_openGLRenderWindow","maximumPointId","maximumCellId"]),B.setGetArray(t,e,["propColorValue"],3),B.moveToProtected(t,e,["renderer","openGLRenderWindow"]),B.event(t,e,"event"),cN(t,e)}const lN=B.newInstance(Sv,"vtkOpenGLHardwareSelector");var Cv={newInstance:lN,extend:Sv,...bh},Bl={exports:{}},Q8;function gN(){return Q8||(Q8=1,(function(t,e){(function(n){t.exports=n()})(function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(m,M){var R=m[0],w=m[1],D=m[2],O=m[3];R+=(w&D|~w&O)+M[0]-680876936|0,R=(R<<7|R>>>25)+w|0,O+=(R&w|~R&D)+M[1]-389564586|0,O=(O<<12|O>>>20)+R|0,D+=(O&R|~O&w)+M[2]+606105819|0,D=(D<<17|D>>>15)+O|0,w+=(D&O|~D&R)+M[3]-1044525330|0,w=(w<<22|w>>>10)+D|0,R+=(w&D|~w&O)+M[4]-176418897|0,R=(R<<7|R>>>25)+w|0,O+=(R&w|~R&D)+M[5]+1200080426|0,O=(O<<12|O>>>20)+R|0,D+=(O&R|~O&w)+M[6]-1473231341|0,D=(D<<17|D>>>15)+O|0,w+=(D&O|~D&R)+M[7]-45705983|0,w=(w<<22|w>>>10)+D|0,R+=(w&D|~w&O)+M[8]+1770035416|0,R=(R<<7|R>>>25)+w|0,O+=(R&w|~R&D)+M[9]-1958414417|0,O=(O<<12|O>>>20)+R|0,D+=(O&R|~O&w)+M[10]-42063|0,D=(D<<17|D>>>15)+O|0,w+=(D&O|~D&R)+M[11]-1990404162|0,w=(w<<22|w>>>10)+D|0,R+=(w&D|~w&O)+M[12]+1804603682|0,R=(R<<7|R>>>25)+w|0,O+=(R&w|~R&D)+M[13]-40341101|0,O=(O<<12|O>>>20)+R|0,D+=(O&R|~O&w)+M[14]-1502002290|0,D=(D<<17|D>>>15)+O|0,w+=(D&O|~D&R)+M[15]+1236535329|0,w=(w<<22|w>>>10)+D|0,R+=(w&O|D&~O)+M[1]-165796510|0,R=(R<<5|R>>>27)+w|0,O+=(R&D|w&~D)+M[6]-1069501632|0,O=(O<<9|O>>>23)+R|0,D+=(O&w|R&~w)+M[11]+643717713|0,D=(D<<14|D>>>18)+O|0,w+=(D&R|O&~R)+M[0]-373897302|0,w=(w<<20|w>>>12)+D|0,R+=(w&O|D&~O)+M[5]-701558691|0,R=(R<<5|R>>>27)+w|0,O+=(R&D|w&~D)+M[10]+38016083|0,O=(O<<9|O>>>23)+R|0,D+=(O&w|R&~w)+M[15]-660478335|0,D=(D<<14|D>>>18)+O|0,w+=(D&R|O&~R)+M[4]-405537848|0,w=(w<<20|w>>>12)+D|0,R+=(w&O|D&~O)+M[9]+568446438|0,R=(R<<5|R>>>27)+w|0,O+=(R&D|w&~D)+M[14]-1019803690|0,O=(O<<9|O>>>23)+R|0,D+=(O&w|R&~w)+M[3]-187363961|0,D=(D<<14|D>>>18)+O|0,w+=(D&R|O&~R)+M[8]+1163531501|0,w=(w<<20|w>>>12)+D|0,R+=(w&O|D&~O)+M[13]-1444681467|0,R=(R<<5|R>>>27)+w|0,O+=(R&D|w&~D)+M[2]-51403784|0,O=(O<<9|O>>>23)+R|0,D+=(O&w|R&~w)+M[7]+1735328473|0,D=(D<<14|D>>>18)+O|0,w+=(D&R|O&~R)+M[12]-1926607734|0,w=(w<<20|w>>>12)+D|0,R+=(w^D^O)+M[5]-378558|0,R=(R<<4|R>>>28)+w|0,O+=(R^w^D)+M[8]-2022574463|0,O=(O<<11|O>>>21)+R|0,D+=(O^R^w)+M[11]+1839030562|0,D=(D<<16|D>>>16)+O|0,w+=(D^O^R)+M[14]-35309556|0,w=(w<<23|w>>>9)+D|0,R+=(w^D^O)+M[1]-1530992060|0,R=(R<<4|R>>>28)+w|0,O+=(R^w^D)+M[4]+1272893353|0,O=(O<<11|O>>>21)+R|0,D+=(O^R^w)+M[7]-155497632|0,D=(D<<16|D>>>16)+O|0,w+=(D^O^R)+M[10]-1094730640|0,w=(w<<23|w>>>9)+D|0,R+=(w^D^O)+M[13]+681279174|0,R=(R<<4|R>>>28)+w|0,O+=(R^w^D)+M[0]-358537222|0,O=(O<<11|O>>>21)+R|0,D+=(O^R^w)+M[3]-722521979|0,D=(D<<16|D>>>16)+O|0,w+=(D^O^R)+M[6]+76029189|0,w=(w<<23|w>>>9)+D|0,R+=(w^D^O)+M[9]-640364487|0,R=(R<<4|R>>>28)+w|0,O+=(R^w^D)+M[12]-421815835|0,O=(O<<11|O>>>21)+R|0,D+=(O^R^w)+M[15]+530742520|0,D=(D<<16|D>>>16)+O|0,w+=(D^O^R)+M[2]-995338651|0,w=(w<<23|w>>>9)+D|0,R+=(D^(w|~O))+M[0]-198630844|0,R=(R<<6|R>>>26)+w|0,O+=(w^(R|~D))+M[7]+1126891415|0,O=(O<<10|O>>>22)+R|0,D+=(R^(O|~w))+M[14]-1416354905|0,D=(D<<15|D>>>17)+O|0,w+=(O^(D|~R))+M[5]-57434055|0,w=(w<<21|w>>>11)+D|0,R+=(D^(w|~O))+M[12]+1700485571|0,R=(R<<6|R>>>26)+w|0,O+=(w^(R|~D))+M[3]-1894986606|0,O=(O<<10|O>>>22)+R|0,D+=(R^(O|~w))+M[10]-1051523|0,D=(D<<15|D>>>17)+O|0,w+=(O^(D|~R))+M[1]-2054922799|0,w=(w<<21|w>>>11)+D|0,R+=(D^(w|~O))+M[8]+1873313359|0,R=(R<<6|R>>>26)+w|0,O+=(w^(R|~D))+M[15]-30611744|0,O=(O<<10|O>>>22)+R|0,D+=(R^(O|~w))+M[6]-1560198380|0,D=(D<<15|D>>>17)+O|0,w+=(O^(D|~R))+M[13]+1309151649|0,w=(w<<21|w>>>11)+D|0,R+=(D^(w|~O))+M[4]-145523070|0,R=(R<<6|R>>>26)+w|0,O+=(w^(R|~D))+M[11]-1120210379|0,O=(O<<10|O>>>22)+R|0,D+=(R^(O|~w))+M[2]+718787259|0,D=(D<<15|D>>>17)+O|0,w+=(O^(D|~R))+M[9]-343485551|0,w=(w<<21|w>>>11)+D|0,m[0]=R+m[0]|0,m[1]=w+m[1]|0,m[2]=D+m[2]|0,m[3]=O+m[3]|0}function s(m){var M=[],R;for(R=0;R<64;R+=4)M[R>>2]=m.charCodeAt(R)+(m.charCodeAt(R+1)<<8)+(m.charCodeAt(R+2)<<16)+(m.charCodeAt(R+3)<<24);return M}function u(m){var M=[],R;for(R=0;R<64;R+=4)M[R>>2]=m[R]+(m[R+1]<<8)+(m[R+2]<<16)+(m[R+3]<<24);return M}function c(m){var M=m.length,R=[1732584193,-271733879,-1732584194,271733878],w,D,O,_,N,F;for(w=64;w<=M;w+=64)i(R,s(m.substring(w-64,w)));for(m=m.substring(w-64),D=m.length,O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=0;w<D;w+=1)O[w>>2]|=m.charCodeAt(w)<<(w%4<<3);if(O[w>>2]|=128<<(w%4<<3),w>55)for(i(R,O),w=0;w<16;w+=1)O[w]=0;return _=M*8,_=_.toString(16).match(/(.*?)(.{0,8})$/),N=parseInt(_[2],16),F=parseInt(_[1],16)||0,O[14]=N,O[15]=F,i(R,O),R}function l(m){var M=m.length,R=[1732584193,-271733879,-1732584194,271733878],w,D,O,_,N,F;for(w=64;w<=M;w+=64)i(R,u(m.subarray(w-64,w)));for(m=w-64<M?m.subarray(w-64):new Uint8Array(0),D=m.length,O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=0;w<D;w+=1)O[w>>2]|=m[w]<<(w%4<<3);if(O[w>>2]|=128<<(w%4<<3),w>55)for(i(R,O),w=0;w<16;w+=1)O[w]=0;return _=M*8,_=_.toString(16).match(/(.*?)(.{0,8})$/),N=parseInt(_[2],16),F=parseInt(_[1],16)||0,O[14]=N,O[15]=F,i(R,O),R}function g(m){var M="",R;for(R=0;R<4;R+=1)M+=r[m>>R*8+4&15]+r[m>>R*8&15];return M}function v(m){var M;for(M=0;M<m.length;M+=1)m[M]=g(m[M]);return m.join("")}v(c("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&(function(){function m(M,R){return M=M|0||0,M<0?Math.max(M+R,0):Math.min(M,R)}ArrayBuffer.prototype.slice=function(M,R){var w=this.byteLength,D=m(M,w),O=w,_,N,F,z;return R!==n&&(O=m(R,w)),D>O?new ArrayBuffer(0):(_=O-D,N=new ArrayBuffer(_),F=new Uint8Array(N),z=new Uint8Array(this,D,_),F.set(z),N)}})();function h(m){return/[\u0080-\uFFFF]/.test(m)&&(m=unescape(encodeURIComponent(m))),m}function y(m,M){var R=m.length,w=new ArrayBuffer(R),D=new Uint8Array(w),O;for(O=0;O<R;O+=1)D[O]=m.charCodeAt(O);return M?D:w}function T(m){return String.fromCharCode.apply(null,new Uint8Array(m))}function E(m,M,R){var w=new Uint8Array(m.byteLength+M.byteLength);return w.set(new Uint8Array(m)),w.set(new Uint8Array(M),m.byteLength),w}function S(m){var M=[],R=m.length,w;for(w=0;w<R-1;w+=2)M.push(parseInt(m.substr(w,2),16));return String.fromCharCode.apply(String,M)}function x(){this.reset()}return x.prototype.append=function(m){return this.appendBinary(h(m)),this},x.prototype.appendBinary=function(m){this._buff+=m,this._length+=m.length;var M=this._buff.length,R;for(R=64;R<=M;R+=64)i(this._hash,s(this._buff.substring(R-64,R)));return this._buff=this._buff.substring(R-64),this},x.prototype.end=function(m){var M=this._buff,R=M.length,w,D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],O;for(w=0;w<R;w+=1)D[w>>2]|=M.charCodeAt(w)<<(w%4<<3);return this._finish(D,R),O=v(this._hash),m&&(O=S(O)),this.reset(),O},x.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},x.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},x.prototype.setState=function(m){return this._buff=m.buff,this._length=m.length,this._hash=m.hash,this},x.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},x.prototype._finish=function(m,M){var R=M,w,D,O;if(m[R>>2]|=128<<(R%4<<3),R>55)for(i(this._hash,m),R=0;R<16;R+=1)m[R]=0;w=this._length*8,w=w.toString(16).match(/(.*?)(.{0,8})$/),D=parseInt(w[2],16),O=parseInt(w[1],16)||0,m[14]=D,m[15]=O,i(this._hash,m)},x.hash=function(m,M){return x.hashBinary(h(m),M)},x.hashBinary=function(m,M){var R=c(m),w=v(R);return M?S(w):w},x.ArrayBuffer=function(){this.reset()},x.ArrayBuffer.prototype.append=function(m){var M=E(this._buff.buffer,m),R=M.length,w;for(this._length+=m.byteLength,w=64;w<=R;w+=64)i(this._hash,u(M.subarray(w-64,w)));return this._buff=w-64<R?new Uint8Array(M.buffer.slice(w-64)):new Uint8Array(0),this},x.ArrayBuffer.prototype.end=function(m){var M=this._buff,R=M.length,w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],D,O;for(D=0;D<R;D+=1)w[D>>2]|=M[D]<<(D%4<<3);return this._finish(w,R),O=v(this._hash),m&&(O=S(O)),this.reset(),O},x.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},x.ArrayBuffer.prototype.getState=function(){var m=x.prototype.getState.call(this);return m.buff=T(m.buff),m},x.ArrayBuffer.prototype.setState=function(m){return m.buff=y(m.buff,!0),x.prototype.setState.call(this,m)},x.ArrayBuffer.prototype.destroy=x.prototype.destroy,x.ArrayBuffer.prototype._finish=x.prototype._finish,x.ArrayBuffer.hash=function(m,M){var R=l(new Uint8Array(m)),w=v(R);return M?S(w):w},x})})(Bl)),Bl.exports}var hN=gN();const pN=ci(hN),vN=["lastShaderProgramBound","context","_openGLRenderWindow"];function yN(t,e){e.classHierarchy.push("vtkShaderCache"),t.replaceShaderValues=(n,r,i)=>{let s=r;i.length>0&&(s=ie.substitute(s,"VSOut","GSOut").result);const u=e._openGLRenderWindow.getWebgl2();let c=`
`,l=`#version 100
`;u?l=`#version 300 es
#define attribute in
#define textureCube texture
#define texture2D texture
#define textureCubeLod textureLod
#define texture2DLod textureLod
`:(e.context.getExtension("OES_standard_derivatives"),e.context.getExtension("EXT_frag_depth")&&(c=`#extension GL_EXT_frag_depth : enable
`),e.context.getExtension("EXT_shader_texture_lod")&&(c+=`#extension GL_EXT_shader_texture_lod : enable
#define textureCubeLod textureCubeLodEXT
#define texture2DLod texture2DLodEXT`)),s=ie.substitute(s,"//VTK::System::Dec",[`${l}
`,u?"":`#extension GL_OES_standard_derivatives : enable
`,c,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;let g=ie.substitute(n,"//VTK::System::Dec",[`${l}
`,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;if(u){g=ie.substitute(g,"varying","out").result,s=ie.substitute(s,"varying","in").result;let h="",y=0;for(;s.includes(`gl_FragData[${y}]`);)s=ie.substitute(s,`gl_FragData\\[${y}\\]`,`fragOutput${y}`).result,h+=`layout(location = ${y}) out vec4 fragOutput${y};
`,y++;s=ie.substitute(s,"//VTK::Output::Dec",h).result}const v=ie.substitute(i,"//VTK::System::Dec",l).result;return{VSSource:g,FSSource:s,GSSource:v}},t.readyShaderProgramArray=(n,r,i)=>{const s=t.replaceShaderValues(n,r,i),u=t.getShaderProgram(s.VSSource,s.FSSource,s.GSSource);return t.readyShaderProgram(u)},t.readyShaderProgram=n=>!n||!n.getCompiled()&&!n.compileShader()||!t.bindShaderProgram(n)?null:n,t.getShaderProgram=(n,r,i)=>{const s=`${n}${r}${i}`,u=pN.hash(s);if(!(u in e.shaderPrograms)){const c=ie.newInstance();return c.setContext(e.context),c.getVertexShader().setSource(n),c.getFragmentShader().setSource(r),i&&c.getGeometryShader().setSource(i),c.setMd5Hash(u),e.shaderPrograms[u]=c,c}return e.shaderPrograms[u]},t.releaseGraphicsResources=n=>{t.releaseCurrentShaderProgram(),Object.keys(e.shaderPrograms).map(r=>e.shaderPrograms[r]).forEach(r=>r.cleanup()),e.shaderPrograms={}},t.releaseCurrentShaderProgram=()=>{e.lastShaderProgramBound&&(e.lastShaderProgramBound.cleanup(),e.lastShaderProgramBound=null)},t.bindShaderProgram=n=>(e.lastShaderProgramBound===n||(e.lastShaderProgramBound&&e.lastShaderProgramBound.release(),n.bind(),e.lastShaderProgramBound=n),1)}const dN={lastShaderProgramBound:null,shaderPrograms:null,context:null};function xv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dN,n),e.shaderPrograms={},B.obj(t,e),B.setGet(t,e,vN),B.moveToProtected(t,e,["openGLRenderWindow"]),yN(t,e)}const TN=B.newInstance(xv,"vtkShaderCache");var SN={newInstance:TN,extend:xv};const{vtkErrorMacro:CN}=B;function xN(t,e){e.classHierarchy.push("vtkOpenGLTextureUnitManager"),t.deleteTable=()=>{for(let n=0;n<e.numberOfTextureUnits;++n)e.textureUnits[n]===!0&&CN("some texture units  were not properly released");e.textureUnits=[],e.numberOfTextureUnits=0},t.setContext=n=>{if(e.context!==n){if(e.context!==0&&t.deleteTable(),e.context=n,e.context){e.numberOfTextureUnits=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);for(let r=0;r<e.numberOfTextureUnits;++r)e.textureUnits[r]=!1}t.modified()}},t.allocate=()=>{for(let n=0;n<e.numberOfTextureUnits;n++)if(!t.isAllocated(n))return e.textureUnits[n]=!0,n;return-1},t.allocateUnit=n=>t.isAllocated(n)?-1:(e.textureUnits[n]=!0,n),t.isAllocated=n=>e.textureUnits[n],t.free=n=>{e.textureUnits[n]=!1},t.freeAll=()=>{for(let n=0;n<e.numberOfTextureUnits;++n)e.textureUnits[n]=!1}}const EN={context:null,numberOfTextureUnits:0,textureUnits:0};function Ev(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,EN,n),B.obj(t,e),e.textureUnits=[],B.get(t,e,["numberOfTextureUnits"]),B.setGet(t,e,["context"]),xN(t,e)}const mN=B.newInstance(Ev,"vtkOpenGLTextureUnitManager");var RN={newInstance:mN,extend:Ev};function wN(t,e){e.classHierarchy.push("vtkRenderWindowViewNode"),t.getViewNodeFactory=()=>null,t.getAspectRatio=()=>e.size[0]/e.size[1],t.getAspectRatioForRenderer=n=>{const r=n.getViewportByReference();return e.size[0]*(r[2]-r[0])/((r[3]-r[1])*e.size[1])},t.isInViewport=(n,r,i)=>{const s=i.getViewportByReference(),u=t.getFramebufferSize();return s[0]*u[0]<=n&&s[2]*u[0]>=n&&s[1]*u[1]<=r&&s[3]*u[1]>=r},t.getViewportSize=n=>{const r=n.getViewportByReference(),i=t.getFramebufferSize();return[(r[2]-r[0])*i[0],(r[3]-r[1])*i[1]]},t.getViewportCenter=n=>{const r=t.getViewportSize(n);return[r[0]*.5,r[1]*.5]},t.displayToNormalizedDisplay=(n,r,i)=>{const s=t.getFramebufferSize();return[n/s[0],r/s[1],i]},t.normalizedDisplayToDisplay=(n,r,i)=>{const s=t.getFramebufferSize();return[n*s[0],r*s[1],i]},t.worldToView=(n,r,i,s)=>s.worldToView(n,r,i),t.viewToWorld=(n,r,i,s)=>s.viewToWorld(n,r,i),t.worldToDisplay=(n,r,i,s)=>{const u=s.worldToView(n,r,i),c=t.getViewportSize(s),l=s.viewToProjection(u[0],u[1],u[2],c[0]/c[1]),g=s.projectionToNormalizedDisplay(l[0],l[1],l[2]);return t.normalizedDisplayToDisplay(g[0],g[1],g[2])},t.displayToWorld=(n,r,i,s)=>{const u=t.displayToNormalizedDisplay(n,r,i),c=s.normalizedDisplayToProjection(u[0],u[1],u[2]),l=t.getViewportSize(s),g=s.projectionToView(c[0],c[1],c[2],l[0]/l[1]);return s.viewToWorld(g[0],g[1],g[2])},t.normalizedDisplayToViewport=(n,r,i,s)=>{let u=s.getViewportByReference();u=t.normalizedDisplayToDisplay(u[0],u[1],0);const c=t.normalizedDisplayToDisplay(n,r,i);return[c[0]-u[0]-.5,c[1]-u[1]-.5,i]},t.viewportToNormalizedViewport=(n,r,i,s)=>{const u=t.getViewportSize(s);return u&&u[0]!==0&&u[1]!==0?[n/(u[0]-1),r/(u[1]-1),i]:[n,r,i]},t.normalizedViewportToViewport=(n,r,i,s)=>{const u=t.getViewportSize(s);return[n*(u[0]-1),r*(u[1]-1),i]},t.displayToLocalDisplay=(n,r,i)=>{const s=t.getFramebufferSize();return[n,s[1]-r-1,i]},t.viewportToNormalizedDisplay=(n,r,i,s)=>{let u=s.getViewportByReference();u=t.normalizedDisplayToDisplay(u[0],u[1],0);const c=n+u[0]+.5,l=r+u[1]+.5;return t.displayToNormalizedDisplay(c,l,i)},t.getComputedDevicePixelRatio=()=>e.size[0]/t.getContainerSize()[0],t.getContainerSize=()=>{B.vtkErrorMacro("not implemented")},t.getPixelData=(n,r,i,s)=>{B.vtkErrorMacro("not implemented")},t.createSelector=()=>{B.vtkErrorMacro("not implemented")}}const MN={size:void 0,selector:void 0};function mv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,MN,n),e.size||(e.size=[300,300]),B.getArray(t,e,["size"],2),B.get(t,e,["selector"]),st.extend(t,e,n),wN(t,e)}const ON=B.newInstance(mv,"vtkRenderWindowViewNode");var Rv={newInstance:ON,extend:mv};const DN="__getUnderlyingContext";function LN(){const t=new Map,e={apply(i,s,u){return t.has(u[0])?t.get(u[0]):i.apply(s,u)}};function n(i){return{apply(s,u,c){return t.set(i,c[0]),s.apply(u,c)}}}const r=Object.create(null);return r.getParameter=(i,s,u,c)=>new Proxy(c.bind(i),e),r.depthMask=(i,s,u,c)=>new Proxy(c.bind(i),n(i.DEPTH_WRITEMASK)),{get(i,s,u){if(s===DN)return()=>i;let c=Reflect.get(i,s,i);c instanceof Function&&(c=c.bind(i));const l=r[s];return l?l(i,s,u,c):c}}}const{vtkDebugMacro:Z8,vtkErrorMacro:J8}=B,BN={position:"absolute",top:0,left:0,width:"100%",height:"100%"},VN=["activateTexture","deactivateTexture","disableCullFace","enableCullFace","get3DContext","getActiveFramebuffer","getContext","getDefaultTextureByteSize","getDefaultTextureInternalFormat","getDefaultToWebgl2","getGLInformations","getGraphicsMemoryInfo","getGraphicsResourceForObject","getHardwareMaximumLineWidth","getPixelData","getShaderCache","getTextureUnitForTexture","getTextureUnitManager","getWebgl2","makeCurrent","releaseGraphicsResources","registerGraphicsResourceUser","unregisterGraphicsResourceUser","restoreContext","setActiveFramebuffer","setContext","setDefaultToWebgl2","setGraphicsResourceForObject"];function $t(t,e,n){const r=t.createFramebuffer(),i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,e,2,2,0,e,n,null),t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER);return t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,null),s===t.FRAMEBUFFER_COMPLETE}let gc=0;const wv=[];function NN(){gc++,wv.forEach(t=>t(gc))}function _N(){gc--,wv.forEach(t=>t(gc))}function P8(t){t.preventDefault()}function UN(t,e){e.classHierarchy.push("vtkOpenGLRenderWindow");let n;function r(){return n||(n=LN()),n}t.getViewNodeFactory=()=>e.myFactory,e.canvas.addEventListener("webglcontextlost",P8,!1),e.canvas.addEventListener("webglcontextrestored",t.restoreContext,!1);const i=[0,0];function s(){e.renderable&&(e.size[0]!==i[0]||e.size[1]!==i[1])&&(i[0]=e.size[0],i[1]=e.size[1],e.canvas.setAttribute("width",e.size[0]),e.canvas.setAttribute("height",e.size[1])),e.viewStream&&e.viewStream.setSize(e.size[0],e.size[1]),e.canvas.style.display=e.useOffScreen?"none":"block",e.el&&(e.el.style.cursor=e.cursorVisibility?e.cursor:"none"),e.containerSize=null}t.onModified(s),t.buildPass=h=>{if(h){if(!e.renderable)return;t.prepareNodes(),t.addMissingNodes(e.renderable.getRenderersByReference()),t.addMissingNodes(e.renderable.getChildRenderWindowsByReference()),t.removeUnusedNodes(),t.initialize(),e.children.forEach(y=>{y.setOpenGLRenderWindow?.(t)})}},t.initialize=()=>{if(!e.initialized){if(e.rootOpenGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.rootOpenGLRenderWindow)e.context2D=t.get2DContext();else{e.context=t.get3DContext(),t.resizeFromChildRenderWindows(),e.context&&NN(),e.textureUnitManager=RN.newInstance(),e.textureUnitManager.setContext(e.context),e.shaderCache.setContext(e.context);const h=e.context;h.blendFuncSeparate(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA),h.depthFunc(h.LEQUAL),h.enable(h.BLEND)}e.initialized=!0}},t.makeCurrent=()=>{e.context.makeCurrent()},t.setContainer=h=>{e.el&&e.el!==h&&(e.canvas.parentNode!==e.el&&J8("Error: canvas parent node does not match container"),e.el.removeChild(e.canvas),e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)),e.el!==h&&(e.el=h,e.el&&(e.el.appendChild(e.canvas),e.useBackgroundImage&&e.el.appendChild(e.bgImage)),t.modified())},t.getContainer=()=>e.el,t.getContainerSize=()=>{if(!e.containerSize&&e.el){const{width:h,height:y}=e.el.getBoundingClientRect();e.containerSize=[h,y]}return e.containerSize||e.size},t.getFramebufferSize=()=>e.activeFramebuffer?.getSize()||e.size,t.getPixelData=(h,y,T,E)=>{const S=new Uint8Array((T-h+1)*(E-y+1)*4);return e.context.readPixels(h,y,T-h+1,E-y+1,e.context.RGBA,e.context.UNSIGNED_BYTE,S),S},t.get3DContext=function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{preserveDrawingBuffer:!1,depth:!0,alpha:!0,powerPreference:"high-performance"},y=null;const T=typeof WebGL2RenderingContext<"u";return e.webgl2=!1,e.defaultToWebgl2&&T&&(y=e.canvas.getContext("webgl2",h),y&&(e.webgl2=!0,Z8("using webgl2"))),y||(Z8("using webgl1"),y=e.canvas.getContext("webgl",h)||e.canvas.getContext("experimental-webgl",h)),new Proxy(y,r())},t.get2DContext=function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.canvas.getContext("2d",h)},t.restoreContext=()=>{const h=Dr.newInstance();h.setCurrentOperation("Release"),h.traverse(t,null)},t.activateTexture=h=>{const y=e._textureResourceIds.get(h);if(y!==void 0){e.context.activeTexture(e.context.TEXTURE0+y);return}const T=t.getTextureUnitManager().allocate();if(T<0){J8("Hardware does not support the number of textures defined.");return}e._textureResourceIds.set(h,T),e.context.activeTexture(e.context.TEXTURE0+T)},t.deactivateTexture=h=>{const y=e._textureResourceIds.get(h);y!==void 0&&(t.getTextureUnitManager().free(y),e._textureResourceIds.delete(h))},t.getTextureUnitForTexture=h=>{const y=e._textureResourceIds.get(h);return y!==void 0?y:-1},t.getDefaultTextureByteSize=function(h){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e.webgl2)switch(h){case Rt.CHAR:case Rt.SIGNED_CHAR:case Rt.UNSIGNED_CHAR:return 1;case y:case T:case Rt.UNSIGNED_SHORT:case Rt.SHORT:case Rt.VOID:return 2;default:return 4}return 1},t.getDefaultTextureInternalFormat=function(h,y){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.webgl2)switch(h){case Rt.UNSIGNED_CHAR:switch(y){case 1:return e.context.R8;case 2:return e.context.RG8;case 3:return e.context.RGB8;case 4:default:return e.context.RGBA8}case(T&&!E&&Rt.UNSIGNED_SHORT):switch(y){case 1:return T.R16_EXT;case 2:return T.RG16_EXT;case 3:return T.RGB16_EXT;case 4:default:return T.RGBA16_EXT}case(T&&!E&&Rt.SHORT):switch(y){case 1:return T.R16_SNORM_EXT;case 2:return T.RG16_SNORM_EXT;case 3:return T.RGB16_SNORM_EXT;case 4:default:return T.RGBA16_SNORM_EXT}case Rt.UNSIGNED_SHORT:case Rt.SHORT:case Rt.FLOAT:default:switch(y){case 1:return E?e.context.R16F:e.context.R32F;case 2:return E?e.context.RG16F:e.context.RG32F;case 3:return E?e.context.RGB16F:e.context.RGB32F;case 4:default:return E?e.context.RGBA16F:e.context.RGBA32F}}switch(y){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:default:return e.context.RGBA}},t.setBackgroundImage=h=>{e.bgImage.src=h.src},t.setUseBackgroundImage=h=>{e.useBackgroundImage=h,e.useBackgroundImage&&!e.el.contains(e.bgImage)?e.el.appendChild(e.bgImage):!e.useBackgroundImage&&e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)};function u(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.imageFormat;const y=document.createElement("canvas"),T=y.getContext("2d");y.width=e.canvas.width,y.height=e.canvas.height,T.drawImage(e.canvas,0,0);const E=e.canvas.getBoundingClientRect();e.renderable.getRenderers().forEach(M=>{M.getViewProps().forEach(w=>{if(w.getContainer){const O=w.getContainer().getElementsByTagName("canvas");for(let _=0;_<O.length;_++){const N=O[_],F=N.getBoundingClientRect(),z=F.x-E.x,$=F.y-E.y;T.drawImage(N,z,$)}}})});const m=y.toDataURL(h);y.remove(),t.invokeImageReady(m)}t.captureNextImage=function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",{resetCamera:y=!1,size:T=null,scale:E=1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.deleted)return null;e.imageFormat=h;const S=e.notifyStartCaptureImage;return e.notifyStartCaptureImage=!0,e._screenshot={size:T||E!==1?T||e.size.map(x=>x*E):null},new Promise((x,m)=>{const M=t.onImageReady(R=>{if(e._screenshot.size===null)e.notifyStartCaptureImage=S,M.unsubscribe(),e._screenshot.placeHolder&&(e.size=e._screenshot.originalSize,t.modified(),e._screenshot.cameras&&e._screenshot.cameras.forEach(w=>{let{restoreParamsFn:D,arg:O}=w;return D(O)}),t.traverseAllPasses(),e.el.removeChild(e._screenshot.placeHolder),e._screenshot.placeHolder.remove(),e._screenshot=null),x(R);else{const w=document.createElement("img");if(w.style=BN,w.src=R,e._screenshot.placeHolder=e.el.appendChild(w),e.canvas.style.display="none",e._screenshot.originalSize=e.size,e.size=e._screenshot.size,e.rootOpenGLRenderWindow?.resizeFromChildRenderWindows(),e._screenshot.size=null,t.modified(),y){const D=y!==!0;e._screenshot.cameras=e.renderable.getRenderers().map(O=>{const _=O.getActiveCamera(),N=_.get("focalPoint","position","parallelScale");return{resetCameraArgs:D?{renderer:O}:void 0,resetCameraFn:D?y:O.resetCamera,restoreParamsFn:_.set,arg:JSON.parse(JSON.stringify(N))}}),e._screenshot.cameras.forEach(O=>{let{resetCameraFn:_,resetCameraArgs:N}=O;return _(N)})}t.traverseAllPasses()}})})};let c;t.getHardwareMaximumLineWidth=()=>{if(c!=null)return c;const h=t.get3DContext(),y=h.getParameter(h.ALIASED_LINE_WIDTH_RANGE);return c=y[1],y[1]},t.getGLInformations=()=>{if(e._glInformation)return e._glInformation;const h=t.get3DContext(),y=h.getExtension("OES_texture_float"),T=h.getExtension("OES_texture_half_float"),E=h.getExtension("WEBGL_debug_renderer_info"),S=h.getExtension("WEBGL_draw_buffers"),x=h.getExtension("EXT_texture_filter_anisotropic")||h.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),m=[["Max Vertex Attributes","MAX_VERTEX_ATTRIBS",h.getParameter(h.MAX_VERTEX_ATTRIBS)],["Max Varying Vectors","MAX_VARYING_VECTORS",h.getParameter(h.MAX_VARYING_VECTORS)],["Max Vertex Uniform Vectors","MAX_VERTEX_UNIFORM_VECTORS",h.getParameter(h.MAX_VERTEX_UNIFORM_VECTORS)],["Max Fragment Uniform Vectors","MAX_FRAGMENT_UNIFORM_VECTORS",h.getParameter(h.MAX_FRAGMENT_UNIFORM_VECTORS)],["Max Fragment Texture Image Units","MAX_TEXTURE_IMAGE_UNITS",h.getParameter(h.MAX_TEXTURE_IMAGE_UNITS)],["Max Vertex Texture Image Units","MAX_VERTEX_TEXTURE_IMAGE_UNITS",h.getParameter(h.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],["Max Combined Texture Image Units","MAX_COMBINED_TEXTURE_IMAGE_UNITS",h.getParameter(h.MAX_COMBINED_TEXTURE_IMAGE_UNITS)],["Max 2D Texture Size","MAX_TEXTURE_SIZE",h.getParameter(h.MAX_TEXTURE_SIZE)],["Max Cube Texture Size","MAX_CUBE_MAP_TEXTURE_SIZE",h.getParameter(h.MAX_CUBE_MAP_TEXTURE_SIZE)],["Max Texture Anisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT",x&&h.getParameter(x.MAX_TEXTURE_MAX_ANISOTROPY_EXT)],["Point Size Range","ALIASED_POINT_SIZE_RANGE",h.getParameter(h.ALIASED_POINT_SIZE_RANGE).join(" - ")],["Line Width Range","ALIASED_LINE_WIDTH_RANGE",h.getParameter(h.ALIASED_LINE_WIDTH_RANGE).join(" - ")],["Max Viewport Dimensions","MAX_VIEWPORT_DIMS",h.getParameter(h.MAX_VIEWPORT_DIMS).join(" - ")],["Max Renderbuffer Size","MAX_RENDERBUFFER_SIZE",h.getParameter(h.MAX_RENDERBUFFER_SIZE)],["Framebuffer Red Bits","RED_BITS",h.getParameter(h.RED_BITS)],["Framebuffer Green Bits","GREEN_BITS",h.getParameter(h.GREEN_BITS)],["Framebuffer Blue Bits","BLUE_BITS",h.getParameter(h.BLUE_BITS)],["Framebuffer Alpha Bits","ALPHA_BITS",h.getParameter(h.ALPHA_BITS)],["Framebuffer Depth Bits","DEPTH_BITS",h.getParameter(h.DEPTH_BITS)],["Framebuffer Stencil Bits","STENCIL_BITS",h.getParameter(h.STENCIL_BITS)],["Framebuffer Subpixel Bits","SUBPIXEL_BITS",h.getParameter(h.SUBPIXEL_BITS)],["MSAA Samples","SAMPLES",h.getParameter(h.SAMPLES)],["MSAA Sample Buffers","SAMPLE_BUFFERS",h.getParameter(h.SAMPLE_BUFFERS)],["Supported Formats for UByte Render Targets     ","UNSIGNED_BYTE RENDER TARGET FORMATS",[y&&$t(h,h.RGBA,h.UNSIGNED_BYTE)?"RGBA":"",y&&$t(h,h.RGB,h.UNSIGNED_BYTE)?"RGB":"",y&&$t(h,h.LUMINANCE,h.UNSIGNED_BYTE)?"LUMINANCE":"",y&&$t(h,h.ALPHA,h.UNSIGNED_BYTE)?"ALPHA":"",y&&$t(h,h.LUMINANCE_ALPHA,h.UNSIGNED_BYTE)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Half Float Render Targets","HALF FLOAT RENDER TARGET FORMATS",[T&&$t(h,h.RGBA,T.HALF_FLOAT_OES)?"RGBA":"",T&&$t(h,h.RGB,T.HALF_FLOAT_OES)?"RGB":"",T&&$t(h,h.LUMINANCE,T.HALF_FLOAT_OES)?"LUMINANCE":"",T&&$t(h,h.ALPHA,T.HALF_FLOAT_OES)?"ALPHA":"",T&&$t(h,h.LUMINANCE_ALPHA,T.HALF_FLOAT_OES)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Full Float Render Targets","FLOAT RENDER TARGET FORMATS",[y&&$t(h,h.RGBA,h.FLOAT)?"RGBA":"",y&&$t(h,h.RGB,h.FLOAT)?"RGB":"",y&&$t(h,h.LUMINANCE,h.FLOAT)?"LUMINANCE":"",y&&$t(h,h.ALPHA,h.FLOAT)?"ALPHA":"",y&&$t(h,h.LUMINANCE_ALPHA,h.FLOAT)?"LUMINANCE_ALPHA":""].join(" ")],["Max Multiple Render Targets Buffers","MAX_DRAW_BUFFERS_WEBGL",S?h.getParameter(S.MAX_DRAW_BUFFERS_WEBGL):0],["High Float Precision in Vertex Shader","HIGH_FLOAT VERTEX_SHADER",[h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.HIGH_FLOAT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Vertex Shader","MEDIUM_FLOAT VERTEX_SHADER",[h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.MEDIUM_FLOAT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Vertex Shader","LOW_FLOAT VERTEX_SHADER",[h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.LOW_FLOAT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Float Precision in Fragment Shader","HIGH_FLOAT FRAGMENT_SHADER",[h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_FLOAT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Fragment Shader","MEDIUM_FLOAT FRAGMENT_SHADER",[h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.MEDIUM_FLOAT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Fragment Shader","LOW_FLOAT FRAGMENT_SHADER",[h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.LOW_FLOAT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Int Precision in Vertex Shader","HIGH_INT VERTEX_SHADER",[h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.HIGH_INT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.HIGH_INT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Vertex Shader","MEDIUM_INT VERTEX_SHADER",[h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.MEDIUM_INT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Vertex Shader","LOW_INT VERTEX_SHADER",[h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.LOW_INT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.LOW_INT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.LOW_INT).rangeMax,"</sup>)"].join("")],["High Int Precision in Fragment Shader","HIGH_INT FRAGMENT_SHADER",[h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_INT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_INT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Fragment Shader","MEDIUM_INT FRAGMENT_SHADER",[h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.MEDIUM_INT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Fragment Shader","LOW_INT FRAGMENT_SHADER",[h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.LOW_INT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.LOW_INT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.LOW_INT).rangeMax,"</sup>)"].join("")],["Supported Extensions","EXTENSIONS",h.getSupportedExtensions().join("<br/>					    ")],["WebGL Renderer","RENDERER",h.getParameter(h.RENDERER)],["WebGL Vendor","VENDOR",h.getParameter(h.VENDOR)],["WebGL Version","VERSION",h.getParameter(h.VERSION)],["Shading Language Version","SHADING_LANGUAGE_VERSION",h.getParameter(h.SHADING_LANGUAGE_VERSION)],["Unmasked Renderer","UNMASKED_RENDERER",E&&h.getParameter(E.UNMASKED_RENDERER_WEBGL)],["Unmasked Vendor","UNMASKED_VENDOR",E&&h.getParameter(E.UNMASKED_VENDOR_WEBGL)],["WebGL Version","WEBGL_VERSION",e.webgl2?2:1]],M={};for(;m.length;){const[R,w,D]=m.pop();w&&(M[w]={label:R,value:D})}return e._glInformation=M,M},t.traverseAllPasses=()=>{if(e.renderPasses)for(let y=0;y<e.renderPasses.length;++y)e.renderPasses[y].traverse(t,null);t.copyParentContent(),e.notifyStartCaptureImage&&u();const h=e.renderable.getChildRenderWindowsByReference();for(let y=0;y<h.length;++y)t.getViewNodeFor(h[y])?.traverseAllPasses()},t.copyParentContent=()=>{const h=e.rootOpenGLRenderWindow;if(!h||!e.context2D||e.children.some(E=>!!E.getSelector?.()))return;const y=h.getCanvas(),T=e.canvas;e.context2D.drawImage(y,0,y.height-T.height,T.width,T.height,0,0,T.width,T.height)},t.resizeFromChildRenderWindows=()=>{const h=e.renderable.getChildRenderWindowsByReference();if(h.length>0){const y=[0,0];for(let T=0;T<h.length;++T){const E=t.getViewNodeFor(h[T])?.getSize();E&&(y[0]=E[0]>y[0]?E[0]:y[0],y[1]=E[1]>y[1]?E[1]:y[1])}t.setSize(...y)}},t.disableCullFace=()=>{e.cullFaceEnabled&&(e.context.disable(e.context.CULL_FACE),e.cullFaceEnabled=!1)},t.enableCullFace=()=>{e.cullFaceEnabled||(e.context.enable(e.context.CULL_FACE),e.cullFaceEnabled=!0)},t.setViewStream=h=>{if(e.viewStream===h)return!1;if(e.subscription&&(e.subscription.unsubscribe(),e.subscription=null),e.viewStream=h,e.viewStream){const y=e.renderable.getRenderers()[0];y.getBackgroundByReference()[3]=0,t.setUseBackgroundImage(!0),e.subscription=e.viewStream.onImageReady(T=>t.setBackgroundImage(T.image)),e.viewStream.setSize(e.size[0],e.size[1]),e.viewStream.invalidateCache(),e.viewStream.render(),t.modified()}return!0},t.createSelector=()=>{const h=Cv.newInstance();return h.setOpenGLRenderWindow(t),h};function l(){e.canvas.removeEventListener("webglcontextlost",P8),e.canvas.removeEventListener("webglcontextrestored",t.restoreContext)}t.delete=B.chain(()=>{e.context&&_N(),t.setContainer(),t.setViewStream()},l,t.delete),t.setActiveFramebuffer=h=>{e.activeFramebuffer=h};const g=t.setSize;t.setSize=(h,y)=>{const T=g(h,y);return T&&t.invokeWindowResizeEvent({width:h,height:y}),T},t.registerGraphicsResourceUser=(h,y)=>{e._graphicsResources.has(h)||t.setGraphicsResourceForObject(h,null,null),e._graphicsResources.get(h)?.users.add(y)},t.unregisterGraphicsResourceUser=(h,y)=>{const T=e._graphicsResources.get(h);T&&(T.users.delete(y),T.users.size||(T.oglObject?.releaseGraphicsResources(t),e._graphicsResources.delete(h)))},t.getGraphicsResourceForObject=h=>e._graphicsResources.get(h),t.setGraphicsResourceForObject=(h,y,T)=>{if(!h)return;const E=e._graphicsResources.get(h);E?.oglObject?.releaseGraphicsResources(t),e._graphicsResources.set(h,{coreObject:h,oglObject:y,hash:T,users:E?.users??new Set})},t.getGraphicsMemoryInfo=()=>{let h=0;return e._graphicsResources.forEach(y=>{let{oglObject:T}=y;h+=T.getAllocatedGPUMemoryInBytes()}),h},t.releaseGraphicsResources=()=>{e.shaderCache!==null&&e.shaderCache.releaseGraphicsResources(t),e._graphicsResources.forEach(h=>{let{oglObject:y}=h;y.releaseGraphicsResources(t)}),e._graphicsResources.clear(),e.textureUnitManager!==null&&e.textureUnitManager.freeAll(),e.renderable.getRenderersByReference().forEach(h=>{t.getViewNodeFor(h)?.releaseGraphicsResources()})};const v={...t};VN.forEach(h=>{t[h]=function(){return e.rootOpenGLRenderWindow?e.rootOpenGLRenderWindow[h](...arguments):v[h](...arguments)}})}const GN={cullFaceEnabled:!1,shaderCache:null,initialized:!1,context:null,context2D:null,canvas:null,cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,webgl2:!1,defaultToWebgl2:!0,activeFramebuffer:null,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1};function bN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,GN,n),Rv.extend(t,e,n),e.canvas||(e.canvas=document.createElement("canvas"),e.canvas.style.width="100%"),e.selector||(e.selector=Cv.newInstance(),e.selector.setOpenGLRenderWindow(t)),e.bgImage=new Image,e.bgImage.style.position="absolute",e.bgImage.style.left="0",e.bgImage.style.top="0",e.bgImage.style.width="100%",e.bgImage.style.height="100%",e.bgImage.style.zIndex="-1",e._textureResourceIds=new Map,e._graphicsResources=new Map,e._glInformation=null,e.myFactory=xC.newInstance(),e.shaderCache=SN.newInstance(),e.shaderCache.setOpenGLRenderWindow(t),e.renderPasses[0]=QV.newInstance(),B.get(t,e,["shaderCache","textureUnitManager","webgl2","useBackgroundImage","activeFramebuffer","rootOpenGLRenderWindow"]),B.setGet(t,e,["initialized","context","context2D","canvas","renderPasses","notifyStartCaptureImage","defaultToWebgl2","cursor","useOffScreen"]),B.setGetArray(t,e,["size"],2),B.event(t,e,"imageReady"),B.event(t,e,"windowResizeEvent"),UN(t,e)}const Mv=B.newInstance(bN,"vtkOpenGLRenderWindow");X2("WebGL",Mv);Nn("vtkRenderWindow",Mv);const Vl=["setBindGroup","setIndexBuffer","setVertexBuffer","draw","drawIndexed"];function FN(t,e){e.classHierarchy.push("vtkWebGPURenderEncoder"),t.begin=n=>{e.drawCallbacks=[],e.handle=n.beginRenderPass(e.description),e.label&&e.handle.pushDebugGroup(e.label)},t.end=()=>{for(let n=0;n<e.drawCallbacks.length;n++){const r=e.drawCallbacks[n],i=r.pipeline;t.setPipeline(i);for(let s=0;s<r.callbacks.length;s++)r.callbacks[s](t)}e.label&&e.handle.popDebugGroup(),e.handle.end(),e.boundPipeline=null},t.setPipeline=n=>{if(e.boundPipeline===n)return;e.handle.setPipeline(n.getHandle());const r=n.getPipelineDescription();if(e.colorTextureViews.length!==r.fragment.targets.length)console.log(`mismatched attachment counts on pipeline ${r.fragment.targets.length} while encoder has ${e.colorTextureViews.length}`),console.trace();else for(let i=0;i<e.colorTextureViews.length;i++){const s=e.colorTextureViews[i].getTexture()?.getFormat();s&&s!==r.fragment.targets[i].format&&(console.log(`mismatched attachments for attachment ${i} on pipeline ${r.fragment.targets[i].format} while encoder has ${s}`),console.trace())}if(!e.depthTextureView!=!("depthStencil"in r))console.log("mismatched depth attachments"),console.trace();else if(e.depthTextureView){const i=e.depthTextureView.getTexture()?.getFormat();i&&i!==r.depthStencil.format&&(console.log(`mismatched depth attachments on pipeline ${r.depthStencil.format} while encoder has ${i}`),console.trace())}e.boundPipeline=n},t.replaceShaderCode=n=>{e.replaceShaderCodeFunction(n)},t.setColorTextureView=(n,r)=>{e.colorTextureViews[n]!==r&&(e.colorTextureViews[n]=r)},t.activateBindGroup=n=>{const r=e.boundPipeline.getDevice(),i=e.boundPipeline.getBindGroupLayoutCount(n.getLabel());e.handle.setBindGroup(i,n.getBindGroup(r));const s=r.getBindGroupLayoutDescription(n.getBindGroupLayout(r)),u=r.getBindGroupLayoutDescription(e.boundPipeline.getBindGroupLayout(i));s!==u&&(console.log(`renderEncoder ${e.pipelineHash} mismatched bind group layouts bind group has
${s}
 versus pipeline
${u}
`),console.trace())},t.attachTextureViews=()=>{for(let n=0;n<e.colorTextureViews.length;n++)e.description.colorAttachments[n]?e.description.colorAttachments[n].view=e.colorTextureViews[n].getHandle():e.description.colorAttachments[n]={view:e.colorTextureViews[n].getHandle()};e.depthTextureView&&(e.description.depthStencilAttachment.view=e.depthTextureView.getHandle())},t.registerDrawCallback=(n,r)=>{for(let i=0;i<e.drawCallbacks.length;i++)if(e.drawCallbacks[i].pipeline===n){e.drawCallbacks[i].callbacks.push(r);return}e.drawCallbacks.push({pipeline:n,callbacks:[r]})};for(let n=0;n<Vl.length;n++)t[Vl[n]]=function(){return e.handle[Vl[n]](...arguments)}}const zN={description:null,handle:null,boundPipeline:null,pipelineHash:null,pipelineSettings:null,replaceShaderCodeFunction:null,depthTextureView:null,label:null};function Ov(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,zN,n),Dt(t,e),e.description={colorAttachments:[{view:void 0,loadOp:"load",storeOp:"store"}],depthStencilAttachment:{view:void 0,depthLoadOp:"clear",depthClearValue:0,depthStoreOp:"store"}},e.replaceShaderCodeFunction=r=>{const i=r.getShaderDescription("fragment");i.addOutput("vec4<f32>","outColor");let s=i.getCode();s=Te.substitute(s,"//VTK::RenderEncoder::Impl",["output.outColor = computedColor;"]).result,i.setCode(s)},e.pipelineSettings={primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth32float"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}},e.colorTextureViews=[],Kt(t,e,["boundPipeline","colorTextureViews"]),St(t,e,["depthTextureView","description","handle","label","pipelineHash","pipelineSettings","replaceShaderCodeFunction"]),FN(t,e)}const kN=Ye(Ov,"vtkWebGPURenderEncoder");var mr={newInstance:kN,extend:Ov};function HN(t,e){e.classHierarchy.push("vtkWebGPUOpaquePass"),t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=r;const i=r.getDevice();if(e.renderEncoder)e.colorTexture.resize(r.getCanvas().width,r.getCanvas().height),e.depthTexture.resize(r.getCanvas().width,r.getCanvas().height);else{t.createRenderEncoder(),e.colorTexture=Jn.newInstance({label:"opaquePassColor"}),e.colorTexture.create(i,{width:r.getCanvas().width,height:r.getCanvas().height,format:"rgba16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC});const s=e.colorTexture.createView("opaquePassColorTexture");e.renderEncoder.setColorTextureView(0,s),e.depthFormat="depth32float",e.depthTexture=Jn.newInstance({label:"opaquePassDepth"}),e.depthTexture.create(i,{width:r.getCanvas().width,height:r.getCanvas().height,format:e.depthFormat,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC});const u=e.depthTexture.createView("opaquePassDepthTexture");e.renderEncoder.setDepthTextureView(u)}e.renderEncoder.attachTextureViews(),t.setCurrentOperation("opaquePass"),n.setRenderEncoder(e.renderEncoder),n.traverse(t)},t.getColorTextureView=()=>e.renderEncoder.getColorTextureViews()[0],t.getDepthTextureView=()=>e.renderEncoder.getDepthTextureView(),t.createRenderEncoder=()=>{e.renderEncoder=mr.newInstance({label:"OpaquePass"}),e.renderEncoder.setPipelineHash("op")}}const $N={renderEncoder:null,colorTexture:null,depthTexture:null};function Dv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$N,n),Dr.extend(t,e,n),B.get(t,e,["colorTexture","depthTexture"]),HN(t,e)}const AN=B.newInstance(Dv,"vtkWebGPUOpaquePass");var WN={newInstance:AN,extend:Dv};const jN=`
//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var tcoord: vec2<i32> = vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y));
  var reveal: f32 = textureLoad(oitpAccumTexture, tcoord, 0).r;
  if (reveal == 1.0) { discard; }
  var tcolor: vec4<f32> = textureLoad(oitpColorTexture, tcoord, 0);
  var total: f32 = max(tcolor.a, 0.01);
  var computedColor: vec4<f32> = vec4<f32>(tcolor.r/total, tcolor.g/total, tcolor.b/total, 1.0 - reveal);

  //VTK::RenderEncoder::Impl
  return output;
}
`;function KN(t,e){e.classHierarchy.push("vtkWebGPUOrderIndependentTranslucentPass"),t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=r;const i=r.getDevice();if(e.translucentRenderEncoder)e.translucentColorTexture.resizeToMatch(e.colorTextureView.getTexture()),e.translucentAccumulateTexture.resizeToMatch(e.colorTextureView.getTexture());else{t.createRenderEncoder(),t.createFinalEncoder(),e.translucentColorTexture=Jn.newInstance({label:"translucentPassColor"}),e.translucentColorTexture.create(i,{width:r.getCanvas().width,height:r.getCanvas().height,format:"rgba16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const s=e.translucentColorTexture.createView("oitpColorTexture");e.translucentRenderEncoder.setColorTextureView(0,s),e.translucentAccumulateTexture=Jn.newInstance({label:"translucentPassAccumulate"}),e.translucentAccumulateTexture.create(i,{width:r.getCanvas().width,height:r.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const u=e.translucentAccumulateTexture.createView("oitpAccumTexture");e.translucentRenderEncoder.setColorTextureView(1,u),e.fullScreenQuad=ii.newInstance(),e.fullScreenQuad.setDevice(r.getDevice()),e.fullScreenQuad.setPipelineHash("oitpfsq"),e.fullScreenQuad.setTextureViews(e.translucentRenderEncoder.getColorTextureViews()),e.fullScreenQuad.setFragmentShaderTemplate(jN)}e.translucentRenderEncoder.setDepthTextureView(e.depthTextureView),e.translucentRenderEncoder.attachTextureViews(),t.setCurrentOperation("translucentPass"),n.setRenderEncoder(e.translucentRenderEncoder),n.traverse(t),t.finalPass(r,n)},t.finalPass=(n,r)=>{e.translucentFinalEncoder.setColorTextureView(0,e.colorTextureView),e.translucentFinalEncoder.attachTextureViews(),e.translucentFinalEncoder.begin(n.getCommandEncoder()),r.scissorAndViewport(e.translucentFinalEncoder),e.fullScreenQuad.prepareAndDraw(e.translucentFinalEncoder),e.translucentFinalEncoder.end()},t.getTextures=()=>[e.translucentColorTexture,e.translucentAccumulateTexture],t.createRenderEncoder=()=>{e.translucentRenderEncoder=mr.newInstance({label:"translucentRender"});const n=e.translucentRenderEncoder.getDescription();n.colorAttachments=[{view:void 0,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"},{view:void 0,clearValue:[1,0,0,0],loadOp:"clear",storeOp:"store"}],n.depthStencilAttachment={view:void 0,depthLoadOp:"load",depthStoreOp:"store"},e.translucentRenderEncoder.setReplaceShaderCodeFunction(r=>{const i=r.getShaderDescription("fragment");i.addOutput("vec4<f32>","outColor"),i.addOutput("f32","outAccum"),i.addBuiltinInput("vec4<f32>","@builtin(position) fragPos");let s=i.getCode();s=Te.substitute(s,"//VTK::RenderEncoder::Impl",["var w: f32 = computedColor.a * pow(0.1 + input.fragPos.z, 2.0);","output.outColor = vec4<f32>(computedColor.rgb*w, w);","output.outAccum = computedColor.a;"]).result,i.setCode(s)}),e.translucentRenderEncoder.setPipelineHash("oitpr"),e.translucentRenderEncoder.setPipelineSettings({primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!1,depthCompare:"greater",format:"depth32float"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcFactor:"one",dstFactor:"one"}}},{format:"r16float",blend:{color:{srcFactor:"zero",dstFactor:"one-minus-src"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.createFinalEncoder=()=>{e.translucentFinalEncoder=mr.newInstance({label:"translucentFinal"}),e.translucentFinalEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e.translucentFinalEncoder.setReplaceShaderCodeFunction(n=>{const r=n.getShaderDescription("fragment");r.addOutput("vec4<f32>","outColor"),r.addBuiltinInput("vec4<f32>","@builtin(position) fragPos");let i=r.getCode();i=Te.substitute(i,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);"]).result,r.setCode(i)}),e.translucentFinalEncoder.setPipelineHash("oitpf"),e.translucentFinalEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})}}const XN={colorTextureView:null,depthTextureView:null};function Lv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,XN,n),Dr.extend(t,e,n),B.setGet(t,e,["colorTextureView","depthTextureView"]),KN(t,e)}const YN=B.newInstance(Lv,"vtkWebGPUOrderIndependentTranslucentPass");var qN={newInstance:YN,extend:Lv};const Q0={COMPOSITE_BLEND:0,MAXIMUM_INTENSITY_BLEND:1,MINIMUM_INTENSITY_BLEND:2,AVERAGE_INTENSITY_BLEND:3,ADDITIVE_INTENSITY_BLEND:4},QN=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::Volume::TraverseDec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

fn getTextureValue(vTex: texture_3d<f32>, tpos: vec4<f32>) -> f32
{
  // todo multicomponent support
  return textureSampleLevel(vTex, clampSampler, tpos.xyz, 0.0).r;
}

fn getGradient(vTex: texture_3d<f32>, tpos: vec4<f32>, vNum: i32, scalar: f32) -> vec4<f32>
{
  var result: vec4<f32>;

  var tstep: vec4<f32> = volumeSSBO.values[vNum].tstep;
  result.x = getTextureValue(vTex, tpos + vec4<f32>(tstep.x, 0.0, 0.0, 1.0)) - scalar;
  result.y = getTextureValue(vTex, tpos + vec4<f32>(0.0, tstep.y, 0.0, 1.0)) - scalar;
  result.z = getTextureValue(vTex, tpos + vec4<f32>(0.0, 0.0, tstep.z, 1.0)) - scalar;
  result.w = 0.0;

  // divide by spacing as that is our delta
  result = result / volumeSSBO.values[vNum].spacing;
  // now we have a gradient in unit tcoords

  var grad: f32 = length(result.xyz);
  if (grad > 0.0)
  {
    // rotate to View Coords, needed for lighting and shading
    var nMat: mat4x4<f32> = rendererUBO.SCVCMatrix * volumeSSBO.values[vNum].planeNormals;
    result = nMat * result;
    result = result / length(result);
  }

  // store gradient magnitude in .w
  result.w = grad;

  return result;
}

fn processVolume(vTex: texture_3d<f32>, vNum: i32, cNum: i32, posSC: vec4<f32>, tfunRows: f32) -> vec4<f32>
{
  var outColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);

  // convert to tcoords and reject if outside the volume
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*posSC;
  if (tpos.x < 0.0 || tpos.y < 0.0 || tpos.z < 0.0 ||
      tpos.x > 1.0 || tpos.y > 1.0 || tpos.z > 1.0) { return outColor; }

  var scalar: f32 = getTextureValue(vTex, tpos);

  var coord: vec2<f32> =
    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,
      (0.5 + 2.0 * f32(vNum)) / tfunRows);
  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);

  var gofactor: f32 = 1.0;
  var normal: vec4<f32> = vec4<f32>(0.0,0.0,0.0,0.0);
  if (componentSSBO.values[cNum].gomin <  1.0 || volumeSSBO.values[vNum].shade[0] > 0.0)
  {
    normal = getGradient(vTex, tpos, vNum, scalar);
    if (componentSSBO.values[cNum].gomin <  1.0)
    {
      gofactor = clamp(normal.a*componentSSBO.values[cNum].goScale + componentSSBO.values[cNum].goShift,
      componentSSBO.values[cNum].gomin, componentSSBO.values[cNum].gomax);
    }
  }

  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);
  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;

  if (volumeSSBO.values[vNum].shade[0] > 0.0)
  {
    color = color*abs(normal.z);
  }

  outColor = vec4<f32>(color.rgb, gofactor * opacity);

  return outColor;
}

// adjust the start and end point of a raycast such that it intersects the unit cube.
// This function is used to take a raycast starting point and step vector
// and numSteps and return the startijng and ending steps for intersecting the
// unit cube. Recall for a 3D texture, the unit cube is the range of texture coordsinates
// that have valid values. So this funtion can be used to take a ray in texture coordinates
// and bound it to intersecting the texture.
//
fn adjustBounds(tpos: vec4<f32>, tstep: vec4<f32>, numSteps: f32) -> vec2<f32>
{
  var result: vec2<f32> = vec2<f32>(0.0, numSteps);
  var tpos2: vec4<f32> = tpos + tstep*numSteps;

  // move tpos to the start of the volume
  var adjust: f32 =
    min(
      max(tpos.x/tstep.x, (tpos.x - 1.0)/tstep.x),
      min(
        max((tpos.y - 1.0)/tstep.y, tpos.y/tstep.y),
        max((tpos.z - 1.0)/tstep.z, tpos.z/tstep.z)));
  if (adjust < 0.0)
  {
    result.x = result.x - adjust;
  }

  // adjust length to the end
  adjust =
    max(
      min(tpos2.x/tstep.x, (tpos2.x - 1.0)/tstep.x),
      max(
        min((tpos2.y - 1.0)/tstep.y, tpos2.y/tstep.y),
        min((tpos2.z - 1.0)/tstep.z, tpos2.z/tstep.z)));
  if (adjust > 0.0)
  {
    result.y = result.y - adjust;
  }

  return result;
}

fn getSimpleColor(scalar: f32, vNum: i32, cNum: i32) -> vec4<f32>
{
  // how many rows (tfuns) do we have in our tfunTexture
  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);

  var coord: vec2<f32> =
    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,
      (0.5 + 2.0 * f32(vNum)) / tfunRows);
  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);
  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);
  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;
  return vec4<f32>(color.rgb, opacity);
}

fn traverseMax(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var maxVal: f32 = -1.0e37;
  loop
  {
    var scalar: f32 = getTextureValue(vTex, tpos);
    if (scalar > maxVal)
    {
      maxVal = scalar;
    }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(maxVal, vNum, cNum);
}

fn traverseMin(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var minVal: f32 = 1.0e37;
  loop
  {
    var scalar: f32 = getTextureValue(vTex, tpos);
    if (scalar < minVal)
    {
      minVal = scalar;
    }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(minVal, vNum, cNum);
}

fn traverseAverage(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;
  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var avgVal: f32 = 0.0;
  var sampleCount: f32 = 0.0;
  loop
  {
    var sample: f32 = getTextureValue(vTex, tpos);
    // right now leave filtering off until WebGL changes get merged
    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)
    // {
      avgVal = avgVal + sample;
      sampleCount = sampleCount + 1.0;
    // }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  if (sampleCount <= 0.0)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(avgVal/sampleCount, vNum, cNum);
}

fn traverseAdditive(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;
  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var sumVal: f32 = 0.0;
  loop
  {
    var sample: f32 = getTextureValue(vTex, tpos);
    // right now leave filtering off until WebGL changes get merged
    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)
    // {
      sumVal = sumVal + sample;
    // }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(sumVal, vNum, cNum);
}

fn composite(rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>) -> vec4<f32>
{
  // initial ray position is at the beginning
  var rayPosSC: vec4<f32> = minPosSC;

  // how many rows (tfuns) do we have in our tfunTexture
  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);

  var curDist: f32 = 0.0;
  var computedColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);
  var sampleColor: vec4<f32>;
//VTK::Volume::TraverseCalls

  loop
  {
    // for each volume, sample and accumulate color
//VTK::Volume::CompositeCalls

    // increment position
    curDist = curDist + mapperUBO.SampleDistance;
    rayPosSC = rayPosSC + rayStepSC;

    // check if we have reached a terminating condition
    if (curDist > rayLengthSC) { break; }
    if (computedColor.a > 0.98) { break; }
  }
  return computedColor;
}

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var rayMax: f32 = textureSampleLevel(maxTexture, clampSampler, input.tcoordVS, 0.0).r;
  var rayMin: f32 = textureSampleLevel(minTexture, clampSampler, input.tcoordVS, 0.0).r;

  // discard empty rays
  if (rayMax <= rayMin) { discard; }
  else
  {
    // compute start and end ray positions in view coordinates
    var minPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMax, 1.0);
    minPosSC = minPosSC * (1.0 / minPosSC.w);
    var maxPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMin, 1.0);
    maxPosSC = maxPosSC * (1.0 / maxPosSC.w);

    var rayLengthSC: f32 = distance(minPosSC.xyz, maxPosSC.xyz);
    var rayStepSC: vec4<f32> = (maxPosSC - minPosSC)*(mapperUBO.SampleDistance/rayLengthSC);
    rayStepSC.w = 0.0;

    var computedColor: vec4<f32>;

//VTK::Volume::Loop

//VTK::RenderEncoder::Impl
  }

  return output;
}
`,At=new Float64Array(16),ia=new Float64Array(16);function ZN(t,e){e.classHierarchy.push("vtkWebGPUVolumePassFSQ"),t.replaceShaderPosition=(i,s,u)=>{const c=s.getShaderDescription("vertex");c.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let l=c.getCode();l=Te.substitute(l,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);"]).result,c.setCode(l),s.getShaderDescription("fragment").addBuiltinInput("vec4<f32>","@builtin(position) fragPos")},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderVolume=(i,s,u)=>{const c=s.getShaderDescription("fragment");let l=c.getCode();const g=[],v=[];for(let y=0;y<e.volumes.length;y++)e.volumes[y].getRenderable().getMapper().getBlendMode()===Q0.COMPOSITE_BLEND?(g.push(`    sampleColor = processVolume(volTexture${y}, ${y}, ${e.rowStarts[y]}, rayPosSC, tfunRows);`),g.push(`    computedColor = vec4<f32>(
          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,
          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);`)):(v.push(`  sampleColor = traverseVals[${y}];`),v.push(`  computedColor = vec4<f32>(
          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,
          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);`));l=Te.substitute(l,"//VTK::Volume::CompositeCalls",g).result,l=Te.substitute(l,"//VTK::Volume::TraverseCalls",v).result,l=Te.substitute(l,"//VTK::Volume::TraverseDec",[`var<private> traverseVals: array<vec4<f32>,${e.volumes.length}>;`]).result;let h=!1;for(let y=0;y<e.volumes.length;y++){const T=e.volumes[y].getRenderable().getMapper().getBlendMode();T===Q0.COMPOSITE_BLEND?h=!0:T===Q0.MAXIMUM_INTENSITY_BLEND?l=Te.substitute(l,"//VTK::Volume::Loop",[`    traverseMax(volTexture${y}, ${y}, ${y}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${y}];`,"//VTK::Volume::Loop"]).result:T===Q0.MINIMUM_INTENSITY_BLEND?l=Te.substitute(l,"//VTK::Volume::Loop",[`    traverseMin(volTexture${y}, ${y}, ${y}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${y}];`,"//VTK::Volume::Loop"]).result:T===Q0.AVERAGE_INTENSITY_BLEND?l=Te.substitute(l,"//VTK::Volume::Loop",[`    traverseAverage(volTexture${y}, ${y}, ${y}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${y}];`,"//VTK::Volume::Loop"]).result:T===Q0.ADDITIVE_INTENSITY_BLEND&&(l=Te.substitute(l,"//VTK::Volume::Loop",[`    traverseAdditive(volTexture${y}, ${y}, ${y}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${y}];`,"//VTK::Volume::Loop"]).result)}h&&(l=Te.substitute(l,"//VTK::Volume::Loop",["    computedColor = composite(rayLengthSC, minPosSC, rayStepSC);"]).result),c.setCode(l)},e.shaderReplacements.set("replaceShaderVolume",t.replaceShaderVolume),t.updateLUTImage=i=>{let s=t.getMTime();for(let h=0;h<e.volumes.length;h++){const y=e.volumes[h].getRenderable(),T=y.getMapper().getInputData();s=Math.max(s,y.getMTime(),T.getMTime())}if(s<e.lutBuildTime.getMTime())return;e.numRows=0,e.rowStarts=[];for(let h=0;h<e.volumes.length;h++){e.rowStarts.push(e.numRows);const T=e.volumes[h].getRenderable(),E=T.getMapper(),S=T.getProperty(),x=E.getInputData(),M=(x.getPointData()&&x.getPointData().getScalars()).getNumberOfComponents(),w=S.getIndependentComponents()?M:1;e.numRows+=w}const u=new Uint8ClampedArray(e.numRows*2*e.rowLength*4),c=new Float32Array(e.numRows*2*e.rowLength);let l=0;const g=new Float32Array(e.rowLength*3),v=e.rowLength;for(let h=0;h<e.volumes.length;h++){const T=e.volumes[h].getRenderable(),E=T.getMapper(),S=T.getProperty(),x=E.getInputData(),M=(x.getPointData()&&x.getPointData().getScalars()).getNumberOfComponents(),w=S.getIndependentComponents()?M:1;for(let D=0;D<w;++D){const O=S.getRGBTransferFunction(D),_=O.getRange();O.getTable(_[0],_[1],v,g,1);let N=l*v*4;for(let Y=0;Y<v;++Y){u[N+Y*4]=255*g[Y*3],u[N+Y*4+1]=255*g[Y*3+1],u[N+Y*4+2]=255*g[Y*3+2],u[N+Y*4+3]=255;for(let A=0;A<4;A++)u[N+(v+Y)*4+A]=u[N+Y*4+A]}const F=S.getScalarOpacity(D),z=e.sampleDist/S.getScalarOpacityUnitDistance(D),$=F.getRange();F.getTable($[0],$[1],v,g,1),N=l*v;for(let Y=0;Y<v;++Y)c[N+Y]=1-(1-g[Y])**z,c[N+Y+v]=c[N+Y];l+=2}}{const h={nativeArray:u,width:e.rowLength,height:e.numRows*2,depth:1,format:"rgba8unorm"},T=i.getTextureManager().getTexture(h).createView("tfunTexture");e.textureViews[2]=T}{const h={nativeArray:c,width:e.rowLength,height:e.numRows*2,depth:1,format:"r16float"},T=i.getTextureManager().getTexture(h).createView("ofunTexture");e.textureViews[3]=T}e.lutBuildTime.modified()},t.updateSSBO=i=>{let s=Math.max(t.getMTime(),e.WebGPURenderer.getStabilizedTime());for(let O=0;O<e.volumes.length;O++){const _=e.volumes[O].getRenderable(),N=_.getMapper(),F=N.getInputData();s=Math.max(s,_.getMTime(),F.getMTime(),N.getMTime())}if(s<e.SSBO.getSendTime())return;const u=e.WebGPURenderer.getStabilizedCenterByReference();e.SSBO.clearData(),e.SSBO.setNumberOfInstances(e.volumes.length);const c=new Float64Array(e.volumes.length*16),l=new Float64Array(e.volumes.length*16),g=new Float64Array(e.volumes.length*4),v=new Float64Array(e.volumes.length*4),h=new Float64Array(e.volumes.length*4),y=new Float64Array(e.volumes.length*4);for(let O=0;O<e.volumes.length;O++){const N=e.volumes[O].getRenderable(),z=N.getMapper().getInputData();Oe(At),vt(At,At,u);const $=N.getMatrix();Qe(ia,$),tn(ia,ia),wt(At,ia,At);const Y=z.getWorldToIndex();wt(At,Y,At);const A=z.getDimensions();Oe(ia),ti(ia,ia,[1/A[0],1/A[1],1/A[2]]),wt(At,ia,At);for(let W=0;W<16;W++)c[O*16+W]=At[W];tn(At,At);for(let W=0;W<4;W++)l[O*16+W*4]=At[W*4],l[O*16+W*4+1]=At[W*4+1],l[O*16+W*4+2]=At[W*4+2],l[O*16+W*4+3]=0;g[O*4]=1/A[0],g[O*4+1]=1/A[1],g[O*4+2]=1/A[2],g[O*4+3]=1,v[O*4]=N.getProperty().getShade()?1:0;const K=z.getSpacing();h[O*4]=K[0],h[O*4+1]=K[1],h[O*4+2]=K[2],h[O*4+3]=1;const ee=e.textureViews[O+4].getTexture().getScale(),G=N.getProperty().getIpScalarRange();y[O*4]=G[0]/ee,y[O*4+1]=G[1]/ee,y[O*4+2]=N.getProperty().getFilterMode()}e.SSBO.addEntry("SCTCMatrix","mat4x4<f32>"),e.SSBO.addEntry("planeNormals","mat4x4<f32>"),e.SSBO.addEntry("shade","vec4<f32>"),e.SSBO.addEntry("tstep","vec4<f32>"),e.SSBO.addEntry("spacing","vec4<f32>"),e.SSBO.addEntry("ipScalarRange","vec4<f32>"),e.SSBO.setAllInstancesFromArray("SCTCMatrix",c),e.SSBO.setAllInstancesFromArray("planeNormals",l),e.SSBO.setAllInstancesFromArray("shade",v),e.SSBO.setAllInstancesFromArray("tstep",g),e.SSBO.setAllInstancesFromArray("spacing",h),e.SSBO.setAllInstancesFromArray("ipScalarRange",y),e.SSBO.send(i),e.componentSSBO.clearData(),e.componentSSBO.setNumberOfInstances(e.numRows);const T=new Float64Array(e.numRows),E=new Float64Array(e.numRows),S=new Float64Array(e.numRows),x=new Float64Array(e.numRows),m=new Float64Array(e.numRows),M=new Float64Array(e.numRows),R=new Float64Array(e.numRows),w=new Float64Array(e.numRows);let D=0;for(let O=0;O<e.volumes.length;O++){const N=e.volumes[O].getRenderable(),F=N.getMapper(),z=N.getProperty(),$=F.getInputData(),A=($.getPointData()&&$.getPointData().getScalars()).getNumberOfComponents(),K=z.getIndependentComponents(),ee=e.textureViews[O+4].getTexture().getFormat(),G=Mt.getDetailsFromTextureFormat(ee),W=G.elementSize===2&&G.sampleType==="float",q={scale:[255],offset:[0]};W&&(q.scale[0]=1);for(let X=0;X<A;X++){const Q=K?X:0,U=q.scale[X],Z=z.getScalarOpacity(Q).getRange(),se=U/(Z[1]-Z[0]),oe=(q.offset[X]-Z[0])/(Z[1]-Z[0]);x[D]=oe,S[D]=se;const ge=z.getRGBTransferFunction(Q).getRange();if(E[D]=(q.offset[X]-ge[0])/(ge[1]-ge[0]),T[D]=U/(ge[1]-ge[0]),z.getUseGradientOpacity(Q)){const De=z.getGradientOpacityMinimumOpacity(Q),Ct=z.getGradientOpacityMaximumOpacity(Q);m[D]=De,M[D]=Ct;const vn=[z.getGradientOpacityMinimumValue(Q),z.getGradientOpacityMaximumValue(Q)];w[D]=U*(Ct-De)/(vn[1]-vn[0]),R[D]=-vn[0]*(Ct-De)/(vn[1]-vn[0])+De}else m[D]=1,M[D]=1,w[D]=0,R[D]=1;D++}}e.componentSSBO.addEntry("cScale","f32"),e.componentSSBO.addEntry("cShift","f32"),e.componentSSBO.addEntry("oScale","f32"),e.componentSSBO.addEntry("oShift","f32"),e.componentSSBO.addEntry("goShift","f32"),e.componentSSBO.addEntry("goScale","f32"),e.componentSSBO.addEntry("gomin","f32"),e.componentSSBO.addEntry("gomax","f32"),e.componentSSBO.setAllInstancesFromArray("cScale",T),e.componentSSBO.setAllInstancesFromArray("cShift",E),e.componentSSBO.setAllInstancesFromArray("oScale",S),e.componentSSBO.setAllInstancesFromArray("oShift",x),e.componentSSBO.setAllInstancesFromArray("goScale",w),e.componentSSBO.setAllInstancesFromArray("goShift",R),e.componentSSBO.setAllInstancesFromArray("gomin",m),e.componentSSBO.setAllInstancesFromArray("gomax",M),e.componentSSBO.send(i)};const n=t.updateBuffers;t.updateBuffers=()=>{n();let i=e.volumes[0].getRenderable().getMapper().getSampleDistance();for(let s=0;s<e.volumes.length;s++){const l=e.volumes[s].getRenderable().getMapper().getSampleDistance();l<i&&(i=l)}e.sampleDist!==i&&(e.sampleDist=i,e.UBO.setValue("SampleDistance",i),e.UBO.sendIfNeeded(e.device));for(let s=0;s<e.volumes.length;s++){const g=e.volumes[s].getRenderable().getMapper().getInputData(),v=e.device.getTextureManager().getTextureForImageData(g);if(!e.textureViews[s+4]||e.textureViews[s+4].getTexture()!==v){const h=v.createView(`volTexture${s}`);e.textureViews[s+4]=h}}if(e.volumes.length<e.lastVolumeLength)for(let s=e.volumes.length;s<e.lastVolumeLength;s++)e.textureViews.pop();e.lastVolumeLength=e.volumes.length,t.updateLUTImage(e.device),t.updateSSBO(e.device),e.clampSampler||(e.clampSampler=K2.newInstance({label:"clampSampler"}),e.clampSampler.create(e.device,{minFilter:"linear",magFilter:"linear"}))},t.computePipelineHash=()=>{e.pipelineHash="volfsq";for(let i=0;i<e.volumes.length;i++){const s=e.volumes[i].getRenderable().getMapper().getBlendMode();e.pipelineHash+=`${s}`}},t.setVolumes=i=>{if(!e.volumes||e.volumes.length!==i.length){e.volumes=[...i],t.modified();return}for(let s=0;s<i.length;s++)if(i[s]!==e.volumes[s]){e.volumes=[...i],t.modified();return}};const r=t.getBindables;t.getBindables=()=>{const i=r();return i.push(e.componentSSBO),i.push(e.clampSampler),i}}const JN={volumes:null,rowLength:1024,lastVolumeLength:0};function Bv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,JN,n),ii.extend(t,e,n),e.fragmentShaderTemplate=QN,e.UBO=t0.newInstance({label:"mapperUBO"}),e.UBO.addEntry("SampleDistance","f32"),e.SSBO=i2.newInstance({label:"volumeSSBO"}),e.componentSSBO=i2.newInstance({label:"componentSSBO"}),e.lutBuildTime={},B.obj(e.lutBuildTime,{mtime:0}),ZN(t,e)}const PN=B.newInstance(Bv,"vtkWebGPUVolumePassFSQ");var IN={newInstance:PN,extend:Bv};const{Representation:e_}=gi,{BufferUsage:I8,PrimitiveTypes:t_}=s0,Nl=[[0,4,6],[0,6,2],[1,3,7],[1,7,5],[0,5,4],[0,1,5],[2,6,7],[2,7,3],[0,3,1],[0,2,3],[4,5,7],[4,7,6]],n_=`
//VTK::Renderer::Dec

//VTK::Select::Dec

//VTK::VolumePass::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  //VTK::Select::Impl

  //VTK::TCoord::Impl

  //VTK::VolumePass::Impl

  // use the maximum (closest) of the current value and the zbuffer
  // the blend func will then take the min to find the farthest stop value
  var stopval: f32 = max(input.fragPos.z, textureLoad(opaquePassDepthTexture, vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y)), 0));

  //VTK::RenderEncoder::Impl
  return output;
}
`,r_=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var computedColor: vec4<f32> = textureSample(volumePassColorTexture,
    volumePassColorTextureSampler, mapperUBO.tscale*input.tcoordVS);

  //VTK::RenderEncoder::Impl
  return output;
}
`;function a_(t,e){e.classHierarchy.push("vtkWebGPUVolumePass"),t.initialize=n=>{e._clearEncoder||t.createClearEncoder(n),e._mergeEncoder||t.createMergeEncoder(n),e._copyEncoder||t.createCopyEncoder(n),e._depthRangeEncoder||t.createDepthRangeEncoder(n),e.fullScreenQuad||(e.fullScreenQuad=IN.newInstance(),e.fullScreenQuad.setDevice(n.getDevice()),e.fullScreenQuad.setTextureViews([...e._depthRangeEncoder.getColorTextureViews()])),e._volumeCopyQuad||(e._volumeCopyQuad=ii.newInstance(),e._volumeCopyQuad.setPipelineHash("volpassfsq"),e._volumeCopyQuad.setDevice(n.getDevice()),e._volumeCopyQuad.setFragmentShaderTemplate(r_),e._copyUBO=t0.newInstance({label:"mapperUBO"}),e._copyUBO.addEntry("tscale","vec2<f32>"),e._volumeCopyQuad.setUBO(e._copyUBO),e._volumeCopyQuad.setTextureViews([e._colorTextureView]))},t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=r,t.initialize(r),t.computeTiming(r),t.renderDepthBounds(n,r),e._firstGroup=!0;const i=r.getDevice(),s=i.getHandle().limits.maxSampledTexturesPerShaderStage-4;if(e.volumes.length>s){const u=n.getRenderable().getActiveCamera().getPosition(),c=[];for(let h=0;h<e.volumes.length;h++){const y=e.volumes[h].getRenderable().getBounds(),T=[.5*(y[1]+y[0]),.5*(y[3]+y[2]),.5*(y[5]+y[4])];c[h]=It(T,u)}const l=[...Array(e.volumes.length).keys()];l.sort((h,y)=>c[y]-c[h]);let g=[],v=l.length%s;for(let h=0;h<l.length;h++)g.push(e.volumes[l[h]]),g.length>=v&&(t.rayCastPass(r,n,g),g=[],v=s,e._firstGroup=!1)}else t.rayCastPass(r,n,e.volumes);if(e._volumeCopyQuad.setWebGPURenderer(n),e._useSmallViewport){const u=e._colorTextureView.getTexture().getWidth(),c=e._colorTextureView.getTexture().getHeight();e._copyUBO.setArray("tscale",[e._smallViewportWidth/u,e._smallViewportHeight/c])}else e._copyUBO.setArray("tscale",[1,1]);e._copyUBO.sendIfNeeded(i),e._copyEncoder.setColorTextureView(0,e.colorTextureView),e._copyEncoder.attachTextureViews(),e._copyEncoder.begin(r.getCommandEncoder()),n.scissorAndViewport(e._copyEncoder),e._volumeCopyQuad.prepareAndDraw(e._copyEncoder),e._copyEncoder.end()},t.delete=B.chain(()=>{e._animationRateSubscription&&(e._animationRateSubscription.unsubscribe(),e._animationRateSubscription=null)},t.delete),t.computeTiming=n=>{const r=n.getRenderable().getInteractor();if(e._lastScale==null){const i=e.volumes[0].getRenderable().getMapper();e._lastScale=i.getInitialInteractionScale()||1}e._useSmallViewport=!1,r.isAnimating()&&e._lastScale>1.5&&(e._useSmallViewport=!0),e._colorTexture.resize(n.getCanvas().width,n.getCanvas().height),e._animationRateSubscription||(e._animationRateSubscription=r.onAnimationFrameRateUpdate(()=>{const i=e.volumes[0].getRenderable().getMapper();if(i.getAutoAdjustSampleDistances()){const s=r.getRecentAnimationFrameRate(),u=e._lastScale*r.getDesiredUpdateRate()/s;e._lastScale=u,e._lastScale>400&&(e._lastScale=400)}else e._lastScale=i.getImageSampleDistance()*i.getImageSampleDistance();e._lastScale<1.5&&(e._lastScale=1.5)}))},t.rayCastPass=(n,r,i)=>{const s=e._firstGroup?e._clearEncoder:e._mergeEncoder;s.attachTextureViews(),s.begin(n.getCommandEncoder());let u=e._colorTextureView.getTexture().getWidth(),c=e._colorTextureView.getTexture().getHeight();if(e._useSmallViewport){const l=n.getCanvas(),g=1/Math.sqrt(e._lastScale);e._smallViewportWidth=Math.ceil(g*l.width),e._smallViewportHeight=Math.ceil(g*l.height),u=e._smallViewportWidth,c=e._smallViewportHeight}s.getHandle().setViewport(0,0,u,c,0,1),s.getHandle().setScissorRect(0,0,u,c),e.fullScreenQuad.setWebGPURenderer(r),e.fullScreenQuad.setVolumes(i),e.fullScreenQuad.prepareAndDraw(s),s.end()},t.renderDepthBounds=(n,r)=>{t.updateDepthPolyData(n);const i=e._boundsPoly,s=i.getPoints(),u=i.getPolys();let c={hash:`vp${u.getMTime()}`,usage:I8.Index,cells:u,numberOfPoints:s.getNumberOfPoints(),primitiveType:t_.Triangles,representation:e_.SURFACE};const l=r.getDevice().getBufferManager().getBuffer(c);e._mapper.getVertexInput().setIndexBuffer(l),c={usage:I8.PointArray,format:"float32x4",hash:`vp${s.getMTime()}${u.getMTime()}`,dataArray:s,indexBuffer:l,packExtra:!0};const g=r.getDevice().getBufferManager().getBuffer(c);e._mapper.getVertexInput().addBuffer(g,["vertexBC"]),e._mapper.setNumberOfVertices(g.getSizeInBytes()/g.getStrideInBytes()),t.drawDepthRange(n,r)},t.updateDepthPolyData=n=>{let r=!1;for(let v=0;v<e.volumes.length;v++){const h=e.volumes[v].getMTime();(!e._lastMTimes[v]||h!==e._lastMTimes[v])&&(r=!0,e._lastMTimes[v]=h)}const i=n.getStabilizedTime();if((e._lastMTimes.length<=e.volumes.length||i!==e._lastMTimes[e.volumes.length])&&(r=!0,e._lastMTimes[e.volumes.length]=i),!r)return;const s=n.getStabilizedCenterByReference(),u=e.volumes.length*8,c=new Float64Array(u*3),l=e.volumes.length*12,g=new Uint16Array(l*4);for(let v=0;v<e.volumes.length;v++){e.volumes[v].getBoundingCubePoints(c,v*24);let h=v*12*4;const y=v*8;for(let T=0;T<12;T++)g[h++]=3,g[h++]=y+Nl[T][0],g[h++]=y+Nl[T][1],g[h++]=y+Nl[T][2]}for(let v=0;v<c.length;v+=3)c[v]-=s[0],c[v+1]-=s[1],c[v+2]-=s[2];e._boundsPoly.getPoints().setData(c,3),e._boundsPoly.getPoints().modified(),e._boundsPoly.getPolys().setData(g,1),e._boundsPoly.getPolys().modified(),e._boundsPoly.modified()},t.drawDepthRange=(n,r)=>{e._depthRangeTexture.resizeToMatch(e.colorTextureView.getTexture()),e._depthRangeTexture2.resizeToMatch(e.colorTextureView.getTexture()),e._depthRangeEncoder.attachTextureViews(),t.setCurrentOperation("volumeDepthRangePass"),n.setRenderEncoder(e._depthRangeEncoder),n.volumeDepthRangePass(!0),e._mapper.setWebGPURenderer(n),e._mapper.prepareToDraw(e._depthRangeEncoder),e._mapper.registerDrawCallback(e._depthRangeEncoder),n.volumeDepthRangePass(!1)},t.createDepthRangeEncoder=n=>{const r=n.getDevice();e._depthRangeEncoder=mr.newInstance({label:"VolumePass DepthRange"}),e._depthRangeEncoder.setPipelineHash("volr"),e._depthRangeEncoder.setReplaceShaderCodeFunction(u=>{const c=u.getShaderDescription("fragment");c.addOutput("vec4<f32>","outColor1"),c.addOutput("vec4<f32>","outColor2");let l=c.getCode();l=Te.substitute(l,"//VTK::RenderEncoder::Impl",["output.outColor1 = vec4<f32>(input.fragPos.z, 0.0, 0.0, 0.0);","output.outColor2 = vec4<f32>(stopval, 0.0, 0.0, 0.0);"]).result,c.setCode(l)}),e._depthRangeEncoder.setDescription({colorAttachments:[{view:null,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"},{view:null,clearValue:[1,1,1,1],loadOp:"clear",storeOp:"store"}]}),e._depthRangeEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"r16float",blend:{color:{srcFactor:"one",dstFactor:"one",operation:"max"},alpha:{srcFactor:"one",dstFactor:"one",operation:"max"}}},{format:"r16float",blend:{color:{srcFactor:"one",dstFactor:"one",operation:"min"},alpha:{srcFactor:"one",dstFactor:"one",operation:"min"}}}]}}),e._depthRangeTexture=Jn.newInstance({label:"volumePassMaxDepth"}),e._depthRangeTexture.create(r,{width:n.getCanvas().width,height:n.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const i=e._depthRangeTexture.createView("maxTexture");e._depthRangeEncoder.setColorTextureView(0,i),e._depthRangeTexture2=Jn.newInstance({label:"volumePassDepthMin"}),e._depthRangeTexture2.create(r,{width:n.getCanvas().width,height:n.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const s=e._depthRangeTexture2.createView("minTexture");e._depthRangeEncoder.setColorTextureView(1,s),e._mapper.setDevice(n.getDevice()),e._mapper.setTextureViews([e.depthTextureView])},t.createClearEncoder=n=>{e._colorTexture=Jn.newInstance({label:"volumePassColor"}),e._colorTexture.create(n.getDevice(),{width:n.getCanvas().width,height:n.getCanvas().height,format:"bgra8unorm",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC}),e._colorTextureView=e._colorTexture.createView("volumePassColorTexture"),e._colorTextureView.addSampler(n.getDevice(),{minFilter:"linear",magFilter:"linear"}),e._clearEncoder=mr.newInstance({label:"VolumePass Clear"}),e._clearEncoder.setColorTextureView(0,e._colorTextureView),e._clearEncoder.setDescription({colorAttachments:[{view:null,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"}]}),e._clearEncoder.setPipelineHash("volpf"),e._clearEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"bgra8unorm",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.createCopyEncoder=n=>{e._copyEncoder=mr.newInstance({label:"volumePassCopy"}),e._copyEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e._copyEncoder.setPipelineHash("volcopypf"),e._copyEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"one",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.createMergeEncoder=n=>{e._mergeEncoder=mr.newInstance({label:"volumePassMerge"}),e._mergeEncoder.setColorTextureView(0,e._colorTextureView),e._mergeEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e._mergeEncoder.setReplaceShaderCodeFunction(r=>{const i=r.getShaderDescription("fragment");i.addOutput("vec4<f32>","outColor");let s=i.getCode();s=Te.substitute(s,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);"]).result,i.setCode(s)}),e._mergeEncoder.setPipelineHash("volpf"),e._mergeEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"bgra8unorm",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.setVolumes=n=>{if(!e.volumes||e.volumes.length!==n.length){e.volumes=[...n],t.modified();return}for(let r=0;r<n.length;r++)if(n[r]!==e.volumes[r]){e.volumes=[...n],t.modified();return}}}const i_={colorTextureView:null,depthTextureView:null,volumes:null};function Vv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,i_,n),Dr.extend(t,e,n),e._mapper=j2.newInstance(),e._mapper.setFragmentShaderTemplate(n_),e._mapper.getShaderReplacements().set("replaceShaderVolumePass",(r,i,s)=>{i.getShaderDescription("fragment").addBuiltinInput("vec4<f32>","@builtin(position) fragPos")}),e._boundsPoly=zt.newInstance(),e._lastMTimes=[],B.setGet(t,e,["colorTextureView","depthTextureView"]),a_(t,e)}const s_=B.newInstance(Vv,"vtkWebGPUVolumePass");var o_={newInstance:s_,extend:Vv};const u_=`
//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var computedColor: vec4<f32> = clamp(textureSampleLevel(opaquePassColorTexture, finalPassSampler, input.tcoordVS, 0.0),vec4<f32>(0.0),vec4<f32>(1.0));

  //VTK::RenderEncoder::Impl
  return output;
}
`;function c_(t,e){e.classHierarchy.push("vtkForwardPass"),t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(e.deleted)return;e._currentParent=r,t.setCurrentOperation("buildPass"),n.traverse(t),e.opaquePass||(e.opaquePass=WN.newInstance());const i=n.getRenderable().getNumberOfLayers(),s=n.getChildren();for(let u=0;u<i;u++)for(let c=0;c<s.length;c++){const l=s[c],g=n.getRenderable().getRenderers()[c];g.getDraw()&&g.getLayer()===u&&(e.opaqueActorCount=0,e.translucentActorCount=0,e.volumes=[],t.setCurrentOperation("queryPass"),l.traverse(t),t.setCurrentOperation("cameraPass"),l.traverse(t),e.opaquePass.traverse(l,n),e.translucentActorCount>0&&(e.translucentPass||(e.translucentPass=qN.newInstance()),e.translucentPass.setColorTextureView(e.opaquePass.getColorTextureView()),e.translucentPass.setDepthTextureView(e.opaquePass.getDepthTextureView()),e.translucentPass.traverse(l,n)),e.volumes.length>0&&(e.volumePass||(e.volumePass=o_.newInstance()),e.volumePass.setColorTextureView(e.opaquePass.getColorTextureView()),e.volumePass.setDepthTextureView(e.opaquePass.getDepthTextureView()),e.volumePass.setVolumes(e.volumes),e.volumePass.traverse(l,n)),t.finalPass(n,l))}},t.finalPass=(n,r)=>{e._finalBlitEncoder||t.createFinalBlitEncoder(n),e._finalBlitOutputTextureView.createFromTextureHandle(n.getCurrentTexture(),{depth:1,format:n.getPresentationFormat()}),e._finalBlitEncoder.attachTextureViews(),e._finalBlitEncoder.begin(n.getCommandEncoder()),r.scissorAndViewport(e._finalBlitEncoder),e._fullScreenQuad.prepareAndDraw(e._finalBlitEncoder),e._finalBlitEncoder.end()},t.createFinalBlitEncoder=n=>{e._finalBlitEncoder=mr.newInstance({label:"forwardPassBlit"}),e._finalBlitEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e._finalBlitEncoder.setPipelineHash("fpf"),e._finalBlitEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:n.getPresentationFormat(),blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}}),e._fsqSampler=K2.newInstance({label:"finalPassSampler"}),e._fsqSampler.create(n.getDevice(),{minFilter:"linear",magFilter:"linear"}),e._fullScreenQuad=ii.newInstance(),e._fullScreenQuad.setDevice(n.getDevice()),e._fullScreenQuad.setPipelineHash("fpfsq"),e._fullScreenQuad.setTextureViews([e.opaquePass.getColorTextureView()]),e._fullScreenQuad.setAdditionalBindables([e._fsqSampler]),e._fullScreenQuad.setFragmentShaderTemplate(u_),e._finalBlitOutputTextureView=qp.newInstance(),e._finalBlitEncoder.setColorTextureView(0,e._finalBlitOutputTextureView)},t.incrementOpaqueActorCount=()=>e.opaqueActorCount++,t.incrementTranslucentActorCount=()=>e.translucentActorCount++,t.addVolume=n=>{e.volumes.push(n)}}const f_={opaqueActorCount:0,translucentActorCount:0,volumes:null,opaqueRenderEncoder:null,translucentPass:null,volumePass:null};function Nv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,f_,n),Dr.extend(t,e,n),B.setGet(t,e,["opaquePass","translucentPass","volumePass"]),c_(t,e)}const l_=B.newInstance(Nv,"vtkForwardPass");var g_={newInstance:l_,extend:Nv};const{VtkDataTypes:Ka}=Fe;function h_(t,e){e.classHierarchy.push("vtkWebGPUTextureManager");function n(i){if(i.imageData){i.dataArray=i.imageData.getPointData().getScalars(),i.time=i.dataArray.getMTime(),i.nativeArray=i.dataArray.getData();const s=i.imageData.getDimensions();switch(i.width=s[0],i.height=s[1],i.depth=s[2],i.dataArray.getNumberOfComponents()){case 1:i.format="r";break;case 2:i.format="rg";break;case 3:case 4:default:i.format="rgba";break}switch(i.dataArray.getDataType()){case Ka.UNSIGNED_CHAR:i.format+="8unorm";break;case Ka.FLOAT:case Ka.UNSIGNED_INT:case Ka.INT:case Ka.DOUBLE:case Ka.UNSIGNED_SHORT:case Ka.SHORT:default:i.format+="16float";break}}i.image&&(i.width=i.image.width,i.height=i.image.height,i.depth=1,i.format="rgba8unorm",i.flip=!0,i.usage=GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT),i.jsImageData&&(i.width=i.jsImageData.width,i.height=i.jsImageData.height,i.depth=1,i.format="rgba8unorm",i.flip=!0,i.nativeArray=i.jsImageData.data,i.usage=GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT),i.imageBitmap&&(i.width=i.imageBitmap.width,i.height=i.imageBitmap.height,i.depth=1,i.format="rgba8unorm",i.flip=!0,i.usage=GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT),i.canvas&&(i.width=i.canvas.width,i.height=i.canvas.height,i.depth=1,i.format="rgba8unorm",i.flip=!0,i.usage=GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT)}function r(i){const s=Jn.newInstance({label:i.label});return s.create(e.device,{width:i.width,height:i.height,depth:i.depth,format:i.format,usage:i.usage,mipLevel:i.mipLevel}),(i.nativeArray||i.image||i.canvas||i.imageBitmap)&&s.writeImageData(i),s}t.getTexture=i=>i.hash?e.device.getCachedObject(i.hash,r,i):r(i),t.getTextureForImageData=i=>{const s={time:i.getMTime()};return s.imageData=i,n(s),s.hash=s.time+s.format+s.mipLevel,e.device.getTextureManager().getTexture(s)},t.getTextureForVTKTexture=function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const u={time:i.getMTime(),label:s};return i.getInputData()?u.imageData=i.getInputData():i.getImage()?u.image=i.getImage():i.getJsImageData()?u.jsImageData=i.getJsImageData():i.getImageBitmap()?u.imageBitmap=i.getImageBitmap():i.getCanvas()&&(u.canvas=i.getCanvas()),n(u),u.mipLevel=i.getMipLevel(),u.hash=u.time+u.format+u.mipLevel,e.device.getTextureManager().getTexture(u)}}const p_={handle:null,device:null};function _v(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,p_,n),B.obj(t,e),B.setGet(t,e,["device"]),h_(t,e)}const v_=B.newInstance(_v);var y_={newInstance:v_,extend:_v};class d_ extends Map{constructor(){super(),this.registry=new FinalizationRegistry(e=>{const n=super.get(e);n&&n.deref&&n.deref()===void 0&&super.delete(e)})}getValue(e){const n=super.get(e);if(n){const r=n.deref();if(r!==void 0)return r;super.delete(e)}}setValue(e,n){let r;return n&&typeof n=="object"&&(r=new WeakRef(n),this.registry.register(n,e),super.set(e,r)),r}}function T_(t,e){e.classHierarchy.push("vtkWebGPUDevice"),t.initialize=n=>{e.handle=n},t.createCommandEncoder=()=>e.handle.createCommandEncoder(),t.submitCommandEncoder=n=>{e.handle.queue.submit([n.finish()])},t.getShaderModule=n=>e.shaderCache.getShaderModule(n),t.getBindGroupLayout=n=>{if(!n.entries)return null;for(let s=0;s<n.entries.length;s++){const u=n.entries[s];u.binding=u.binding||0,u.visibility=u.visibility||GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT}const r=JSON.stringify(n);for(let s=0;s<e.bindGroupLayouts.length;s++)if(e.bindGroupLayouts[s].sval===r)return e.bindGroupLayouts[s].layout;const i=e.handle.createBindGroupLayout(n);return e.bindGroupLayouts.push({sval:r,layout:i}),i},t.getBindGroupLayoutDescription=n=>{for(let r=0;r<e.bindGroupLayouts.length;r++)if(e.bindGroupLayouts[r].layout===n)return e.bindGroupLayouts[r].sval;return vtkErrorMacro("layout not found"),console.trace(),null},t.getPipeline=n=>n in e.pipelines?e.pipelines[n]:null,t.createPipeline=(n,r)=>{r.initialize(t,n),e.pipelines[n]=r},t.onSubmittedWorkDone=()=>e.handle.queue.onSubmittedWorkDone(),t.hasCachedObject=n=>e.objectCache.getValue(n),t.getCachedObject=function(n,r){if(!n)return vtkErrorMacro("attempt to cache an object without a hash"),null;const i=e.objectCache.getValue(n);if(i)return i;for(var s=arguments.length,u=new Array(s>2?s-2:0),c=2;c<s;c++)u[c-2]=arguments[c];const l=r(...u);return e.objectCache.setValue(n,l),l}}const S_={handle:null,pipelines:null,shaderCache:null,bindGroupLayouts:null,bufferManager:null,textureManager:null};function Uv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,S_,n),Dt(t,e),St(t,e,["handle"]),Kt(t,e,["bufferManager","shaderCache","textureManager"]),e.objectCache=new d_,e.shaderCache=Te.newInstance(),e.shaderCache.setDevice(t),e.bindGroupLayouts=[],e.bufferManager=s0.newInstance(),e.bufferManager.setDevice(t),e.textureManager=y_.newInstance(),e.textureManager.setDevice(t),e.pipelines={},T_(t,e)}const C_=Ye(Uv,"vtkWebGPUDevice");var x_={newInstance:C_,extend:Uv};function E_(t,e){e.classHierarchy.push("vtkWebGPUHardwareSelectionPass"),t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=null,t.setCurrentOperation("buildPass"),n.traverse(t);const i=n.getDevice();if(e.selectionRenderEncoder)e.colorTexture.resize(n.getCanvas().width,n.getCanvas().height),e.depthTexture.resizeToMatch(e.colorTexture);else{t.createRenderEncoder(),e.colorTexture=Jn.newInstance({label:"hardwareSelectorColor"}),e.colorTexture.create(i,{width:n.getCanvas().width,height:n.getCanvas().height,format:"rgba32uint",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC});const s=e.colorTexture.createView("hardwareSelectColorTexture");e.selectionRenderEncoder.setColorTextureView(0,s),e.depthTexture=Jn.newInstance({label:"hardwareSelectorDepth"}),e.depthTexture.create(i,{width:n.getCanvas().width,height:n.getCanvas().height,format:"depth32float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC});const u=e.depthTexture.createView("hardwareSelectDepthTexture");e.selectionRenderEncoder.setDepthTextureView(u)}e.selectionRenderEncoder.attachTextureViews(),r.setRenderEncoder(e.selectionRenderEncoder),t.setCurrentOperation("cameraPass"),r.traverse(t),t.setCurrentOperation("opaquePass"),r.traverse(t)},t.createRenderEncoder=()=>{e.selectionRenderEncoder=mr.newInstance({label:"HardwareSelectionPass"}),e.selectionRenderEncoder.setPipelineHash("sel"),e.selectionRenderEncoder.setReplaceShaderCodeFunction(r=>{const i=r.getShaderDescription("fragment");i.addOutput("vec4<u32>","outColor");let s=i.getCode();s=Te.substitute(s,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<u32>(mapperUBO.PropID, compositeID, 0u, 0u);"]).result,i.setCode(s)});const n=e.selectionRenderEncoder.getDescription();n.colorAttachments[0].clearValue=[0,0,0,0],e.selectionRenderEncoder.setPipelineSettings({primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater",format:"depth32float"},fragment:{targets:[{format:"rgba32uint",blend:void 0}]}})}}const m_={selectionRenderEncoder:null,colorTexture:null,depthTexture:null};function Gv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,m_,n),Dr.extend(t,e,n),B.get(t,e,["colorTexture","depthTexture"]),E_(t,e)}const R_=B.newInstance(Gv,"vtkWebGPUHardwareSelectionPass");var w_={newInstance:R_,extend:Gv};const{SelectionContent:M_,SelectionField:e6}=Rc,{FieldAssociations:t6}=i0,{vtkErrorMacro:bv}=B;function O_(t){return`${t.propID} ${t.compositeID}`}function n6(t,e,n,r){const i=((n.height-e-1)*n.colorBufferWidth+t)*4+r;return n.colorValues[i]}function D_(t,e,n,r){{if(r[0]=e[0],r[1]=e[1],e[0]<0||e[0]>=t.width||e[1]<0||e[1]>=t.height)return null;const i=n6(e[0],e[1],t,0);if(i<=0)return null;const s={};s.propID=i;let u=n6(e[0],e[1],t,1);if((u<0||u>16777215)&&(u=0),s.compositeID=u,t.captureZValues){const c=(t.height-e[1]-1)*t.zbufferBufferWidth+e[0];s.zValue=t.depthValues[c],s.zValue=t.webGPURenderer.convertToOpenGLDepth(s.zValue),s.displayPosition=e}return s}}function L_(t,e,n){const r=[];let i=0;return e.forEach((s,u)=>{const c=Rc.newInstance();switch(c.setContentType(M_.INDICES),t){case t6.FIELD_ASSOCIATION_CELLS:c.setFieldType(e6.CELL);break;case t6.FIELD_ASSOCIATION_POINTS:c.setFieldType(e6.POINT);break;default:bv("Unknown field association")}c.getProperties().propID=s.info.propID;const l=n.webGPURenderer.getPropFromID(s.info.propID);c.getProperties().prop=l.getRenderable(),c.getProperties().compositeID=s.info.compositeID,c.getProperties().pixelCount=s.pixelCount,n.captureZValues&&(c.getProperties().displayPosition=[s.info.displayPosition[0],s.info.displayPosition[1],s.info.zValue],c.getProperties().worldPosition=n.webGPURenderWindow.displayToWorld(s.info.displayPosition[0],s.info.displayPosition[1],s.info.zValue,n.renderer)),c.setSelectionList(s.attributeIDs),r[i]=c,i++}),r}function B_(t,e,n,r,i){const s=Math.floor(e),u=Math.floor(n),c=Math.floor(r),l=Math.floor(i),g=new Map,v=[0,0];for(let h=u;h<=l;h++)for(let y=s;y<=c;y++){const E=D_(t,[y,h],0,v);if(E){const S=O_(E);if(!g.has(S))g.set(S,{info:E,pixelCount:1,attributeIDs:[E.attributeID]});else{const x=g.get(S);x.pixelCount++,t.captureZValues&&E.zValue<x.info.zValue&&(x.info=E),x.attributeIDs.indexOf(E.attributeID)===-1&&x.attributeIDs.push(E.attributeID)}}}return L_(t.fieldAssociation,g,t)}function V_(t,e){e.classHierarchy.push("vtkWebGPUHardwareSelector"),t.endSelection=()=>{e.WebGPURenderer.setSelector(null)},t.getSourceDataAsync=async n=>{if(!n||!e._WebGPURenderWindow)return bv("Renderer and view must be set before calling Select."),!1;e._WebGPURenderWindow.getRenderable().preRender(),e._WebGPURenderWindow.getInitialized()||(e._WebGPURenderWindow.initialize(),await new Promise(T=>{e._WebGPURenderWindow.onInitialized(T)}));const r=e._WebGPURenderWindow.getViewNodeFor(n);if(!r)return!1;const i=r.getSuppressClear();r.setSuppressClear(!0),e._selectionPass.traverse(e._WebGPURenderWindow,r),r.setSuppressClear(i);const s=e._WebGPURenderWindow.getDevice(),u=e._selectionPass.getColorTexture(),c=e._selectionPass.getDepthTexture(),l={area:[0,0,u.getWidth()-1,u.getHeight()-1],captureZValues:e.captureZValues,fieldAssociation:e.fieldAssociation,renderer:n,webGPURenderer:r,webGPURenderWindow:e._WebGPURenderWindow,width:u.getWidth(),height:u.getHeight()};l.colorBufferWidth=16*Math.floor((l.width+15)/16),l.colorBufferSizeInBytes=l.colorBufferWidth*l.height*4*4;const g=si.newInstance({label:"hardwareSelectColorBuffer"});g.setDevice(s),g.create(l.colorBufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);const v=e._WebGPURenderWindow.getCommandEncoder();v.copyTextureToBuffer({texture:u.getHandle()},{buffer:g.getHandle(),bytesPerRow:16*l.colorBufferWidth,rowsPerImage:l.height},{width:l.width,height:l.height,depthOrArrayLayers:1});let h;e.captureZValues&&(l.zbufferBufferWidth=64*Math.floor((l.width+63)/64),h=si.newInstance({label:"hardwareSelectDepthBuffer"}),h.setDevice(s),l.zbufferSizeInBytes=l.height*l.zbufferBufferWidth*4,h.create(l.zbufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),v.copyTextureToBuffer({texture:c.getHandle(),aspect:"depth-only"},{buffer:h.getHandle(),bytesPerRow:4*l.zbufferBufferWidth,rowsPerImage:l.height},{width:l.width,height:l.height,depthOrArrayLayers:1})),s.submitCommandEncoder(v);const y=g.mapAsync(GPUMapMode.READ);if(e.captureZValues){const T=h.mapAsync(GPUMapMode.READ);await Promise.all([y,T]),l.depthValues=new Float32Array(h.getMappedRange().slice()),h.unmap()}else await y;return l.colorValues=new Uint32Array(g.getMappedRange().slice()),g.unmap(),l.generateSelection=(T,E,S,x)=>B_(l,T,E,S,x),l}}const N_={};function Fv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,N_,n),gv.extend(t,e,n),e._selectionPass=w_.newInstance(),B.setGet(t,e,["_WebGPURenderWindow"]),B.moveToProtected(t,e,["WebGPURenderWindow"]),V_(t,e)}const __=B.newInstance(Fv,"vtkWebGPUHardwareSelector");var zv={newInstance:__,extend:Fv};const{vtkErrorMacro:r6}=B,U_={position:"absolute",top:0,left:0,width:"100%",height:"100%"};function G_(t,e){e.classHierarchy.push("vtkWebGPURenderWindow"),t.getViewNodeFactory=()=>e.myFactory;const n=[0,0];function r(){e.renderable&&(e.size[0]!==n[0]||e.size[1]!==n[1])&&(n[0]=e.size[0],n[1]=e.size[1],e.canvas.setAttribute("width",e.size[0]),e.canvas.setAttribute("height",e.size[1]),t.recreateSwapChain()),e.viewStream&&e.viewStream.setSize(e.size[0],e.size[1]),e.canvas.style.display=e.useOffScreen?"none":"block",e.el&&(e.el.style.cursor=e.cursorVisibility?e.cursor:"none"),e.containerSize=null}t.onModified(r),t.recreateSwapChain=()=>{e.context&&(e.context.unconfigure(),e.presentationFormat=navigator.gpu.getPreferredCanvasFormat(e.adapter),e.context.configure({device:e.device.getHandle(),format:e.presentationFormat,alphaMode:"premultiplied",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_DST,width:e.size[0],height:e.size[1]}),e._configured=!0)},t.getCurrentTexture=()=>e.context.getCurrentTexture(),t.buildPass=u=>{if(u){if(!e.renderable)return;t.prepareNodes(),t.addMissingNodes(e.renderable.getRenderersByReference()),t.removeUnusedNodes(),t.initialize()}else e.initialized&&(e._configured||t.recreateSwapChain(),e.commandEncoder=e.device.createCommandEncoder())},t.initialize=()=>{if(!e.initializing){if(e.initializing=!0,!navigator.gpu){r6("WebGPU is not enabled.");return}t.create3DContextAsync().then(()=>{e.initialized=!0,!e.deleted&&t.invokeInitialized()})}},t.setContainer=u=>{e.el&&e.el!==u&&(e.canvas.parentNode!==e.el&&r6("Error: canvas parent node does not match container"),e.el.removeChild(e.canvas),e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)),e.el!==u&&(e.el=u,e.el&&(e.el.appendChild(e.canvas),e.useBackgroundImage&&e.el.appendChild(e.bgImage)),t.modified())},t.getContainer=()=>e.el,t.getContainerSize=()=>{if(!e.containerSize&&e.el){const{width:u,height:c}=e.el.getBoundingClientRect();e.containerSize=[u,c]}return e.containerSize||e.size},t.getFramebufferSize=()=>e.size,t.create3DContextAsync=async()=>{if(e.adapter=await navigator.gpu.requestAdapter({powerPreference:"high-performance"}),!e.deleted){if(e.device=x_.newInstance(),e.device.initialize(await e.adapter.requestDevice()),e.deleted){e.device=null;return}e.context=e.canvas.getContext("webgpu")}},t.releaseGraphicsResources=()=>{const u=Dr.newInstance();u.setCurrentOperation("Release"),u.traverse(t,null),e.adapter=null,e.device=null,e.context=null,e.initialized=!1,e.initializing=!1},t.setBackgroundImage=u=>{e.bgImage.src=u.src},t.setUseBackgroundImage=u=>{e.useBackgroundImage=u,e.useBackgroundImage&&!e.el.contains(e.bgImage)?e.el.appendChild(e.bgImage):!e.useBackgroundImage&&e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)};async function i(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.imageFormat;const c=document.createElement("canvas"),l=c.getContext("2d");c.width=e.canvas.width,c.height=e.canvas.height;const g=await t.getPixelsAsync(),v=new ImageData(g.colorValues,g.width,g.height);l.putImageData(v,0,0);const h=e.canvas.getBoundingClientRect();e.renderable.getRenderers().forEach(S=>{S.getViewProps().forEach(m=>{if(m.getContainer){const R=m.getContainer().getElementsByTagName("canvas");for(let w=0;w<R.length;w++){const D=R[w],O=D.getBoundingClientRect(),_=O.x-h.x,N=O.y-h.y;l.drawImage(D,_,N)}}})});const E=c.toDataURL(u);c.remove(),t.invokeImageReady(E)}t.captureNextImage=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",{resetCamera:c=!1,size:l=null,scale:g=1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.deleted)return null;e.imageFormat=u;const v=e.notifyStartCaptureImage;return e.notifyStartCaptureImage=!0,e._screenshot={size:l||g!==1?l||e.size.map(h=>h*g):null},new Promise((h,y)=>{const T=t.onImageReady(E=>{if(e._screenshot.size===null)e.notifyStartCaptureImage=v,T.unsubscribe(),e._screenshot.placeHolder&&(e.size=e._screenshot.originalSize,t.modified(),e._screenshot.cameras&&e._screenshot.cameras.forEach(S=>{let{restoreParamsFn:x,arg:m}=S;return x(m)}),t.traverseAllPasses(),e.el.removeChild(e._screenshot.placeHolder),e._screenshot.placeHolder.remove(),e._screenshot=null),h(E);else{const S=document.createElement("img");if(S.style=U_,S.src=E,e._screenshot.placeHolder=e.el.appendChild(S),e.canvas.style.display="none",e._screenshot.originalSize=e.size,e.size=e._screenshot.size,e._screenshot.size=null,t.modified(),c){const x=c!==!0;e._screenshot.cameras=e.renderable.getRenderers().map(m=>{const M=m.getActiveCamera(),R=M.get("focalPoint","position","parallelScale");return{resetCameraArgs:x?{renderer:m}:void 0,resetCameraFn:x?c:m.resetCamera,restoreParamsFn:M.set,arg:JSON.parse(JSON.stringify(R))}}),e._screenshot.cameras.forEach(m=>{let{resetCameraFn:M,resetCameraArgs:R}=m;return M(R)})}t.traverseAllPasses()}})})},t.traverseAllPasses=()=>{if(!e.deleted)if(e.initialized){if(e.renderPasses)for(let u=0;u<e.renderPasses.length;++u)e.renderPasses[u].traverse(t,null);e.commandEncoder&&(e.device.submitCommandEncoder(e.commandEncoder),e.commandEncoder=null,e.notifyStartCaptureImage&&e.device.onSubmittedWorkDone().then(()=>{i()}))}else{t.initialize();const u=t.onInitialized(()=>{u.unsubscribe(),t.traverseAllPasses()})}},t.setViewStream=u=>{if(e.viewStream===u)return!1;if(e.subscription&&(e.subscription.unsubscribe(),e.subscription=null),e.viewStream=u,e.viewStream){const c=e.renderable.getRenderers()[0];c.getBackgroundByReference()[3]=0,t.setUseBackgroundImage(!0),e.subscription=e.viewStream.onImageReady(l=>t.setBackgroundImage(l.image)),e.viewStream.setSize(e.size[0],e.size[1]),e.viewStream.invalidateCache(),e.viewStream.render(),t.modified()}return!0},t.getUniquePropID=()=>e.nextPropID++,t.getPropFromID=u=>{for(let c=0;c<e.children.length;c++){const l=e.children[c].getPropFromID(u);if(l!==null)return l}return null},t.getPixelsAsync=async()=>{const u=e.device,c=e.renderPasses[0].getOpaquePass().getColorTexture(),l={width:c.getWidth(),height:c.getHeight()};l.colorBufferWidth=32*Math.floor((l.width+31)/32),l.colorBufferSizeInBytes=l.colorBufferWidth*l.height*8;const g=si.newInstance();g.setDevice(u),g.create(l.colorBufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);const v=e.device.createCommandEncoder();v.copyTextureToBuffer({texture:c.getHandle()},{buffer:g.getHandle(),bytesPerRow:8*l.colorBufferWidth,rowsPerImage:l.height},{width:l.width,height:l.height,depthOrArrayLayers:1}),u.submitCommandEncoder(v),await g.mapAsync(GPUMapMode.READ),l.colorValues=new Uint16Array(g.getMappedRange().slice()),g.unmap();const y=new Uint8ClampedArray(l.height*l.width*4);for(let T=0;T<l.height;T++)for(let E=0;E<l.width;E++){const S=(T*l.width+E)*4,x=(T*l.colorBufferWidth+E)*4;y[S]=255*kn.fromHalf(l.colorValues[x]),y[S+1]=255*kn.fromHalf(l.colorValues[x+1]),y[S+2]=255*kn.fromHalf(l.colorValues[x+2]),y[S+3]=255*kn.fromHalf(l.colorValues[x+3])}return l.colorValues=y,l},t.createSelector=()=>{const u=zv.newInstance();return u.setWebGPURenderWindow(t),u};const s=t.setSize;t.setSize=(u,c)=>{const l=s(u,c);return l&&t.invokeWindowResizeEvent({width:u,height:c}),l},t.delete=B.chain(t.delete,t.setViewStream)}const b_={initialized:!1,context:null,adapter:null,device:null,canvas:null,cursorVisibility:!0,cursor:"pointer",containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1,nextPropID:1,xrSupported:!1,presentationFormat:null};function F_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,b_,n),e.canvas=document.createElement("canvas"),e.canvas.style.width="100%",e.bgImage=new Image,e.bgImage.style.position="absolute",e.bgImage.style.left="0",e.bgImage.style.top="0",e.bgImage.style.width="100%",e.bgImage.style.height="100%",e.bgImage.style.zIndex="-1",Rv.extend(t,e,n),e.myFactory=vD.newInstance(),e.renderPasses[0]=g_.newInstance(),e.selector||(e.selector=zv.newInstance(),e.selector.setWebGPURenderWindow(t)),B.event(t,e,"imageReady"),B.event(t,e,"initialized"),B.get(t,e,["commandEncoder","device","presentationFormat","useBackgroundImage","xrSupported"]),B.setGet(t,e,["initialized","context","canvas","device","renderPasses","notifyStartCaptureImage","cursor","useOffScreen"]),B.setGetArray(t,e,["size"],2),B.event(t,e,"windowResizeEvent"),G_(t,e)}const kv=B.newInstance(F_,"vtkWebGPURenderWindow");X2("WebGPU",kv);In("vtkRenderWindow",kv);const z_=NV.extractURLParameters(),k_={margin:"0",padding:"0",position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden"},H_={position:"absolute",left:"25px",top:"25px",backgroundColor:"white",borderRadius:"5px",listStyle:"none",padding:"5px 10px",margin:"0",display:"block",border:"solid 1px black",maxWidth:"calc(100% - 70px)",maxHeight:"calc(100% - 60px)",overflow:"auto"};function a6(t,e){Object.keys(e).forEach(n=>{t.style[n]=e[n]})}function $_(t,e){e.classHierarchy.push("vtkFullScreenRenderWindow");const n=document.querySelector("body");e.rootContainer||(e.rootContainer=n),e.container||(e.container=document.createElement("div"),a6(e.container,e.containerStyle||k_),e.rootContainer.appendChild(e.container)),e.rootContainer===n&&(document.documentElement.style.height="100%",n.style.height="100%",n.style.padding="0",n.style.margin="0"),e.renderWindow=aV.newInstance(),e.renderer=PB.newInstance(),e.renderWindow.addRenderer(e.renderer),e.apiSpecificRenderWindow=e.renderWindow.newAPISpecificView(z_.viewAPI??e.defaultViewAPI),e.apiSpecificRenderWindow.setContainer(e.container),e.renderWindow.addView(e.apiSpecificRenderWindow),e.interactor=rv.newInstance(),e.interactor.setInteractorStyle(LV.newInstance()),e.interactor.setView(e.apiSpecificRenderWindow),e.interactor.initialize(),e.interactor.bindEvents(e.container),t.setBackground=e.renderer.setBackground,t.removeController=()=>{const i=e.controlContainer;i&&i.parentNode.removeChild(i)},t.setControllerVisibility=i=>{e.controllerVisibility=i,e.controlContainer&&(i?e.controlContainer.style.display="block":e.controlContainer.style.display="none")},t.toggleControllerVisibility=()=>{t.setControllerVisibility(!e.controllerVisibility)};function r(i){String.fromCharCode(i.charCode)==="c"&&t.toggleControllerVisibility()}t.addController=i=>{e.controlContainer=document.createElement("div"),a6(e.controlContainer,e.controlPanelStyle||H_),e.rootContainer.appendChild(e.controlContainer),e.controlContainer.innerHTML=i,t.setControllerVisibility(e.controllerVisibility),e.rootContainer.addEventListener("keypress",r)},t.setBackground(...e.background),t.addRepresentation=i=>{i.getActors().forEach(s=>{e.renderer.addActor(s)})},t.removeRepresentation=i=>{i.getActors().forEach(s=>e.renderer.removeActor(s))},t.delete=B.chain(t.setContainer,e.apiSpecificRenderWindow.delete,()=>{e.rootContainer?.removeEventListener("keypress",r),window.removeEventListener("resize",t.resize)},t.delete),t.resize=()=>{const i=e.container.getBoundingClientRect(),s=window.devicePixelRatio||1;e.apiSpecificRenderWindow.setSize(Math.floor(i.width*s),Math.floor(i.height*s)),e.resizeCallback&&e.resizeCallback(i),e.renderWindow.render()},t.setResizeCallback=i=>{e.resizeCallback=i,t.resize()},e.listenWindowResize&&window.addEventListener("resize",t.resize),t.resize()}const A_={background:[.32,.34,.43],containerStyle:null,controlPanelStyle:null,listenWindowResize:!0,resizeCallback:null,controllerVisibility:!0};function Hv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,A_,n),B.obj(t,e),B.get(t,e,["renderWindow","renderer","apiSpecificRenderWindow","interactor","rootContainer","container","controlContainer"]),$_(t,e)}const W_=B.newInstance(Hv);var j_={newInstance:W_,extend:Hv};const K_={RGB:0,HSV:1,LAB:2,DIVERGING:3},X_={LINEAR:0,LOG10:1};var $v={ColorSpace:K_,Scale:X_};const{ColorSpace:Ln,Scale:J2}=$v,{ScalarMappingTarget:Nu}=xc,{vtkDebugMacro:Y_,vtkErrorMacro:Sr,vtkWarningMacro:q_}=B;function i6(t,e){const n=t[0],r=t[1],i=t[2],s=Math.sqrt(n*n+r*r+i*i),u=s>.001?Math.acos(n/s):0,c=u>.001?Math.atan2(i,r):0;e[0]=s,e[1]=u,e[2]=c}function Q_(t,e){const n=t[0],r=t[1],i=t[2];e[0]=n*Math.cos(r),e[1]=n*Math.sin(r)*Math.cos(i),e[2]=n*Math.sin(r)*Math.sin(i)}function s6(t,e){if(t[0]>=e-.1)return t[2];const n=t[1]*Math.sqrt(e*e-t[0]*t[0])/(t[0]*Math.sin(t[1]));return t[2]>-.3*Math.PI?t[2]+n:t[2]-n}function Z_(t,e){let n=t-e;for(n<0&&(n=-n);n>=2*Math.PI;)n-=2*Math.PI;return n>Math.PI&&(n=2*Math.PI-n),n}function o6(t,e,n,r){const i=[],s=[];Ia(e,i),Ia(n,s);const u=[],c=[];i6(i,u),i6(s,c);let l=t;if(u[1]>.05&&c[1]>.05&&Z_(u[2],c[2])>.33*Math.PI){let h=Math.max(u[0],c[0]);h=Math.max(88,h),t<.5?(c[0]=h,c[1]=0,c[2]=0,l*=2):(u[0]=h,u[1]=0,u[2]=0,l=2*l-1)}u[1]<.05&&c[1]>.05?u[2]=s6(c,u[0]):c[1]<.05&&u[1]>.05&&(c[2]=s6(u,c[0]));const g=[];g[0]=(1-l)*u[0]+l*c[0],g[1]=(1-l)*u[1]+l*c[1],g[2]=(1-l)*u[2]+l*c[2];const v=[];Q_(g,v),ac(v,r)}function J_(t,e){e.classHierarchy.push("vtkColorTransferFunction"),t.getSize=()=>e.nodes.length,t.addRGBPoint=(n,r,i,s)=>t.addRGBPointLong(n,r,i,s,.5,0),t.addRGBPointLong=function(n,r,i,s){let u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5,c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(u<0||u>1)return Sr("Midpoint outside range [0.0, 1.0]"),-1;if(c<0||c>1)return Sr("Sharpness outside range [0.0, 1.0]"),-1;e.allowDuplicateScalars||t.removePoint(n);const l={x:n,r,g:i,b:s,midpoint:u,sharpness:c};e.nodes.push(l),t.sortAndUpdateRange();let g=0;for(;g<e.nodes.length&&e.nodes[g].x!==n;g++);return g<e.nodes.length?g:-1},t.addHSVPoint=(n,r,i,s)=>t.addHSVPointLong(n,r,i,s,.5,0),t.addHSVPointLong=function(n,r,i,s){let u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5,c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;const l=[];return Qa([r,i,s],l),t.addRGBPoint(n,l[0],l[1],l[2],u,c)},t.setNodes=n=>{if(e.nodes!==n){const r=JSON.stringify(e.nodes);e.nodes=n;const i=JSON.stringify(e.nodes);if(t.sortAndUpdateRange()||r!==i)return t.modified(),!0}return!1},t.sortAndUpdateRange=()=>{const n=JSON.stringify(e.nodes);e.nodes.sort((s,u)=>s.x-u.x);const r=JSON.stringify(e.nodes),i=t.updateRange();return!i&&n!==r?(t.modified(),!0):i},t.updateRange=()=>{const n=[2];n[0]=e.mappingRange[0],n[1]=e.mappingRange[1];const r=e.nodes.length;return r?(e.mappingRange[0]=e.nodes[0].x,e.mappingRange[1]=e.nodes[r-1].x):(e.mappingRange[0]=0,e.mappingRange[1]=0),n[0]===e.mappingRange[0]&&n[1]===e.mappingRange[1]?!1:(t.modified(),!0)},t.removePoint=n=>{let r=0;for(;r<e.nodes.length&&e.nodes[r].x!==n;r++);const i=r;if(r>=e.nodes.length)return-1;let s=!1;return e.nodes.splice(r,1),(r===0||r===e.nodes.length)&&(s=t.updateRange()),s||t.modified(),i},t.movePoint=(n,r)=>{if(n!==r){t.removePoint(r);for(let i=0;i<e.nodes.length;i++)if(e.nodes[i].x===n){e.nodes[i].x=r,t.sortAndUpdateRange();break}}},t.removeAllPoints=()=>{e.nodes=[],t.sortAndUpdateRange()},t.addRGBSegment=(n,r,i,s,u,c,l,g)=>{t.sortAndUpdateRange();for(let v=0;v<e.nodes.length;)e.nodes[v].x>=n&&e.nodes[v].x<=u?e.nodes.splice(v,1):v++;t.addRGBPointLong(n,r,i,s,.5,0),t.addRGBPointLong(u,c,l,g,.5,0),t.modified()},t.addHSVSegment=(n,r,i,s,u,c,l,g)=>{const v=[r,i,s],h=[c,l,g],y=[],T=[];Qa(v,y),Qa(h,T),t.addRGBSegment(n,y[0],y[1],y[2],u,T[0],T[1],T[2])},t.mapValue=n=>{const r=[];return t.getColor(n,r),[Math.floor(255*r[0]+.5),Math.floor(255*r[1]+.5),Math.floor(255*r[2]+.5),255]},t.getColor=(n,r)=>{if(e.indexedLookup){const i=t.getSize(),s=t.getAnnotatedValueIndexInternal(n);if(s<0||i===0){const u=t.getNanColorByReference();r[0]=u[0],r[1]=u[1],r[2]=u[2]}else{const u=[];t.getNodeValue(s%i,u),r[0]=u[1],r[1]=u[2],r[2]=u[3]}return}t.getTable(n,n,1,r)},t.getRedValue=n=>{const r=[];return t.getColor(n,r),r[0]},t.getGreenValue=n=>{const r=[];return t.getColor(n,r),r[1]},t.getBlueValue=n=>{const r=[];return t.getColor(n,r),r[2]},t.logScaleEnabled=()=>e.scale===J2.LOG10,t.usingLogScale=()=>t.logScaleEnabled()&&e.mappingRange[0]>0,t.getTable=(n,r,i,s)=>{const u=t.usingLogScale(),c=u?Math.log10(Number(n)):Number(n),l=u?Math.log10(Number(r)):Number(r);if(ic(c)||ic(l)){for(let _=0;_<i;_++)s[_*3+0]=e.nanColor[0],s[_*3+1]=e.nanColor[1],s[_*3+2]=e.nanColor[2];return}let g=0;const v=e.nodes.length;let h=0,y=0,T=0;v!==0&&(h=e.nodes[v-1].r,y=e.nodes[v-1].g,T=e.nodes[v-1].b);let E=0,S=0,x=0;const m=[0,0,0],M=[0,0,0];let R=0,w=0;const D=[];let O=e.mappingRange;u&&(O=[Math.log10(e.mappingRange[0]),Math.log10(e.mappingRange[1])]);for(let _=0;_<i;_++){const N=3*_;if(i>1?E=c+_/(i-1)*(l-c):E=.5*(c+l),e.discretize){const F=O;if(E>=F[0]&&E<=F[1]){const z=e.numberOfValues,$=F[1]-F[0];if(z<=1)E=F[0]+$/2;else{const Y=(E-F[0])/$,A=x7(z*Y);E=F[0]+A/(z-1)*$}}}for(;g<v&&E>e.nodes[g].x;)g++,g<v&&(S=e.nodes[g-1].x,x=e.nodes[g].x,m[0]=e.nodes[g-1].r,M[0]=e.nodes[g].r,m[1]=e.nodes[g-1].g,M[1]=e.nodes[g].g,m[2]=e.nodes[g-1].b,M[2]=e.nodes[g].b,R=e.nodes[g-1].midpoint,w=e.nodes[g-1].sharpness,R<1e-5&&(R=1e-5),R>.99999&&(R=.99999));if(E>O[1])s[N]=0,s[N+1]=0,s[N+2]=0,e.clamping&&(t.getUseAboveRangeColor()?(s[N]=e.aboveRangeColor[0],s[N+1]=e.aboveRangeColor[1],s[N+2]=e.aboveRangeColor[2]):(s[N]=h,s[N+1]=y,s[N+2]=T));else if(E<O[0]||z7(E)&&E<0)s[N]=0,s[N+1]=0,s[N+2]=0,e.clamping&&(t.getUseBelowRangeColor()?(s[N]=e.belowRangeColor[0],s[N+1]=e.belowRangeColor[1],s[N+2]=e.belowRangeColor[2]):v>0&&(s[N]=e.nodes[0].r,s[N+1]=e.nodes[0].g,s[N+2]=e.nodes[0].b));else if(g===0&&(Math.abs(E-c)<1e-6||e.discretize))v>0?(s[N]=e.nodes[0].r,s[N+1]=e.nodes[0].g,s[N+2]=e.nodes[0].b):(s[N]=0,s[N+1]=0,s[N+2]=0);else{let F=0;if(F=(E-S)/(x-S),F<R?F=.5*F/R:F=.5+.5*(F-R)/(1-R),w>.99)if(F<.5){s[N]=m[0],s[N+1]=m[1],s[N+2]=m[2];continue}else{s[N]=M[0],s[N+1]=M[1],s[N+2]=M[2];continue}if(w<.01){if(e.colorSpace===Ln.RGB)s[N]=(1-F)*m[0]+F*M[0],s[N+1]=(1-F)*m[1]+F*M[1],s[N+2]=(1-F)*m[2]+F*M[2];else if(e.colorSpace===Ln.HSV){const q=[],X=[];Cs(m,q),Cs(M,X),e.hSVWrap&&(q[0]-X[0]>.5||X[0]-q[0]>.5)&&(q[0]>X[0]?q[0]-=1:X[0]-=1);const Q=[];Q[0]=(1-F)*q[0]+F*X[0],Q[0]<0&&(Q[0]+=1),Q[1]=(1-F)*q[1]+F*X[1],Q[2]=(1-F)*q[2]+F*X[2],Qa(Q,D),s[N]=D[0],s[N+1]=D[1],s[N+2]=D[2]}else if(e.colorSpace===Ln.LAB){const q=[],X=[];Ia(m,q),Ia(M,X);const Q=[];Q[0]=(1-F)*q[0]+F*X[0],Q[1]=(1-F)*q[1]+F*X[1],Q[2]=(1-F)*q[2]+F*X[2],ac(Q,D),s[N]=D[0],s[N+1]=D[1],s[N+2]=D[2]}else e.colorSpace===Ln.DIVERGING?(o6(F,m,M,D),s[N]=D[0],s[N+1]=D[1],s[N+2]=D[2]):Sr("ColorSpace set to invalid value.",e.colorSpace);continue}F<.5?F=.5*(F*2)**(1+10*w):F>.5&&(F=1-.5*((1-F)*2)**(1+10*w));const z=F*F,$=z*F,Y=2*$-3*z+1,A=-2*$+3*z,K=$-2*z+F,ee=$-z;let G,W;if(e.colorSpace===Ln.RGB)for(let q=0;q<3;q++)G=M[q]-m[q],W=(1-w)*G,s[N+q]=Y*m[q]+A*M[q]+K*W+ee*W;else if(e.colorSpace===Ln.HSV){const q=[],X=[];Cs(m,q),Cs(M,X),e.hSVWrap&&(q[0]-X[0]>.5||X[0]-q[0]>.5)&&(q[0]>X[0]?q[0]-=1:X[0]-=1);const Q=[];for(let U=0;U<3;U++)G=X[U]-q[U],W=(1-w)*G,Q[U]=Y*q[U]+A*X[U]+K*W+ee*W,U===0&&Q[U]<0&&(Q[U]+=1);Qa(Q,D),s[N]=D[0],s[N+1]=D[1],s[N+2]=D[2]}else if(e.colorSpace===Ln.LAB){const q=[],X=[];Ia(m,q),Ia(M,X);const Q=[];for(let U=0;U<3;U++)G=X[U]-q[U],W=(1-w)*G,Q[U]=Y*q[U]+A*X[U]+K*W+ee*W;ac(Q,D),s[N]=D[0],s[N+1]=D[1],s[N+2]=D[2]}else e.colorSpace===Ln.DIVERGING?(o6(F,m,M,D),s[N]=D[0],s[N+1]=D[1],s[N+2]=D[2]):Sr("ColorSpace set to invalid value.");for(let q=0;q<3;q++)s[N+q]=s[N+q]<0?0:s[N+q],s[N+q]=s[N+q]>1?1:s[N+q]}}},t.getUint8Table=function(n,r,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t.getMTime()<=e.buildTime&&e.tableSize===i&&e.tableWithAlpha!==s)return e.table;if(e.nodes.length===0)return Sr("Attempting to lookup a value with no points in the function"),e.table;const u=s?4:3;(e.tableSize!==i||e.tableWithAlpha!==s)&&(e.table=new Uint8Array(i*u),e.tableSize=i,e.tableWithAlpha=s);const c=[];t.getTable(n,r,i,c);for(let l=0;l<i;l++)e.table[l*u+0]=Math.floor(c[l*3+0]*255+.5),e.table[l*u+1]=Math.floor(c[l*3+1]*255+.5),e.table[l*u+2]=Math.floor(c[l*3+2]*255+.5),s&&(e.table[l*u+3]=255);return e.buildTime.modified(),e.table},t.buildFunctionFromArray=n=>{t.removeAllPoints();const r=n.getNumberOfComponents();for(let i=0;i<n.getNumberOfTuples();i++)switch(r){case 3:{e.nodes.push({x:i,r:n.getComponent(i,0),g:n.getComponent(i,1),b:n.getComponent(i,2),midpoint:.5,sharpness:0});break}case 4:{e.nodes.push({x:n.getComponent(i,0),r:n.getComponent(i,1),g:n.getComponent(i,2),b:n.getComponent(i,3),midpoint:.5,sharpness:0});break}case 5:{e.nodes.push({x:i,r:n.getComponent(i,0),g:n.getComponent(i,1),b:n.getComponent(i,2),midpoint:n.getComponent(i,4),sharpness:n.getComponent(i,5)});break}case 6:{e.nodes.push({x:n.getComponent(i,0),r:n.getComponent(i,1),g:n.getComponent(i,2),b:n.getComponent(i,3),midpoint:n.getComponent(i,4),sharpness:n.getComponent(i,5)});break}}t.sortAndUpdateRange()},t.buildFunctionFromTable=(n,r,i,s)=>{let u=0;t.removeAllPoints(),i>1&&(u=(r-n)/(i-1));for(let c=0;c<i;c++){const l={x:n+u*c,r:s[c*3],g:s[c*3+1],b:s[c*3+2],sharpness:0,midpoint:.5};e.nodes.push(l)}t.sortAndUpdateRange()},t.getNodeValue=(n,r)=>n<0||n>=e.nodes.length?(Sr("Index out of range!"),-1):(r[0]=e.nodes[n].x,r[1]=e.nodes[n].r,r[2]=e.nodes[n].g,r[3]=e.nodes[n].b,r[4]=e.nodes[n].midpoint,r[5]=e.nodes[n].sharpness,1),t.setNodeValue=(n,r)=>{if(n<0||n>=e.nodes.length)return Sr("Index out of range!"),-1;const i=e.nodes[n].x;return e.nodes[n].x=r[0],e.nodes[n].r=r[1],e.nodes[n].g=r[2],e.nodes[n].b=r[3],e.nodes[n].midpoint=r[4],e.nodes[n].sharpness=r[5],i!==r[0]?t.sortAndUpdateRange():t.modified(),1},t.getNumberOfAvailableColors=()=>{if(e.indexedLookup&&t.getSize())return t.getSize();if(e.tableSize)return e.tableSize;const n=e.nodes?.length??0;return Math.max(4094,n)},t.getIndexedColor=(n,r)=>{const i=t.getSize();if(i>0&&n>=0){const u=[];t.getNodeValue(n%i,u);for(let c=0;c<3;++c)r[c]=u[c+1];r[3]=1;return}const s=t.getNanColorByReference();r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=1},t.fillFromDataPointer=(n,r)=>{if(!(n<=0||!r)){t.removeAllPoints();for(let i=0;i<n;i++)t.addRGBPoint(r[i*4],r[i*4+1],r[i*4+2],r[i*4+3])}},t.setMappingRange=(n,r)=>{const i=[n,r],s=[n,r],u=t.getRange(),c=t.logScaleEnabled();if(u[1]===i[1]&&u[0]===i[0])return;if(i[1]===i[0]){Sr("attempt to set zero width color range");return}c&&(i[0]<=0?console.warn("attempt to set log scale color range with non-positive minimum"):(s[0]=Math.log10(i[0]),s[1]=Math.log10(i[1])));const l=(s[1]-s[0])/(u[1]-u[0]),g=s[0]-u[0]*l;for(let v=0;v<e.nodes.length;++v)e.nodes[v].x=e.nodes[v].x*l+g;e.mappingRange[0]=i[0],e.mappingRange[1]=i[1],t.modified()},t.adjustRange=n=>{const r=t.getRange(),i=[];r[0]<n[0]?(t.getColor(n[0],i),t.addRGBPoint(n[0],i[0],i[1],i[2])):(t.getColor(r[0],i),t.addRGBPoint(n[0],i[0],i[1],i[2])),r[1]>n[1]?(t.getColor(n[1],i),t.addRGBPoint(n[1],i[0],i[1],i[2])):(t.getColor(r[1],i),t.addRGBPoint(n[1],i[0],i[1],i[2])),t.sortAndUpdateRange();for(let s=0;s<e.nodes.length;)e.nodes[s].x>=n[0]&&e.nodes[s].x<=n[1]?e.nodes.splice(s,1):++s;return 1},t.estimateMinNumberOfSamples=(n,r)=>{const i=t.findMinimumXDistance();return Math.ceil((r-n)/i)},t.findMinimumXDistance=()=>{if(e.nodes.length<2)return-1;let n=Number.MAX_VALUE;for(let r=0;r<e.nodes.length-1;r++){const i=e.nodes[r+1].x-e.nodes[r].x;i<n&&(n=i)}return n},t.mapScalarsThroughTable=(n,r,i,s)=>{if(t.getSize()===0){Y_("Transfer Function Has No Points!");return}e.indexedLookup?t.mapDataIndexed(n,r,i,s):t.mapData(n,r,i,s)},t.mapData=(n,r,i,s)=>{if(t.getSize()===0){q_("Transfer Function Has No Points!");return}const u=Math.floor(t.getAlpha()*255+.5),c=n.getNumberOfTuples(),l=n.getNumberOfComponents(),g=r.getData(),v=n.getData(),h=[];if(i===Nu.RGBA)for(let y=0;y<c;y++){const T=v[y*l+s];t.getColor(T,h),g[y*4]=Math.floor(h[0]*255+.5),g[y*4+1]=Math.floor(h[1]*255+.5),g[y*4+2]=Math.floor(h[2]*255+.5),g[y*4+3]=u}if(i===Nu.RGB)for(let y=0;y<c;y++){const T=v[y*l+s];t.getColor(T,h),g[y*3]=Math.floor(h[0]*255+.5),g[y*3+1]=Math.floor(h[1]*255+.5),g[y*3+2]=Math.floor(h[2]*255+.5)}if(i===Nu.LUMINANCE)for(let y=0;y<c;y++){const T=v[y*l+s];t.getColor(T,h),g[y]=Math.floor(h[0]*76.5+h[1]*150.45+h[2]*28.05+.5)}if(i===Nu.LUMINANCE_ALPHA)for(let y=0;y<c;y++){const T=v[y*l+s];t.getColor(T,h),g[y*2]=Math.floor(h[0]*76.5+h[1]*150.45+h[2]*28.05+.5),g[y*2+1]=u}},t.applyColorMap=n=>{const r=JSON.stringify(e.colorSpace);n.ColorSpace&&(e.colorSpace=Ln[n.ColorSpace.toUpperCase()],e.colorSpace===void 0&&(Sr(`ColorSpace ${n.ColorSpace} not supported, using RGB instead`),e.colorSpace=Ln.RGB));let i=r!==JSON.stringify(e.colorSpace);const s=i||JSON.stringify(e.nanColor);if(n.NanColor)for(e.nanColor=[].concat(n.NanColor);e.nanColor.length<4;)e.nanColor.push(1);i=i||s!==JSON.stringify(e.nanColor);const u=i||JSON.stringify(e.nodes);if(n.RGBPoints){const g=n.RGBPoints.length;e.nodes=[];const v=.5,h=0;for(let y=0;y<g;y+=4)e.nodes.push({x:n.RGBPoints[y],r:n.RGBPoints[y+1],g:n.RGBPoints[y+2],b:n.RGBPoints[y+3],midpoint:v,sharpness:h})}const c=t.sortAndUpdateRange(),l=!c&&(i||u!==JSON.stringify(e.nodes));return l&&t.modified(),c||l}}const P_={clamping:!0,colorSpace:Ln.RGB,hSVWrap:!0,scale:J2.LINEAR,nanColor:null,belowRangeColor:null,aboveRangeColor:null,useAboveRangeColor:!1,useBelowRangeColor:!1,allowDuplicateScalars:!1,table:null,tableSize:0,buildTime:null,nodes:null,discretize:!1,numberOfValues:256};function Av(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,P_,n),xc.extend(t,e,n),e.table=[],e.nodes=[],e.nanColor=[.5,0,0,1],e.belowRangeColor=[0,0,0,1],e.aboveRangeColor=[1,1,1,1],e.buildTime={},B.obj(e.buildTime),B.get(t,e,["buildTime","mappingRange"]),B.setGet(t,e,["useAboveRangeColor","useBelowRangeColor","discretize","numberOfValues",{type:"enum",name:"colorSpace",enum:Ln},{type:"enum",name:"scale",enum:J2}]),B.setArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"],4),B.getArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"]),J_(t,e)}const I_=B.newInstance(Av,"vtkColorTransferFunction");var eU={newInstance:I_,extend:Av,...$v},tU=[{Name:"KAAMS",IndexedColors:[1,1,1,1,0,0,0,1,0,0,0,1,1,1,0,1,0,1,0,1,1,.63,.63,1,.67,.5,.33,1,.5,.75,.53,.35,.7,1,.75,.5],Annotations:[0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11]},{ColorSpace:"Diverging",Name:"Cool to Warm",NanColor:[1,1,0],RGBPoints:[0,.23137254902,.298039215686,.752941176471,.5,.865,.865,.865,1,.705882352941,.0156862745098,.149019607843]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Cool to Warm (Extended)",NanColor:[.25,0,0],RGBPoints:[0,0,0,.34902,.03125,.039216,.062745,.380392,.0625,.062745,.117647,.411765,.09375,.090196,.184314,.45098,.125,.12549,.262745,.501961,.15625,.160784,.337255,.541176,.1875,.2,.396078,.568627,.21875,.239216,.454902,.6,.25,.286275,.521569,.65098,.28125,.337255,.592157,.701961,.3125,.388235,.654902,.74902,.34375,.466667,.737255,.819608,.375,.572549,.819608,.878431,.40625,.654902,.866667,.909804,.4375,.752941,.917647,.941176,.46875,.823529,.956863,.968627,.5,.988235,.960784,.901961,.5,.941176,.984314,.988235,.52,.988235,.945098,.85098,.54,.980392,.898039,.784314,.5625,.968627,.835294,.698039,.59375,.94902,.733333,.588235,.625,.929412,.65098,.509804,.65625,.909804,.564706,.435294,.6875,.878431,.458824,.352941,.71875,.839216,.388235,.286275,.75,.760784,.294118,.211765,.78125,.701961,.211765,.168627,.8125,.65098,.156863,.129412,.84375,.6,.094118,.094118,.875,.54902,.066667,.098039,.90625,.501961,.05098,.12549,.9375,.45098,.054902,.172549,.96875,.4,.054902,.192157,1,.34902,.070588,.211765]},{ColorSpace:"Diverging",Name:"Warm to Cool",NanColor:[1,1,0],RGBPoints:[0,.705882352941,.0156862745098,.149019607843,.5,.865,.865,.865,1,.23137254902,.298039215686,.752941176471]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Warm to Cool (Extended)",NanColor:[.250004,0,0],RGBPoints:[0,.34902,0,.129412,.025,.4,.00392157,.101961,.05,.470588,.0156863,.0901961,.075,.54902,.027451,.0705882,.1,.619608,.0627451,.0431373,.125,.690196,.12549,.0627451,.15,.741176,.184314,.0745098,.175,.788235,.266667,.0941176,.2,.811765,.345098,.113725,.225,.831373,.411765,.133333,.25,.85098,.47451,.145098,.275,.870588,.54902,.156863,.3,.878431,.619608,.168627,.325,.890196,.658824,.196078,.35,.909804,.717647,.235294,.375,.929412,.776471,.278431,.395522,.94902,.823529,.321569,.418905,.968627,.87451,.407843,.444278,.980392,.917647,.509804,.470149,.988235,.956863,.643137,.483582,.992157,.964706,.713725,.499,.988235,.980392,.870588,.5,1,1,1,.501,.913725,.988235,.937255,.516418,.827451,.980392,.886275,.531343,.764706,.980392,.866667,.546766,.658824,.980392,.843137,.564179,.572549,.964706,.835294,.587562,.423529,.941176,.87451,.60597,.262745,.901961,.862745,.629851,.0705882,.854902,.870588,.651741,.0509804,.8,.85098,.681592,.0235294,.709804,.831373,.712935,.0313725,.615686,.811765,.75,.0313725,.537255,.788235,.775,.0392157,.466667,.768627,.8,.0509804,.396078,.741176,.825,.054902,.317647,.709804,.85,.054902,.243137,.678431,.875,.0431373,.164706,.639216,.9,.0313725,.0980392,.6,.925,.0392157,.0392157,.560784,.95,.105882,.0509804,.509804,.975,.113725,.0235294,.45098,1,.12549,0,.380392]},{ColorSpace:"RGB",Name:"Rainbow Desaturated",NanColor:[1,1,0],RGBPoints:[0,.278431372549,.278431372549,.858823529412,.143,0,0,.360784313725,.285,0,1,1,.429,0,.501960784314,0,.571,1,1,0,.714,1,.380392156863,0,.857,.419607843137,0,0,1,.878431372549,.301960784314,.301960784314]},{ColorSpace:"RGB",Name:"Cold and Hot",NanColor:[1,1,0],RGBPoints:[0,0,1,1,.45,0,0,1,.5,0,0,.501960784314,.55,1,0,0,1,1,1,0]},{ColorSpace:"RGB",Name:"Black-Body Radiation",NanColor:[0,.498039215686,1],RGBPoints:[0,0,0,0,.4,.901960784314,0,0,.8,.901960784314,.901960784314,0,1,1,1,1]},{ColorSpace:"RGB",Name:"X Ray",NanColor:[1,0,0],RGBPoints:[0,1,1,1,1,0,0,0]},{ColorSpace:"RGB",Name:"Grayscale",NanColor:[1,0,0],RGBPoints:[0,0,0,0,1,1,1,1]},{ColorSpace:"RGB",Name:"BkRd",NanColor:[0,1,1],RGBPoints:[0,0,0,0,1,1,0,0]},{ColorSpace:"RGB",Name:"BkGn",NanColor:[1,0,1],RGBPoints:[0,0,0,0,1,0,1,0]},{ColorSpace:"RGB",Name:"BkBu",NanColor:[1,1,0],RGBPoints:[0,0,0,0,1,0,0,1]},{ColorSpace:"RGB",Name:"BkMa",NanColor:[0,1,0],RGBPoints:[0,0,0,0,1,1,0,1]},{ColorSpace:"RGB",Name:"BkCy",NanColor:[0,1,1],RGBPoints:[0,0,0,0,1,0,1,1]},{ColorSpace:"RGB",Name:"Black, Blue and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,0,0,.501960784314,.666,0,.501960784314,1,1,1,1,1]},{ColorSpace:"RGB",Name:"Black, Orange and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,.501960784314,0,0,.666,1,.501960784314,0,1,1,1,1]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Linear YGB 1211g",NanColor:[.25,0,0],RGBPoints:[0,1,.988235,.968627,.02,1,.952941,.878431,.05,.968627,.905882,.776471,.1,.94902,.898039,.647059,.15,.901961,.878431,.556863,.2,.847059,.858824,.482353,.25,.690196,.819608,.435294,.3,.513725,.768627,.384314,.35,.337255,.721569,.337255,.4,.278431,.658824,.392157,.45,.231373,.639216,.435294,.5,.203922,.6,.486275,.55,.172549,.568627,.537255,.6,.141176,.517647,.54902,.65,.133333,.458824,.541176,.7,.12549,.396078,.529412,.75,.117647,.321569,.521569,.8,.121569,.258824,.509804,.85,.133333,.227451,.501961,.9,.145098,.192157,.490196,.95,.188235,.164706,.470588,1,.258824,.196078,.439216]},{ColorSpace:"CIELAB",Creator:"Francesca Samsel",Name:"Linear Green (Gr4L)",NanColor:[.25,0,0],RGBPoints:[0,.054902,.109804,.121569,.05,.07451,.172549,.180392,.1,.086275,.231373,.219608,.15,.094118,.278431,.25098,.2,.109804,.34902,.278431,.25,.113725,.4,.278431,.3,.117647,.45098,.270588,.35,.117647,.490196,.243137,.4,.113725,.521569,.203922,.45,.109804,.54902,.152941,.5,.082353,.588235,.082353,.55,.109804,.631373,.05098,.6,.211765,.678431,.082353,.65,.317647,.721569,.113725,.7,.431373,.760784,.160784,.75,.556863,.8,.239216,.8,.666667,.839216,.294118,.85,.784314,.878431,.396078,.9,.886275,.921569,.533333,.95,.960784,.94902,.670588,1,1,.984314,.901961]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Linear Blue (8_31f)",NanColor:[.25,0,0],RGBPoints:[0,.960784,1,.980392,.05,.815686,.960784,.913725,.1,.670588,.929412,.870588,.15,.556863,.901961,.843137,.2,.478431,.870588,.823529,.25,.439216,.831373,.803922,.3,.4,.8,.788235,.35,.376471,.768627,.768627,.4,.34902,.709804,.729412,.45,.32549,.654902,.690196,.5,.301961,.607843,.658824,.55,.247059,.545098,.619608,.6,.239216,.494118,.580392,.65,.227451,.439216,.541176,.7,.227451,.403922,.521569,.75,.231373,.368627,.501961,.8,.227451,.321569,.470588,.85,.219608,.282353,.439216,.9,.192157,.235294,.4,.95,.160784,.184314,.34902,1,.133333,.12549,.301961]},{ColorSpace:"HSV",Name:"Blue to Red Rainbow",NanColor:[.498039215686,.498039215686,.498039215686],RGBPoints:[0,0,0,1,1,1,0,0]},{ColorSpace:"HSV",Name:"Red to Blue Rainbow",NanColor:[.498039215686,.498039215686,.498039215686],RGBPoints:[0,1,0,0,1,0,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended White",NanColor:[1,1,0],RGBPoints:[0,1,1,1,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended Grey",NanColor:[1,1,0],RGBPoints:[0,.317647058824,.341176470588,.43137254902,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended Black",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Blue to Yellow",NanColor:[1,0,0],RGBPoints:[0,.0392156862745,.0392156862745,.949019607843,1,.949019607843,.949019607843,.0392156862745]},{ColorSpace:"HSV",Name:"blot",RGBPoints:[0,0,0,1,.166,0,0,1,.167,1,0,1,.332,1,0,1,.333,0,1,1,.5,0,1,1,.501,0,1,0,.666,0,1,0,.667,1,1,0,.832,1,1,0,.833,1,0,0,1,1,0,0]},{ColorSpace:"Lab",Name:"CIELab Blue to Red",NanColor:[1,1,0],RGBPoints:[0,0,.6,.749019607843,1,.76862745098,.466666666667,.341176470588]},{ColorSpace:"RGB",Name:"jet",RGBPoints:[-1,0,0,.5625,-.777778,0,0,1,-.269841,0,1,1,-.015873,.5,1,.5,.238095,1,1,0,.746032,1,0,0,1,.5,0,0]},{ColorSpace:"RGB",Name:"rainbow",RGBPoints:[-1,0,0,1,-.5,0,1,1,0,0,1,0,.5,1,1,0,1,1,0,0]},{ColorSpace:"Lab",Name:"erdc_rainbow_bright",RGBPoints:[-1,.32549,.14902,.960784,-.866221,.297047,.375586,.963836,-.732441,.180302,.536818,.964627,-.598662,.1302,.649207,.929647,-.464883,.0445143,.749654,.855998,-.331104,.0271325,.830713,.721527,-.197324,.259504,.866145,.543555,-.0635452,.428364,.890725,.329819,.0702341,.568503,.898508,.187623,.204013,.738259,.890317,.0825461,.337793,.84546,.86136,.0147555,.471572,.912191,.808018,0,.605351,.962848,.710445,0,.73913,.999469,.600258,.0176284,.87291,.994156,.445975,.193912,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"erdc_rainbow_dark",RGBPoints:[-1,0,0,.423499,-.866221,0,.119346,.529237,-.732441,0,.238691,.634976,-.598662,0,.346852,.68788,-.464883,0,.45022,.718141,-.331104,0,.553554,.664839,-.197324,0,.651082,.519303,-.0635452,.115841,.72479,.352857,.0702341,.326771,.781195,.140187,.204013,.522765,.798524,.0284624,.337793,.703162,.788685,.00885756,.471572,.845118,.751133,0,.605351,.955734,.690825,0,.73913,.995402,.567916,.0618524,.87291,.987712,.403398,.164851,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"nic_CubicL",RGBPoints:[-1,.479965,.0118108,.5307,-.87451,.522213,.0551282,.706919,-.74902,.50839,.237278,.867764,-.623529,.451617,.373834,.987255,-.498039,.39365,.497255,.97506,-.372549,.328631,.599639,.891843,-.247059,.250043,.690286,.778553,-.121569,.249656,.764905,.645857,.00392157,.297954,.821466,.50449,.129412,.337509,.872595,.358447,.254902,.430011,.913789,.297079,.380392,.587191,.931381,.333353,.505882,.727937,.93591,.353742,.631373,.826403,.921081,.365066,.756863,.893201,.846317,.372662,.882353,.965347,.73884,.378506,1,.983235,.597451,.366856]},{ColorSpace:"Lab",Name:"nic_CubicYF",RGBPoints:[-1,.5151,.0482,.6697,-.87451,.520711,.168955,.800574,-.74902,.493694,.278596,.911824,-.623529,.440026,.369475,.984978,-.498039,.398932,.457593,.987053,-.372549,.350651,.540644,.929608,-.247059,.298827,.615625,.857729,-.121569,.239928,.685061,.769531,.00392157,.228832,.739349,.673287,.129412,.263297,.78608,.569988,.254902,.298107,.828337,.460214,.380392,.33092,.864071,.352674,.505882,.38306,.898169,.287309,.631373,.49023,.917481,.307961,.756863,.62372,.926026,.332309,.882353,.717458,.92527,.342476,1,.8,.9255,.3529]},{ColorSpace:"Lab",Name:"gist_earth",RGBPoints:[-1,0,0,0,-.87451,.239216,.027451,.415686,-.74902,.0901961,.254902,.556863,-.623529,.0941176,.352941,.54902,-.498039,.105882,.435294,.533333,-.372549,.12549,.52549,.501961,-.247059,.156863,.596078,.443137,-.121569,.196078,.65098,.380392,.00392157,.282353,.717647,.301961,.129412,.466667,.772549,.27451,.254902,.678431,.784314,.309804,.380392,.901961,.756863,.376471,.505882,.992157,.705882,.521569,.631373,1,.721569,.701961,.756863,1,.784314,.784314,.882353,1,.866667,.866667,1,1,1,1]},{ColorSpace:"Lab",Name:"2hot",RGBPoints:[-1,.0416667,0,0,-.873016,.208333,0,0,-.746032,.375,0,0,-.619048,.541667,0,0,-.492063,.708333,0,0,-.365079,.854137,0,0,-.238095,.937488,.039062,0,-.111111,1,.208333,0,.015873,1,.375,0,.142857,1,.541667,0,.269841,1,.708333,0,.396825,1,.858805,.03125,.52381,1,.947392,.15625,.650794,1,1,.3125,.777778,1,1,.5625,.904762,1,1,.8125,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_red2yellow_BW",RGBPoints:[-1,754296e-12,0,109827e-10,-.87451,.18285,.0264094,0,-.74902,.3066,0,0,-.623529,.422841,0,0,-.498039,.522945,0,0,-.372549,.605721,0,0,-.247059,.672502,.14168,0,-.121569,.728167,.244025,0,.00392157,.781215,.333454,0,.129412,.825,.423586,0,.254902,.855893,.516793,0,.380392,.880491,.608846,0,.505882,.910305,.695505,0,.631373,.94109,.779067,.223528,.756863,.967873,.858572,.473521,.882353,.986815,.933211,.751583,1,1,1,.999997]},{ColorSpace:"Lab",Name:"erdc_marine2gold_BW",RGBPoints:[-1,111641e-12,0,162551e-11,-.87451,.0413146,.0619808,.209857,-.74902,.0185557,.101341,.350684,-.623529,.00486405,.149847,.461054,-.498039,.0836345,.210845,.517906,-.372549,.173222,.276134,.541793,-.247059,.259857,.343877,.535869,-.121569,.362299,.408124,.504293,.00392157,.468266,.468276,.468257,.129412,.582781,.527545,.374914,.254902,.691591,.585251,.274266,.380392,.784454,.645091,.247332,.505882,.862299,.710383,.27518,.631373,.920863,.782923,.351563,.756863,.955792,.859699,.533541,.882353,.976162,.93433,.780671,1,1,1,.999983]},{ColorSpace:"Lab",Name:"erdc_blue2gold_BW",RGBPoints:[-1,0,0,0,-.87451,.0742735,.0440331,.230013,-.74902,.125276,.0258685,.415826,-.623529,.143879,.0163031,.591346,-.498039,.212261,.0627855,.705239,-.372549,.306048,.141178,.763636,-.247059,.391537,.232286,.773263,-.121569,.461734,.336633,.708321,.00392157,.54209,.427581,.590007,.129412,.61704,.508623,.460978,.254902,.702703,.579586,.309117,.380392,.790336,.644811,.170397,.505882,.870173,.710733,.117134,.631373,.93656,.781991,.157144,.756863,.965672,.862068,.409836,.882353,.985751,.936296,.714162,1,1,1,.999999]},{ColorSpace:"Lab",Name:"erdc_sapphire2gold_BW",RGBPoints:[-1,.107704,.107708,.107694,-.87451,.1851,.112354,.308554,-.74902,.236782,.114233,.48788,-.623529,.28296,.126187,.639464,-.498039,.344787,.171643,.739713,-.372549,.413325,.242371,.76913,-.247059,.481863,.3131,.719841,-.121569,.550402,.383829,.612222,.00392157,.61894,.454558,.51126,.129412,.687478,.525287,.39993,.254902,.756017,.596016,.289923,.380392,.824555,.666745,.255498,.505882,.892979,.736822,.27696,.631373,.938851,.804966,.351734,.756863,.966491,.874853,.53572,.882353,.982105,.94153,.782579,1,1,1,.999986]},{ColorSpace:"Lab",Name:"erdc_red2purple_BW",RGBPoints:[-1,0,0,0,-.87451,.167793,.0166271,.0431278,-.74902,.262608,.0107595,.0791181,-.623529,.351902,.0101858,.100926,-.498039,.441257,.0160835,.131919,-.372549,.5221,.0555972,.195625,-.247059,.593852,.104294,.310234,-.121569,.654628,.158115,.448486,.00392157,.707443,.220914,.570253,.129412,.749504,.293268,.67897,.254902,.781587,.370517,.779269,.380392,.809951,.451099,.855831,.505882,.84424,.531462,.900451,.631373,.865174,.620901,.91606,.756863,.875041,.714054,.910284,.882353,.880764,.80554,.896276,1,.887572,.887591,.887556]},{ColorSpace:"Lab",Name:"erdc_purple2pink_BW",RGBPoints:[-1,0,0,0,-.87451,.117562,.0291202,.175876,-.74902,.178368,.0458476,.285454,-.623529,.237731,.0680173,.387717,-.498039,.300877,.0956291,.484802,-.372549,.370929,.136858,.554985,-.247059,.449033,.189273,.58863,-.121569,.529971,.245796,.598587,.00392157,.609914,.300643,.610244,.129412,.697079,.351286,.616371,.254902,.785858,.401991,.617376,.380392,.862517,.45745,.64463,.505882,.91359,.525462,.705336,.631373,.932583,.61064,.767412,.756863,.922478,.706966,.817522,.882353,.901302,.803071,.856311,1,.887571,.887591,.887549]},{ColorSpace:"Lab",Name:"erdc_pbj_lin",RGBPoints:[-1,0,0,0,-.87451,.091821,.0611476,.10617,-.74902,.160311,.0900022,.192713,-.623529,.22484,.12126,.272128,-.498039,.291263,.157469,.340828,-.372549,.360015,.200388,.388903,-.247059,.437497,.250058,.387201,-.121569,.512636,.304969,.355955,.00392157,.582603,.360874,.33488,.129412,.655126,.416374,.306351,.254902,.725889,.473329,.279051,.380392,.778125,.537928,.302697,.505882,.815894,.606931,.382431,.631373,.839159,.679308,.497608,.756863,.854748,.751666,.631792,.882353,.869483,.822508,.768592,1,.887572,.887589,.887565]},{ColorSpace:"Lab",Name:"erdc_blue2green_muted",RGBPoints:[-1,.107704,.107708,.107695,-.87451,.141522,.13066,.270741,-.74902,.180123,.146119,.42308,-.623529,.210161,.169674,.551795,-.498039,.239701,.212939,.634969,-.372549,.253916,.282947,.653641,-.247059,.242791,.366933,.608521,-.121569,.226302,.446776,.52693,.00392157,.236237,.514689,.458798,.129412,.274641,.577589,.376069,.254902,.349625,.633993,.288131,.380392,.4437,.683677,.260497,.505882,.536247,.731214,.285424,.631373,.628472,.777128,.349151,.756863,.718259,.819287,.496825,.882353,.804768,.856164,.703299,1,.887571,.887591,.887548]},{ColorSpace:"Lab",Name:"erdc_blue2green_BW",RGBPoints:[-1,363578e-12,0,529374e-11,-.87451,.0539915,.0577948,.212806,-.74902,.0620393,.0758942,.388959,-.623529,.0697499,.102032,.54177,-.498039,.113295,.156156,.64334,-.372549,.152047,.243196,.670283,-.247059,.158096,.344084,.622864,-.121569,.151142,.43922,.532767,.00392157,.17155,.521588,.457719,.129412,.225861,.599141,.363997,.254902,.32328,.67007,.259083,.380392,.442344,.733697,.223754,.505882,.558409,.794941,.257411,.631373,.673875,.854344,.340822,.756863,.787244,.909326,.524717,.882353,.896483,.958063,.775914,1,1,1,.999982]},{ColorSpace:"Lab",Name:"GREEN-WHITE_LINEAR",RGBPoints:[-1,0,0,0,-.87451,0,.062745,0,-.74902,0,.12549,0,-.623529,0,.188235,0,-.498039,0,.25098,0,-.372549,0,.313725,0,-.247059,0,.376471,0,-.121569,.094118,.439216,0,.00392157,.196078,.501961,0,.129412,.294118,.564706,0,.254902,.396078,.627451,0,.380392,.498039,.690196,0,.505882,.6,.752941,.145098,.631373,.701961,.815686,.364706,.756863,.8,.878431,.580392,.882353,.901961,.941176,.796078,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_green2yellow_BW",RGBPoints:[-1,0,0,0,-.87451,0,.105542,.0603919,-.74902,0,.159454,.104148,-.623529,0,.219502,.15542,-.498039,0,.282276,.203811,-.372549,0,.346331,.235652,-.247059,0,.411765,.235428,-.121569,0,.477177,.217977,.00392157,.0593644,.541635,.21361,.129412,.233081,.604722,.210591,.254902,.369803,.664942,.226536,.380392,.498446,.722367,.288237,.505882,.601929,.782244,.380815,.631373,.703207,.840497,.512134,.756863,.803186,.896433,.674462,.882353,.903834,.950266,.846715,1,1,1,.999981]},{ColorSpace:"Lab",Name:"blue2cyan",RGBPoints:[-1,0,0,0,-.87451,0,.152941,.364706,-.74902,0,.254902,.470588,-.623529,0,.34902,.572549,-.498039,0,.443137,.670588,-.372549,0,.537255,.772549,-.247059,0,.627451,.870588,-.121569,0,.717647,.964706,.00392157,.0784314,.772549,1,.129412,.207843,.858824,1,.254902,.32549,.941176,1,.380392,.45098,1,1,.505882,.560784,1,1,.631373,.662745,1,1,.756863,.760784,1,1,.882353,.870588,1,1,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_blue2cyan_BW",RGBPoints:[-1,405298e-12,0,59012e-10,-.87451,.0207526,.0740933,.18093,-.74902,0,.121033,.30343,-.623529,0,.166892,.416095,-.498039,0,.216768,.524796,-.372549,.0164769,.275471,.608585,-.247059,.0544527,.344824,.659267,-.121569,.0880643,.419118,.688675,.00392157,.127938,.492556,.720256,.129412,.149476,.566946,.756918,.254902,.188961,.641333,.792122,.380392,.245482,.715336,.827609,.505882,.329216,.786235,.874761,.631373,.453558,.852803,.918466,.756863,.626281,.910493,.954,.882353,.82257,.958709,.980146,1,1,1,.999989]},{ColorSpace:"Lab",Name:"erdc_blue_BW",RGBPoints:[-1,0,0,0,-.87451,.0425591,.0763529,.150682,-.74902,.0569472,.119154,.275403,-.623529,.0635978,.164772,.395427,-.498039,.0774342,.213851,.510014,-.372549,.106815,.267034,.615102,-.247059,.122093,.324649,.720068,-.121569,.160851,.387068,.806956,.00392157,.213754,.453516,.878012,.129412,.26722,.524656,.932436,.254902,.326844,.599279,.968038,.380392,.403403,.674712,.984784,.505882,.499703,.745519,1,.631373,.615055,.813983,1,.756863,.74405,.879228,1,.882353,.877909,.941913,1,1,1,1,.999996]},{ColorSpace:"Lab",Name:"BLUE-WHITE",RGBPoints:[-1,0,0,0,-.87451,0,0,.082353,-.74902,0,0,.168627,-.623529,0,0,.254902,-.498039,0,0,.337255,-.372549,0,0,.423529,-.247059,0,0,.509804,-.121569,0,.101961,.592157,.00392157,0,.203922,.678431,.129412,0,.301961,.764706,.254902,0,.403922,.85098,.380392,0,.505882,.933333,.505882,0,.603922,1,.631373,.254902,.705882,1,.756863,.509804,.807843,1,.882353,.764706,.905882,1,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_purple_BW",RGBPoints:[-1,4264e-11,0,620844e-12,-.87451,.100579,.0593111,.145666,-.74902,.167794,.0889224,.254953,-.623529,.231446,.123339,.360511,-.498039,.296699,.163027,.461278,-.372549,.363211,.209286,.55306,-.247059,.431136,.260776,.637195,-.121569,.498202,.320012,.705799,.00392157,.567456,.380459,.778091,.129412,.629381,.445284,.8448,.254902,.688373,.517374,.895694,.380392,.74891,.590906,.93976,.505882,.805017,.667956,.977626,.631373,.850914,.752618,.992396,.756863,.89724,.838454,.994093,.882353,.948461,.922603,.994449,1,1,1,.999967]},{ColorSpace:"Lab",Name:"erdc_magenta_BW",RGBPoints:[-1,0,0,254023e-10,-.87451,.128696,.0456782,.11635,-.74902,.228133,.0476299,.201452,-.623529,.327273,.0374065,.282107,-.498039,.420953,.0408166,.35709,-.372549,.511562,.0642203,.430511,-.247059,.599552,.102686,.504257,-.121569,.684646,.150536,.579429,.00392157,.765817,.205978,.656062,.129412,.839176,.27229,.731807,.254902,.89536,.357594,.797309,.380392,.930238,.457825,.846984,.505882,.945921,.564536,.880571,.631373,.948995,.670753,.902279,.756863,.947124,.772819,.918171,.882353,.947265,.869424,.934352,1,.954719,.95475,.954726]},{ColorSpace:"Lab",Name:"magenta",RGBPoints:[-1,0,0,0,-.87451,.364706,0,.152941,-.74902,.470588,0,.254902,-.623529,.572549,0,.34902,-.498039,.670588,0,.443137,-.372549,.772549,0,.537255,-.247059,.870588,0,.627451,-.121569,.964706,0,.717647,.00392157,1,.0784314,.772549,.129412,1,.207843,.858824,.254902,1,.32549,.941176,.380392,1,.45098,1,.505882,1,.560784,1,.631373,1,.662745,1,.756863,1,.760784,1,.882353,1,.870588,1,1,1,1,1]},{ColorSpace:"Lab",Name:"RED-PURPLE",RGBPoints:[-1,0,0,0,-.87451,.188235,0,.007843,-.74902,.345098,0,.035294,-.623529,.439216,0,.098039,-.498039,.533333,0,.152941,-.372549,.627451,.015686,.211765,-.247059,.721569,.031373,.266667,-.121569,.8,.047059,.329412,.00392157,.862745,.047059,.403922,.129412,.941176,.062745,.466667,.254902,.988235,.078431,.54902,.380392,.988235,.141176,.643137,.505882,.988235,.25098,.729412,.631373,.988235,.376471,.811765,.756863,.988235,.54902,.886275,.882353,.988235,.752941,.952941,1,.996078,.996078,.996078]},{ColorSpace:"Lab",Name:"erdc_red_BW",RGBPoints:[-1,0,0,0,-.87451,.147204,.0480135,.0401815,-.74902,.253411,.0617478,.0301333,-.623529,.356059,.0746331,.0446897,-.498039,.457731,.0934935,.0636931,-.372549,.557199,.122714,.0860013,-.247059,.665179,.144238,.105585,-.121569,.763833,.187056,.138326,.00392157,.847035,.254558,.189407,.129412,.905663,.345937,.258215,.254902,.941431,.447111,.346277,.380392,.962608,.546927,.457571,.505882,.987833,.637276,.569944,.631373,.994202,.732176,.687958,.756863,.993304,.826268,.800567,.882353,.994413,.917205,.906393,1,1,1,.999979]},{ColorSpace:"Lab",Name:"RED_TEMPERATURE",RGBPoints:[-1,0,0,0,-.87451,.090196,0,0,-.74902,.180392,0,0,-.623529,.270588,0,0,-.498039,.360784,0,0,-.372549,.45098,0,0,-.247059,.545098,0,0,-.121569,.635294,0,0,.00392157,.72549,.058824,0,.129412,.815686,.176471,0,.254902,.905882,.294118,0,.380392,1,.411765,0,.505882,1,.533333,.027451,.631373,1,.65098,.27451,.756863,1,.768627,.521569,.882353,1,.886275,.768627,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_orange_BW",RGBPoints:[-1,0,0,253806e-10,-.87451,.135871,.0593824,0,-.74902,.224328,.0907216,0,-.623529,.318083,.119647,0,-.498039,.414443,.150246,0,-.372549,.511077,.184884,0,-.247059,.605501,.226033,0,-.121569,.695274,.275491,0,.00392157,.777826,.334445,0,.129412,.851498,.402441,0,.254902,.915899,.47759,602975e-9,.380392,.971984,.557882,.0361443,.505882,1,.641287,.135967,.631373,1,.725198,.27997,.756863,1,.808205,.438135,.882353,1,.89306,.587036,1,1,.977928,.721599]},{ColorSpace:"Lab",Name:"heated_object",RGBPoints:[-1,0,0,0,-.87451,.34902,.0862745,0,-.74902,.45098,.172549,0,-.623529,.52549,.231373,0,-.498039,.580392,.278431,0,-.372549,.623529,.313725,0,-.247059,.670588,.352941,0,-.121569,.717647,.392157,0,.00392157,.772549,.439216,0,.129412,.839216,.494118,0,.254902,.901961,.541176,0,.380392,.968627,.6,0,.505882,1,.658824,0,.631373,1,.721569,0,.756863,1,.827451,.298039,.882353,1,.976471,.72549,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_gold_BW",RGBPoints:[-1,0,0,190933e-10,-.87451,.128363,.0636265,0,-.74902,.193795,.111057,0,-.623529,.25976,.15987,0,-.498039,.328546,.210589,0,-.372549,.399726,.26332,0,-.247059,.472969,.318261,0,-.121569,.546245,.375827,0,.00392157,.61745,.436719,0,.129412,.685545,.501113,0,.254902,.749578,.568799,0,.380392,.80962,.6394,0,.505882,.865572,.712699,.10257,.631373,.917709,.787569,.233665,.756863,.966914,.863138,.369608,.882353,1,.939405,.496104,1,.999225,1,.612275]},{ColorSpace:"Lab",Name:"erdc_brown_BW",RGBPoints:[-1,33216e-11,0,483629e-11,-.87451,.14693,.0518172,0,-.74902,.225806,.0814996,0,-.623529,.301681,.111452,0,-.498039,.370487,.150664,0,-.372549,.43108,.199477,0,-.247059,.4849,.255107,0,-.121569,.536798,.313486,0,.00392157,.59286,.371167,0,.129412,.653119,.428135,0,.254902,.714589,.485917,.0379541,.380392,.774667,.54565,.116634,.505882,.831222,.608047,.183895,.631373,.880305,.674199,.260298,.756863,.922314,.742472,.367086,.882353,.959408,.811222,.497258,1,.993548,.875183,.622093]},{ColorSpace:"Lab",Name:"copper_Matlab",RGBPoints:[-1,0,0,0,-.87451,.0784314,.0501961,.0313725,-.74902,.156863,.100392,.0627451,-.623529,.235294,.150588,.0941176,-.498039,.313725,.200784,.12549,-.372549,.392157,.25098,.156863,-.247059,.470588,.301176,.188235,-.121569,.54902,.351373,.219608,.00392157,.627451,.401569,.25098,.129412,.705882,.451765,.282353,.254902,.784314,.501961,.313725,.380392,.862745,.552157,.345098,.505882,.941176,.602353,.376471,.631373,1,.652549,.407843,.756863,1,.702745,.439216,.882353,1,.752941,.470588,1,1,.8,.5]},{ColorSpace:"Lab",Name:"pink_Matlab",RGBPoints:[-1,0,0,0,-.87451,.312416,.204524,.204524,-.74902,.441822,.289241,.289241,-.623529,.54112,.354246,.354246,-.498039,.624831,.409048,.409048,-.372549,.698582,.45733,.45733,-.247059,.764404,.502282,.500979,-.121569,.791292,.591516,.54112,.00392157,.817297,.66895,.578481,.129412,.842499,.738308,.613572,.254902,.866968,.801687,.646762,.380392,.890766,.86041,.678329,.505882,.913944,.913944,.711254,.631373,.936549,.936549,.79459,.756863,.958621,.958621,.869979,.882353,.980196,.980196,.939336,1,1,1,1]},{ColorSpace:"Lab",Name:"bone_Matlab",RGBPoints:[-1,0,0,0,-.87451,.054902,.054902,.075817,-.74902,.109804,.109804,.151634,-.623529,.164706,.164706,.227451,-.498039,.219608,.219608,.303268,-.372549,.27451,.27451,.379085,-.247059,.329412,.329902,.454412,-.121569,.384314,.405719,.509314,.00392157,.439216,.481536,.564216,.129412,.494118,.557353,.619118,.254902,.54902,.63317,.67402,.380392,.603922,.708987,.728922,.505882,.660294,.783824,.783824,.631373,.746569,.838725,.838725,.756863,.832843,.893627,.893627,.882353,.919118,.948529,.948529,1,1,1,1]},{ColorSpace:"Lab",Name:"gray_Matlab",RGBPoints:[-1,0,0,0,-.87451,.0627451,.0627451,.0627451,-.74902,.12549,.12549,.12549,-.623529,.188235,.188235,.188235,-.498039,.25098,.25098,.25098,-.372549,.313725,.313725,.313725,-.247059,.376471,.376471,.376471,-.121569,.439216,.439216,.439216,.00392157,.501961,.501961,.501961,.129412,.564706,.564706,.564706,.254902,.627451,.627451,.627451,.380392,.690196,.690196,.690196,.505882,.752941,.752941,.752941,.631373,.815686,.815686,.815686,.756863,.878431,.878431,.878431,.882353,.941176,.941176,.941176,1,1,1,1]},{ColorSpace:"Lab",Name:"Purples",RGBPoints:[-1,.247059,0,.490196,-.87451,.288397,.07677,.525629,-.74902,.32975,.153587,.561092,-.623529,.373057,.236263,.600461,-.498039,.416363,.319,.639923,-.372549,.459669,.405613,.685198,-.247059,.503345,.491534,.730058,-.121569,.562399,.54862,.757616,.00392157,.621453,.606075,.785544,.129412,.680508,.674971,.824914,.254902,.739562,.743406,.863899,.380392,.798616,.800492,.893426,.505882,.85684,.856655,.922491,.631373,.898178,.894056,.942176,.756863,.938654,.930919,.961646,.882353,.964245,.958478,.977393,1,.988235,.984314,.992157]},{ColorSpace:"Lab",Name:"Blues",RGBPoints:[-1,.031373,.188235,.419608,-.87451,.031373,.253195,.516063,-.74902,.031757,.318139,.612149,-.623529,.080969,.38113,.661361,-.498039,.130427,.444152,.710327,-.372549,.195386,.509112,.743791,-.247059,.260715,.573841,.777209,-.121569,.341423,.628958,.808704,.00392157,.422745,.684075,.839892,.129412,.523137,.739193,.861546,.254902,.622684,.793464,.883429,.380392,.701423,.826928,.910988,.505882,.778685,.8603,.937993,.631373,.825928,.891795,.953741,.756863,.87328,.923291,.969489,.882353,.922491,.954787,.985236,1,.968627,.984314,1]},{ColorSpace:"Lab",Name:"Greens",RGBPoints:[-1,0,.266667,.105882,-.87451,0,.347374,.139346,-.74902,538e-6,.427912,.172933,-.623529,.069435,.486967,.222145,-.498039,.138178,.546082,.271326,-.372549,.197232,.609073,.31857,-.247059,.257255,.671742,.365859,-.121569,.357647,.720953,.415071,.00392157,.45767,.769919,.465021,.129412,.546251,.811257,.537855,.254902,.634295,.852211,.610688,.380392,.709097,.883706,.683522,.505882,.78316,.914833,.755894,.631373,.842215,.938454,.818885,.756863,.899977,.961538,.880692,.882353,.935409,.975317,.92203,1,.968627,.988235,.960784]},{ColorSpace:"Lab",Name:"PuBu",RGBPoints:[-1,.301961,0,.294118,-.87451,.404321,.029527,.390573,-.74902,.50599,.059592,.486782,-.623529,.519769,.158016,.551742,-.498039,.533456,.256194,.616301,-.372549,.54133,.33887,.655671,-.247059,.54902,.421592,.695087,-.121569,.54902,.506236,.736424,.00392157,.550127,.590573,.777701,.129412,.585559,.665375,.81707,.254902,.622145,.739023,.855825,.380392,.687105,.784298,.879446,.505882,.752065,.829758,.903253,.631373,.817024,.87897,.930811,.756863,.880907,.927213,.957832,.882353,.926182,.958708,.975548,1,.968627,.988235,.992157]},{ColorSpace:"Lab",Name:"BuPu",RGBPoints:[-1,.007843,.219608,.345098,-.87451,.01178,.286536,.449427,-.74902,.015702,.35328,.553479,-.623529,.01767,.396586,.622376,-.498039,.021115,.4402,.690688,-.372549,.11757,.503191,.722184,-.247059,.214625,.565859,.753633,-.121569,.336671,.615071,.78316,.00392157,.457978,.663975,.812503,.129412,.556401,.703345,.836125,.254902,.65421,.742714,.859669,.380392,.736886,.782084,.881323,.505882,.81827,.821638,.903068,.631373,.873387,.864944,.92669,.756863,.927536,.907605,.949988,.882353,.964937,.9391,.967705,1,1,.968627,.984314]},{ColorSpace:"Lab",Name:"BuGn",RGBPoints:[-1,.031373,.25098,.505882,-.87451,.031373,.329719,.590527,-.74902,.031911,.408397,.674787,-.623529,.100807,.479262,.710219,-.498039,.169704,.550219,.745744,-.372549,.238601,.62699,.787082,-.247059,.307958,.703114,.826759,-.121569,.39654,.752326,.797232,.00392157,.485121,.801046,.767705,.129412,.573702,.83451,.738178,.254902,.661592,.867743,.711034,.380392,.732457,.895302,.74253,.505882,.801845,.922307,.774579,.631373,.841215,.938055,.817885,.756863,.880907,.95391,.861084,.882353,.926182,.971626,.902422,1,.968627,.988235,.941176]},{ColorSpace:"Lab",Name:"GnBu",RGBPoints:[-1,0,.266667,.105882,-.87451,0,.347374,.139346,-.74902,538e-6,.427912,.172933,-.623529,.069435,.486967,.222145,-.498039,.138178,.546175,.272095,-.372549,.197232,.615071,.368551,-.247059,.256609,.683276,.464867,-.121569,.329443,.722645,.555417,.00392157,.403137,.762138,.645413,.129412,.503529,.805444,.718247,.254902,.603922,.848597,.790465,.380392,.704314,.887966,.847551,.505882,.802307,.926321,.903714,.631373,.851519,.944037,.941115,.756863,.899977,.961538,.976901,.882353,.935409,.975317,.984775,1,.968627,.988235,.992157]},{ColorSpace:"Lab",Name:"GnBuPu",RGBPoints:[-1,.003922,.27451,.211765,-.87451,.003922,.349312,.280661,-.74902,.003937,.423852,.349773,-.623529,.005905,.46519,.446228,-.498039,.009443,.506344,.542837,-.372549,.111803,.535871,.649135,-.247059,.214025,.565859,.753633,-.121569,.310481,.615071,.78316,.00392157,.407797,.663975,.812503,.129412,.531811,.703345,.836125,.254902,.65421,.742714,.859669,.380392,.736886,.782084,.881323,.505882,.81827,.821176,.902884,.631373,.873387,.854641,.922568,.756863,.927536,.888535,.942361,.882353,.964937,.929873,.964014,1,1,.968627,.984314]},{ColorSpace:"Lab",Name:"BuGnYl",RGBPoints:[-1,.031373,.113725,.345098,-.87451,.088458,.159,.463206,-.74902,.145052,.204567,.5807,-.623529,.139146,.287243,.620069,-.498039,.13318,.370196,.659562,-.372549,.123337,.470588,.706805,-.247059,.115386,.570335,.753126,-.121569,.186251,.643168,.761,.00392157,.258716,.71514,.768074,.129412,.380761,.760415,.750358,.254902,.503576,.806075,.732795,.380392,.645306,.861192,.719016,.505882,.783899,.91511,.705606,.631373,.858701,.944637,.6997,.756863,.931349,.973303,.698424,.882353,.966782,.987082,.777163,1,1,1,.85098]},{ColorSpace:"Lab",Name:"PuRd",RGBPoints:[-1,.286275,0,.415686,-.87451,.38273,.001968,.441276,-.74902,.479231,.003922,.466774,-.623529,.581592,.003922,.480554,-.498039,.683799,.00549,.494887,-.372549,.776317,.105882,.544098,-.247059,.867866,.206321,.592618,-.121569,.919047,.308681,.612303,.00392157,.968812,.411226,.632603,.129412,.974717,.519493,.671972,.254902,.980546,.626451,.71065,.380392,.984483,.701253,.732303,.505882,.988328,.77504,.755617,.631373,.990296,.828189,.812703,.756863,.992372,.880907,.869035,.882353,.996309,.926182,.912341,1,1,.968627,.952941]},{ColorSpace:"Lab",Name:"RdPu",RGBPoints:[-1,.403922,0,.121569,-.87451,.500377,0,.192434,-.74902,.596909,277e-6,.263037,-.623529,.703206,.035709,.300438,-.498039,.808612,.071296,.338854,-.372549,.857824,.116571,.441215,-.247059,.905513,.163552,.54293,-.121569,.889765,.281661,.617732,.00392157,.873156,.39897,.691611,.129412,.82985,.491488,.736886,.254902,.789081,.583237,.781853,.380392,.810734,.656071,.819254,.505882,.833126,.729181,.85684,.631373,.870527,.80792,.898178,.756863,.907605,.884398,.938331,.882353,.9391,.921799,.958016,1,.968627,.956863,.976471]},{ColorSpace:"Lab",Name:"Oranges",RGBPoints:[-1,.498039,.152941,.015686,-.87451,.57481,.182468,.013718,-.74902,.651765,.212042,.011734,-.623529,.752157,.247474,.007797,-.498039,.851719,.283368,.004475,-.372549,.898962,.348328,.039908,-.247059,.945652,.413426,.076401,-.121569,.969273,.484291,.157109,.00392157,.992157,.554971,.238185,.129412,.992157,.619931,.330704,.254902,.992157,.684967,.423837,.380392,.992157,.751895,.532103,.505882,.992249,.817716,.639354,.631373,.994218,.861023,.725967,.756863,.996186,.903576,.810965,.882353,.998155,.933103,.868051,1,1,.960784,.921569]},{ColorSpace:"Lab",Name:"Reds",RGBPoints:[-1,.403922,0,.05098,-.87451,.525967,.029527,.066728,-.74902,.647643,.058962,.082476,-.623529,.722445,.076678,.098224,-.498039,.797186,.095194,.114187,-.372549,.868051,.164091,.143714,-.247059,.937809,.233541,.173933,-.121569,.96143,.326059,.232987,.00392157,.984375,.418147,.292657,.129412,.986344,.496886,.371396,.254902,.988235,.575702,.450673,.380392,.988235,.656409,.543191,.505882,.98842,.736747,.635894,.631373,.992357,.809581,.732349,.756863,.996186,.880692,.826759,.882353,.998155,.92203,.885813,1,1,.960784,.941176]},{ColorSpace:"Lab",Name:"RdOr",RGBPoints:[-1,.498039,0,0,-.87451,.6004,0,0,-.74902,.702514,738e-6,477e-6,-.623529,.773379,.095225,.061499,-.498039,.843875,.189865,.12283,-.372549,.891119,.294195,.203537,-.247059,.937855,.397924,.283137,-.121569,.963445,.476663,.316601,.00392157,.988297,.555771,.351665,.129412,.990265,.646321,.436309,.254902,.992157,.735256,.519646,.380392,.992157,.784468,.570827,.505882,.992249,.833218,.623483,.631373,.994218,.872587,.706159,.756863,.996186,.911419,.788189,.882353,.998155,.940946,.859054,1,1,.968627,.92549]},{ColorSpace:"Lab",Name:"BrOrYl",RGBPoints:[-1,.4,.145098,.023529,-.87451,.500392,.174625,.019592,-.74902,.600784,.204291,.015656,-.623529,.701176,.251534,.011719,-.498039,.800984,.299146,.008397,-.372549,.863975,.370012,.043829,-.247059,.926321,.441107,.0794,-.121569,.961753,.521815,.120738,.00392157,.996078,.602645,.163122,.129412,.996078,.68729,.237924,.254902,.996078,.771011,.314879,.380392,.996078,.832034,.444798,.505882,.996171,.892042,.572595,.631373,.998139,.931411,.65724,.756863,1,.969489,.741669,.882353,1,.985236,.822376,1,1,1,.898039]},{ColorSpace:"Lab",Name:"RdOrYl",RGBPoints:[-1,.501961,0,.14902,-.87451,.622038,0,.14902,-.74902,.741761,4e-4,.148866,-.623529,.816563,.05158,.129181,-.498039,.890965,.10356,.110235,-.372549,.940177,.205921,.137793,-.247059,.988281,.308789,.165536,-.121569,.99025,.432803,.200969,.00392157,.992218,.555217,.236278,.129412,.994187,.628051,.267774,.254902,.996078,.701038,.301269,.380392,.996078,.777809,.383945,.505882,.996171,.852826,.466621,.631373,.998139,.892195,.549296,.756863,1,.931349,.632188,.882353,1,.966782,.7188,1,1,1,.8]},{ColorSpace:"Lab",Name:"CIELab_blue2red",RGBPoints:[-1,0,.6,.74902,1,.76863,.46667,.34118]},{ColorSpace:"Lab",Name:"blue2yellow",RGBPoints:[-1,0,0,1,0,.5,.5,.5,1,1,1,0]},{ColorSpace:"Lab",Name:"erdc_blue2gold",RGBPoints:[-1,.175119,.0438468,1,-.874016,.22383,.159771,.94557,-.748031,.27254,.233611,.891216,-.622047,.321251,.296526,.836857,-.496063,.369962,.354296,.782359,-.370079,.418672,.409139,.72754,-.244094,.467383,.462152,.672148,-.11811,.51609,.51396,.615825,.00787402,.572863,.55452,.559172,.133858,.630269,.593822,.517729,.259843,.689588,.624668,.47446,.385827,.745394,.656113,.428638,.511811,.798624,.688104,.379105,.637795,.849926,.720593,.323834,.76378,.899765,.753543,.258657,.889764,.948487,.78692,.171778,1,.990413,.816451,.00729848]},{ColorSpace:"Lab",Name:"erdc_blue2yellow",RGBPoints:[-1,.0830122,0,.495617,-.87451,.141973,.0551288,.57363,-.74902,.193048,.110258,.604561,-.623529,.234231,.165386,.57643,-.498039,.275413,.220515,.548299,-.372549,.316596,.275644,.520169,-.247059,.357778,.330773,.492038,-.121569,.398961,.385901,.463908,.00392157,.449929,.438487,.426815,.129412,.511572,.488299,.379944,.254902,.581222,.53603,.325741,.380392,.650871,.583761,.271538,.505882,.720521,.631493,.217335,.631373,.79017,.679224,.163132,.756863,.85982,.726955,.108929,.882353,.910254,.774159,.14112,1,.927513,.81759,.306289]},{ColorSpace:"Lab",Name:"erdc_cyan2orange",RGBPoints:[-1,.0471513,.213874,.414329,-.87451,.0674702,.256648,.439027,-.74902,.0959957,.299331,.462089,-.623529,.132428,.341872,.483212,-.498039,.188743,.38277,.500597,-.372549,.268511,.420229,.512179,-.247059,.352945,.455602,.519101,-.121569,.43893,.489368,.521538,.00392157,.522445,.522495,.522436,.129412,.600089,.555682,.53205,.254902,.67988,.587981,.539163,.380392,.761011,.619586,.544439,.505882,.84278,.650741,.548567,.631373,.910713,.687347,.557822,.756863,.952232,.734972,.577775,.882353,.975642,.789858,.604868,1,.990752,.843643,.632857]},{ColorSpace:"Lab",Name:"erdc_purple2green",RGBPoints:[-1,.235006,.0483128,.530899,-.87451,.302968,.108419,.552391,-.74902,.360241,.166059,.569502,-.623529,.406746,.226782,.579373,-.498039,.444073,.28964,.582094,-.372549,.473648,.353774,.577947,-.247059,.497636,.418154,.567911,-.121569,.519086,.481741,.553968,.00392157,.542884,.542914,.542875,.129412,.566303,.603989,.527499,.254902,.595218,.662965,.516857,.380392,.628641,.720701,.510673,.505882,.665373,.777849,.508165,.631373,.704182,.834921,.508303,.756863,.743846,.892328,.50999,.882353,.783158,.950422,.512181,1,.818617,1,.513888]},{ColorSpace:"Lab",Name:"erdc_purple2green_dark",RGBPoints:[-1,.107656,0,.428682,-.87451,.1924,0,.449799,-.74902,.255118,.0648939,.466726,-.623529,.304256,.133066,.476703,-.498039,.343202,.19716,.479793,-.372549,.373876,.260353,.476241,-.247059,.398497,.322872,.466953,-.121569,.420016,.384252,.453785,.00392157,.44319,.443216,.443186,.129412,.465553,.502139,.428233,.254902,.492959,.559151,.417591,.380392,.524654,.615092,.411016,.505882,.55959,.670583,.40779,.631373,.596614,.726102,.406948,.756863,.634544,.782032,.407439,.882353,.672183,.838703,.408237,1,.706131,.892759,.408452]},{ColorSpace:"Lab",Name:"coolwarm",RGBPoints:[-1,.229806,.298718,.753683,-.875,.303869,.406535,.844959,-.75,.383013,.509419,.917388,-.625,.466667,.604563,.968155,-.5,.552953,.688929,.995376,-.375,.639176,.7596,.998151,-.25,.722193,.813953,.976575,-.125,.798692,.849786,.931689,0,.865395,.86541,.865396,.125,.924128,.827385,.774508,.25,.958853,.769768,.678008,.375,.969954,.694267,.579375,.5,.958003,.602842,.481776,.625,.923945,.497309,.38797,.75,.869187,.378313,.300267,.875,.795632,.241284,.220526,1,.705673,.0155562,.150233]},{ColorSpace:"Lab",Name:"BuRd",RGBPoints:[-1,.019608,.188235,.380392,-.87451,.088504,.321107,.564937,-.74902,.163399,.444983,.697501,-.623529,.247059,.555709,.754095,-.498039,.420684,.676432,.818685,-.372549,.606459,.789773,.880277,-.247059,.761476,.868512,.924567,-.121569,.878047,.925721,.951942,.00392157,.969089,.966474,.964937,.129412,.983852,.897578,.846828,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"Spectral_lowBlue",RGBPoints:[-1,.368627,.309804,.635294,-.87451,.260361,.450058,.70173,-.74902,.248058,.591311,.717186,-.623529,.376009,.734025,.658132,-.498039,.537947,.814764,.64506,-.372549,.702345,.879585,.636678,-.247059,.84752,.938639,.607151,-.121569,.940408,.976163,.656055,.00392157,.999923,.997616,.745021,.129412,.997463,.921338,.61707,.254902,.995002,.824606,.499885,.380392,.992541,.701576,.39654,.505882,.973472,.547405,.318108,.631373,.937793,.398539,.270127,.756863,.861515,.282891,.299654,.882353,.746482,.144637,.288812,1,.619608,.003922,.258824]},{ColorSpace:"Lab",Name:"GnRP",RGBPoints:[-1,0,.266667,.105882,-.87451,.066436,.394617,.174779,-.74902,.168858,.524567,.25767,-.623529,.323875,.657439,.361015,-.498039,.504883,.772318,.506344,-.372549,.678431,.870127,.654902,-.247059,.803922,.921799,.780392,-.121569,.897116,.951942,.882814,.00392157,.967397,.965936,.967474,.129412,.928028,.879815,.930565,.254902,.866052,.780777,.882891,.380392,.77501,.665129,.821376,.505882,.675663,.537024,.737024,.631373,.57847,.396155,.645982,.756863,.492349,.223914,.547559,.882353,.375548,.096886,.423299,1,.25098,0,.294118]},{ColorSpace:"Lab",Name:"GYPi",RGBPoints:[-1,.152941,.392157,.098039,-.87451,.246444,.505344,.117724,-.74902,.351942,.614533,.161399,-.623529,.474971,.717878,.240138,-.498039,.611995,.811226,.392849,-.372549,.746328,.893118,.565321,-.247059,.859516,.94233,.747405,-.121569,.928105,.96386,.875663,.00392157,.969089,.966859,.968012,.129412,.983852,.910265,.948328,.254902,.979239,.833218,.914648,.380392,.949712,.729873,.862976,.505882,.905652,.58293,.763552,.631373,.85521,.410073,.652211,.756863,.793695,.183699,.531642,.882353,.683737,.063899,.420761,1,.556863,.003922,.321569]},{ColorSpace:"Lab",Name:"GnYlRd",RGBPoints:[-1,0,.407843,.215686,-.87451,.063975,.525952,.277201,-.74902,.177932,.633064,.332718,-.623529,.364937,.724106,.379469,-.498039,.527951,.797155,.40223,-.372549,.678431,.862822,.433449,-.247059,.803922,.916955,.514648,-.121569,.909419,.961861,.625067,.00392157,.999923,.997616,.745021,.129412,.997463,.921338,.61707,.254902,.995002,.824606,.499885,.380392,.992541,.701576,.39654,.505882,.973472,.547405,.318108,.631373,.939023,.389927,.245521,.756863,.867666,.239831,.176624,.882353,.762399,.110727,.151326,1,.647059,0,.14902]},{ColorSpace:"Lab",Name:"GBBr",RGBPoints:[-1,0,.235294,.188235,-.87451,.002461,.338639,.301423,-.74902,.055902,.448981,.417609,-.623529,.183852,.56955,.538178,-.498039,.357785,.700115,.660746,-.372549,.540177,.819531,.77624,-.247059,.714879,.890888,.864821,-.121569,.851134,.934564,.922645,.00392157,.960861,.959785,.95694,.129412,.963322,.927797,.83391,.254902,.939946,.868897,.68935,.380392,.883353,.775394,.517109,.505882,.808074,.625836,.324106,.631373,.717647,.476355,.15494,.756863,.592157,.358247,.06882,.882353,.458593,.26436,.031142,1,.329412,.188235,.019608]},{ColorSpace:"Lab",Name:"PuOr",RGBPoints:[-1,.498039,.231373,.031373,-.87451,.62599,.30273,.026451,-.74902,.746943,.387082,.037524,-.623529,.85767,.490427,.071972,-.498039,.936409,.617762,.236371,-.372549,.992695,.743099,.43291,-.247059,.995156,.841523,.63714,-.121569,.985313,.913802,.813687,.00392157,.966244,.966398,.967705,.129412,.889965,.89504,.938178,.254902,.806151,.804306,.894656,.380392,.712649,.688658,.833141,.505882,.594233,.554325,.744637,.631373,.474894,.404229,.652364,.756863,.366628,.217224,.563783,.882353,.266436,.089965,.434833,1,.176471,0,.294118]},{ColorSpace:"Lab",Name:"PRGn",RGBPoints:[-1,.25098,0,.294118,-.87451,.383852,.103345,.431911,-.74902,.497732,.234679,.55371,-.623529,.583852,.40692,.652134,-.498039,.681968,.545175,.742561,-.372549,.7807,.672357,.825221,-.247059,.871742,.788005,.886736,-.121569,.930488,.885198,.932872,.00392157,.966321,.968089,.965859,.129412,.892503,.950865,.877278,.254902,.796078,.91857,.772549,.380392,.670588,.866897,.647059,.505882,.493195,.765398,.496655,.631373,.314187,.649135,.354556,.756863,.15917,.516263,.251211,.882353,.062284,.386621,.170473,1,0,.266667,.105882]},{ColorSpace:"Lab",Name:"PiYG",RGBPoints:[-1,.556863,.003922,.321569,-.87451,.692195,.067897,.427374,-.74902,.797539,.197847,.539177,-.623529,.859054,.424221,.659746,-.498039,.908574,.592618,.770319,-.372549,.951557,.736332,.866205,-.247059,.981084,.839677,.917878,-.121569,.98293,.913802,.949558,.00392157,.96732,.968474,.965629,.129412,.92549,.963552,.869666,.254902,.852441,.939254,.736025,.380392,.739254,.890042,.553941,.505882,.60323,.805536,.382238,.631373,.467282,.711419,.235217,.756863,.344252,.608074,.156478,.882353,.2406,.49827,.116494,1,.152941,.392157,.098039]},{ColorSpace:"Lab",Name:"OrPu",RGBPoints:[-1,.176471,0,.294118,-.87451,.272434,.095963,.444214,-.74902,.373395,.228912,.56932,-.623529,.481661,.415917,.657901,-.498039,.601922,.562937,.750481,-.372549,.718493,.695886,.836986,-.247059,.811995,.811534,.898501,-.121569,.894733,.8995,.940023,.00392157,.969166,.966859,.963629,.129412,.98639,.910265,.803691,.254902,.995002,.835371,.624375,.380392,.992541,.736947,.420146,.505882,.931949,.609458,.224221,.631373,.85075,.483968,.069819,.756863,.740023,.380623,.035371,.882353,.617993,.29827,.026759,1,.498039,.231373,.031373]},{ColorSpace:"Lab",Name:"BrBG",RGBPoints:[-1,.329412,.188235,.019608,-.87451,.467205,.269435,.031911,-.74902,.6,.365629,.074202,-.623529,.72549,.483737,.160323,-.498039,.812995,.635832,.336409,-.372549,.88689,.781238,.527874,-.247059,.943483,.87474,.700115,-.121569,.963168,.929796,.841599,.00392157,.957247,.959938,.959554,.129412,.84406,.932872,.920185,.254902,.70396,.886428,.859285,.380392,.529258,.815071,.770704,.505882,.346251,.691811,.653057,.631373,.175855,.562015,.530642,.756863,.047905,.441446,.410073,.882353,.002307,.33218,.294348,1,0,.235294,.188235]},{ColorSpace:"Lab",Name:"GyRd",RGBPoints:[-1,.101961,.101961,.101961,-.87451,.227451,.227451,.227451,-.74902,.359939,.359939,.359939,-.623529,.502653,.502653,.502653,-.498039,.631373,.631373,.631373,-.372549,.749865,.749865,.749865,-.247059,.843368,.843368,.843368,-.121569,.926105,.926105,.926105,.00392157,.999846,.997232,.995694,.129412,.994925,.908651,.857901,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"erdc_divHi_purpleGreen",RGBPoints:[-1,.297553,0,.489074,-.87451,.40259,.151146,.567754,-.74902,.516038,.284843,.658231,-.623529,.629783,.423646,.750938,-.498039,.735198,.563697,.835956,-.372549,.82408,.695541,.903582,-.247059,.889091,.807454,.944862,-.121569,.92334,.886917,.951839,.00392157,.921045,.921084,.921003,.129412,.877324,.907455,.845381,.254902,.797649,.849713,.734695,.380392,.691646,.75964,.600532,.505882,.568981,.649159,.453807,.631373,.438945,.529756,.304259,.756863,.30973,.412001,.158303,.882353,.187078,.305111,.00251458,1,.101655,.220836,0]},{ColorSpace:"Lab",Name:"erdc_divHi_purpleGreen_dim",RGBPoints:[-1,.404088,.131038,.592767,-.87451,.486469,.230957,.651243,-.74902,.575165,.339335,.717723,-.623529,.662741,.454332,.784263,-.498039,.742071,.570213,.842918,-.372549,.806935,.678992,.886227,-.247059,.852219,.771315,.90763,-.121569,.873345,.837327,.901572,.00392157,.866783,.86682,.866745,.129412,.82839,.858225,.796812,.254902,.762578,.814287,.700202,.380392,.676429,.744229,.585735,.505882,.577033,.65732,.461526,.631373,.47128,.562476,.33476,.756863,.365461,.467957,.21076,.882353,.264758,.381138,.0878313,1,.182591,.312249,0]},{ColorSpace:"Lab",Name:"erdc_divLow_icePeach",RGBPoints:[-1,.480048,.817441,.998056,-.87451,.425898,.726921,.883187,-.74902,.366682,.629445,.761936,-.623529,.308756,.531002,.640217,-.498039,.258021,.43705,.523433,-.372549,.219244,.352381,.416348,-.247059,.195127,.281032,.322979,-.121569,.186286,.22627,.246525,.00392157,.192352,.19236,.192364,.129412,.255927,.214469,.191756,.254902,.340459,.254426,.206666,.380392,.444655,.309315,.234029,.505882,.565353,.376004,.270969,.631373,.697917,.450748,.314293,.756863,.836657,.529064,.360227,.882353,.972695,.614884,.413123,1,1,.705904,.472699]},{ColorSpace:"Lab",Name:"erdc_divLow_purpleGreen",RGBPoints:[-1,.956034,.666487,.952663,-.87451,.874457,.572698,.936352,-.74902,.753465,.488253,.909063,-.623529,.63309,.413507,.763833,-.498039,.514491,.345878,.620015,-.372549,.405008,.288141,.484376,-.247059,.311388,.241986,.363556,-.121569,.238722,.209044,.263449,.00392157,.192352,.192366,.192362,.129412,.200379,.233201,.168618,.254902,.230151,.291737,.165227,.380392,.279481,.366076,.178607,.505882,.344927,.453267,.205703,.631373,.421554,.549449,.242643,.756863,.503334,.649999,.284377,.882353,.583497,.749672,.324969,1,.650705,.837228,.356264]},{ColorSpace:"Lab",Name:"Haze_green",RGBPoints:[-1,1,.835294,.886275,-.87451,.937255,.756863,.870443,-.74902,.875817,.666376,.857807,-.623529,.778359,.583007,.808134,-.498039,.676253,.494118,.745098,-.372549,.561365,.390123,.682353,-.247059,.438344,.262745,.621496,-.121569,.321133,.141031,.558751,.00392157,.203922,.0217865,.495861,.129412,.265505,.129412,.433261,.254902,.311692,.255338,.37008,.380392,.356282,.377342,.310821,.505882,.39971,.488889,.258243,.631373,.442556,.604357,.205519,.756863,.48671,.71968,.152941,.882353,.529847,.830356,.100944,1,.572549,.933333,.054902]},{ColorSpace:"Lab",Name:"Haze_lime",RGBPoints:[-1,.704034,.784196,1,-.87451,.633111,.691418,.956078,-.74902,.564021,.600606,.912157,-.623529,.496827,.51189,.868235,-.498039,.43157,.425416,.824314,-.372549,.368248,.341347,.780392,-.247059,.306767,.259855,.736471,-.121569,.246862,.181069,.692549,.00392157,.191619,.109542,.648627,.129412,.257404,.194031,.604706,.254902,.321794,.278775,.560784,.380392,.387909,.364617,.516863,.505882,.456569,.451881,.472941,.631373,.527424,.540773,.42902,.756863,.599759,.631427,.385098,.882353,.673065,.723898,.341176,1,.742751,.812252,.3]},{ColorSpace:"RGB",Name:"Haze",RGBPoints:[-1,1,.835294,.996078,-.00392157,.023529,.141176,.498039,.00392157,.015686,.137255,.494118,1,.984314,.764706,0]},{ColorSpace:"Lab",Name:"Haze_cyan",RGBPoints:[-1,.956863,1,.835294,-.87451,.933188,.921714,.760784,-.74902,.870588,.803486,.671605,-.623529,.807843,.684096,.583297,-.498039,.745098,.569208,.494118,-.372549,.682353,.437763,.390123,-.247059,.621496,.288163,.262745,-.121569,.558751,.144517,.141031,.00392157,.495861,.0217865,.0413943,.129412,.433261,.137255,.129412,.254902,.37008,.263181,.255338,.380392,.306318,.381845,.372694,.505882,.243137,.503994,.494263,.631373,.180392,.629484,.619753,.756863,.117647,.754975,.747131,.882353,.054902,.876398,.866812,1,0,.988235,.976471]},{ColorSpace:"Lab",Name:"nic_Edge",RGBPoints:[-1,.191208,.191208,.191208,-.87451,.239484,.00545035,.614821,-.74902,.220593,.0617459,.863547,-.623529,.17509,.278988,.97794,-.498039,.143526,.576069,.998553,-.372549,.166456,.871883,.96594,-.247059,.376202,.993555,.981833,-.121569,.681996,.991297,.999239,.00392157,.954172,.952734,.94374,.129412,.999735,.99301,.662896,.254902,.979399,.991466,.357973,.380392,.968771,.854967,.162659,.505882,.999245,.556697,.144323,.631373,.973959,.26223,.177946,.756863,.852358,.0526707,.222974,.882353,.593889,.00912724,.238855,1,.191208,.191208,.191208]},{ColorSpace:"Lab",Name:"erdc_iceFire_H",RGBPoints:[-1,405432e-12,0,590122e-11,-.87451,0,.120401,.302675,-.74902,0,.216583,.524574,-.623529,.0552475,.345025,.6595,-.498039,.128047,.492588,.720288,-.372549,.188955,.641309,.792092,-.247059,.327673,.784935,.873434,-.121569,.60824,.892164,.935547,.00392157,.881371,.912178,.818099,.129412,.951407,.835621,.449279,.254902,.904481,.690489,0,.380392,.85407,.510864,0,.505882,.777093,.33018,88199e-8,.631373,.672862,.139087,.00269398,.756863,.508815,0,0,.882353,.299417,366289e-9,547829e-9,1,.0157519,.00332021,455569e-13]},{ColorSpace:"Lab",Name:"erdc_iceFire_L",RGBPoints:[-1,.870485,.913768,.832905,-.87451,.586919,.887865,.934003,-.74902,.31583,.776442,.867858,-.623529,.18302,.632034,.787722,-.498039,.117909,.484134,.713825,-.372549,.0507239,.335979,.654741,-.247059,0,.209874,.511832,-.121569,0,.114689,.28935,.00392157,.0157519,.00332021,455569e-13,.129412,.312914,0,0,.254902,.520865,0,0,.380392,.680105,.15255,.0025996,.505882,.785109,.339479,797922e-9,.631373,.857354,.522494,0,.756863,.910974,.699774,0,.882353,.951921,.842817,.478545,1,.881371,.912178,.818099]},{ColorSpace:"RGB",Name:"hsv",RGBPoints:[-1,1,0,0,-.666666,1,0,1,-.333333,0,0,1,0,0,1,1,.33333,0,1,0,.66666,1,1,0,1,1,0,0]},{ColorSpace:"Lab",Name:"hue_L60",RGBPoints:[-1,.964784,.400592,.349549,-.87451,.964915,.372498,.53785,-.74902,.892353,.401039,.759569,-.623529,.79263,.446956,.903017,-.498039,.682208,.49954,.966673,-.372549,.56392,.553082,.968836,-.247059,.442031,.606396,.901601,-.121569,.305499,.65701,.765784,.00392157,.197251,.687914,.620914,.129412,.193882,.701887,.472654,.254902,.249866,.706123,.320005,.380392,.35132,.697417,.202919,.505882,.498097,.669467,.125232,.631373,.637477,.626239,.107431,.756863,.762115,.56872,.155812,.882353,.889434,.481116,.240445,1,.964784,.400592,.349549]},{IndexedColors:[0,0,0,.8941176470588236,.1019607843137255,.1098039215686274,.2156862745098039,.4941176470588236,.7215686274509804,.3019607843137255,.6862745098039216,.2901960784313726,.596078431372549,.3058823529411765,.6392156862745098,1,.4980392156862745,0,.6509803921568628,.3372549019607843,.1568627450980392],Name:"Spectrum",NanColor:[.6509803921568628,.3372549019607843,.1568627450980392]},{IndexedColors:[.4745098039215686,.09019607843137255,.09019607843137255,.7098039215686275,.00392156862745098,.00392156862745098,.9372549019607843,.2784313725490196,.09803921568627451,.9764705882352941,.5137254901960784,.1411764705882353,1,.7058823529411765,0,1,.8980392156862745,.02352941176470588],Name:"Warm",NanColor:[1,.8980392156862745,.02352941176470588]},{IndexedColors:[.4588235294117647,.6941176470588235,.00392156862745098,.3450980392156863,.5019607843137255,.1607843137254902,.3137254901960784,.8431372549019608,.7490196078431373,.1098039215686274,.5843137254901961,.803921568627451,.2313725490196079,.407843137254902,.6705882352941176,.6039215686274509,.407843137254902,1,.3725490196078431,.2,.5019607843137255],Name:"Cool",NanColor:[.3725490196078431,.2,.5019607843137255]},{IndexedColors:[.2313725490196079,.407843137254902,.6705882352941176,.1098039215686274,.5843137254901961,.803921568627451,.3058823529411765,.8509803921568627,.9176470588235294,.4509803921568628,.6039215686274509,.8352941176470589,.2588235294117647,.2392156862745098,.6627450980392157,.3137254901960784,.3294117647058823,.5294117647058824,.06274509803921569,.1647058823529412,.3215686274509804],Name:"Blues",NanColor:[.06274509803921569,.1647058823529412,.3215686274509804]},{IndexedColors:[.1098039215686274,.5843137254901961,.803921568627451,.2313725490196079,.407843137254902,.6705882352941176,.4,.2431372549019608,.7176470588235294,.6352941176470588,.3294117647058823,.8117647058823529,.8705882352941177,.3803921568627451,.807843137254902,.8627450980392157,.3803921568627451,.5843137254901961,.2392156862745098,.06274509803921569,.3215686274509804],Name:"Wild Flower",NanColor:[.2392156862745098,.06274509803921569,.3215686274509804]},{IndexedColors:[.396078431372549,.4862745098039216,.2156862745098039,.4588235294117647,.6941176470588235,.00392156862745098,.6980392156862745,.7294117647058823,.1882352941176471,1,.8980392156862745,.02352941176470588,1,.7058823529411765,0,.9764705882352941,.5137254901960784,.1411764705882353],Name:"Citrus",NanColor:[.9764705882352941,.5137254901960784,.1411764705882353]},{IndexedColors:[.4980392156862745,.2313725490196079,.03137254901960784,.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333,.1764705882352941,0,.2941176470588235],Name:"Brewer Diverging Purple-Orange (11)",NanColor:[.1764705882352941,0,.2941176470588235]},{IndexedColors:[.4980392156862745,.2313725490196079,.03137254901960784,.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333,.1764705882352941,0,.2941176470588235],Name:"Brewer Diverging Purple-Orange (10)",NanColor:[.1764705882352941,0,.2941176470588235]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (9)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (8)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.9450980392156862,.6392156862745098,.2509803921568627,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6,.5568627450980392,.7647058823529411,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (7)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.9450980392156862,.6392156862745098,.2509803921568627,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6,.5568627450980392,.7647058823529411,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (6)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.9019607843137255,.3803921568627451,.00392156862745098,.9921568627450981,.7215686274509804,.3882352941176471,.9686274509803922,.9686274509803922,.9686274509803922,.6980392156862745,.6705882352941176,.8235294117647058,.3686274509803922,.2352941176470588,.6],Name:"Brewer Diverging Purple-Orange (5)",NanColor:[.3686274509803922,.2352941176470588,.6]},{IndexedColors:[.9019607843137255,.3803921568627451,.00392156862745098,.9921568627450981,.7215686274509804,.3882352941176471,.6980392156862745,.6705882352941176,.8235294117647058,.3686274509803922,.2352941176470588,.6],Name:"Brewer Diverging Purple-Orange (4)",NanColor:[.3686274509803922,.2352941176470588,.6]},{IndexedColors:[.9450980392156862,.6392156862745098,.2509803921568627,.9686274509803922,.9686274509803922,.9686274509803922,.6,.5568627450980392,.7647058823529411],Name:"Brewer Diverging Purple-Orange (3)",NanColor:[.6,.5568627450980392,.7647058823529411]},{IndexedColors:[.6196078431372549,.00392156862745098,.2588235294117647,.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353,.3686274509803922,.3098039215686275,.6352941176470588],Name:"Brewer Diverging Spectral (11)",NanColor:[.3686274509803922,.3098039215686275,.6352941176470588]},{IndexedColors:[.6196078431372549,.00392156862745098,.2588235294117647,.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353,.3686274509803922,.3098039215686275,.6352941176470588],Name:"Brewer Diverging Spectral (10)",NanColor:[.3686274509803922,.3098039215686275,.6352941176470588]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (9)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (8)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9882352941176471,.5529411764705883,.3490196078431372,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6,.8352941176470589,.5803921568627451,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (7)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9882352941176471,.5529411764705883,.3490196078431372,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6,.8352941176470589,.5803921568627451,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (6)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8431372549019608,.09803921568627451,.1098039215686274,.9921568627450981,.6823529411764706,.3803921568627451,1,1,.7490196078431373,.6705882352941176,.8666666666666667,.6431372549019608,.1686274509803922,.5137254901960784,.7294117647058823],Name:"Brewer Diverging Spectral (5)",NanColor:[.1686274509803922,.5137254901960784,.7294117647058823]},{IndexedColors:[.8431372549019608,.09803921568627451,.1098039215686274,.9921568627450981,.6823529411764706,.3803921568627451,.6705882352941176,.8666666666666667,.6431372549019608,.1686274509803922,.5137254901960784,.7294117647058823],Name:"Brewer Diverging Spectral (4)",NanColor:[.1686274509803922,.5137254901960784,.7294117647058823]},{IndexedColors:[.9882352941176471,.5529411764705883,.3490196078431372,1,1,.7490196078431373,.6,.8352941176470589,.5803921568627451],Name:"Brewer Diverging Spectral (3)",NanColor:[.6,.8352941176470589,.5803921568627451]},{IndexedColors:[.3294117647058823,.1882352941176471,.0196078431372549,.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922,0,.2352941176470588,.1882352941176471],Name:"Brewer Diverging Brown-Blue-Green (11)",NanColor:[0,.2352941176470588,.1882352941176471]},{IndexedColors:[.3294117647058823,.1882352941176471,.0196078431372549,.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922,0,.2352941176470588,.1882352941176471],Name:"Brewer Diverging Brown-Blue-Green (10)",NanColor:[0,.2352941176470588,.1882352941176471]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (9)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (8)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.8470588235294118,.7019607843137254,.396078431372549,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.3529411764705883,.7058823529411765,.6745098039215687,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (7)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.8470588235294118,.7019607843137254,.396078431372549,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.3529411764705883,.7058823529411765,.6745098039215687,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (6)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.6509803921568628,.3803921568627451,.1019607843137255,.8745098039215686,.7607843137254902,.4901960784313725,.9607843137254902,.9607843137254902,.9607843137254902,.5019607843137255,.803921568627451,.7568627450980392,.00392156862745098,.5215686274509804,.4431372549019608],Name:"Brewer Diverging Brown-Blue-Green (5)",NanColor:[.00392156862745098,.5215686274509804,.4431372549019608]},{IndexedColors:[.6509803921568628,.3803921568627451,.1019607843137255,.8745098039215686,.7607843137254902,.4901960784313725,.5019607843137255,.803921568627451,.7568627450980392,.00392156862745098,.5215686274509804,.4431372549019608],Name:"Brewer Diverging Brown-Blue-Green (4)",NanColor:[.00392156862745098,.5215686274509804,.4431372549019608]},{IndexedColors:[.8470588235294118,.7019607843137254,.396078431372549,.9607843137254902,.9607843137254902,.9607843137254902,.3529411764705883,.7058823529411765,.6745098039215687],Name:"Brewer Diverging Brown-Blue-Green (3)",NanColor:[.3529411764705883,.7058823529411765,.6745098039215687]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8980392156862745,.9607843137254902,.9764705882352941,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.4274509803921568,.1725490196078431,0,.2666666666666667,.1058823529411765],Name:"Brewer Sequential Blue-Green (9)",NanColor:[0,.2666666666666667,.1058823529411765]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8980392156862745,.9607843137254902,.9764705882352941,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.3450980392156863,.1411764705882353],Name:"Brewer Sequential Blue-Green (8)",NanColor:[0,.3450980392156863,.1411764705882353]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.8,.9254901960784314,.9019607843137255,.8,.9254901960784314,.9019607843137255,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.3450980392156863,.1411764705882353],Name:"Brewer Sequential Blue-Green (7)",NanColor:[0,.3450980392156863,.1411764705882353]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.1725490196078431,.6352941176470588,.3725490196078431,0,.4274509803921568,.1725490196078431],Name:"Brewer Sequential Blue-Green (6)",NanColor:[0,.4274509803921568,.1725490196078431]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.6980392156862745,.8862745098039215,.8862745098039215,.4,.7607843137254902,.6431372549019608,.1725490196078431,.6352941176470588,.3725490196078431,0,.4274509803921568,.1725490196078431],Name:"Brewer Sequential Blue-Green (5)",NanColor:[0,.4274509803921568,.1725490196078431]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.6980392156862745,.8862745098039215,.8862745098039215,.4,.7607843137254902,.6431372549019608,.1372549019607843,.5450980392156862,.2705882352941176],Name:"Brewer Sequential Blue-Green (4)",NanColor:[.1372549019607843,.5450980392156862,.2705882352941176]},{IndexedColors:[.8980392156862745,.9607843137254902,.9764705882352941,.6,.8470588235294118,.788235294117647,.1725490196078431,.6352941176470588,.3725490196078431],Name:"Brewer Sequential Blue-Green (3)",NanColor:[.1725490196078431,.6352941176470588,.3725490196078431]},{IndexedColors:[1,1,.8980392156862745,1,.9686274509803922,.7372549019607844,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.6,.203921568627451,.01568627450980392,.4,.1450980392156863,.02352941176470588],Name:"Brewer Sequential Yellow-Orange-Brown (9)",NanColor:[.4,.1450980392156863,.02352941176470588]},{IndexedColors:[1,1,.8980392156862745,1,.9686274509803922,.7372549019607844,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.5490196078431373,.1764705882352941,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (8)",NanColor:[.5490196078431373,.1764705882352941,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.5490196078431373,.1764705882352941,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (7)",NanColor:[.5490196078431373,.1764705882352941,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.8509803921568627,.3725490196078431,.05490196078431372,.6,.203921568627451,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (6)",NanColor:[.6,.203921568627451,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8509803921568627,.5568627450980392,.996078431372549,.6,.1607843137254902,.8509803921568627,.3725490196078431,.05490196078431372,.6,.203921568627451,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (5)",NanColor:[.6,.203921568627451,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8509803921568627,.5568627450980392,.996078431372549,.6,.1607843137254902,.8,.2980392156862745,.00784313725490196],Name:"Brewer Sequential Yellow-Orange-Brown (4)",NanColor:[.8,.2980392156862745,.00784313725490196]},{IndexedColors:[1,.9686274509803922,.7372549019607844,.996078431372549,.7686274509803922,.3098039215686275,.8509803921568627,.3725490196078431,.05490196078431372],Name:"Brewer Sequential Yellow-Orange-Brown (3)",NanColor:[.8509803921568627,.3725490196078431,.05490196078431372]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8784313725490196,.9254901960784314,.9568627450980393,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.5058823529411764,.05882352941176471,.4862745098039216,.3019607843137255,0,.2941176470588235],Name:"Brewer Sequential Blue-Purple (9)",NanColor:[.3019607843137255,0,.2941176470588235]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8784313725490196,.9254901960784314,.9568627450980393,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.4313725490196079,.00392156862745098,.4196078431372549],Name:"Brewer Sequential Blue-Purple (8)",NanColor:[.4313725490196079,.00392156862745098,.4196078431372549]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.4313725490196079,.00392156862745098,.4196078431372549],Name:"Brewer Sequential Blue-Purple (7)",NanColor:[.4313725490196079,.00392156862745098,.4196078431372549]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.3372549019607843,.6549019607843137,.5058823529411764,.05882352941176471,.4862745098039216],Name:"Brewer Sequential Blue-Purple (6)",NanColor:[.5058823529411764,.05882352941176471,.4862745098039216]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7019607843137254,.803921568627451,.8901960784313725,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.3372549019607843,.6549019607843137,.5058823529411764,.05882352941176471,.4862745098039216],Name:"Brewer Sequential Blue-Purple (5)",NanColor:[.5058823529411764,.05882352941176471,.4862745098039216]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7019607843137254,.803921568627451,.8901960784313725,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.2549019607843137,.615686274509804],Name:"Brewer Sequential Blue-Purple (4)",NanColor:[.5333333333333333,.2549019607843137,.615686274509804]},{IndexedColors:[.8784313725490196,.9254901960784314,.9568627450980393,.6196078431372549,.7372549019607844,.8549019607843137,.5333333333333333,.3372549019607843,.6549019607843137],Name:"Brewer Sequential Blue-Purple (3)",NanColor:[.5333333333333333,.3372549019607843,.6549019607843137]},{IndexedColors:[.4980392156862745,.788235294117647,.4980392156862745,.7450980392156863,.6823529411764706,.8313725490196079,.9921568627450981,.7529411764705882,.5254901960784314,1,1,.6,.2196078431372549,.4235294117647059,.6901960784313725,.9411764705882353,.00784313725490196,.4980392156862745,.7490196078431373,.3568627450980392,.09019607843137255,.4,.4,.4],Name:"Brewer Qualitative Accent",NanColor:[.4,.4,.4]},{IndexedColors:[.1058823529411765,.6196078431372549,.4666666666666667,.8509803921568627,.3725490196078431,.00784313725490196,.4588235294117647,.4392156862745098,.7019607843137254,.9058823529411765,.1607843137254902,.5411764705882353,.4,.6509803921568628,.1176470588235294,.9019607843137255,.6705882352941176,.00784313725490196,.6509803921568628,.4627450980392157,.1137254901960784,.4,.4,.4],Name:"Brewer Qualitative Dark2",NanColor:[.4,.4,.4]},{IndexedColors:[.4,.7607843137254902,.6470588235294118,.9882352941176471,.5529411764705883,.3843137254901961,.5529411764705883,.6274509803921569,.796078431372549,.9058823529411765,.5411764705882353,.7647058823529411,.6509803921568628,.8470588235294118,.3294117647058823,1,.8509803921568627,.1843137254901961,.8980392156862745,.7686274509803922,.5803921568627451,.7019607843137254,.7019607843137254,.7019607843137254],Name:"Brewer Qualitative Set2",NanColor:[.7019607843137254,.7019607843137254,.7019607843137254]},{IndexedColors:[.7019607843137254,.8862745098039215,.803921568627451,.9921568627450981,.803921568627451,.6745098039215687,.796078431372549,.8352941176470589,.9098039215686274,.9568627450980393,.792156862745098,.8941176470588236,.9019607843137255,.9607843137254902,.788235294117647,1,.9490196078431372,.6823529411764706,.9450980392156862,.8862745098039215,.8,.8,.8,.8],Name:"Brewer Qualitative Pastel2",NanColor:[.8,.8,.8]},{IndexedColors:[.984313725490196,.7058823529411765,.6823529411764706,.7019607843137254,.803921568627451,.8901960784313725,.8,.9215686274509803,.7725490196078432,.8705882352941177,.796078431372549,.8941176470588236,.996078431372549,.8509803921568627,.6509803921568628,1,1,.8,.8980392156862745,.8470588235294118,.7411764705882353,.9921568627450981,.8549019607843137,.9254901960784314,.9490196078431372,.9490196078431372,.9490196078431372],Name:"Brewer Qualitative Pastel1",NanColor:[.9490196078431372,.9490196078431372,.9490196078431372]},{IndexedColors:[.8941176470588236,.1019607843137255,.1098039215686274,.2156862745098039,.4941176470588236,.7215686274509804,.3019607843137255,.6862745098039216,.2901960784313726,.596078431372549,.3058823529411765,.6392156862745098,1,.4980392156862745,0,1,1,.2,.6509803921568628,.3372549019607843,.1568627450980392,.9686274509803922,.5058823529411764,.7490196078431373,.6,.6,.6],Name:"Brewer Qualitative Set1",NanColor:[.6,.6,.6]},{IndexedColors:[.6509803921568628,.807843137254902,.8901960784313725,.1215686274509804,.4705882352941176,.7058823529411765,.6980392156862745,.8745098039215686,.5411764705882353,.2,.6274509803921569,.1725490196078431,.984313725490196,.6039215686274509,.6,.8901960784313725,.1019607843137255,.1098039215686274,.9921568627450981,.7490196078431373,.4352941176470588,1,.4980392156862745,0,.792156862745098,.6980392156862745,.8392156862745098,.4156862745098039,.2392156862745098,.6039215686274509,1,1,.6],Name:"Brewer Qualitative Paired",NanColor:[1,1,.6]},{IndexedColors:[.5529411764705883,.8274509803921568,.7803921568627451,1,1,.7019607843137254,.7450980392156863,.7294117647058823,.8549019607843137,.984313725490196,.5019607843137255,.4470588235294118,.5019607843137255,.6941176470588235,.8274509803921568,.9921568627450981,.7058823529411765,.3843137254901961,.7019607843137254,.8705882352941177,.4117647058823529,.9882352941176471,.803921568627451,.8980392156862745,.8509803921568627,.8509803921568627,.8509803921568627,.7372549019607844,.5019607843137255,.7411764705882353,.8,.9215686274509803,.7725490196078432,1,.9294117647058824,.4352941176470588],Name:"Brewer Qualitative Set3",NanColor:[1,.9294117647058824,.4352941176470588]},{IndexedColors:[1,0,0,1,.862745,0,0,.695201,0],Name:"Traffic Lights",NanColor:[.803922,0,.803922]},{IndexedColors:[.908659,.604013,.581857,1,.862745,0,0,.695201,0],Name:"Traffic Lights For Deuteranopes",NanColor:[.803922,0,.803922]},{IndexedColors:[.4196078431372549,0,.07058823529411765,.9019607843137255,.9411764705882353,.0196078431372549,.01568627450980392,.6196078431372549,.00784313725490196],Name:"Traffic Lights For Deuteranopes 2",NanColor:[.803922,0,.803922]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Muted Blue-Green",NanColor:[.25,0,0],RGBPoints:[0,.109804,.27451,.301961,.02,.129412,.309804,.341176,.05,.14902,.341176,.380392,.1,.188235,.403922,.458824,.15,.227451,.447059,.521569,.2,.290196,.494118,.588235,.25,.368627,.552941,.670588,.3,.458824,.619608,.74902,.35,.588235,.713725,.85098,.4,.72549,.815686,.941176,.45,.831373,.882353,.980392,.475,.909804,.933333,1,.5,.980392,.984314,1,.5,.996078,1,.94902,.5,1,1,.980392,.5,.980392,.984314,1,.525,.972549,.988235,.890196,.55,.917647,.960784,.835294,.6,.835294,.921569,.772549,.65,.768627,.901961,.737255,.7,.670588,.831373,.654902,.75,.576471,.760784,.584314,.8,.498039,.678431,.521569,.85,.392157,.560784,.427451,.9,.294118,.45098,.333333,.95,.211765,.34902,.254902,1,.152941,.278431,.196078]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Green-Blue Asymmetric Divergent (62Blbc)",NanColor:[.25,0,0],RGBPoints:[0,.121569,.2,.145098,.05,.196078,.301961,.223529,.1,.258824,.4,.278431,.2,.341176,.54902,.341176,.25,.419608,.619608,.376471,.3,.545098,.701961,.392157,.35,.643137,.780392,.403922,.4,.729412,.819608,.45098,.45,.811765,.870588,.521569,.5,.898039,.909804,.564706,.55,.941176,.92549,.686275,.6,.960784,.94902,.776471,.64,1,1,1,.65,.890196,.988235,.972549,.7,.721569,.894118,.901961,.75,.631373,.823529,.839216,.8,.517647,.662745,.701961,.85,.384314,.494118,.54902,.9,.298039,.360784,.45098,.95,.223529,.25098,.34902,.99,.156863,.172549,.25098,1,.137255,.137255,.188235]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Asymmtrical Earth Tones (6_21b)",NanColor:[.25,0,0],RGBPoints:[0,.141176,.14902,.2,.05,.215686,.258824,.321569,.1,.243137,.368627,.380392,.15,.27451,.439216,.4,.2,.32549,.501961,.384314,.25,.403922,.6,.419608,.3,.486275,.701961,.454902,.35,.556863,.74902,.494118,.4,.670588,.8,.545098,.5,.854902,.901961,.631373,.55,.92549,.941176,.694118,.6,.960784,.94902,.776471,.65,.988235,.968627,.909804,.7,.839216,.815686,.772549,.75,.701961,.662745,.615686,.8,.6,.529412,.478431,.85,.501961,.403922,.360784,.9,.439216,.313725,.290196,1,.301961,.164706,.176471]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Yellow 15",NanColor:[.25,0,0],RGBPoints:[0,1,1,.988235,.002,1,1,.988235,.05,.984314,.988235,.843137,.1,.988235,.988235,.741176,.15,.980392,.968627,.654902,.2,.980392,.945098,.576471,.25,.968627,.905882,.486275,.3,.968627,.862745,.388235,.35,.960784,.803922,.286275,.4,.94902,.741176,.219608,.45,.941176,.678431,.14902,.5,.929412,.607843,.094118,.55,.921569,.545098,.054902,.6,.909804,.486275,.035294,.65,.890196,.411765,.019608,.7,.8,.305882,0,.75,.760784,.239216,0,.8,.678431,.180392,.011765,.85,.6,.121569,.023529,.9,.501961,.054902,.031373,.95,.4,.039216,.058824,1,.301961,.047059,.090196]},{ColorSpace:"Diverging",Name:"Magma (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.001462,466e-6,.013866,.003922,.002258,.001295,.018331,.007843,.003279,.002305,.023708,.011765,.004512,.00349,.029965,.015686,.00595,.004843,.03713,.019608,.007588,.006356,.044973,.023529,.009426,.008022,.052844,.027451,.011465,.009828,.06075,.031373,.013708,.011771,.068667,.035294,.016156,.01384,.076603,.039216,.018815,.016026,.084584,.043137,.021692,.01832,.09261,.047059,.024792,.020715,.100676,.05098,.028123,.023201,.108787,.054902,.031696,.025765,.116965,.058824,.03552,.028397,.125209,.062745,.039608,.03109,.133515,.066667,.04383,.03383,.141886,.070588,.048062,.036607,.150327,.07451,.05232,.039407,.158841,.078431,.056615,.04216,.167446,.082353,.060949,.044794,.176129,.086275,.06533,.047318,.184892,.090196,.069764,.049726,.193735,.094118,.074257,.052017,.20266,.098039,.078815,.054184,.211667,.101961,.083446,.056225,.220755,.105882,.088155,.058133,.229922,.109804,.092949,.059904,.239164,.113725,.097833,.061531,.248477,.117647,.102815,.06301,.257854,.121569,.107899,.064335,.267289,.12549,.113094,.065492,.276784,.129412,.118405,.066479,.286321,.133333,.123833,.067295,.295879,.137255,.12938,.067935,.305443,.141176,.135053,.068391,.315,.145098,.140858,.068654,.324538,.14902,.146785,.068738,.334011,.152941,.152839,.068637,.343404,.156863,.159018,.068354,.352688,.160784,.165308,.067911,.361816,.164706,.171713,.067305,.370771,.168627,.178212,.066576,.379497,.172549,.184801,.065732,.387973,.176471,.19146,.064818,.396152,.180392,.198177,.063862,.404009,.184314,.204935,.062907,.411514,.188235,.211718,.061992,.418647,.192157,.218512,.061158,.425392,.196078,.225302,.060445,.431742,.2,.232077,.059889,.437695,.203922,.238826,.059517,.443256,.207843,.245543,.059352,.448436,.211765,.25222,.059415,.453248,.215686,.258857,.059706,.45771,.219608,.265447,.060237,.46184,.223529,.271994,.060994,.46566,.227451,.278493,.061978,.46919,.231373,.284951,.063168,.472451,.235294,.291366,.064553,.475462,.239216,.29774,.066117,.478243,.243137,.304081,.067835,.480812,.247059,.310382,.069702,.483186,.25098,.316654,.07169,.48538,.254902,.322899,.073782,.487408,.258824,.329114,.075972,.489287,.262745,.335308,.078236,.491024,.266667,.341482,.080564,.492631,.270588,.347636,.082946,.494121,.27451,.353773,.085373,.495501,.278431,.359898,.087831,.496778,.282353,.366012,.090314,.49796,.286275,.372116,.092816,.499053,.290196,.378211,.095332,.500067,.294118,.384299,.097855,.501002,.298039,.390384,.100379,.501864,.301961,.396467,.102902,.502658,.305882,.402548,.10542,.503386,.309804,.408629,.10793,.504052,.313725,.414709,.110431,.504662,.317647,.420791,.11292,.505215,.321569,.426877,.115395,.505714,.32549,.432967,.117855,.50616,.329412,.439062,.120298,.506555,.333333,.445163,.122724,.506901,.337255,.451271,.125132,.507198,.341176,.457386,.127522,.507448,.345098,.463508,.129893,.507652,.34902,.46964,.132245,.507809,.352941,.47578,.134577,.507921,.356863,.481929,.136891,.507989,.360784,.488088,.139186,.508011,.364706,.494258,.141462,.507988,.368627,.500438,.143719,.50792,.372549,.506629,.145958,.507806,.376471,.512831,.148179,.507648,.380392,.519045,.150383,.507443,.384314,.52527,.152569,.507192,.388235,.531507,.154739,.506895,.392157,.537755,.156894,.506551,.396078,.544015,.159033,.506159,.4,.550287,.161158,.505719,.403922,.556571,.163269,.50523,.407843,.562866,.165368,.504692,.411765,.569172,.167454,.504105,.415686,.57549,.16953,.503466,.419608,.581819,.171596,.502777,.423529,.588158,.173652,.502035,.427451,.594508,.175701,.501241,.431373,.600868,.177743,.500394,.435294,.607238,.179779,.499492,.439216,.613617,.181811,.498536,.443137,.620005,.18384,.497524,.447059,.626401,.185867,.496456,.45098,.632805,.187893,.495332,.454902,.639216,.189921,.49415,.458824,.645633,.191952,.49291,.462745,.652056,.193986,.491611,.466667,.658483,.196027,.490253,.470588,.664915,.198075,.488836,.47451,.671349,.200133,.487358,.478431,.677786,.202203,.485819,.482353,.684224,.204286,.484219,.486275,.690661,.206384,.482558,.490196,.697098,.208501,.480835,.494118,.703532,.210638,.479049,.498039,.709962,.212797,.477201,.501961,.716387,.214982,.47529,.505882,.722805,.217194,.473316,.509804,.729216,.219437,.471279,.513725,.735616,.221713,.46918,.517647,.742004,.224025,.467018,.521569,.748378,.226377,.464794,.52549,.754737,.228772,.462509,.529412,.761077,.231214,.460162,.533333,.767398,.233705,.457755,.537255,.773695,.236249,.455289,.541176,.779968,.238851,.452765,.545098,.786212,.241514,.450184,.54902,.792427,.244242,.447543,.552941,.798608,.24704,.444848,.556863,.804752,.249911,.442102,.560784,.810855,.252861,.439305,.564706,.816914,.255895,.436461,.568627,.822926,.259016,.433573,.572549,.828886,.262229,.430644,.576471,.834791,.26554,.427671,.580392,.840636,.268953,.424666,.584314,.846416,.272473,.421631,.588235,.852126,.276106,.418573,.592157,.857763,.279857,.415496,.596078,.86332,.283729,.412403,.6,.868793,.287728,.409303,.603922,.874176,.291859,.406205,.607843,.879464,.296125,.403118,.611765,.884651,.30053,.400047,.615686,.889731,.305079,.397002,.619608,.8947,.309773,.393995,.623529,.899552,.314616,.391037,.627451,.904281,.31961,.388137,.631373,.908884,.324755,.385308,.635294,.913354,.330052,.382563,.639216,.917689,.3355,.379915,.643137,.921884,.341098,.377376,.647059,.925937,.346844,.374959,.65098,.929845,.352734,.372677,.654902,.933606,.358764,.370541,.658824,.937221,.364929,.368567,.662745,.940687,.371224,.366762,.666667,.944006,.377643,.365136,.670588,.94718,.384178,.363701,.67451,.95021,.39082,.362468,.678431,.953099,.397563,.361438,.682353,.955849,.4044,.360619,.686275,.958464,.411324,.360014,.690196,.960949,.418323,.35963,.694118,.96331,.42539,.359469,.698039,.965549,.432519,.359529,.701961,.967671,.439703,.35981,.705882,.96968,.446936,.360311,.709804,.971582,.45421,.36103,.713725,.973381,.46152,.361965,.717647,.975082,.468861,.363111,.721569,.97669,.476226,.364466,.72549,.97821,.483612,.366025,.729412,.979645,.491014,.367783,.733333,.981,.498428,.369734,.737255,.982279,.505851,.371874,.741176,.983485,.51328,.374198,.745098,.984622,.520713,.376698,.74902,.985693,.528148,.379371,.752941,.9867,.535582,.38221,.756863,.987646,.543015,.38521,.760784,.988533,.550446,.388365,.764706,.989363,.557873,.391671,.768627,.990138,.565296,.395122,.772549,.990871,.572706,.398714,.776471,.991558,.580107,.402441,.780392,.992196,.587502,.406299,.784314,.992785,.594891,.410283,.788235,.993326,.602275,.41439,.792157,.993834,.609644,.418613,.796078,.994309,.616999,.42295,.8,.994738,.62435,.427397,.803922,.995122,.631696,.431951,.807843,.99548,.639027,.436607,.811765,.99581,.646344,.441361,.815686,.996096,.653659,.446213,.819608,.996341,.660969,.45116,.823529,.99658,.668256,.456192,.827451,.996775,.675541,.461314,.831373,.996925,.682828,.466526,.835294,.997077,.690088,.471811,.839216,.997186,.697349,.477182,.843137,.997254,.704611,.482635,.847059,.997325,.711848,.488154,.85098,.997351,.719089,.493755,.854902,.997351,.726324,.499428,.858824,.997341,.733545,.505167,.862745,.997285,.740772,.510983,.866667,.997228,.747981,.516859,.870588,.997138,.75519,.522806,.87451,.997019,.762398,.528821,.878431,.996898,.769591,.534892,.882353,.996727,.776795,.541039,.886275,.996571,.783977,.547233,.890196,.996369,.791167,.553499,.894118,.996162,.798348,.55982,.898039,.995932,.805527,.566202,.901961,.99568,.812706,.572645,.905882,.995424,.819875,.57914,.909804,.995131,.827052,.585701,.913725,.994851,.834213,.592307,.917647,.994524,.841387,.598983,.921569,.994222,.84854,.605696,.92549,.993866,.855711,.612482,.929412,.993545,.862859,.619299,.933333,.99317,.870024,.626189,.937255,.992831,.877168,.633109,.941176,.99244,.88433,.640099,.945098,.992089,.89147,.647116,.94902,.991688,.898627,.654202,.952941,.991332,.905763,.661309,.956863,.99093,.912915,.668481,.960784,.99057,.920049,.675675,.964706,.990175,.927196,.682926,.968627,.989815,.934329,.690198,.972549,.989434,.94147,.697519,.976471,.989077,.948604,.704863,.980392,.988717,.955742,.712242,.984314,.988367,.962878,.719649,.988235,.988033,.970012,.727077,.992157,.987691,.977154,.734536,.996078,.987387,.984288,.742002,1,.987053,.991438,.749504]},{ColorSpace:"Diverging",Name:"Inferno (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.001462,466e-6,.013866,.003922,.002267,.00127,.01857,.007843,.003299,.002249,.024239,.011765,.004547,.003392,.030909,.015686,.006006,.004692,.038558,.019608,.007676,.006136,.046836,.023529,.009561,.007713,.055143,.027451,.011663,.009417,.06346,.031373,.013995,.011225,.071862,.035294,.016561,.013136,.080282,.039216,.019373,.015133,.088767,.043137,.022447,.017199,.097327,.047059,.025793,.019331,.10593,.05098,.029432,.021503,.114621,.054902,.033385,.023702,.123397,.058824,.037668,.025921,.132232,.062745,.042253,.028139,.141141,.066667,.046915,.030324,.150164,.070588,.051644,.032474,.159254,.07451,.056449,.034569,.168414,.078431,.06134,.03659,.177642,.082353,.066331,.038504,.186962,.086275,.071429,.040294,.196354,.090196,.076637,.041905,.205799,.094118,.081962,.043328,.215289,.098039,.087411,.044556,.224813,.101961,.09299,.045583,.234358,.105882,.098702,.046402,.243904,.109804,.104551,.047008,.25343,.113725,.110536,.047399,.262912,.117647,.116656,.047574,.272321,.121569,.122908,.047536,.281624,.12549,.129285,.047293,.290788,.129412,.135778,.046856,.299776,.133333,.142378,.046242,.308553,.137255,.149073,.045468,.317085,.141176,.15585,.044559,.325338,.145098,.162689,.043554,.333277,.14902,.169575,.042489,.340874,.152941,.176493,.041402,.348111,.156863,.183429,.040329,.354971,.160784,.190367,.039309,.361447,.164706,.197297,.0384,.367535,.168627,.204209,.037632,.373238,.172549,.211095,.03703,.378563,.176471,.217949,.036615,.383522,.180392,.224763,.036405,.388129,.184314,.231538,.036405,.3924,.188235,.238273,.036621,.396353,.192157,.244967,.037055,.400007,.196078,.25162,.037705,.403378,.2,.258234,.038571,.406485,.203922,.26481,.039647,.409345,.207843,.271347,.040922,.411976,.211765,.27785,.042353,.414392,.215686,.284321,.043933,.416608,.219608,.290763,.045644,.418637,.223529,.297178,.04747,.420491,.227451,.303568,.049396,.422182,.231373,.309935,.051407,.423721,.235294,.316282,.05349,.425116,.239216,.32261,.055634,.426377,.243137,.328921,.057827,.427511,.247059,.335217,.06006,.428524,.25098,.3415,.062325,.429425,.254902,.347771,.064616,.430217,.258824,.354032,.066925,.430906,.262745,.360284,.069247,.431497,.266667,.366529,.071579,.431994,.270588,.372768,.073915,.4324,.27451,.379001,.076253,.432719,.278431,.385228,.078591,.432955,.282353,.391453,.080927,.433109,.286275,.397674,.083257,.433183,.290196,.403894,.08558,.433179,.294118,.410113,.087896,.433098,.298039,.416331,.090203,.432943,.301961,.422549,.092501,.432714,.305882,.428768,.09479,.432412,.309804,.434987,.097069,.432039,.313725,.441207,.099338,.431594,.317647,.447428,.101597,.43108,.321569,.453651,.103848,.430498,.32549,.459875,.106089,.429846,.329412,.4661,.108322,.429125,.333333,.472328,.110547,.428334,.337255,.478558,.112764,.427475,.341176,.484789,.114974,.426548,.345098,.491022,.117179,.425552,.34902,.497257,.119379,.424488,.352941,.503493,.121575,.423356,.356863,.50973,.123769,.422156,.360784,.515967,.12596,.420887,.364706,.522206,.12815,.419549,.368627,.528444,.130341,.418142,.372549,.534683,.132534,.416667,.376471,.54092,.134729,.415123,.380392,.547157,.136929,.413511,.384314,.553392,.139134,.411829,.388235,.559624,.141346,.410078,.392157,.565854,.143567,.408258,.396078,.572081,.145797,.406369,.4,.578304,.148039,.404411,.403922,.584521,.150294,.402385,.407843,.590734,.152563,.40029,.411765,.59694,.154848,.398125,.415686,.603139,.157151,.395891,.419608,.60933,.159474,.393589,.423529,.615513,.161817,.391219,.427451,.621685,.164184,.388781,.431373,.627847,.166575,.386276,.435294,.633998,.168992,.383704,.439216,.640135,.171438,.381065,.443137,.64626,.173914,.378359,.447059,.652369,.176421,.375586,.45098,.658463,.178962,.372748,.454902,.66454,.181539,.369846,.458824,.670599,.184153,.366879,.462745,.676638,.186807,.363849,.466667,.682656,.189501,.360757,.470588,.688653,.192239,.357603,.47451,.694627,.195021,.354388,.478431,.700576,.197851,.351113,.482353,.7065,.200728,.347777,.486275,.712396,.203656,.344383,.490196,.718264,.206636,.340931,.494118,.724103,.20967,.337424,.498039,.729909,.212759,.333861,.501961,.735683,.215906,.330245,.505882,.741423,.219112,.326576,.509804,.747127,.222378,.322856,.513725,.752794,.225706,.319085,.517647,.758422,.229097,.315266,.521569,.76401,.232554,.311399,.52549,.769556,.236077,.307485,.529412,.775059,.239667,.303526,.533333,.780517,.243327,.299523,.537255,.785929,.247056,.295477,.541176,.791293,.250856,.29139,.545098,.796607,.254728,.287264,.54902,.801871,.258674,.283099,.552941,.807082,.262692,.278898,.556863,.812239,.266786,.274661,.560784,.817341,.270954,.27039,.564706,.822386,.275197,.266085,.568627,.827372,.279517,.26175,.572549,.832299,.283913,.257383,.576471,.837165,.288385,.252988,.580392,.841969,.292933,.248564,.584314,.846709,.297559,.244113,.588235,.851384,.30226,.239636,.592157,.855992,.307038,.235133,.596078,.860533,.311892,.230606,.6,.865006,.316822,.226055,.603922,.869409,.321827,.221482,.607843,.873741,.326906,.216886,.611765,.878001,.33206,.212268,.615686,.882188,.337287,.207628,.619608,.886302,.342586,.202968,.623529,.890341,.347957,.198286,.627451,.894305,.353399,.193584,.631373,.898192,.358911,.18886,.635294,.902003,.364492,.184116,.639216,.905735,.37014,.17935,.643137,.90939,.375856,.174563,.647059,.912966,.381636,.169755,.65098,.916462,.387481,.164924,.654902,.919879,.393389,.16007,.658824,.923215,.399359,.155193,.662745,.92647,.405389,.150292,.666667,.929644,.411479,.145367,.670588,.932737,.417627,.140417,.67451,.935747,.423831,.13544,.678431,.938675,.430091,.130438,.682353,.941521,.436405,.125409,.686275,.944285,.442772,.120354,.690196,.946965,.449191,.115272,.694118,.949562,.45566,.110164,.698039,.952075,.462178,.105031,.701961,.954506,.468744,.099874,.705882,.956852,.475356,.094695,.709804,.959114,.482014,.089499,.713725,.961293,.488716,.084289,.717647,.963387,.495462,.079073,.721569,.965397,.502249,.073859,.72549,.967322,.509078,.068659,.729412,.969163,.515946,.063488,.733333,.970919,.522853,.058367,.737255,.97259,.529798,.053324,.741176,.974176,.53678,.048392,.745098,.975677,.543798,.043618,.74902,.977092,.55085,.03905,.752941,.978422,.557937,.034931,.756863,.979666,.565057,.031409,.760784,.980824,.572209,.028508,.764706,.981895,.579392,.02625,.768627,.982881,.586606,.024661,.772549,.983779,.593849,.02377,.776471,.984591,.601122,.023606,.780392,.985315,.608422,.024202,.784314,.985952,.61575,.025592,.788235,.986502,.623105,.027814,.792157,.986964,.630485,.030908,.796078,.987337,.63789,.034916,.8,.987622,.64532,.039886,.803922,.987819,.652773,.045581,.807843,.987926,.66025,.05175,.811765,.987945,.667748,.058329,.815686,.987874,.675267,.065257,.819608,.987714,.682807,.072489,.823529,.987464,.690366,.07999,.827451,.987124,.697944,.087731,.831373,.986694,.70554,.095694,.835294,.986175,.713153,.103863,.839216,.985566,.720782,.112229,.843137,.984865,.728427,.120785,.847059,.984075,.736087,.129527,.85098,.983196,.743758,.138453,.854902,.982228,.751442,.147565,.858824,.981173,.759135,.156863,.862745,.980032,.766837,.166353,.866667,.978806,.774545,.176037,.870588,.977497,.782258,.185923,.87451,.976108,.789974,.196018,.878431,.974638,.797692,.206332,.882353,.973088,.805409,.216877,.886275,.971468,.813122,.227658,.890196,.969783,.820825,.238686,.894118,.968041,.828515,.249972,.898039,.966243,.836191,.261534,.901961,.964394,.843848,.273391,.905882,.962517,.851476,.285546,.909804,.960626,.859069,.29801,.913725,.95872,.866624,.31082,.917647,.956834,.874129,.323974,.921569,.954997,.881569,.337475,.92549,.953215,.888942,.351369,.929412,.951546,.896226,.365627,.933333,.950018,.903409,.380271,.937255,.948683,.910473,.395289,.941176,.947594,.917399,.410665,.945098,.946809,.924168,.426373,.94902,.946392,.930761,.442367,.952941,.946403,.937159,.458592,.956863,.946903,.943348,.47497,.960784,.947937,.949318,.491426,.964706,.949545,.955063,.50786,.968627,.95174,.960587,.524203,.972549,.954529,.965896,.540361,.976471,.957896,.971003,.556275,.980392,.961812,.975924,.571925,.984314,.966249,.980678,.587206,.988235,.971162,.985282,.602154,.992157,.976511,.989753,.61676,.996078,.982257,.994109,.631017,1,.988362,.998364,.644924]},{ColorSpace:"Diverging",Name:"Plasma (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.050383,.029803,.527975,.003922,.063536,.028426,.533124,.007843,.075353,.027206,.538007,.011765,.086222,.026125,.542658,.015686,.096379,.025165,.547103,.019608,.10598,.024309,.551368,.023529,.115124,.023556,.555468,.027451,.123903,.022878,.559423,.031373,.132381,.022258,.56325,.035294,.140603,.021687,.566959,.039216,.148607,.021154,.570562,.043137,.156421,.020651,.574065,.047059,.16407,.020171,.577478,.05098,.171574,.019706,.580806,.054902,.17895,.019252,.584054,.058824,.186213,.018803,.587228,.062745,.193374,.018354,.59033,.066667,.200445,.017902,.593364,.070588,.207435,.017442,.596333,.07451,.21435,.016973,.599239,.078431,.221197,.016497,.602083,.082353,.227983,.016007,.604867,.086275,.234715,.015502,.607592,.090196,.241396,.014979,.610259,.094118,.248032,.014439,.612868,.098039,.254627,.013882,.615419,.101961,.261183,.013308,.617911,.105882,.267703,.012716,.620346,.109804,.274191,.012109,.622722,.113725,.280648,.011488,.625038,.117647,.287076,.010855,.627295,.121569,.293478,.010213,.62949,.12549,.299855,.009561,.631624,.129412,.30621,.008902,.633694,.133333,.312543,.008239,.6357,.137255,.318856,.007576,.63764,.141176,.32515,.006915,.639512,.145098,.331426,.006261,.641316,.14902,.337683,.005618,.643049,.152941,.343925,.004991,.64471,.156863,.35015,.004382,.646298,.160784,.356359,.003798,.64781,.164706,.362553,.003243,.649245,.168627,.368733,.002724,.650601,.172549,.374897,.002245,.651876,.176471,.381047,.001814,.653068,.180392,.387183,.001434,.654177,.184314,.393304,.001114,.655199,.188235,.399411,859e-6,.656133,.192157,.405503,678e-6,.656977,.196078,.41158,577e-6,.65773,.2,.417642,564e-6,.65839,.203922,.423689,646e-6,.658956,.207843,.429719,831e-6,.659425,.211765,.435734,.001127,.659797,.215686,.441732,.00154,.660069,.219608,.447714,.00208,.66024,.223529,.453677,.002755,.66031,.227451,.459623,.003574,.660277,.231373,.46555,.004545,.660139,.235294,.471457,.005678,.659897,.239216,.477344,.00698,.659549,.243137,.48321,.00846,.659095,.247059,.489055,.010127,.658534,.25098,.494877,.01199,.657865,.254902,.500678,.014055,.657088,.258824,.506454,.016333,.656202,.262745,.512206,.018833,.655209,.266667,.517933,.021563,.654109,.270588,.523633,.024532,.652901,.27451,.529306,.027747,.651586,.278431,.534952,.031217,.650165,.282353,.54057,.03495,.64864,.286275,.546157,.038954,.64701,.290196,.551715,.043136,.645277,.294118,.557243,.047331,.643443,.298039,.562738,.051545,.641509,.301961,.568201,.055778,.639477,.305882,.573632,.060028,.637349,.309804,.579029,.064296,.635126,.313725,.584391,.068579,.632812,.317647,.589719,.072878,.630408,.321569,.595011,.07719,.627917,.32549,.600266,.081516,.625342,.329412,.605485,.085854,.622686,.333333,.610667,.090204,.619951,.337255,.615812,.094564,.61714,.341176,.620919,.098934,.614257,.345098,.625987,.103312,.611305,.34902,.631017,.107699,.608287,.352941,.636008,.112092,.605205,.356863,.640959,.116492,.602065,.360784,.645872,.120898,.598867,.364706,.650746,.125309,.595617,.368627,.65558,.129725,.592317,.372549,.660374,.134144,.588971,.376471,.665129,.138566,.585582,.380392,.669845,.142992,.582154,.384314,.674522,.147419,.578688,.388235,.67916,.151848,.575189,.392157,.683758,.156278,.57166,.396078,.688318,.160709,.568103,.4,.69284,.165141,.564522,.403922,.697324,.169573,.560919,.407843,.701769,.174005,.557296,.411765,.706178,.178437,.553657,.415686,.710549,.182868,.550004,.419608,.714883,.187299,.546338,.423529,.719181,.191729,.542663,.427451,.723444,.196158,.538981,.431373,.72767,.200586,.535293,.435294,.731862,.205013,.531601,.439216,.736019,.209439,.527908,.443137,.740143,.213864,.524216,.447059,.744232,.218288,.520524,.45098,.748289,.222711,.516834,.454902,.752312,.227133,.513149,.458824,.756304,.231555,.509468,.462745,.760264,.235976,.505794,.466667,.764193,.240396,.502126,.470588,.76809,.244817,.498465,.47451,.771958,.249237,.494813,.478431,.775796,.253658,.491171,.482353,.779604,.258078,.487539,.486275,.783383,.2625,.483918,.490196,.787133,.266922,.480307,.494118,.790855,.271345,.476706,.498039,.794549,.27577,.473117,.501961,.798216,.280197,.469538,.505882,.801855,.284626,.465971,.509804,.805467,.289057,.462415,.513725,.809052,.293491,.45887,.517647,.812612,.297928,.455338,.521569,.816144,.302368,.451816,.52549,.819651,.306812,.448306,.529412,.823132,.311261,.444806,.533333,.826588,.315714,.441316,.537255,.830018,.320172,.437836,.541176,.833422,.324635,.434366,.545098,.836801,.329105,.430905,.54902,.840155,.33358,.427455,.552941,.843484,.338062,.424013,.556863,.846788,.342551,.420579,.560784,.850066,.347048,.417153,.564706,.853319,.351553,.413734,.568627,.856547,.356066,.410322,.572549,.85975,.360588,.406917,.576471,.862927,.365119,.403519,.580392,.866078,.36966,.400126,.584314,.869203,.374212,.396738,.588235,.872303,.378774,.393355,.592157,.875376,.383347,.389976,.596078,.878423,.387932,.3866,.6,.881443,.392529,.383229,.603922,.884436,.397139,.37986,.607843,.887402,.401762,.376494,.611765,.89034,.406398,.37313,.615686,.89325,.411048,.369768,.619608,.896131,.415712,.366407,.623529,.898984,.420392,.363047,.627451,.901807,.425087,.359688,.631373,.904601,.429797,.356329,.635294,.907365,.434524,.35297,.639216,.910098,.439268,.34961,.643137,.9128,.444029,.346251,.647059,.915471,.448807,.34289,.65098,.918109,.453603,.339529,.654902,.920714,.458417,.336166,.658824,.923287,.463251,.332801,.662745,.925825,.468103,.329435,.666667,.928329,.472975,.326067,.670588,.930798,.477867,.322697,.67451,.933232,.48278,.319325,.678431,.93563,.487712,.315952,.682353,.93799,.492667,.312575,.686275,.940313,.497642,.309197,.690196,.942598,.502639,.305816,.694118,.944844,.507658,.302433,.698039,.947051,.512699,.299049,.701961,.949217,.517763,.295662,.705882,.951344,.52285,.292275,.709804,.953428,.52796,.288883,.713725,.95547,.533093,.28549,.717647,.957469,.53825,.282096,.721569,.959424,.543431,.278701,.72549,.961336,.548636,.275305,.729412,.963203,.553865,.271909,.733333,.965024,.559118,.268513,.737255,.966798,.564396,.265118,.741176,.968526,.5697,.261721,.745098,.970205,.575028,.258325,.74902,.971835,.580382,.254931,.752941,.973416,.585761,.25154,.756863,.974947,.591165,.248151,.760784,.976428,.596595,.244767,.764706,.977856,.602051,.241387,.768627,.979233,.607532,.238013,.772549,.980556,.613039,.234646,.776471,.981826,.618572,.231287,.780392,.983041,.624131,.227937,.784314,.984199,.629718,.224595,.788235,.985301,.63533,.221265,.792157,.986345,.640969,.217948,.796078,.987332,.646633,.214648,.8,.98826,.652325,.211364,.803922,.989128,.658043,.2081,.807843,.989935,.663787,.204859,.811765,.990681,.669558,.201642,.815686,.991365,.675355,.198453,.819608,.991985,.681179,.195295,.823529,.992541,.68703,.19217,.827451,.993032,.692907,.189084,.831373,.993456,.69881,.186041,.835294,.993814,.704741,.183043,.839216,.994103,.710698,.180097,.843137,.994324,.716681,.177208,.847059,.994474,.722691,.174381,.85098,.994553,.728728,.171622,.854902,.994561,.734791,.168938,.858824,.994495,.74088,.166335,.862745,.994355,.746995,.163821,.866667,.994141,.753137,.161404,.870588,.993851,.759304,.159092,.87451,.993482,.765499,.156891,.878431,.993033,.77172,.154808,.882353,.992505,.777967,.152855,.886275,.991897,.784239,.151042,.890196,.991209,.790537,.149377,.894118,.990439,.796859,.14787,.898039,.989587,.803205,.146529,.901961,.988648,.809579,.145357,.905882,.987621,.815978,.144363,.909804,.986509,.822401,.143557,.913725,.985314,.828846,.142945,.917647,.984031,.835315,.142528,.921569,.982653,.841812,.142303,.92549,.98119,.848329,.142279,.929412,.979644,.854866,.142453,.933333,.977995,.861432,.142808,.937255,.976265,.868016,.143351,.941176,.974443,.874622,.144061,.945098,.97253,.88125,.144923,.94902,.970533,.887896,.145919,.952941,.968443,.894564,.147014,.956863,.966271,.901249,.14818,.960784,.964021,.90795,.14937,.964706,.961681,.914672,.15052,.968627,.959276,.921407,.151566,.972549,.956808,.928152,.152409,.976471,.954287,.934908,.152921,.980392,.951726,.941671,.152925,.984314,.949151,.948435,.152178,.988235,.946602,.95519,.150328,.992157,.944152,.961916,.146861,.996078,.941896,.96859,.140956,1,.940015,.975158,.131326]},{ColorSpace:"Diverging",Name:"Viridis (matplotlib)",NanColor:[1,0,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Eric Firing",RGBPoints:[0,.267004,.004874,.329415,.003922,.26851,.009605,.335427,.007843,.269944,.014625,.341379,.011765,.271305,.019942,.347269,.015686,.272594,.025563,.353093,.019608,.273809,.031497,.358853,.023529,.274952,.037752,.364543,.027451,.276022,.044167,.370164,.031373,.277018,.050344,.375715,.035294,.277941,.056324,.381191,.039216,.278791,.062145,.386592,.043137,.279566,.067836,.391917,.047059,.280267,.073417,.397163,.05098,.280894,.078907,.402329,.054902,.281446,.08432,.407414,.058824,.281924,.089666,.412415,.062745,.282327,.094955,.417331,.066667,.282656,.100196,.42216,.070588,.28291,.105393,.426902,.07451,.283091,.110553,.431554,.078431,.283197,.11568,.436115,.082353,.283229,.120777,.440584,.086275,.283187,.125848,.44496,.090196,.283072,.130895,.449241,.094118,.282884,.13592,.453427,.098039,.282623,.140926,.457517,.101961,.28229,.145912,.46151,.105882,.281887,.150881,.465405,.109804,.281412,.155834,.469201,.113725,.280868,.160771,.472899,.117647,.280255,.165693,.476498,.121569,.279574,.170599,.479997,.12549,.278826,.17549,.483397,.129412,.278012,.180367,.486697,.133333,.277134,.185228,.489898,.137255,.276194,.190074,.493001,.141176,.275191,.194905,.496005,.145098,.274128,.199721,.498911,.14902,.273006,.20452,.501721,.152941,.271828,.209303,.504434,.156863,.270595,.214069,.507052,.160784,.269308,.218818,.509577,.164706,.267968,.223549,.512008,.168627,.26658,.228262,.514349,.172549,.265145,.232956,.516599,.176471,.263663,.237631,.518762,.180392,.262138,.242286,.520837,.184314,.260571,.246922,.522828,.188235,.258965,.251537,.524736,.192157,.257322,.25613,.526563,.196078,.255645,.260703,.528312,.2,.253935,.265254,.529983,.203922,.252194,.269783,.531579,.207843,.250425,.27429,.533103,.211765,.248629,.278775,.534556,.215686,.246811,.283237,.535941,.219608,.244972,.287675,.53726,.223529,.243113,.292092,.538516,.227451,.241237,.296485,.539709,.231373,.239346,.300855,.540844,.235294,.237441,.305202,.541921,.239216,.235526,.309527,.542944,.243137,.233603,.313828,.543914,.247059,.231674,.318106,.544834,.25098,.229739,.322361,.545706,.254902,.227802,.326594,.546532,.258824,.225863,.330805,.547314,.262745,.223925,.334994,.548053,.266667,.221989,.339161,.548752,.270588,.220057,.343307,.549413,.27451,.21813,.347432,.550038,.278431,.21621,.351535,.550627,.282353,.214298,.355619,.551184,.286275,.212395,.359683,.55171,.290196,.210503,.363727,.552206,.294118,.208623,.367752,.552675,.298039,.206756,.371758,.553117,.301961,.204903,.375746,.553533,.305882,.203063,.379716,.553925,.309804,.201239,.38367,.554294,.313725,.19943,.387607,.554642,.317647,.197636,.391528,.554969,.321569,.19586,.395433,.555276,.32549,.1941,.399323,.555565,.329412,.192357,.403199,.555836,.333333,.190631,.407061,.556089,.337255,.188923,.41091,.556326,.341176,.187231,.414746,.556547,.345098,.185556,.41857,.556753,.34902,.183898,.422383,.556944,.352941,.182256,.426184,.55712,.356863,.180629,.429975,.557282,.360784,.179019,.433756,.55743,.364706,.177423,.437527,.557565,.368627,.175841,.44129,.557685,.372549,.174274,.445044,.557792,.376471,.172719,.448791,.557885,.380392,.171176,.45253,.557965,.384314,.169646,.456262,.55803,.388235,.168126,.459988,.558082,.392157,.166617,.463708,.558119,.396078,.165117,.467423,.558141,.4,.163625,.471133,.558148,.403922,.162142,.474838,.55814,.407843,.160665,.47854,.558115,.411765,.159194,.482237,.558073,.415686,.157729,.485932,.558013,.419608,.15627,.489624,.557936,.423529,.154815,.493313,.55784,.427451,.153364,.497,.557724,.431373,.151918,.500685,.557587,.435294,.150476,.504369,.55743,.439216,.149039,.508051,.55725,.443137,.147607,.511733,.557049,.447059,.14618,.515413,.556823,.45098,.144759,.519093,.556572,.454902,.143343,.522773,.556295,.458824,.141935,.526453,.555991,.462745,.140536,.530132,.555659,.466667,.139147,.533812,.555298,.470588,.13777,.537492,.554906,.47451,.136408,.541173,.554483,.478431,.135066,.544853,.554029,.482353,.133743,.548535,.553541,.486275,.132444,.552216,.553018,.490196,.131172,.555899,.552459,.494118,.129933,.559582,.551864,.498039,.128729,.563265,.551229,.501961,.127568,.566949,.550556,.505882,.126453,.570633,.549841,.509804,.125394,.574318,.549086,.513725,.124395,.578002,.548287,.517647,.123463,.581687,.547445,.521569,.122606,.585371,.546557,.52549,.121831,.589055,.545623,.529412,.121148,.592739,.544641,.533333,.120565,.596422,.543611,.537255,.120092,.600104,.54253,.541176,.119738,.603785,.5414,.545098,.119512,.607464,.540218,.54902,.119423,.611141,.538982,.552941,.119483,.614817,.537692,.556863,.119699,.61849,.536347,.560784,.120081,.622161,.534946,.564706,.120638,.625828,.533488,.568627,.12138,.629492,.531973,.572549,.122312,.633153,.530398,.576471,.123444,.636809,.528763,.580392,.12478,.640461,.527068,.584314,.126326,.644107,.525311,.588235,.128087,.647749,.523491,.592157,.130067,.651384,.521608,.596078,.132268,.655014,.519661,.6,.134692,.658636,.517649,.603922,.137339,.662252,.515571,.607843,.14021,.665859,.513427,.611765,.143303,.669459,.511215,.615686,.146616,.67305,.508936,.619608,.150148,.676631,.506589,.623529,.153894,.680203,.504172,.627451,.157851,.683765,.501686,.631373,.162016,.687316,.499129,.635294,.166383,.690856,.496502,.639216,.170948,.694384,.493803,.643137,.175707,.6979,.491033,.647059,.180653,.701402,.488189,.65098,.185783,.704891,.485273,.654902,.19109,.708366,.482284,.658824,.196571,.711827,.479221,.662745,.202219,.715272,.476084,.666667,.20803,.718701,.472873,.670588,.214,.722114,.469588,.67451,.220124,.725509,.466226,.678431,.226397,.728888,.462789,.682353,.232815,.732247,.459277,.686275,.239374,.735588,.455688,.690196,.24607,.73891,.452024,.694118,.252899,.742211,.448284,.698039,.259857,.745492,.444467,.701961,.266941,.748751,.440573,.705882,.274149,.751988,.436601,.709804,.281477,.755203,.432552,.713725,.288921,.758394,.428426,.717647,.296479,.761561,.424223,.721569,.304148,.764704,.419943,.72549,.311925,.767822,.415586,.729412,.319809,.770914,.411152,.733333,.327796,.77398,.40664,.737255,.335885,.777018,.402049,.741176,.344074,.780029,.397381,.745098,.35236,.783011,.392636,.74902,.360741,.785964,.387814,.752941,.369214,.788888,.382914,.756863,.377779,.791781,.377939,.760784,.386433,.794644,.372886,.764706,.395174,.797475,.367757,.768627,.404001,.800275,.362552,.772549,.412913,.803041,.357269,.776471,.421908,.805774,.35191,.780392,.430983,.808473,.346476,.784314,.440137,.811138,.340967,.788235,.449368,.813768,.335384,.792157,.458674,.816363,.329727,.796078,.468053,.818921,.323998,.8,.477504,.821444,.318195,.803922,.487026,.823929,.312321,.807843,.496615,.826376,.306377,.811765,.506271,.828786,.300362,.815686,.515992,.831158,.294279,.819608,.525776,.833491,.288127,.823529,.535621,.835785,.281908,.827451,.545524,.838039,.275626,.831373,.555484,.840254,.269281,.835294,.565498,.84243,.262877,.839216,.575563,.844566,.256415,.843137,.585678,.846661,.249897,.847059,.595839,.848717,.243329,.85098,.606045,.850733,.236712,.854902,.616293,.852709,.230052,.858824,.626579,.854645,.223353,.862745,.636902,.856542,.21662,.866667,.647257,.8584,.209861,.870588,.657642,.860219,.203082,.87451,.668054,.861999,.196293,.878431,.678489,.863742,.189503,.882353,.688944,.865448,.182725,.886275,.699415,.867117,.175971,.890196,.709898,.868751,.169257,.894118,.720391,.87035,.162603,.898039,.730889,.871916,.156029,.901961,.741388,.873449,.149561,.905882,.751884,.874951,.143228,.909804,.762373,.876424,.137064,.913725,.772852,.877868,.131109,.917647,.783315,.879285,.125405,.921569,.79376,.880678,.120005,.92549,.804182,.882046,.114965,.929412,.814576,.883393,.110347,.933333,.82494,.88472,.106217,.937255,.83527,.886029,.102646,.941176,.845561,.887322,.099702,.945098,.85581,.888601,.097452,.94902,.866013,.889868,.095953,.952941,.876168,.891125,.09525,.956863,.886271,.892374,.095374,.960784,.89632,.893616,.096335,.964706,.906311,.894855,.098125,.968627,.916242,.896091,.100717,.972549,.926106,.89733,.104071,.976471,.935904,.89857,.108131,.980392,.945636,.899815,.112838,.984314,.9553,.901065,.118128,.988235,.964894,.902323,.123941,.992157,.974417,.90359,.130215,.996078,.983868,.904867,.136897,1,.993248,.906157,.143936]},{ShowIndexedColorActiveValues:1,IndexedColors:[.07,.5,.7,1,1,1,.85,1,1,.8,.5,1,.76,1,0,1,.71,.71,.5,.5,.5,.05,.05,1,1,.05,.05,.7,1,1,.7,.89,.96,.67,.36,.95,.54,1,0,.75,.65,.65,.5,.6,.6,1,.5,0,1,1,.19,.12,.94,.12,.5,.82,.89,.56,.25,.83,.24,1,0,.9,.9,.9,.75,.76,.78,.65,.65,.67,.54,.6,.78,.61,.48,.78,.5,.48,.78,.44,.48,.78,.36,.48,.76,1,.48,.38,.49,.5,.69,.76,.56,.56,.4,.56,.56,.74,.5,.89,1,.63,0,.65,.16,.16,.36,.72,.82,.44,.18,.69,0,1,0,.58,1,1,.58,.88,.88,.45,.76,.79,.33,.71,.71,.23,.62,.62,.14,.56,.56,.04,.49,.55,0,.41,.52,.88,.88,1,1,.85,.56,.65,.46,.45,.4,.5,.5,.62,.39,.71,.83,.48,0,.58,0,.58,.26,.62,.69,.34,.09,.56,0,.79,0,.44,.83,1,1,1,.78,.85,1,.78,.78,1,.78,.64,1,.78,.56,1,.78,.38,1,.78,.27,1,.78,.19,1,.78,.12,1,.78,0,1,.61,0,.9,.46,0,.83,.32,0,.75,.22,0,.67,.14,.3,.76,1,.3,.65,1,.13,.58,.84,.15,.49,.67,.15,.4,.59,.09,.33,.53,.96,.93,.82,.8,.82,.12,.71,.71,.76,.65,.33,.3,.34,.35,.38,.62,.31,.71,.67,.36,0,.46,.31,.27,.26,.51,.59,.26,0,.4,0,.49,0,.44,.67,.98,0,.73,1,0,.63,1,0,.56,1,0,.5,1,0,.42,1,.33,.36,.95,.47,.36,.89,.54,.31,.89,.63,.21,.83,.7,.12,.83,.7,.12,.73,.7,.05,.65,.74,.05,.53,.78,0,.4,.8,0,.35,.82,0,.31,.85,0,.27,.88,0,.22,.9,0,.18,.91,0,.15,.92,0,.14,.93,0,.13,.94,0,.12,.95,0,.11,.96,0,.1,.97,0,.09,.98,0,.08,.99,0,.07,1,0,.06],Annotations:[0,"Xx",1,"H",2,"He",3,"Li",4,"Be",5,"B",6,"C",7,"N",8,"O",9,"F",10,"Ne",11,"Na",12,"Mg",13,"Al",14,"Si",15,"P",16,"S",17,"Cl",18,"Ar",19,"K",20,"Ca",21,"Sc",22,"Ti",23,"V",24,"Cr",25,"Mn",26,"Fe",27,"Co",28,"Ni",29,"Cu",30,"Zn",31,"Ga",32,"Ge",33,"As",34,"Se",35,"Br",36,"Kr",37,"Rb",38,"Sr",39,"Y",40,"Zr",41,"Nb",42,"Mo",43,"Tc",44,"Ru",45,"Rh",46,"Pd",47,"Ag",48,"Cd",49,"In",50,"Sn",51,"Sb",52,"Te",53,"I",54,"Xe",55,"Cs",56,"Ba",57,"La",58,"Ce",59,"Pr",60,"Nd",61,"Pm",62,"Sm",63,"Eu",64,"Gd",65,"Tb",66,"Dy",67,"Ho",68,"Er",69,"Tm",70,"Yb",71,"Lu",72,"Hf",73,"Ta",74,"W",75,"Re",76,"Os",77,"Ir",78,"Pt",79,"Au",80,"Hg",81,"Tl",82,"Pb",83,"Bi",84,"Po",85,"At",86,"Rn",87,"Fr",88,"Ra",89,"Ac",90,"Th",91,"Pa",92,"U",93,"Np",94,"Pu",95,"Am",96,"Cm",97,"Bk",98,"Cf",99,"Es",100,"Fm",101,"Md",102,"No",103,"Lr",104,"Rf",105,"Db",106,"Sg",107,"Bh",108,"Hs",109,"Mt",110,"Ds",111,"Rg",112,"Cn",113,"Uut",114,"Uuq",115,"Uup",116,"Uuh",117,"Uus",118,"Uuo"],Name:"BlueObeliskElements"}];const oi=Object.create(null);tU.filter(t=>t.RGBPoints).filter(t=>t.ColorSpace!=="CIELAB").forEach(t=>{oi[t.Name]=t});const ui=Object.keys(oi);ui.sort();function nU(t){return oi[t]}function rU(t){!t.RGBPoints||t.ColorSpace==="CIELAB"||(oi[t.Name]||(ui.push(t.Name),ui.sort()),oi[t.Name]=t)}function aU(t){const e=ui.indexOf(t);e>-1&&ui.splice(e,1),delete oi[t]}var wc={addPreset:rU,removePresetByName:aU,getPresetByName:nU,rgbPresetNames:ui};class pi{array;itemSize;count;normalized;usage;updateRange;version;needsUpdate;constructor(e,n,r=!1){this.array=e,this.itemSize=n,this.count=e.length/n,this.normalized=r,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.needsUpdate=!1}set(e,n){if(n.length!==this.itemSize)throw new Error(`Expected ${this.itemSize} values, got ${n.length}`);if(e<0||e>=this.count)throw new Error(`Index ${e} out of range [0, ${this.count-1}]`);const r=e*this.itemSize;for(let i=0;i<this.itemSize;i++)this.array[r+i]=n[i];return this.needsUpdate=!0,this}get(e){if(e<0||e>=this.count)throw new Error(`Index ${e} out of range [0, ${this.count-1}]`);const n=e*this.itemSize,r=[];for(let i=0;i<this.itemSize;i++)r.push(this.array[n+i]);return r}getX(e){if(e<0||e>=this.count)throw new Error(`Index ${e} out of range [0, ${this.count-1}]`);return this.array[e*this.itemSize]}getY(e){if(this.itemSize<2)throw new Error(`Item size is ${this.itemSize}, cannot get Y component`);return this.array[e*this.itemSize+1]}getZ(e){if(this.itemSize<3)throw new Error(`Item size is ${this.itemSize}, cannot get Z component`);return this.array[e*this.itemSize+2]}setComponent(e,n,r){if(e<0||e>=this.count)throw new Error(`Index ${e} out of range [0, ${this.count-1}]`);if(n<0||n>=this.itemSize)throw new Error(`Component ${n} out of range [0, ${this.itemSize-1}]`);return this.array[e*this.itemSize+n]=r,this.needsUpdate=!0,this}getComponent(e,n){if(e<0||e>=this.count)throw new Error(`Index ${e} out of range [0, ${this.count-1}]`);if(n<0||n>=this.itemSize)throw new Error(`Component ${n} out of range [0, ${this.itemSize-1}]`);return this.array[e*this.itemSize+n]}copy(e){return this.array=e.array.slice(),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.updateRange={...e.updateRange},this.version=e.version,this.needsUpdate=e.needsUpdate,this}copyAt(e,n,r){if(this.itemSize!==n.itemSize)throw new Error(`ItemSize mismatch: ${this.itemSize} vs ${n.itemSize}`);const i=n.get(r);return this.set(e,i),this}clone(){const e=this.array.constructor,n=new e(this.array);return new pi(n,this.itemSize,this.normalized)}setUsage(e){return this.usage=e,this}getByteLength(){return this.array.byteLength}forEach(e){for(let n=0;n<this.count;n++){const r=this.get(n);e(r,n)}return this}}class Wv{attributes={};positions=null;indices=null;constructor(e,n){e&&(this.positions=e),n&&(this.indices=n)}setPositions(e){return this.positions=e,this}getPositions(){return this.positions}setIndices(e){return this.indices=e,this}getIndices(){return this.indices}setAttribute(e,n){return this.attributes[e]=n,this}getAttribute(e){return this.attributes[e]}computeVertexNormals(){if(!this.positions)return console.warn("Cannot compute vertex normals: no position attribute found"),this;const e=this.positions,n=e.count,r=new Float32Array(n*3);let i=this.getAttribute("normal");i?(r.fill(0),i.array=r):(i=new iU(r,3),this.setAttribute("normal",i));const s=[0,0,0],u=[0,0,0],c=[0,0,0],l=[0,0,0],g=[0,0,0],v=[0,0,0],h=(E,S,x)=>{x[0]=E[1]*S[2]-E[2]*S[1],x[1]=E[2]*S[0]-E[0]*S[2],x[2]=E[0]*S[1]-E[1]*S[0]},y=(E,S,x)=>{x[0]=E[0]-S[0],x[1]=E[1]-S[1],x[2]=E[2]-S[2]},T=(E,S)=>{E[0]+=S[0],E[1]+=S[1],E[2]+=S[2]};if(this.indices){const E=this.indices.array,S=E.length/3;for(let x=0;x<S;x++){const m=E[x*3],M=E[x*3+1],R=E[x*3+2];s[0]=e.getComponent(m,0),s[1]=e.getComponent(m,1),s[2]=e.getComponent(m,2),u[0]=e.getComponent(M,0),u[1]=e.getComponent(M,1),u[2]=e.getComponent(M,2),c[0]=e.getComponent(R,0),c[1]=e.getComponent(R,1),c[2]=e.getComponent(R,2),y(u,s,l),y(c,s,g),h(l,g,v);const w=[r[m*3],r[m*3+1],r[m*3+2]],D=[r[M*3],r[M*3+1],r[M*3+2]],O=[r[R*3],r[R*3+1],r[R*3+2]];T(w,v),T(D,v),T(O,v),r[m*3]=w[0],r[m*3+1]=w[1],r[m*3+2]=w[2],r[M*3]=D[0],r[M*3+1]=D[1],r[M*3+2]=D[2],r[R*3]=O[0],r[R*3+1]=O[1],r[R*3+2]=O[2]}}else{const E=n/3;for(let S=0;S<E;S++){const x=S*3,m=S*3+1,M=S*3+2;s[0]=e.getComponent(x,0),s[1]=e.getComponent(x,1),s[2]=e.getComponent(x,2),u[0]=e.getComponent(m,0),u[1]=e.getComponent(m,1),u[2]=e.getComponent(m,2),c[0]=e.getComponent(M,0),c[1]=e.getComponent(M,1),c[2]=e.getComponent(M,2),y(u,s,l),y(c,s,g),h(l,g,v),r[x*3]=v[0],r[x*3+1]=v[1],r[x*3+2]=v[2],r[m*3]=v[0],r[m*3+1]=v[1],r[m*3+2]=v[2],r[M*3]=v[0],r[M*3+1]=v[1],r[M*3+2]=v[2]}}for(let E=0;E<n;E++){const S=r[E*3],x=r[E*3+1],m=r[E*3+2],M=Math.sqrt(S*S+x*x+m*m);M>0?(r[E*3]=S/M,r[E*3+1]=x/M,r[E*3+2]=m/M):(r[E*3]=0,r[E*3+1]=1,r[E*3+2]=0)}return i.needsUpdate=!0,this}}class iU extends pi{constructor(e,n,r=!1){const i=e instanceof Float32Array?e:new Float32Array(e);super(i,n,r)}}class jv extends pi{constructor(e,n,r=!1){const i=e instanceof Uint32Array?e:new Uint32Array(e);super(i,n,r)}}function sU(t,e,n){if(n<0||n>1)throw new Error(`Interpolation factor t must be between 0 and 1, got ${n}`);return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n,t[2]+(e[2]-t[2])*n]}function oU(t,e){if(t<0||t>1)throw new Error(`Value must be normalized to [0, 1], got ${t}`);if(Number.isNaN(t)&&e.NanColor)return e.NanColor;const n=e.RGBPoints;if(!n||n.length<4)throw new Error("Invalid preset: RGBPoints must have at least 4 values");const r=n.length/4;if(t<=n[0])return[n[1],n[2],n[3]];if(t>=n[(r-1)*4]){const i=(r-1)*4;return[n[i+1],n[i+2],n[i+3]]}for(let i=0;i<r-1;i++){const s=i*4,u=(i+1)*4,c=n[s],l=n[u];if(t>=c&&t<=l){const g=(t-c)/(l-c),v=[n[s+1],n[s+2],n[s+3]],h=[n[u+1],n[u+2],n[u+3]];return sU(v,h,g)}}return[.5,.5,.5]}function uU(t){const e=t.RGBPoints;if(!e||e.length<4)return t;const n=e.length/4;let r=e[0],i=e[0];for(let c=0;c<n;c++){const l=e[c*4];l<r&&(r=l),l>i&&(i=l)}if(r===0&&i===1)return t;const s=i-r;if(s===0)return t;const u=new Array(e.length);for(let c=0;c<n;c++){const l=c*4;u[l]=(e[l]-r)/s,u[l+1]=e[l+1],u[l+2]=e[l+2],u[l+3]=e[l+3]}return{...t,RGBPoints:u}}function Kv(t,e=256){const n=uU(t),r=[];for(let i=0;i<e;i++){const s=i/(e-1);r.push(oU(s,n))}return r}function Xv(t,e){if(t<0||t>1)throw new Error(`Value must be normalized to [0, 1], got ${t}`);if(Number.isNaN(t))return[.5,.5,.5];const n=Math.round(t*(e.length-1));return e[Math.min(n,e.length-1)]}const Yv={Name:"Rainbow",RGBPoints:[0,1,0,0,.2,1,.98,0,.4,0,1,.02,.6,0,.98,1,.8,.02,0,1,1,.96,0,1]};function cU(t,e,n,{min:r=void 0,max:i=void 0,preset:s=Yv,nbColors:u=256,smooth:c=!0,weldingEpsilon:l=1e-6}={}){return new fU(s,u,n,c,l).run(t,e,r,i)}class fU{attr;nodes_;segment_list_=[];vmin_=0;vmax_=1;defaultColor_=[0,0,0];lookupTable_=[];position_=[];index_=[];colors_=[];isoValues_=[];normals_=[];nnormals_;smooth_;weldingEpsilon_;get position(){return this.position_}get index(){return this.index_}get color(){return this.colors_}constructor(e,n,r,i=!0,s=1e-6){this.defaultColor_=[0,0,0],this.lookupTable_=Kv(e,n),this.isoValues_=r,this.smooth_=i,this.weldingEpsilon_=s}run(e,n,r,i){this.attr=n;const s=this.computeMinMax(this.attr);if(this.vmin_=r!==void 0?r:s[0],this.vmax_=i!==void 0?i:s[1],this.isoValues_.length===0)return{position:[],index:[],color:[],normal:[]};const c=e.getIndices().array;this.nodes_=e.getPositions(),this.nnormals_=e.getAttribute("normal"),this.nnormals_===void 0&&(e.computeVertexNormals(),this.nnormals_=e.getAttribute("normal"));for(let l=0;l<c.length;l+=3)this.classify(c[l],c[l+1],c[l+2]);return this.smooth_&&this.position_.length>0?{position:this.position_,index:this.index_,color:this.colors_,normal:this.normals_}:{position:this.position_,index:this.index_,color:this.colors_,normal:void 0}}computeMinMax(e){let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;for(const i of e)i<n&&(n=i),i>r&&(r=i);return[n,r]}normalizeAttr(e){return(e-this.vmin_)/(this.vmax_-this.vmin_)}getNode(e){return this.nodes_.get(e)}getNormal(e){return this.nnormals_.get(e)}getAttr(e){return this.attr[e]}getColorForValue(e){return Xv(e,this.lookupTable_)}classify(e,n,r){const i=new gU;i.v1=this.getAttr(e),i.p1=this.getNode(e),i.n1=this.getNormal(e),i.v2=this.getAttr(n),i.p2=this.getNode(n),i.n2=this.getNormal(n),i.v3=this.getAttr(r),i.p3=this.getNode(r),i.n3=this.getNormal(r);let s,u,c,l,g,v,h=0,y=0,T=0;if(i.v1<=i.v2&&i.v1<=i.v3)l=i.p1,h=i.v1,s=i.n1,i.v2<=i.v3?(g=i.p2,v=i.p3,y=i.v2,T=i.v3,u=i.n2,c=i.n3):(g=i.p3,v=i.p2,y=i.v3,T=i.v2,u=i.n3,c=i.n2,i.reversed=!0);else if(i.v2<=i.v1&&i.v2<=i.v3)l=i.p2,h=i.v2,s=i.n2,i.v1<=i.v3?(g=i.p1,v=i.p3,y=i.v1,T=i.v3,u=i.n1,c=i.n3,i.reversed=!0):(g=i.p3,v=i.p1,y=i.v3,T=i.v1,u=i.n3,c=i.n1);else if(i.v3<=i.v1&&i.v3<=i.v2)l=i.p3,h=i.v3,s=i.n3,i.v1<=i.v2?(g=i.p1,v=i.p2,y=i.v1,T=i.v2,u=i.n1,c=i.n2):(g=i.p2,v=i.p1,y=i.v2,T=i.v1,u=i.n2,c=i.n1,i.reversed=!0);else return;i.p1=l,i.p2=g,i.p3=v,i.v1=h,i.v2=y,i.v3=T,i.n1=s,i.n2=u,i.n3=c,this.createSegmentList(i),this.createPolygons(i)}createSegmentList(e){this.segment_list_=[],e.notIntersectedPolygonValue=this.vmin_;for(const n of this.isoValues_){if(n>=e.v3)break;n>e.v1?this.addSegment(n,e):e.notIntersectedPolygonValue=n}}addSegment(e,n){const r=new lU;r.iso=e;const i=n.v1,s=n.v2,u=n.v3,c=n.p1,l=n.p2,g=n.p3;if(e<n.v2){const v=_u(i,s,e),h=_u(i,u,e);r.p1=sa(c,l,v),r.p2=sa(c,g,h),r.n1=sa(n.n1,n.n2,v),r.n2=sa(n.n1,n.n3,h)}else{const v=_u(s,u,e),h=_u(i,u,e);r.p1=sa(l,g,v),r.p2=sa(c,g,h),r.n1=sa(n.n2,n.n3,v),r.n2=sa(n.n1,n.n3,h)}this.segment_list_.push(r)}createPolygons(e){if((e.v1<this.vmin_||e.v1>this.vmax_)&&(e.v2<this.vmin_||e.v2>this.vmax_)&&(e.v3<this.vmin_||e.v3>this.vmax_))return;const n=i=>[-i[0],-i[1],-i[2]];let r=!1;if(e.reversed){if(this.segment_list_.length===0){this.addTri(e.p1,e.p3,e.p2,e.n1,e.n3,e.n2,e.notIntersectedPolygonValue);return}let i=u6(this.segment_list_);i.iso<e.v2?this.addTri(e.p1,i.p2,i.p1,e.n1,i.n2,i.n1,e.notIntersectedPolygonValue):(r=!0,this.addQuad(e.p1,i.p2,i.p1,e.p2,e.n1,i.n2,i.n1,e.n2,e.notIntersectedPolygonValue));for(let s=1;s<this.segment_list_.length;++s){const u=this.segment_list_[s];u.iso<e.v2?this.addQuad(i.p1,u.p1,u.p2,i.p2,n(i.n1),n(u.n1),n(u.n2),n(i.n2),i.iso):r?this.addQuad(i.p1,i.p2,u.p2,u.p1,i.n1,i.n2,u.n2,u.n1,i.iso):(r=!0,this.addPoly(e.p2,i.p1,i.p2,u.p2,u.p1,e.n2,i.n1,i.n2,u.n2,u.n1,i.iso)),i=u}i=c6(this.segment_list_),r?this.addTri(i.p1,i.p2,e.p3,i.n1,i.n2,e.n3,i.iso):this.addQuad(e.p2,i.p1,i.p2,e.p3,e.n2,i.n1,i.n2,e.n3,i.iso)}else{if(this.segment_list_.length===0){this.addTri(e.p1,e.p2,e.p3,e.n1,e.n2,e.n3,e.notIntersectedPolygonValue);return}let i=u6(this.segment_list_);i.iso<e.v2?this.addTri(e.p1,i.p1,i.p2,e.n1,i.n1,i.n2,e.notIntersectedPolygonValue):(r=!0,this.addQuad(e.p1,e.p2,i.p1,i.p2,e.n1,e.n2,i.n1,i.n2,e.notIntersectedPolygonValue));for(let s=1;s<this.segment_list_.length;++s){const u=this.segment_list_[s];u.iso<e.v2?this.addQuad(i.p1,u.p1,u.p2,i.p2,i.n1,u.n1,u.n2,i.n2,i.iso):r?this.addQuad(i.p1,u.p1,u.p2,i.p2,i.n1,u.n1,u.n2,i.n2,i.iso):(r=!0,this.addPoly(e.p2,u.p1,u.p2,i.p2,i.p1,e.n2,u.n1,u.n2,i.n2,i.n1,i.iso)),i=u}i=c6(this.segment_list_),r?this.addTri(i.p1,e.p3,i.p2,i.n1,e.n3,i.n2,i.iso):this.addQuad(e.p2,e.p3,i.p2,i.p1,e.n2,e.n3,i.n2,i.n1,i.iso)}}addTri(e,n,r,i,s,u,c){if(c<this.vmin_||c>this.vmax_)return;const l=this.getColorForValue(this.normalizeAttr(c)),g=this.position_.length/3;this.position_.push(...e,...n,...r),this.index_.push(g,g+1,g+2),this.colors_.push(...l,...l,...l),this.normals_.push(...i,...s,...u)}addQuad(e,n,r,i,s,u,c,l,g){if(g<this.vmin_||g>this.vmax_)return;const v=this.getColorForValue(this.normalizeAttr(g)),h=this.position_.length/3;this.position_.push(...e,...n,...r,...i),this.index_.push(h,h+1,h+2,h,h+2,h+3),this.colors_.push(...v,...v,...v,...v),this.normals_.push(...s,...u,...c,...l)}addPoly(e,n,r,i,s,u,c,l,g,v,h){if(h<this.vmin_||h>this.vmax_)return;const y=this.getColorForValue(this.normalizeAttr(h)),T=this.position_.length/3;this.position_.push(...e,...n,...r,...i,...s),this.index_.push(T,T+1,T+2,T,T+2,T+3,T,T+3,T+4),this.colors_.push(...y,...y,...y,...y,...y),this.normals_.push(...u,...c,...l,...g,...v)}}class lU{p1=[0,0,0];p2=[0,0,0];n1=[0,0,1];n2=[0,0,1];iso=0}class gU{reversed=!1;p1=[0,0,0];p2=[0,0,0];p3=[0,0,0];n1=[1,0,0];n2=[1,0,0];n3=[1,0,0];v1=0;v2=0;v3=0;notIntersectedPolygonValue=0}const u6=t=>t[0],c6=t=>t[t.length-1];function sa(t,e,n){const r=1-n;return[n*t[0]+r*e[0],n*t[1]+r*e[1],n*t[2]+r*e[2]]}function _u(t,e,n){return 1-Math.abs(n-t)/Math.abs(e-t)}function hU(t){return wc.getPresetByName?.(t)??null}function pU(){return hU("Rainbow")||{Name:"Rainbow",RGBPoints:[0,1,0,0,.2,1,.98,0,.4,0,1,.02,.6,0,.98,1,.8,.02,0,1,1,.96,0,1]}}function vU(t){const e=[];let n=0;const r=t;for(;n<r.length;){const i=r[n++];if(i===3){const s=r[n++],u=r[n++],c=r[n++];e.push(s,u,c)}else if(i>3){const s=r[n++];let u=r[n++];for(let c=2;c<i;c+=1){const l=r[n++];e.push(s,u,l),u=l}}else for(let s=0;s<i;s+=1)n++}return e}function yU(t,e){const n={classHierarchy:[],isoValues:[],scalarArrayName:void 0,scalarRange:null,preset:pU(),numberOfColors:256,smooth:!0};Object.assign(e,n,e),B.obj(t,e),B.algo(t,e,1,1),e.classHierarchy.push("vtkIsoContoursFilled"),B.setGet(t,e,["isoValues","scalarArrayName","preset","numberOfColors","smooth"]),B.setGetArray(t,e,["scalarRange"],2),t.requestData=(r,i)=>{const s=t.getInputData();if(!s){i[0]=zt.newInstance();return}const u=s.getPoints(),c=s.getPolys();if(!u||!c){i[0]=zt.newInstance();return}let l=null;const g=s.getPointData();if(e.scalarArrayName&&(l=g.getArrayByName(e.scalarArrayName)),l||(l=g.getScalars()),!l){i[0]=zt.newInstance();return}const v=u.getData()||new Float32Array(0),h=vU(c.getData()||new Uint32Array(0)),y=Array.from(l.getData()),T=new Wv(new pi(new Float32Array(v),3),new jv(new Uint32Array(h),1)),E={};e.scalarRange&&e.scalarRange.length===2&&(E.min=e.scalarRange[0],E.max=e.scalarRange[1]),e.preset&&(E.preset=e.preset),e.numberOfColors&&(E.nbColors=e.numberOfColors),e.smooth!==void 0&&(E.smooth=e.smooth);const S=cU(T,y,e.isoValues||[],E),x=zt.newInstance();if(!S||!S.position||!S.index){i[0]=x;return}const m=va.newInstance();m.setData(Float32Array.from(S.position),3),x.setPoints(m);const M=new Uint32Array(S.index.length+Math.floor(S.index.length/3));for(let R=0,w=0;R<S.index.length;R+=3)M[w++]=3,M[w++]=S.index[R],M[w++]=S.index[R+1],M[w++]=S.index[R+2];if(x.getPolys().setData(M),S.color&&S.color.length){const R=Fe.newInstance({name:"IsoBandColor",numberOfComponents:3,values:Float32Array.from(S.color)});x.getPointData().setScalars(R)}if(S.normal&&S.normal.length>0){const R=Fe.newInstance({name:"Normals",numberOfComponents:3,values:Float32Array.from(S.normal)});x.getPointData().setNormals(R),console.log("✅ Normals added to output:",S.normal.length/3,"vertices")}else console.warn("⚠️ No normals in result");i[0]=x}}function qv(t,e={}){yU(t,e)}const dU=B.newInstance(qv,"vtkIsoContoursFilled"),TU={newInstance:dU,extend:qv};class SU{topo_=[];lock_=!1;maxVertexIndex_=-1;_bounds=[];setup(e,n){this.lock_=!1,this.maxVertexIndex_=-1,this._bounds=n,this.topo_=[];for(let r=0;r<e.array.length;r+=3){let i=e.array[r],s=e.array[r+1],u=e.array[r+2];if(this.topo_.push({i,j:s,k:u}),i===s||i===u||s===u)throw new Error(`Error in topology while setting up iso-contouring in 'MarchingTriangles.' At index ${r}, got 3 indices (${i}, ${s}, ${u})`);this.maxVertexIndex_=Math.max(this.maxVertexIndex_,i,s,u)}return this.lock_=!0,!0}isolines(e,n){let r=[[]];if(this.lock_===!1||e.length<0)return r;this._bounds===void 0&&(this._bounds=this.computeMinMax(e));const i=new Map,s=[],u=[0,0,0],c=new Map(new Map);for(let l=0;l<this.topo_.length;++l){u[0]=this.topo_[l].i,u[1]=this.topo_[l].j,u[2]=this.topo_[l].k;let g,v,h;const y=e[u[0]],T=e[u[1]],E=e[u[2]];if(CU(y,T,E,this._bounds[0],this._bounds[1])===!1)continue;y>=n?g=1:g=0,T>=n?v=1:v=0,E>=n?h=1:h=0;const S=xU[g][v][h];if(S>0&&S<7){i.set(l,S),s[0]=Z0[S][0],s[1]=Z0[S][1];for(let x=0;x<2;++x){let m=s[x],M=(m+1)%3;m=u[m],M=u[M];let R=Math.min(m,M),w=Math.max(m,M);if(R in c)c.get(R).get(w).push(l);else{let D=new Map;D.set(w,[l]),c.set(R,D)}}}}do{if(i.size<=0)break;let l=[],g=[];const h=i.keys().next().value;let y=i.get(h);if(i.delete(i.keys().next().value),y<1||y>6)continue;u[0]=this.topo_[h].i,u[1]=this.topo_[h].j,u[2]=this.topo_[h].k,s[0]=Z0[y][0],s[1]=Z0[y][1];const T=[],E=[];for(let m=0;m<2;++m){let M=s[m],R=(M+1)%3;M=u[M],R=u[R],l.push(M),l.push(R),g.push((n-e[M])/(e[R]-e[M]));let w=Math.min(M,R),D=Math.max(M,R);m===0?(T[0]=w,T[1]=D):(E[0]=w,E[1]=D)}let S=0,x=0;do{let m=h;do{let M=[c.get(E[0]).get(E[1])];if(M.length===1)break;m=M[0]+M[1]-m;let R=i.get(m);if(!(R in i))break;y=R.second,i.delete(R),u[0]=this.topo_[m].i,u[1]=this.topo_[m].j,u[2]=this.topo_[m].k,s[0]=Z0[y][0],s[1]=Z0[y][1];for(let w=0;w<2;++w){let D=s[w],O=(D+1)%3;D=u[D],O=u[O];let _=Math.min(D,O),N=Math.max(D,O);if(_!==E[0]||N!==E[1]){l.push(D),l.push(O),g.push((n-e[D])/(e[O]-e[D])),E[0]=_,E[1]=N;break}}}while(!0);if(E[0]===T[0]&&E[1]===T[1]){l.push(l[0]),l.push(l[1]),g.push(g[0]),S=g.length;break}else x===0&&(E[0]=T[0],E[1]=T[1],S=g.length);++x}while(x<2);if(S===g.length)r[0].push(l),r[1]===void 0?r[1]=[g]:r[1].push(g);else{let m=[],M=[];for(let R=l.length-1;R>=2*S;--R)m.push(l[R]);for(let R=g.length-1;R>=S;--R)M.push(1-g[R]);for(let R=0;R<2*S;++R)m.push(l[R]);for(let R=0;R<S;++R)M.push(g[R]);r[0].push(m),r[1].push(M)}}while(!0);return r}computeMinMax(e){let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;for(const i of e)i<n&&(n=i),i>r&&(r=i);return[n,r]}}function CU(t,e,n,r,i){function s(u,c,l){return u>=c&&u<=l}return s(t,r,i)&&s(e,r,i)&&s(n,r,i)}const Z0=[[-1,-1],[1,2],[0,1],[2,0],[2,0],[0,1],[1,2],[-1,-1]],xU=[[[0,1],[2,3]],[[4,5],[6,7]]];function EU(t,e,n,{preset:r=Yv,nbColors:i=128}={}){if(t===void 0)throw new Error("mesh is undefined");if(t.getPositions()===void 0)throw new Error("mesh.positions is undefined");if(t.getIndices()===void 0)throw new Error("mesh.indices is undefined");if(e===void 0)throw new Error("attribute is undefined");const s=mU(e),u=s[0],c=s[1],l=Kv(r,i),g=n,v=new SU;v.setup(t.getIndices(),[u,c]);const h=t.getPositions(),y=[],T=[],E=S=>(S-u)/(c-u);for(let S=0;S<g.length;++S){const x=v.isolines(e,g[S]),m=E(g[S]),M=Xv(m,l);T.push(...M);for(let R=0;R<x[0].length;++R)for(let w=0;w<x[0][R].length-2;w+=2){const D=x[0][R][w],O=x[0][R][w+1],_=x[1][R][w/2],N=h.get(D),F=h.get(O),z=N[0],$=N[1],Y=N[2],A=F[0],K=F[1],ee=F[2];y.push(z+_*(A-z),$+_*(K-$),Y+_*(ee-Y))}}return{positions:y,color:T}}function mU(t){let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;const r=t.length;for(let i=0;i<r;++i){const s=t[i];s<e&&(e=s),s>n&&(n=s)}return[e,n]}function RU(t){return wc.getPresetByName?.(t)??null}function wU(){return RU("Rainbow")||{Name:"Rainbow",RGBPoints:[0,1,0,0,.2,1,.98,0,.4,0,1,.02,.6,0,.98,1,.8,.02,0,1,1,.96,0,1]}}function MU(t){const e=[];let n=0;const r=t;for(;n<r.length;){const i=r[n++];if(i===3){const s=r[n++],u=r[n++],c=r[n++];e.push(s,u,c)}else if(i>3){const s=r[n++];let u=r[n++];for(let c=2;c<i;c+=1){const l=r[n++];e.push(s,u,l),u=l}}else for(let s=0;s<i;s+=1)n++}return e}function OU(t,e){const n={classHierarchy:[],isoValues:[],scalarArrayName:void 0,preset:wU(),numberOfColors:128};Object.assign(e,n,e),B.obj(t,e),B.algo(t,e,1,1),e.classHierarchy.push("vtkIsoContoursLines"),B.setGet(t,e,["isoValues","scalarArrayName","preset","numberOfColors"]),t.requestData=(r,i)=>{const s=t.getInputData();if(!s){i[0]=zt.newInstance();return}const u=s.getPoints(),c=s.getPolys();if(!u||!c){i[0]=zt.newInstance();return}let l=null;const g=s.getPointData();if(e.scalarArrayName&&(l=g.getArrayByName(e.scalarArrayName)),l||(l=g.getScalars()),!l){i[0]=zt.newInstance();return}const v=u.getData()||new Float32Array(0),h=MU(c.getData()||new Uint32Array(0)),y=Array.from(l.getData()),T=new Wv(new pi(new Float32Array(v),3),new jv(new Uint32Array(h),1)),E={};e.preset&&(E.preset=e.preset),e.numberOfColors&&(E.nbColors=e.numberOfColors);const S=EU(T,y,e.isoValues||[],E),x=zt.newInstance();if(!S||!S.positions||S.positions.length===0){i[0]=x;return}const m=va.newInstance();m.setData(Float32Array.from(S.positions),3),x.setPoints(m);const M=S.positions.length/3,R=Math.floor(M/2),w=new Uint32Array(R*3);for(let D=0;D<R;D++)w[D*3]=2,w[D*3+1]=D*2,w[D*3+2]=D*2+1;if(x.getLines().setData(w),S.color&&S.color.length>0){const D=new Float32Array(M*3),O=S.color.length/3;if(O>0){const N=Math.floor(M/O);for(let F=0;F<O;F++){const z=S.color[F*3],$=S.color[F*3+1],Y=S.color[F*3+2],A=F*N,K=F===O-1?M:(F+1)*N;for(let ee=A;ee<K;ee++)D[ee*3]=z,D[ee*3+1]=$,D[ee*3+2]=Y}}const _=Fe.newInstance({name:"IsoLineColor",numberOfComponents:3,values:D});x.getPointData().setScalars(_)}i[0]=x}}function Qv(t,e={}){OU(t,e)}const DU=B.newInstance(Qv,"vtkIsoContoursLines"),LU={newInstance:DU,extend:Qv};function BU(t,e){e.classHierarchy.push("vtkPolyDataNormals"),t.vtkPolyDataNormalsExecute=(n,r,i)=>{if(!i)return null;const s=new Float32Array(i.length),u=new Float32Array(3*n);let c=0,l=0;const g=r.length,v=[0,0,0],h=[0,0,0];for(let y=0;y<g;y+=l+1)if(l=r[y],!(l<3)){for(let T=1;T<=3;++T)v[T-1]=3*r[y+T];if(mc.computeNormal(i.slice(v[0],v[0]+3),i.slice(v[1],v[1]+3),i.slice(v[2],v[2]+3),h),u[c++]=h[0],u[c++]=h[1],u[c++]=h[2],e.computePointNormals)for(let T=1;T<=l;++T){let E=3*r[y+T];s[E]+=h[0],s[++E]+=h[1],s[++E]+=h[2]}}if(e.computePointNormals){const y=[0,0,0];for(let T=0;T<i.length;)y[0]=s[T],y[1]=s[T+1],y[2]=s[T+2],Zl.normalize(y),s[T++]=y[0],s[T++]=y[1],s[T++]=y[2]}return[u,s]},t.requestData=(n,r)=>{if(!t.getNumberOfInputPorts())return;const s=n[0];if(!s)return;const u=r[0]?.initialize()||zt.newInstance();u.setPoints(s.getPoints()),u.setVerts(s.getVerts()),u.setLines(s.getLines()),u.setPolys(s.getPolys()),u.setStrips(s.getStrips()),u.getPointData().passData(s.getPointData()),u.getCellData().passData(s.getCellData()),u.getFieldData().passData(s.getFieldData());const[c,l]=t.vtkPolyDataNormalsExecute(s.getNumberOfPolys(),s.getPolys().getData(),s.getPoints().getData());if(e.computePointNormals){const g=Fe.newInstance({numberOfComponents:3,name:"Normals",values:l});u.getPointData().setNormals(g)}if(e.computeCellNormals){const g=Fe.newInstance({numberOfComponents:3,name:"Normals",values:c});u.getCellData().setNormals(g)}r[0]=u}}function VU(t){return{computeCellNormals:!1,computePointNormals:!0,...t}}function Zv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,VU(n)),B.obj(t,e),B.algo(t,e,1,1),B.setGet(t,e,["computeCellNormals","computePointNormals"]),BU(t,e)}const NU=B.newInstance(Zv,"vtkPolyDataNormals");var _U={newInstance:NU,extend:Zv};function UU(t,e={}){const{computeNormals:n=!1,shareAtomPoints:r=!0,noDataToNaN:i=!0}=e;let s=[],u=[],c=[],l=[],g=null;const v=new Map,h=new Map,y=new Map,T=[],E=[];let S=0,x=null,m=0,M=[];const R=t.replace(/\r/g,"").split(`
`),w=(A,K,ee)=>{const G=T.length/3|0;if(T.push(A,K,ee),x)for(let W=0;W<x.length;W++){const q=l[W]??1;for(let X=0;X<q;X++)x[W].push(NaN)}return G},D=A=>{if(x)return;if(s.length===0&&A&&A>0&&(s=Array.from({length:A},(ee,G)=>`prop_${G+1}`)),l.length===0)l=s.map(()=>1);else if(l.length!==s.length){const ee=s.length;l=Array.from({length:ee},(G,W)=>l[W]??1)}u.length!==s.length&&(u=s.map((ee,G)=>v.get(ee))),c.length!==s.length&&(c=s.map((ee,G)=>h.get(ee))),M=[],m=0;for(let ee=0;ee<s.length;ee++)M.push(m),m+=l[ee]??1;x=s.map(()=>[]);const K=T.length/3|0;if(K>0)for(let ee=0;ee<x.length;ee++){const G=l[ee]??1;x[ee].length=K*G,x[ee].fill(NaN)}},O=(A,K)=>{if(x||D(K.length),!x)return;if(K.length>s.length){const G=s.length;for(let q=G;q<K.length;q++)s.push(`prop_${q+1}`),l.push(1),u.push(void 0),c.push(void 0),x.push([]);const W=T.length/3|0;for(let q=G;q<s.length;q++)x[q].length=W,x[q].fill(NaN)}let ee=0;for(let G=0;G<s.length;G++){const W=l[G]??1;for(let q=0;q<W;q++){const X=K[ee++],Q=x[G],U=A*W+q;Q.length<=U&&(Q.length=U+1),Q[U]=X}}},_=(A,K)=>{const ee=/^PROPERTY_CLASS_HEADER\s+(\S+)/i.exec(A);if(!ee)return K;const G=ee[1];let W=K+1;for(;W<R.length;){const q=R[W].trim();if(q.includes("}"))break;const X=/^(unit)\s*:\s*(.+)$/i.exec(q);X&&v.set(G,X[2]);const Q=/^(kind|kind:)\s*:\s*(.+)$/i.exec(q);Q&&h.set(G,Q[2]),W++}return W};for(let A=0;A<R.length;A++){const ee=R[A].trim();if(!(!ee||ee.startsWith("#"))){if(ee==="END")break;if(/^PROPERTIES\b/i.test(ee)){const G=ee.split(/\s+/).slice(1);G.length&&(s=G.slice());continue}if(/^PROPERTY_CLASSES\b/i.test(ee)){const G=ee.split(/\s+/).slice(1);!s.length&&G.length&&(s=G.slice());continue}if(/^NO_DATA_VALUES?\b/i.test(ee)){const G=ee.split(/\s+/).slice(1).map(parseFloat).filter(Number.isFinite);G.length&&(g=G);continue}if(/^ESIZES\b/i.test(ee)){const G=ee.split(/\s+/).slice(1).map(W=>parseInt(W,10));G.length&&(l=G.map(W=>Number.isFinite(W)&&W>0?W:1));continue}if(/^PROPERTY_CLASS_HEADER\b/i.test(ee)){A=_(ee,A);continue}if(/^(VRTX|PVRTX)\b/i.test(ee)){const G=ee.split(/\s+/);if(G.length>=5){const W=parseInt(G[1],10),q=parseFloat(G[2]),X=parseFloat(G[3]),Q=parseFloat(G[4]);if([W,q,X,Q].every(Number.isFinite)){const U=w(q,X,Q);if(y.set(W,U),G.length>5){const H=G.slice(5).map(parseFloat).map(Z=>Number.isFinite(Z)?Z:NaN);O(U,H)}else s.length&&!x&&D()}}continue}if(/^ATOM\b/i.test(ee)){const G=ee.split(/\s+/);if(G.length>=3){const W=parseInt(G[1],10),q=parseInt(G[2],10),X=y.get(q);if(X!==void 0)if(r)y.set(W,X);else{const Q=T[X*3+0],U=T[X*3+1],H=T[X*3+2],Z=w(Q,U,H);if(y.set(W,Z),x)for(let se=0;se<x.length;se++){const oe=l[se]??1;for(let ue=0;ue<oe;ue++){const ge=x[se][X*oe+ue];x[se][Z*oe+ue]=ge}}}}continue}if(/^TRGL\b/i.test(ee)){const G=ee.split(/\s+/);if(G.length>=4){const W=y.get(parseInt(G[1],10)),q=y.get(parseInt(G[2],10)),X=y.get(parseInt(G[3],10));W!==void 0&&q!==void 0&&X!==void 0&&W!==q&&q!==X&&X!==W?E.push(W,q,X):S++}continue}}}if(T.length===0)throw new Error("TSurf parse: no vertices found (need VRTX/PVRTX).");if(E.length===0)throw new Error("TSurf parse: no triangles found (need TRGL).");if(s.length&&!x&&D(),i&&x&&g){const A=g.length===s.length?g:s.map(()=>g[0]);for(let K=0;K<x.length;K++){const ee=A[K];if(Number.isFinite(ee)){const G=x[K];for(let W=0;W<G.length;W++)G[W]===ee&&(G[W]=NaN)}}}const N=zt.newInstance(),F=va.newInstance();F.setData(Float32Array.from(T),3),N.setPoints(F);const z=E.length/3,$=new Uint32Array(z*4);for(let A=0;A<z;A++){const K=A*4;$[K]=3,$[K+1]=E[A*3+0],$[K+2]=E[A*3+1],$[K+3]=E[A*3+2]}if(N.getPolys().setData($),x&&s.length)for(let A=0;A<s.length;A++){const K=s[A],ee=l[A]??1,G=Float32Array.from(x[A]),W=Fe.newInstance({name:K,numberOfComponents:ee,values:G});N.getPointData().addArray(W),A===0&&ee===1&&N.getPointData().setScalars(W)}if(n){const A=_U.newInstance({splitting:!0,featureAngle:45,consistency:!0,nonManifoldTraversal:!0,computePointNormals:!0,computeCellNormals:!1});A.setInputData(N),N.shallowCopy(A.getOutputData())}const Y=s.map((A,K)=>({name:A,unit:u[K],kind:c[K],size:l[K]??1,noData:g&&(g.length===s.length?g[K]:g[0])}));return{polyData:N,properties:Y,stats:{nVertices:F.getNumberOfPoints(),nTriangles:z,skippedTriangles:S}}}class GU{async loadFromFile(e){const n=await e.text();return this.loadFromText(n)}async load(e){return this.loadFromFile(e)}async loadFromText(e){try{const n=UU(e,{computeNormals:!0}),r=n?.polyData??n?.dataset??n?.polydata;if(!r)throw new Error("Parser did not return a vtkPolyData.");const i=(n?.properties??n?.arrays??[]).map(s=>({name:s.name??s.arrayName??String(s.key??""),size:s.size??s.numberOfComponents??1,location:s.location??s.association,range:s.range??s.dataRange})).filter(s=>(s.size??1)===1&&!!s.name);return{polyData:r,properties:i}}catch(n){const r=n?.message||"Failed to parse TSurf";throw new Error(`ModelLoader.loadFromText: ${r}`)}}parse(e){return this.loadFromText(e)}}function bU(){const t=wc.rgbPresetNames;return Array.isArray(t)&&t.length?t:["Viridis (matplotlib)","Plasma (matplotlib)","Inferno (matplotlib)","Magma (matplotlib)","Turbo"]}function u2(t){return wc.getPresetByName?.(t)||null}function FU(t,e,n){const r=u2(e);r&&t.applyColorMap(r),n&&(t.setMappingRange(n[0],n[1]),t.updateRange())}function _l(t){const e=t.getData?.()??[];let n=1/0,r=-1/0;for(const i of e)Number.isNaN(i)||(i<n&&(n=i),i>r&&(r=i));return[n,r]}function zU(){const t=be.useRef(null),e=be.useRef(null),n=be.useRef(null),[r]=be.useState(()=>eU.newInstance()),[i]=be.useState(()=>wr.newInstance()),[s]=be.useState(()=>Rr.newInstance()),[u]=be.useState(()=>TU.newInstance?.({})??null),[c]=be.useState(()=>wr.newInstance()),[l]=be.useState(()=>Rr.newInstance()),[g]=be.useState(()=>LU.newInstance?.({})??null),[v]=be.useState(()=>wr.newInstance()),[h]=be.useState(()=>Rr.newInstance()),[y,T]=be.useState(!1),[E,S]=be.useState(13),[x,m]=be.useState(!1),[M,R]=be.useState(10),[w,D]=be.useState(!0),[O,_]=be.useState(null),[N,F]=be.useState([]),[z,$]=be.useState(""),[Y,A]=be.useState("rainbow"),K=be.useRef(null);K.current||(K.current=new GU),be.useEffect(()=>{if(!t.current)return;const Q=t.current;if(Q.clientWidth===0||Q.clientHeight===0){console.warn("Container has no dimensions, delaying VTK initialization");return}const U=j_.newInstance({container:Q,containerStyle:{position:"relative",width:"100%",height:"100%"}}),H=U.getRenderer(),Z=U.getRenderWindow(),se=Z.getInteractor();if(se&&Q&&(se.setView(U.getApiSpecificRenderWindow()),se.initialize()),H.setBackground(.5,.5,.5),i.setLookupTable(r),i.setUseLookupTableScalarRange(!0),i.setScalarVisibility(!1),s.setMapper(i),H.addActor(s),u){c.setInputConnection(u.getOutputPort()),c.setColorModeToDirectScalars(),c.setColorByArrayName("IsoBandColor"),c.setScalarVisibility(!0),l.setMapper(c),l.setVisibility(!1);const ge=l.getProperty();ge.setInterpolationToPhong(),ge.setLighting(!0),ge.setAmbient(.2),ge.setDiffuse(.8),ge.setSpecular(.1),ge.setSpecularPower(20),H.addActor(l)}g&&(v.setInputConnection(g.getOutputPort()),v.setColorModeToDirectScalars(),v.setColorByArrayName("IsoLineColor"),v.setScalarVisibility(!0),v.setResolveCoincidentTopologyToPolygonOffset(),v.setResolveCoincidentTopologyPolygonOffsetParameters(2,1),h.setMapper(v),h.getProperty().setLineWidth(1),h.setVisibility(!1),H.addActor(h)),e.current=H,n.current=Z;const oe=()=>{U&&U.resize&&U.resize()},ue=setTimeout(()=>{oe()},100);return window.addEventListener("resize",oe),()=>{clearTimeout(ue),window.removeEventListener("resize",oe),U&&U.delete&&U.delete()}},[]),be.useEffect(()=>{const Q="/vtk-gocad-loader/models/mnt-tet-fault.ts";async function U(){try{const H=await fetch(Q);if(!H.ok)throw new Error(`Failed to load ${Q}`);const Z=await H.text(),{polyData:se,properties:oe}=await K.current.loadFromText(Z);_(se),F(oe),e.current?.resetCamera(),n.current?.render(),console.log(`Loaded default model: ${Q}`)}catch(H){console.error("Error loading default model:",H)}}U()},[]),be.useEffect(()=>{y&&R(E)},[y,E]),be.useEffect(()=>{if(!O||!u)return;const Q=z?O.getPointData().getArrayByName(z):null;if(!y||!Q){l.setVisibility(!1),x||s.setVisibility(!0),n.current?.render();return}const[U,H]=_l(Q),Z=G(U,H,E),se=u2(Y);u.setScalarArrayName(z),u.setScalarRange([U,H]),u.setIsoValues(Z),u.setSmooth(w),u.modified(),se&&u.setPreset(se),u.setNumberOfColors(256),s.setVisibility(!1),l.setVisibility(!0),n.current?.render()},[y,E,z,Y,O,x,w]),be.useEffect(()=>{if(!O||!g)return;const Q=z?O.getPointData().getArrayByName(z):null;if(!x||!Q){h.setVisibility(!1),y||s.setVisibility(!0),n.current?.render();return}const[U,H]=_l(Q),Z=G(U,H,M),oe=u2(y?"Grayscale":Y);g.setScalarArrayName(z),g.setIsoValues(Z),oe&&g.setPreset(oe),g.setNumberOfColors(256),y?(v.setScalarVisibility(!1),h.getProperty().setColor(0,0,0)):v.setScalarVisibility(!0),s.setVisibility(!1),h.setVisibility(!0),n.current?.render()},[x,M,z,Y,O,y]),be.useEffect(()=>{if(!O)return;const U=z?O.getPointData?.().getArrayByName?.(z):null;if(!z||!U){i.setScalarVisibility(!1),s.getProperty().setColor(.85,.85,.85);const se=s.getProperty();se.setLighting(!0),se.setAmbient(.25),se.setDiffuse(.9),se.setSpecular(0),n.current?.render();return}const[H,Z]=_l(U);if(!Number.isFinite(H)||!Number.isFinite(Z)||H===Z){i.setScalarVisibility(!1),s.getProperty().setColor(.85,.85,.85),n.current?.render();return}FU(r,Y,[H,Z]),i.setColorByArrayName(z),i.setScalarRange(H,Z),i.setScalarVisibility(!0),n.current?.render()},[z,Y,O]);async function ee(Q){const U=K.current;let H=null;if(typeof U.loadFromFile=="function")H=await U.loadFromFile(Q);else if(typeof U.load=="function")H=await U.load(Q);else{const Z=await Q.text();if(typeof U.loadFromText=="function")H=await U.loadFromText(Z);else if(typeof U.parse=="function")H=await U.parse(Z);else throw new Error("ModelLoader lacks loadFromFile/load/loadFromText/parse")}return H}function G(Q,U,H){const Z=[];for(let se=1;se<H;se++)Z.push(Q+se*(U-Q)/H);return Z}async function W(Q){const U=Q.target.files?.[0];if(U)try{const{polyData:H,properties:Z}=await ee(U);_(H),F((Z||[]).filter(se=>(se.size??1)===1)),i.setInputData(H),u&&u.setInputData(H),g&&g.setInputData(H),e.current?.resetCamera(),n.current?.render(),$(Z&&Z[0]?.name||"")}catch(H){alert(H.message||"Failed to load model")}}const q=be.useMemo(()=>bU().map(Q=>$e.jsx("option",{value:Q,children:Q},Q)),[]),X=be.useMemo(()=>[$e.jsx("option",{value:"",children:"— none —"},"-none-"),...N.map(Q=>$e.jsx("option",{value:Q.name,children:Q.name},Q.name))],[N]);return $e.jsxs("div",{style:{height:"100vh",position:"relative",overflow:"hidden"},children:[$e.jsx("div",{ref:t,style:{position:"absolute",inset:0}}),$e.jsxs("div",{style:{position:"absolute",top:12,left:12,zIndex:10,background:"rgba(255,255,255,0.5)",backdropFilter:"blur(6px)",padding:"10px 12px",borderRadius:10,boxShadow:"0 2px 8px rgba(0,0,0,.12)",display:"flex",gap:10,alignItems:"center",flexWrap:"wrap"},children:[$e.jsxs("label",{className:"field",children:[$e.jsx("span",{className:"label",children:"Load file"}),$e.jsx("input",{className:"select select--small",type:"file",accept:".tsurf,.ts,.txt",onChange:W})]}),$e.jsxs("label",{className:"field",children:[$e.jsx("span",{className:"label",children:"Property"}),$e.jsx("select",{className:"select",value:z,onChange:Q=>$(Q.target.value),children:X})]}),$e.jsxs("label",{className:"field",children:[$e.jsx("span",{className:"label",children:"Color map"}),$e.jsx("select",{className:"select select--small",value:Y,onChange:Q=>A(Q.target.value),children:q})]}),$e.jsx("div",{style:{width:1,height:24,background:"#ddd"}}),$e.jsxs("label",{className:"field",children:[$e.jsx("input",{className:"checkbox",type:"checkbox",checked:x,onChange:Q=>m(Q.target.checked)}),$e.jsx("span",{style:{fontSize:12,color:"#333"},children:"Contour lines"})]}),$e.jsxs("label",{className:"field",children:[$e.jsx("input",{className:"checkbox",type:"checkbox",checked:y,onChange:Q=>T(Q.target.checked)}),$e.jsx("span",{className:"label",children:"Filled iso-bands"})]}),y&&$e.jsxs("label",{className:"field",children:[$e.jsx("span",{className:"label",children:"Bands"}),$e.jsx("input",{className:"checkbox select--small",style:{width:40,textAlign:"right"},type:"number",min:2,max:32,value:E,onChange:Q=>S(parseInt(Q.target.value))})]}),y&&$e.jsxs("label",{className:"field",children:[$e.jsx("input",{className:"checkbox",type:"checkbox",checked:w,onChange:Q=>D(Q.target.checked)}),"Smooth shading"]})]})]})}NT.createRoot(document.getElementById("root")).render($e.jsx(RT.StrictMode,{children:$e.jsx(zU,{})}));
